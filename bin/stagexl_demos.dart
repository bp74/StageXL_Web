import "dart:html" as hB;import "dart:json" as yI;import "dart:async" as LB;import "dart:math" as LC;import "dart:web_audio" as iE;class zI{static const  AJ="Chrome";static const  BJ="Firefox";static const  CJ="Internet Explorer";static const  DJ="Safari";final  LI;final  minimumVersion;const zI(this.LI,[this.minimumVersion]);}class EJ{final  name;const EJ(this.name);}class LJ extends TB{final  text='Filet mignon leberkas pig pork chop biltong, short loin strip steak turkey brisket ' 'venison. Pastrami venison pancetta, leberkas pork chop chicken prosciutto beef ribs ' 'bresaola kielbasa swine biltong capicola. Hamburger beef ribs ball tip drumstick salami ' 'pig. Capicola pork loin shank, salami chicken hamburger tail. Sirloin spare ribs ' 'ground round cow strip steak prosciutto swine bacon corned beef.';LJ(){var j=new mE();j.MC=new SD('Helvetica,Arial',14,ZB.oH,bold:true,italic:true);j.text=text;j.x=10;j.y=10;j.width=920;j.height=20;IB(j);var h=new mE();h.MC=new SD('Helvetica,Arial',16,ZB.hF);h.text=text;h.x=10;h.y=50;h.width=200;h.height=300;h.wordWrap=true;IB(h);var g=new mE();g.MC=new SD('Helvetica,Arial',16,ZB.HH,align:ZC.HF);g.text=text;g.x=300;g.y=50;g.width=200;g.height=300;g.wordWrap=true;IB(g);var i=new mE();i.MC=new SD('Caesar Dressing',30,ZB.UD,align:ZC.AE);i.text=text;i.x=590;i.y=50;i.width=340;i.height=300;i.wordWrap=true;IB(i);}}class KJ extends TB{KJ(){var g=new mE();g.MC=new SD('Helvetica,Arial',14,ZB.bH,bold:true);g.text='ToDo: show a cool demo ...';g.x=10;g.y=10;g.width=920;g.height=20;IB(g);}}class FJ extends jE implements oB{var nD,oD;FJ( g,this.nD,this.oD):super(g){this.HC=g.width/2;this.QC=g.height/2;} zB( i){var g=x+nD*i;var h=y+oD*i;if(g>910||g<30)nD=-nD;else x=g;if(h>470||h<30)oD=-oD;else y=h;return true;}}class JJ extends TB{var DK=new LC.Random();var GK;var HK;JJ(){GK=SB.pF('walkTextureAtlas');HK=GK.bI('walk');JK();}JK(){var h=DK.nextDouble();var g=new XG(HK,30);g.x=-128;g.y=20.0+180.0*h;g.SC=g.TC=0.5+0.5*h;g.play();IB(g);vI((k,j)=>(k.y-j.y).toInt());var i=new YD(g,5.0+(1.0-h)*5.0,FC.nC);i.pC.x.dC(940.0);i.onComplete=(){WB.remove(g);FG(g);};WB.add(g);WB.add(i);WB.RI(JK,0.2);}}class GJ extends TB{final  DK=new LC.Random();GJ(){var g=new xC();g.HC=470;g.QC=250;g.x=470;g.y=250;IB(g);for(int h=0;h<150;h++ ){var AB=1+DK.nextInt(3);var q=SB.NC('flower${AB}');var i=new jE(q);i.HC=64;i.QC=64;i.x=64+DK.nextInt(940-128);i.y=64+DK.nextInt(500-128);g.IB(i);var o=new YD(i,600,FC.nC);o.pC.RC.dC(LC.PI*60.0);WB.add(o);}var k=new List<GB>();for(int h=0;h<6;h++ ){var n=(h*60)*LC.PI/180;var m=(h*60+30)*LC.PI/180;k.add(new GB(470+200*LC.cos(n),250+200*LC.sin(n)));k.add(new GB(470+100*LC.cos(m),250+100*LC.sin(m)));}var t=new kC.tJ(100,100,740,300);var w=new kC.xJ(470,250,200);var s=new kC.yJ(k);hB.query('#mask-none').onClick.listen((j)=>g.mask=null);hB.query('#mask-rectangle').onClick.listen((j)=>g.mask=t);hB.query('#mask-circle').onClick.listen((j)=>g.mask=w);hB.query('#mask-custom').onClick.listen((j)=>g.mask=s);hB.query('#mask-spin').onClick.listen((j){var l=new YD(g,2.0,FC.FI);l.pC.RC.dC(LC.PI*4.0);l.onComplete=()=>g.RC=0.0;WB.add(l);});}}class HJ extends TB{final  EK=[{'name':'DropShadowFilter (black)','filter':new PJ(10,LC.PI/4,ZB.UD,0.8,8,8)},{'name':'GlowFilter (red)','filter':new QJ(ZB.hF,1.0,20,20)},{'name':'ColorMatrixFilter (grayscale)','filter':new RJ.wJ()},{'name':'ColorMatrixFilter (invert)','filter':new RJ.AK()},{'name':'BlurFilter (radius 1)','filter':new SJ(1,1)},{'name':'BlurFilter (radius 5)','filter':new SJ(5,5)},{'name':'BlurFilter (radius 20)','filter':new SJ(20,20)},{'name':'AlphaMaskFilter','filter':new WJ(SB.NC("sun"))}];HJ(){var l=SB.NC('king');var w=new CB(230,245,true,0xFFF0F0F0);var q=new List<jE>();for(int h=0;h<EK.length;h++ ){var s=EK[h]['filter'] as YB;var AB=EK[h]['name'] as String;var m=235*(h%4);var n=250*(h~/4);var k=s.sC();k.dI(l.width,l.height);var o=new jE(w);o.x=m;o.y=n;IB(o);var i=new jE(l);i.x=m+40;i.y=n+45;i.XI=[s];i.II(k.left,k.top,k.width,k.height);IB(i);q.add(i);var g=new mE();g.MC=new SD('Helvetica Neue, Helvetica, Arial',14,ZB.UD);g.x=m+5;g.y=n+5;g.width=200;g.text=AB;IB(g);}var t=EK[7]["filter"];var FB=q[7];var j=t.matrix;WB.transition(0.0,LC.PI*2*100,600.0,FC.nC,(HB){j.qF();j.translate(-64,-64);j.scale(1.0,1.5);j.rotate(HB);j.translate(l.width/2-15,l.height/2-20);FB.EG();});}}class IJ extends TB{final  FK=['C4','A3','A3','C4','D4','G3','G3','A3','A3#','F4','F4','E4','C4','D4','C4','A3#','A3','C4','D4','D4','D4','G4','F4','E4','F4','D4','C4','F3','G3','A3','D4','C4','C4','A3#','A3','E3','F3'];final  IK=['Hey ','Jude, ',"don't ",'make ','it ','bad.<br>','Take ','a ','sad ','song ','and ','make ','it ','better.<br>','','','','Remember ','','','to ','let ','her ','into ','','your ','heart.<br>','Than ','you ','can ','start ','','to ','make ','things ','better.','',' '];IJ(){var h=new jE(SB.NC('Background'));IB(h);var g=new LG(FK,IK);g.x=120;g.y=30;IB(g);hB.query('#startOver').onClick.listen((i)=>g.tI());}}var DC;var pD;var WB;var SB; VC(){CB.UF.webp=true;var g=hB.query("#stage");if(g!=null){DC=new yB('stage',g);pD=new wD();pD.HI(DC);WB=pD.SE;SB=new tD();}}class MJ extends TB{MJ(){KK(500);hB.query('#minus100').onClick.listen((g)=>LK(100));hB.query('#plus100').onClick.listen((g)=>KK(100));this.jI.listen(MK);}var OK=null;MK( g){if(OK==null){OK=1.00/g.zF;}else{OK=0.05/g.zF+0.95*OK;}hB.query('#fpsMeter').innerHtml='fps: ${OK.round()}';}KK( l){var g=new LC.Random();var i=SB.pF('flags');var j=i.YI;while ( --l>=0){var k=j[g.nextInt(j.length)];var m=i.NC(k);var h=new FJ(m,g.nextInt(200)-100,g.nextInt(200)-100);h.x=30+g.nextInt(940-60);h.y=30+g.nextInt(500-60);IB(h);WB.add(h);}hB.query('#flagCounter').innerHtml='Flags: ${TE}';}LK( h){while ( --h>=0&&TE>0){var g=cI(0);g.GG();WB.remove(g);}hB.query('#flagCounter').innerHtml='Flags: ${TE}';}} JG(){VC();SB..kB('king','images/king.png')..kB('sun','images/Sun.png')..load().then((NK)=>DC.IB(new HJ()));} KG(){VC();SB..kB('flower1','images/Flower1.png')..kB('flower2','images/Flower2.png')..kB('flower3','images/Flower3.png')..load().then((NK)=>DC.IB(new GJ()));}class LG extends TB{final  uC;final  tC;final  PK=['C3','C3#','D3','D3#','E3','F3','F3#','G3','G3#','A3','A3#','B3','C4','C4#','D4','D4#','E4','F4','F4#','G4','G4#','A4','A4#','B4','C5'];var QK=new Map<String,RG>();var RK;var SK=0;LG(this.uC,this.tC){for(int h=0,i=0;h<PK.length;h++ ){var k=SB.oF('Note${h+1}');var j=PK[h];var g=QK[j]=new RG(this,j,k);if(j.endsWith('#')){g.x=i-16;g.y=35;IB(g);}else{g.x=i;g.y=35;iF(g,0);i=i+47;}}RK=new jE(SB.NC('Finger'));RK.HC=20;IB(RK);TK();}OI( g){if(SK<uC.length&&uC[SK]==g){if(SK==uC.length-1)SB.oF('Cheer').play();SK++ ;TK();}}tI(){SK=0;RK.alpha=1;TK();}TK(){var h=hB.query('#lyrics');var m=-1;h.innerHtml='';for(int g=0,j=0;g<tC.length;g++ ){if(tC[g]!='')j=g;if(g==this.SK)m=j;}for(int g=0;g<tC.length;g++ ){if(g==m){h.appendHtml('<span id="word">${tC[g]}</span>');}else{h.appendHtml(tC[g]);}}if(SK<uC.length){var k=uC[SK];if(QK.containsKey(k)){var i=QK[k];WB.rI(RK);RK.y=0;var n=new YD(this.RK,0.4,FC.mH);var l=new YD(this.RK,0.4,FC.TH);n.pC.x.dC(i.x+i.width/2);l.pC.y.dC(-10);WB.add(n);WB.add(l);}}else{var o=new YD(RK,0.4,FC.nC);o.pC.alpha.dC(0);WB.add(o);}}} MG(){VC();SB..jF('walkTextureAtlas','images/walk.json',RD.CE)..load().then((NK)=>DC.IB(new JJ()));} NG(){VC();SB..jF('flags','images/flags.json',RD.CE)..load().then((NK)=>DC.IB(new MJ()));} OG(){VC();SB..kB('KeyBlack','images/piano/KeyBlack.png')..kB('KeyWhite0','images/piano/KeyWhite0.png')..kB('KeyWhite1','images/piano/KeyWhite1.png')..kB('KeyWhite2','images/piano/KeyWhite2.png')..kB('KeyWhite3','images/piano/KeyWhite3.png')..kB('Finger','images/piano/Finger.png')..kB('Background','images/piano/Background.jpg')..KB('Cheer','sounds/Cheer.mp3')..KB('Note1','sounds/piano/Note1.mp3')..KB('Note2','sounds/piano/Note2.mp3')..KB('Note3','sounds/piano/Note3.mp3')..KB('Note4','sounds/piano/Note4.mp3')..KB('Note5','sounds/piano/Note5.mp3')..KB('Note6','sounds/piano/Note6.mp3')..KB('Note7','sounds/piano/Note7.mp3')..KB('Note8','sounds/piano/Note8.mp3')..KB('Note9','sounds/piano/Note9.mp3')..KB('Note10','sounds/piano/Note10.mp3')..KB('Note11','sounds/piano/Note11.mp3')..KB('Note12','sounds/piano/Note12.mp3')..KB('Note13','sounds/piano/Note13.mp3')..KB('Note14','sounds/piano/Note14.mp3')..KB('Note15','sounds/piano/Note15.mp3')..KB('Note16','sounds/piano/Note16.mp3')..KB('Note17','sounds/piano/Note17.mp3')..KB('Note18','sounds/piano/Note18.mp3')..KB('Note19','sounds/piano/Note19.mp3')..KB('Note20','sounds/piano/Note20.mp3')..KB('Note21','sounds/piano/Note21.mp3')..KB('Note22','sounds/piano/Note22.mp3')..KB('Note23','sounds/piano/Note23.mp3')..KB('Note24','sounds/piano/Note24.mp3')..KB('Note25','sounds/piano/Note25.mp3')..load().then((NK)=>DC.IB(new IJ()));} PG(){VC();DC.IB(new LJ());} QG(){VC();DC.IB(new KJ());}class RG extends xC{final  AG;final  eB;final  IG;RG(this.AG,this.eB,this.IG){var h;if(eB.endsWith('#')){h='KeyBlack';}else if(eB.startsWith('C5')){h='KeyWhite0';}else if(eB.startsWith('C')||eB.startsWith('F')){h='KeyWhite1';}else if(eB.startsWith('D')||eB.startsWith('G')||eB.startsWith('A')){h='KeyWhite2';}else if(eB.startsWith('E')||eB.startsWith('B')){h='KeyWhite3';}var i=SB.NC(h);var l=new jE(i);this.IB(l);var j=eB.endsWith('#')?ZB.GI:ZB.UD;var k=new SD('Helvetica,Arial',10,j,align:ZC.AE);var g=new mE();g.MC=k;g.text=eB;g.width=i.width;g.height=20;g.wF=false;g.y=i.height-20;IB(g);this.ZE=true;this.onMouseDown.listen(UK);this.onMouseOver.listen(UK);this.onMouseUp.listen(VK);this.onMouseOut.listen(VK);}UK( g){if(g.GC){this.IG.play();this.alpha=0.7;this.AG.OI(this.eB);}}VK( g){this.alpha=1.0;}} main(){var j=hB.window.location.pathname;var i=new RegExp(r"([A-Za-z0-9-_]+)\.html",multiLine:false,caseSensitive:false);var g=i.firstMatch(j);if(g!=null&&g.groupCount==1){var h=g.group(1);print("current page: ${h}");switch (h){case 'filter':JG();break;case 'masking':KG();break;case 'flipbook':MG();break;case 'performance':NG();break;case 'sound':OG();break;case 'text':PG();break;case 'tweener':QG();break;}}}const NJ=const OJ();class OJ{const OJ();}class hC<zC extends EB> extends LB.Stream<zC>{final  IL;final  xK;final  eL;var AM=[] ;hC(this.IL,this.xK,this.eL); get isBroadcast=>true; asBroadcastStream()=>this; get SN=>AM.length>0; listen( i( event),{ onError(error), onDone(), cancelOnError: false}){var h=new sE<zC>(this,i);AM.add(h);if(eL==false){var g=this;switch (xK){case EB.EE:YF.ME(g);break;case EB.JF:aF.ME(g);break;case EB.SF:cF.ME(g);break;}}return h;}NI( j){if(j.tL)return;var i=[] ;for(var g=0;g<AM.length;g++ ){var h=AM[g];if(identical(h,j)){h.tL=true;}else{i.add(h);}}AM=i;}dispatchEvent( j){var k=AM;var i=AM.length;for(var g=0;g<i;g++ ){var h=k[g];if(h.tL==false){h.ZM(j);}}}}class EB{static const  dG="added";static const  kG="addedToStage";static const  EE="enterFrame";static const  JF="exitFrame";static const  yG="removed";static const  BH="removedFromStage";static const  FH="resize";static const  SF="render";static const  ZH="complete";static const  WD="progress";var qL;var KO;var LO;var IL;var NO;var OO;var RO;EB( g,[ h=false]){JO(g,h);} JO( g,[ h=false]){qL=g;KO=h;LO=wB.bC;IL=null;NO=null;OO=false;RO=false;} get jD=>OO; get type=>qL; get bubbles=>KO; get bD=>true; get target=>IL;}class PD extends EB{PD( g):super(g,false); get bD=>false;}class UG{static const  HE="none";}class jC{static const  bG="dynamic";static const  AD="input";}class BB extends EB{static const  uE="click";static const  jG="doubleClick";static const  AF="mouseDown";static const  FF="mouseUp";static const  KF="mouseMove";static const  MF="mouseOut";static const  QF="mouseOver";static const  RF="mouseWheel";static const  WF="middleClick";static const  LH="middleMouseDown";static const  PH="middleMouseUp";static const  XF="rightClick";static const  VH="rightMouseDown";static const  XH="rightMouseUp";var yN,zN;var BO,CO;var PO;var XM;var yM;var fM;var kM;var WO;var XO;var ZO;BB( g,[ h=false]):super(g,h){JO(g,h);} JO( g,[ h=false]){super.JO(g,h);yN=zN=0;BO=CO=0;PO=false;XM=false;yM=false;fM=false;kM=false;WO=0;XO=0;ZO=0;}set bO( g){yN=g.x;zN=g.y;}set cO( g){BO=g.x;CO=g.y;} get rF=>yN; get sF=>zN; get GC=>PO; get altKey=>XM; get ctrlKey=>fM; get shiftKey=>kM; get HD=>WO; get deltaX=>XO; get deltaY=>ZO;}class EC extends EB{static const  vE="keyDown";static const  xE="keyUp";var XM=false;var fM=false;var kM=false;var rM=false;var yM=false;var GN=0;var LN=0;var PN=0;EC( g,[ h=false]):super(g,h); get altKey=>XM; get ctrlKey=>fM; get shiftKey=>kM; get charCode=>GN; get keyCode=>LN; get keyLocation=>PN;}class yC extends EB{static const  wE="textInput";var bK="";yC( g,[ h=false]):super(g,h); get text=>bK;}class MB extends EB{static const  tE="touchBegin";static const  yE="touchEnd";static const  BF="touchCancel";static const  IF="touchMove";static const  xG="touchOver";static const  CH="touchOut";var tN;var vN;var yN,zN;var BO,CO;var XM;var yM;var fM;var kM;var FO;var GO;var HO;MB( g,[ h=false]):super(g,h){JO(g,h);} JO( g,[ h=false]){super.JO(g,h);tN=0;vN=false;yN=zN=0;BO=CO=0;XM=false;yM=false;fM=false;kM=false;FO=1.00;GO=0;HO=0;}set bO( g){yN=g.x;zN=g.y;}set cO( g){BO=g.x;CO=g.y;} get lD=>tN; get rF=>yN; get sF=>zN; get altKey=>XM; get ctrlKey=>fM; get shiftKey=>kM;}abstract class YB{ clone(); apply( h, i, j, g); sC();}class SJ extends YB{var blurX;var blurY;SJ([this.blurX=4,this.blurY=4]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>64||blurY>64)throw new ArgumentError("Error #9004: The maximum blur size is 64.");} clone(){return new SJ(blurX,blurY);} apply( KC, t, AB, qB){var OB=KC.getImageData(t.x,t.y,t.width,t.height,AB.IC);var rB=OB.data;var j=AB.IC;var HB=OB.width;var gB=OB.height;var fB=(blurX*blurX*j*j).floor();var sB=(blurY*blurY*j*j).floor();var BC=(1<<22)~/fB;var eC=(1<<22)~/sB;var m=(blurX*j).floor();var tB=(blurX*j*2).floor();var FB=(blurY*j).floor();var uB=(blurY*j*2).floor();var NB=HB+tB;var QB=gB+uB;var CC=HB*4;var PB=NB*4;var RB=AB.createImageData(NB,QB);var w=RB.data;var k=new List<int>(1024);qH(rB);for(int i=0;i<4;i++ ){for(int h=0;h<HB;h++ ){var l=0,n=sB>>1;var o=h*4+i;var q=(h+m)*4+i;for(int g=0;g<QB;g++ ){w[q]=(n*eC)>>22;q+= PB;if(g>=uB){l-= 2*k[g&1023]-k[(g-FB)&1023];}else if(g>=FB){l-= 2*k[g&1023];}var s=(g<gB)?rB[o]:0;k[(g+FB)&1023]=s;n+= l+= s;o+= CC;}}}for(int i=0;i<4;i++ ){for(int g=0;g<QB;g++ ){var l=0,n=fB>>1;var o=g*PB+m*4+i;var q=g*PB+i;for(int h=0;h<NB;h++ ){w[q]=(n*BC)>>22;q+= 4;if(h>=tB){l-= 2*k[h&1023]-k[(h-m)&1023];}else if(h>=m){l-= 2*k[h&1023];}var s=(h<HB)?w[o]:0;k[(h+m)&1023]=s;n+= l+= s;o+= 4;}}}rH(w);AB.putImageData(RB,qB.x-m,qB.y-FB);} sC(){return new u(-blurX,-blurY,2*blurX,2*blurY);}}class RJ extends YB{final  rK;RJ( h):rK=new List<num>(20){if(h.length!=20)throw new ArgumentError("The supplied matrix needs to be a 4 x 5 matrix.");for(int g=0;g<h.length;g++ )rK[g]=h[g];}RJ.wJ():rK=[0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0,0,0,1,0];RJ.AK():rK=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]; clone(){return new RJ(rK);} apply( KC, m, fB, BC){var s=KC.getImageData(m.x,m.y,m.width,m.height,fB.IC);var h=s.data;var qB=(rK[00]*65536).toInt();var OB=(rK[01]*65536).toInt();var CC=(rK[02]*65536).toInt();var q=(rK[03]*65536).toInt();var rB=(rK[04]*65536).toInt();var tB=(rK[05]*65536).toInt();var NB=(rK[06]*65536).toInt();var uB=(rK[07]*65536).toInt();var AB=(rK[08]*65536).toInt();var n=(rK[09]*65536).toInt();var t=(rK[10]*65536).toInt();var w=(rK[11]*65536).toInt();var gB=(rK[12]*65536).toInt();var sB=(rK[13]*65536).toInt();var HB=(rK[14]*65536).toInt();var FB=(rK[15]*65536).toInt();var RB=(rK[16]*65536).toInt();var QB=(rK[17]*65536).toInt();var o=(rK[18]*65536).toInt();var PB=(rK[19]*65536).toInt();if(cC){for(int g=0;g<=h.length-4;g+= 4){var k=h[g+0];var l=h[g+1];var j=h[g+2];var i=h[g+3];h[g+0]=((qB*k)+(OB*l)+(CC*j)+(q*i)+rB)>>16;h[g+1]=((tB*k)+(NB*l)+(uB*j)+(AB*i)+n)>>16;h[g+2]=((t*k)+(w*l)+(gB*j)+(sB*i)+HB)>>16;h[g+3]=((FB*k)+(RB*l)+(QB*j)+(o*i)+PB)>>16;}}else{for(int g=0;g<=h.length-4;g+= 4){var i=h[g+0];var j=h[g+1];var l=h[g+2];var k=h[g+3];h[g+0]=((FB*k)+(RB*l)+(QB*j)+(o*i)+PB)>>16;h[g+1]=((t*k)+(w*l)+(gB*j)+(sB*i)+HB)>>16;h[g+2]=((tB*k)+(NB*l)+(uB*j)+(AB*i)+n)>>16;h[g+3]=((qB*k)+(OB*l)+(CC*j)+(q*i)+rB)>>16;}}fB.putImageData(s,BC.x,BC.y);} sC(){return new u(0,0,0,0);}}class lE implements oB{final  uK;var DL=0.0;var TL=0.0;var cL=1;lE( g, h):uK=g{TL=LC.max(h,0.0001);} zB( h){var g=DL+h;while (g>=TL&&cL>0){DL=TL;cL-- ;uK();g-= TL;}DL=g;return (cL>0);} get currentTime=>DL;}class QJ extends YB{var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;QJ([this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=2.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>64||blurY>64)throw new ArgumentError("Error #9004: The maximum blur size is 64.");} clone(){return new QJ(color,alpha,blurX,blurY,strength,inner,knockout,hideObject);} apply( NB, o, m, PB){var rB=NB;if(NB==m&&!hideObject){rB=NB.clone(m.IC);}var aE=NB.getImageData(o.x,o.y,o.width,o.height,m.IC);var bE=aE.data;var k=m.IC;var s=o.width;var fB=o.height;var CC=(blurX*blurX*k*k).floor();var BC=(blurY*blurY*k*k).floor();var cE=(1<<22)~/CC;var dE=(1<<22)~/BC;var q=(blurX*k).floor();var KD=(blurX*k*2).floor();var QB=(blurY*k).floor();var tB=(blurY*k*2).floor();var RB=s+KD;var OB=fB+tB;var eE=s*4;var gB=RB*4;var HB=cC?3:0;var LD=m.createImageData(RB,OB);var h=LD.data;var l=new List<int>(1024);for(int i=0;i<s;i++ ){var n=0,w=BC>>1;var t=i*4+HB;var AB=(i+q)*4+HB;for(int j=0;j<OB;j++ ){h[AB]=(w*dE)>>22;AB+= gB;if(j>=tB){n-= 2*l[j&1023]-l[(j-QB)&1023];}else if(j>=QB){n-= 2*l[j&1023];}var FB=(j<fB)?bE[t]:0;l[(j+QB)&1023]=FB;w+= n+= FB;t+= eE;}}for(int j=0;j<OB;j++ ){var n=0,w=CC>>1;var t=j*gB+q*4+HB;var AB=j*gB+HB;for(int i=0;i<RB;i++ ){h[AB]=(w*cE)>>22;AB+= 4;if(i>=KD){n-= 2*l[i&1023]-l[(i-q)&1023];}else if(i>=q){n-= 2*l[i&1023];}var FB=(i<s)?h[t]:0;l[(i+q)&1023]=FB;w+= n+= FB;t+= 4;}}var eC=(alpha*256).toInt();var sB=(color>>16)&0xFF;var qB=(color>>8)&0xFF;var MD=(color>>0)&0xFF;if(cC){for(var g=0;g<=h.length-4;g+= 4){h[g+0]=sB;h[g+1]=qB;h[g+2]=MD;h[g+3]=(h[g+3]*eC)>>8;}}else{for(var g=0;g<=h.length-4;g+= 4){h[g+0]=(h[g+0]*eC)>>8;h[g+1]=MD;h[g+2]=qB;h[g+3]=sB;}}var ND=PB.x;var uB=PB.y;var KC=PB.x-q;var OD=PB.y-QB;var fE=new u(ND,uB,s,fB);var gE=new u(KC,OD,RB,OB);var hE=fE.union(gE);m.fillRect(hE,ZB.LE);m.putImageData(LD,KC,OD);if(this.hideObject==false){m.rC(rB,new DB(1.0,0.0,0.0,1.0,ND,uB));}} sC(){return new u(-blurX,-blurY,2*blurX,2*blurY);}}class VB<zC extends EB>{final  xK;const VB(this.xK); forTarget( g,{ useCapture: false}){return g.SM(xK,useCapture);}}abstract class v extends xB implements qD{static var iG=0;var YL=iG++ ;var WK=0.0;var aK=0.0;var vL=0.0;var HM=0.0;var PM=1.0;var YM=1.0;var eM=0.0;var jM=0.0;var oM=0.0;var uM=1.0;var xM=true;var AN=false;var HN=null;var MN=null;var TN=null;var XN=false;var dN=null;var eN=null;var hN=null;var sK="";var oN=null;final  rN=new DB.vJ();final  uN=new DB.vJ();var AO=true;static const  iH=const VB<ED>(EB.EE); get jI=>v.iH.forTarget(this); get x=>WK; get y=>aK; get HC=>vL; get QC=>HM; get SC=>PM; get TC=>YM; get skewX=>eM; get skewY=>jM; get RC=>oM; get visible=>xM; get alpha=>uM; get mask=>HN; get MI=>MN!=null; get JD=>hN; get name=>sK; get parent=>oN; get dD{var g=this.UC;return (g!=null)?this.OC(g.xO):null;} get gI{var g=this.dD;return (g!=null)?g.x:0.0;} get hI{var g=this.dD;return (g!=null)?g.y:0.0;} get root{var g=this;while (g.oN!=null)g=g.oN;return g;} get UC{var g=this.root;return (g is yB)?g:null;}set x( g){if(g is num)WK=g;AO=true;}set y( g){if(g is num)aK=g;AO=true;}set HC( g){if(g is num)vL=g;AO=true;}set QC( g){if(g is num)HM=g;AO=true;}set SC( g){if(g is num)PM=g;AO=true;}set TC( g){if(g is num)YM=g;AO=true;}set skewX( g){if(g is num)eM=g;AO=true;}set skewY( g){if(g is num)jM=g;AO=true;}set RC( g){if(g is num)oM=g;AO=true;}set visible( g){if(g is bool)xM=g;}set alpha( g){if(g is num)uM=g;}set mask( g){HN=g;}set XI( g){dN=g;}set JD( g){hN=g;} setTransform( k, l,[ n, g, h, o, j, i, m]){if(k is num)WK=k;if(l is num)aK=l;if(n is num)PM=n;if(g is num)YM=g;if(h is num)oM=h;if(o is num)eM=o;if(j is num)jM=j;if(i is num)vL=i;if(m is num)HM=m;AO=true;} get width=>pB(OM).width; get height=>pB(OM).height; set width( h){this.SC=1;var g=this.width;this.SC=(g!=0.0)?h/g:1.0;} set height( h){this.TC=1;var g=this.height;this.TC=(g!=0.0)?h/g:1.0;} GG(){if(oN!=null)oN.FG(this);} get VP=>xM&&!AN; get OM{if(AO){AO=false;var j=eM+oM;var i=jM+oM;if(j==0.0&&i==0.0){uN.gD(PM,0.0,0.0,YM,WK-vL*PM,aK-HM*YM);}else{var g,l,k,h;var m=LC.cos(j);var n=LC.sin(j);if(j==i){g=PM*m;l=PM*n;k=-YM*n;h=YM*m;}else{g=PM*LC.cos(i);l=PM*LC.sin(i);k=-YM*n;h=YM*m;}var q=WK-(vL*g+HM*k);var o=aK-(vL*l+HM*h);uN.gD(g,l,k,h,q,o);}}return uN;} get xI{return OM.clone();} XE( h){if(h==oN)return OM.clone();if(h.oN==this)return h.OM.kF();var j=new DB.vJ();var g=this;while (g!=h&&g.oN!=null){j.concat(g.OM);g=g.oN;}if(h==null&&g!=null){j.concat(g.OM);g=null;}if(g==h)return j;var k=new DB.vJ();var i=h;while (i!=this&&i.oN!=null){k.concat(i.OM);i=i.oN;}k.RE();if(i==this)return k;if(i!=g)return null;j.concat(k);return j;} pB( h,[ g]){if(g==null)g=new u.rJ();g.x=h.mB;g.y=h.nB;g.width=0;g.height=0;return g;} lB( g, h){if(pB(JE).contains(g,h))return this;return null;} OC( h){rN.qF();for(v g=this;g!=null;g=g.oN)rN.concat(g.OM);rN.RE();return rN.mD(h);} II( k, i, g, h,{ debugBorder: false}){var j=yB.XD?GD:1.0;MN=new CB(g,h,true,ZB.LE,j);TN=new u(k,i,g,h);XN=debugBorder;EG();} EG(){if(MN==null)return;var j=TN.x;var k=TN.y;var g=TN.width;var h=TN.height;MN.clear();MN.rC(this,new DB(1.0,0.0,0.0,1.0,-j,-k));if(dN!=null){for(int i=0;i<dN.length;i++ ){var l=new u(0,0,g,h);var m=new GB.rJ();dN[i].apply(MN,l,MN,m);}}if(XN){MN.fillRect(new u(0,0,g,1),0xFFFF00FF);MN.fillRect(new u(g-1,0,1,h),0xFFFF00FF);MN.fillRect(new u(0,h-1,g,1),0xFFFF00FF);MN.fillRect(new u(0,0,1,h),0xFFFF00FF);}} KP( g){g.context.translate(TN.x,TN.y);MN.UB(g);} dispatchEvent( h){var g=null;if(h.bD||h.bubbles){for(v j=oN;j!=null;j=j.oN){if(j.QO(h.type,h.bD,h.bubbles)){if(g==null)g=ZD.BG() as List<v>;g.add(j);}}}if(h.bD&&g!=null){for(int i=g.length-1;i>=0&&h.jD==false;i-- ){g[i].qN(h,this,g[i],wB.rE);}}if(h.jD==false){qN(h,this,this,wB.bC);}if(h.bubbles&&g!=null){for(int i=0;i<g.length&&h.jD==false;i++ ){g[i].qN(h,this,g[i],wB.lG);}}if(g!=null){g.clear();ZD.CG(g);}} dO( h){for(var g=h;g!=null;g=g.oN)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");oN=h;} UB( g);}abstract class JB extends v{var UI=false;var wF=true;var qJ=true;var tabIndex=0;static const  wG=const VB<BB>(BB.MF);static const  GH=const VB<BB>(BB.QF);static const  MH=const VB<BB>(BB.KF);static const  RH=const VB<BB>(BB.AF);static const  YH=const VB<BB>(BB.FF);static const  lH=const VB<BB>(BB.RF); get onMouseOut=>JB.wG.forTarget(this); get onMouseOver=>JB.GH.forTarget(this); get onMouseMove=>JB.MH.forTarget(this); get onMouseDown=>JB.RH.forTarget(this); get onMouseUp=>JB.YH.forTarget(this); get onMouseWheel=>JB.lH.forTarget(this);static const  sH=const VB<MB>(MB.IF);static const  tH=const VB<MB>(MB.yE);static const  uH=const VB<MB>(MB.BF); get onTouchMove=>JB.sH.forTarget(this); get onTouchEnd=>JB.tH.forTarget(this); get onTouchCancel=>JB.uH.forTarget(this);static const  xH=const VB<EC>(EC.xE);static const  yH=const VB<EC>(EC.vE); get onKeyUp=>JB.xH.forTarget(this); get onKeyDown=>JB.yH.forTarget(this);static const  CI=const VB<yC>(yC.wE); get kI=>JB.CI.forTarget(this);}abstract class TB extends JB{final  PL=new List<v>();var hL=true;var wL=true; get TE=>PL.length; IB( g){if(g.parent==this){var h=PL.indexOf(g);PL.removeAt(h);PL.add(g);}else{iF(g,PL.length);}} iF( g, h){if(h<0||h>PL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){PL.removeAt(PL.indexOf(g));if(h>PL.length)h-- ;PL.insert(h,g);}else{g.GG();g.dO(this);PL.insert(h,g);g.dispatchEvent(new EB(EB.dG,true));if(this.UC!=null)kO(g,new EB(EB.kG));}} FG( h){var g=PL.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");pI(g);} pI( g){if(g<0||g>=PL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=PL[g];h.dispatchEvent(new EB(EB.yG,true));if(this.UC!=null)kO(h,new EB(EB.BH));h.dO(null);PL.removeAt(g);} cI( g){if(g<0||g>=PL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");return PL[g];} vI( g){PL.sort(g);} contains( g){for(;g!=null;g=g.oN)if(g==this)return true;return false;} pB( o,[ g]){if(g==null)g=new u.rJ();if(PL.length==0)return super.pB(o,g);var i=double.INFINITY;var j=double.INFINITY;var l=double.NEGATIVE_INFINITY;var k=double.NEGATIVE_INFINITY;var q=PL.length;for(int m=0;m<PL.length;m++ ){var n=PL[m];rN.lF(n.OM,o);var h=n.pB(rN,g);if(h.left<i)i=h.left;if(h.top<j)j=h.top;if(h.right>l)l=h.right;if(h.bottom>k)k=h.bottom;}g.x=i;g.y=j;g.width=l-i;g.height=k-j;return g;} lB( i, k){i=i.toDouble();k=k.toDouble();var n=null;for(int l=PL.length-1;l>=0;l-- ){var j=PL[l];if(j.VP){var g=j.OM;var o=i-g.mB;var m=k-g.nB;var s=(g.d*o-g.c*m)/g.qC;var q=(g.a*m-g.b*o)/g.qC;var h=j.lB(s,q);if(h!=null){if(h is JB)if(h.wF)return hL?h:this;n=this;}}}return n;} UB( i){for(int g=0;g<PL.length;g++ ){var h=PL[g];if(h.VP)i.sI(h);}}WP( g, i){i.add(g);if(g is TB){var k=g as TB;var j=k.PL;for(int h=0;h<j.length;h++ ){WP(j[h],i);}}}kO( i, j){var g=ZD.BG() as List<v>;WP(i,g);for(int h=0;h<g.length;h++ ){g[h].dispatchEvent(j);}g.clear();ZD.CG(g);}}class PJ extends YB{var distance;var angle;var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;PJ([this.distance=4.0,this.angle=LC.PI/4,this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=1.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>64||blurY>64)throw new ArgumentError("Error #9004: The maximum blur size is 64.");} clone(){return new PJ(distance,angle,color,alpha,blurX,blurY,strength,inner,knockout,hideObject);} apply( NB, o, m, PB){var rB=NB;if(NB==m&&!hideObject){rB=NB.clone(m.IC);}var aE=NB.getImageData(o.x,o.y,o.width,o.height,m.IC);var bE=aE.data;var k=m.IC;var s=o.width;var fB=o.height;var CC=(blurX*blurX*k*k).floor();var BC=(blurY*blurY*k*k).floor();var cE=(1<<22)~/CC;var dE=(1<<22)~/BC;var q=(blurX*k).floor();var KD=(blurX*k*2).floor();var QB=(blurY*k).floor();var tB=(blurY*k*2).floor();var RB=s+KD;var OB=fB+tB;var eE=s*4;var gB=RB*4;var HB=cC?3:0;var LD=m.createImageData(RB,OB);var h=LD.data;var l=new List<int>(1024);for(int i=0;i<s;i++ ){var n=0,w=BC>>1;var t=i*4+HB;var AB=(i+q)*4+HB;for(int j=0;j<OB;j++ ){h[AB]=(w*dE)>>22;AB+= gB;if(j>=tB){n-= 2*l[j&1023]-l[(j-QB)&1023];}else if(j>=QB){n-= 2*l[j&1023];}var FB=(j<fB)?bE[t]:0;l[(j+QB)&1023]=FB;w+= n+= FB;t+= eE;}}for(int j=0;j<OB;j++ ){var n=0,w=CC>>1;var t=j*gB+q*4+HB;var AB=j*gB+HB;for(int i=0;i<RB;i++ ){h[AB]=(w*cE)>>22;AB+= 4;if(i>=KD){n-= 2*l[i&1023]-l[(i-q)&1023];}else if(i>=q){n-= 2*l[i&1023];}var FB=(i<s)?h[t]:0;l[(i+q)&1023]=FB;w+= n+= FB;t+= 4;}}var eC=(alpha*256).toInt();var sB=(color>>16)&0xFF;var qB=(color>>8)&0xFF;var MD=(color>>0)&0xFF;if(cC){for(var g=0;g<=h.length-4;g+= 4){h[g+0]=sB;h[g+1]=qB;h[g+2]=MD;h[g+3]=(h[g+3]*eC)>>8;}}else{for(var g=0;g<=h.length-4;g+= 4){h[g+0]=(h[g+0]*eC)>>8;h[g+1]=MD;h[g+2]=qB;h[g+3]=sB;}}var ND=PB.x;var uB=PB.y;var KC=PB.x-q+(this.distance*LC.cos(this.angle)).round();var OD=PB.y-QB+(this.distance*LC.sin(this.angle)).round();var fE=new u(ND,uB,s,fB);var gE=new u(KC,OD,RB,OB);var hE=fE.union(gE);m.fillRect(hE,ZB.LE);m.putImageData(LD,KC,OD);if(this.hideObject==false){m.rC(rB,new DB(1.0,0.0,0.0,1.0,ND,uB));}} sC(){var h=(this.distance*LC.cos(this.angle)).round();var g=(this.distance*LC.sin(this.angle)).round();var i=new u(0,0,0,0);var j=new u(h-blurX,g-blurY,2*blurX,2*blurY);return i.union(j);}}class VG<zC>{final  eK=new List<zC>();final  FL;var UL=0;VG( g()):FL=g; BG(){if(UL==0){return FL();}else{UL-- ;return eK[UL];}}CG( g){if(UL==eK.length){eK.add(g);}else{eK[UL]=g;}UL++ ;}reset(){eK.clear();UL=0;}}class oE{final  jK;final  sK;final  RL;final  bL;final  nL;final  CM;final  LM;final  VM;final  bM;final  hM;final  pM;oE.uJ( i, h, g):jK=i,sK=h,RL=QH(g["rotated"]),bL=jB(g["sourceSize"]["w"]),nL=jB(g["sourceSize"]["h"]),CM=jB(g["spriteSourceSize"]["x"]),LM=jB(g["spriteSourceSize"]["y"]),VM=jB(g["frame"]["x"]),bM=jB(g["frame"]["y"]),hM=jB(g["frame"]["w"]),pM=jB(g["frame"]["h"]); get wI=>jK; get name=>sK; get uI=>RL; get ZI=>VM; get aI=>bM; get nF=>hM; get mF=>pM; get offsetX=>CM; get offsetY=>LM; get mI=>bL; get lI=>nL;}class RD{static const  cG="json";static const  CE="jsonarray";}abstract class oB{ zB( g);}class nE{final  YE;nE(this.YE);call( h, g){mL(h).dC(g);} get x=>mL("x"); get y=>mL("y"); get SC=>mL("scaleX"); get TC=>mL("scaleY"); get skewX=>mL("skewX"); get skewY=>mL("skewY"); get HC=>mL("pivotX"); get QC=>mL("pivotY"); get RC=>mL("rotation"); get alpha=>mL("alpha"); mL( h){var g=new dB(h);this.YE.mL(g);return g;}}class xC extends TB{var bJ=false;var ZE=false;var QE=null;var jL=null;var BM=null;MO(){var i=this.dD;var j=this.UC;var m=this.visible;if(i!=null&&this.UC!=null){var h=XC.uG;if(h!=null){var g=OM.mD(i);if(g.x<h.left)g.x=h.left;if(g.x>h.right)g.x=h.right;if(g.y<h.top)g.y=h.top;if(g.y>h.bottom)g.y=h.bottom;i=OM.kF().mD(g);}var l=new GB(vL,HM).add(i).subtract(XC.rG);var k=OM.mD(l);this.visible=false;BM=j.lB(j.gI,j.hI);this.x=k.x;this.y=k.y;this.visible=m;}} pB( h,[ g]){if(g==null)g=new u.rJ();super.pB(h,g);if(jL!=null){g=jL.EP(h).union(g);}return g;} lB( i, j){var h=null;if(this.QE!=null){var g=this.XE(this.QE);if(g!=null){var k=i*g.a+j*g.c+g.mB;var l=i*g.b+j*g.d+g.nB;if(this.QE.lB(k,l)!=null){h=this;}}}else{h=super.lB(i,j);if(h==null&&jL!=null){if(jL.IP(i,j)){h=this;}}}return h;}UB( g){if(jL!=null)jL.UB(g);super.UB(g);}}class jE extends v{var lK;var AL;var SL;jE([ h=null, g="auto"]){this.KI=h;this.oI=g;SL=null;} get ID=>SL;set KI( g){if(g==null)lK=null;if(g is CB)lK=g;}set oI( g){if(g is String)AL=g;}set ID( g){if(g==null)SL=null;if(g is u)SL=g;} pB( k,[ j]){var g=lK;var h=0,i=0;if(g!=null){h=g.width;i=g.height;}return KE(k,h,i,j);} lB( h, i){var g=lK;if(g==null)return null;if(h<0.0||i<0)return null;if(h>=g.width||i>=g.height)return null;return this;} UB( h){var g=lK;if(g==null)return;if(SL==null){g.UB(h);}else{g.HG(h,SL);}}}class vD{var fK;var sK;var BL;var ML;var WL;var fL;vD( h, i, j, k){fK=h;sK=i;BL=j;WL=null;ML=null;fL=new LB.Completer();k.then((g){WL=g;}).catchError((l){ML=l;}).whenComplete((){fL.complete(this);});} toString()=>"ResourceManagerResource [kind=${fK}, name=${sK}, url = ${BL}]"; get name=>sK; get fD=>WL; get error=>ML; get complete=>fL.future;}class rD{var png;var jpg;var webp;var autoHiDpi;rD({this.png: true,this.jpg: true,this.webp: false,this.autoHiDpi: true});}abstract class qD{ UB( g);}class wC{static const  aG="exactFit";static const  hG="noBorder";static const  qG="noScale";static const  EF="showAll";}class pE extends JB{}class TG{}class tD extends xB{final  OL=new Map<String,vD>();static const  tG=const VB<EB>(EB.WD); get onProgress=>tD.tG.forTarget(this);ON( i, g, k, l){var j="${i}.${g}";if(OL.containsKey(j)){throw new StateError("ResourceManager already contains a resource called '${g}'");}var h=new vD(i,g,k,l);h.complete.then((wN){this.dispatchEvent(new EB(EB.WD));});OL[j]=h;} EO( i, g){var h="${i}.${g}";if(OL.containsKey(h)==false){throw new StateError("ResourceManager does not contains a resource called '${g}'");}return OL[h];} load(){var i=this.nI.map((h)=>h.complete);return LB.Future.wait(i).then((j){var g=this.WI.length;if(g>0){throw new StateError("Failed to load ${g} resource(s).");}else{return this;}});} get nI{return OL.values.where((g)=>g.fD==null&&g.error==null).toList();} get WI{return OL.values.where((g)=>g.error!=null).toList();} kB( h, g,[ i=null]){ON("BitmapData",h,g,CB.mC(g,i));} KB( i, g,[ h=null]){ON("Sound",i,g,aB.mC(g,h));} jF( i, g, h){ON("TextureAtlas",i,g,vB.mC(g,h));} NC( h){var g=EO("BitmapData",h).fD;if(g is !CB)throw "dart2js_hint";return g;} oF( h){var g=EO("Sound",h).fD;if(g is !aB)throw "dart2js_hint";return g;} pF( h){var g=EO("TextureAtlas",h).fD;if(g is !vB)throw "dart2js_hint";return g;}}class sD{var AC;var PC;}final  yD=new Map<String,GE>();class kE{static const  HE="none";static const  oG="touchPoint";}class ZB{static const  UD=0xFF000000;static const  HH=0xFF0000FF;static const  bH=0xFFA9A9A9;static const  oH=0xFF008000;static const  hF=0xFFFF0000;static const  LE=0x00FFFFFF;static const  GI=0xFFFFFFFF;}class GB{var WK;var aK;GB( h, g):WK=h,aK=g;GB.rJ():this(0,0); clone()=>new GB(WK,aK); toString()=>"Point [x=${WK}, y=${aK}]"; get x=>WK; get y=>aK; get length=>LC.sqrt(WK*WK+aK*aK);set x( g){WK=g;}set y( g){aK=g;} add( g){return new GB(WK+g.x,aK+g.y);} subtract( g){return new GB(WK-g.x,aK-g.y);}cD( g){WK=g.x;aK=g.y;} PE( g){return WK==g.x&&aK==g.y;}}class u{var WK;var aK;var iK;var vK;u( i, g, h, j):WK=i,aK=g,iK=h,vK=j;u.rJ():this(0,0,0,0); clone()=>new u(WK,aK,iK,vK); toString()=>"Rectangle [x=${WK}, y=${aK}, width=${iK}, height=${vK}]"; get x=>WK; get y=>aK; get width=>iK; get height=>vK; get left=>WK; get top=>aK; get right=>WK+iK; get bottom=>aK+vK; get topLeft=>new GB(WK,aK); get size=>new GB(iK,vK);set x( g){WK=g;}set y( g){aK=g;}set width( g){iK=g;}set height( g){vK=g;} contains( g, h){return WK<=g&&aK<=h&&WK+iK>=g&&aK+vK>=h;} containsRect( g){return WK<=g.x&&aK<=g.y&&WK+iK>=g.right&&aK+vK>=g.bottom;} PE( g){return WK==g.x&&aK==g.y&&iK==g.width&&vK==g.height;} get isEmpty{return iK==0&&vK==0;}cD( g){WK=g.x;aK=g.y;iK=g.width;vK=g.height;}dI( h, g){iK=iK+h;vK=vK+g;} union( g){var i=LC.min(this.left,g.left);var h=LC.min(this.top,g.top);var j=LC.max(this.right,g.right);var k=LC.max(this.bottom,g.bottom);return new u(i,h,j-i,k-h);} align(){var h=this.left.floor();var g=this.top.floor();var i=this.right.ceil();var j=this.bottom.ceil();return new u(h,g,i-h,j-g);}}class WG{var x;var y;var DG;WG(this.x,this.y,this.DG);}abstract class kC{var JC=null;var border=false;var borderColor=0xFF000000;var borderWidth=1;var sL;kC();factory kC.tJ( i, g, h, j){return new XJ(i,g,h,j);}factory kC.xJ( i, g, h){return new YJ(i,g,h);}factory kC.yJ( g){return new ZJ(g);}JI( h, g){sL=h.context;sL.setTransform(g.a,g.b,g.c,g.d,g.mB,g.nB);sL.beginPath();IO();sL.save();sL.clip();}VI(){sL.restore();if(border){sL.strokeStyle=FE(borderColor);sL.lineWidth=borderWidth;sL.lineCap="round";sL.lineJoin="round";sL.stroke();}}IO();}class DB{var XK,ZK,cK,dK,gK,kK;var wK;DB( h, i, g, j, k, l):XK=h.toDouble(),ZK=i.toDouble(),cK=g.toDouble(),dK=j.toDouble(),gK=k.toDouble(),kK=l.toDouble(),wK=(h*j-i*g).toDouble();DB.vJ():XK=1.0,ZK=0.0,cK=0.0,dK=1.0,gK=0.0,kK=0.0,wK=1.0; clone(){return new DB(XK,ZK,cK,dK,gK,kK);} kF(){var h=(dK/wK);var i=-(ZK/wK);var g=-(cK/wK);var j=(XK/wK);var k=-(h*gK+g*kK);var l=-(i*gK+j*kK);return new DB(h,i,g,j,k,l);} get a=>XK; get b=>ZK; get c=>cK; get d=>dK; get mB=>gK; get nB=>kK; get qC=>wK; mD( h){var i=h.x.toDouble();var g=h.y.toDouble();return new GB(i*XK+g*cK+gK,i*ZK+g*dK+kK);} fO( h){var i=h.x.toDouble();var g=h.y.toDouble();return new GB(i*XK+g*cK+gK,i*ZK+g*dK+kK);} concat( g){var m=XK;var q=ZK;var s=cK;var o=dK;var l=gK;var n=kK;var w=wK;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var AB=g.mB;var t=g.nB;var FB=g.qC;XK=(m*j+q*i).toDouble();ZK=(m*k+q*h).toDouble();cK=(s*j+o*i).toDouble();dK=(s*k+o*h).toDouble();gK=(l*j+n*i+AB).toDouble();kK=(l*k+n*h+t).toDouble();wK=(w*FB).toDouble();} qF(){XK=1.0;ZK=0.0;cK=0.0;dK=1.0;gK=0.0;kK=0.0;wK=1.0;} RE(){var j=XK;var m=ZK;var l=cK;var k=dK;var h=gK;var i=kK;var g=wK;XK=(k/g).toDouble();ZK=-(m/g).toDouble();cK=-(l/g).toDouble();dK=(j/g).toDouble();gK=-(XK*h+cK*i).toDouble();kK=-(ZK*h+dK*i).toDouble();wK=(1.0/g).toDouble();} rotate( i){var g=LC.cos(i);var h=LC.sin(i);var j=XK;var n=ZK;var m=cK;var l=dK;var k=gK;var o=kK;XK=(j*g-n*h).toDouble();ZK=(j*h+n*g).toDouble();cK=(m*g-l*h).toDouble();dK=(m*h+l*g).toDouble();gK=(k*g-o*h).toDouble();kK=(k*h+o*g).toDouble();} scale( h, g){XK=(XK*h).toDouble();ZK=(ZK*g).toDouble();cK=(cK*h).toDouble();dK=(dK*g).toDouble();gK=(gK*h).toDouble();kK=(kK*g).toDouble();wK=(wK*h*g).toDouble();} translate( g, h){gK=(gK+g).toDouble();kK=(kK+h).toDouble();} gD( h, i, g, k, j, l){XK=h.toDouble();ZK=i.toDouble();cK=g.toDouble();dK=k.toDouble();gK=j.toDouble();kK=l.toDouble();wK=(XK*dK-ZK*cK).toDouble();} cD( g){XK=g.a.toDouble();ZK=g.b.toDouble();cK=g.c.toDouble();dK=g.d.toDouble();gK=g.mB.toDouble();kK=g.nB.toDouble();wK=g.qC.toDouble();} lF( h, g){var n=h.a;var s=h.b;var t=h.c;var q=h.d;var m=h.mB;var o=h.nB;var AB=h.qC;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var FB=g.mB;var w=g.nB;var HB=g.qC;XK=(n*k+s*j).toDouble();ZK=(n*l+s*i).toDouble();cK=(t*k+q*j).toDouble();dK=(t*l+q*i).toDouble();gK=(m*k+o*j+FB).toDouble();kK=(m*l+o*i+w).toDouble();wK=(AB*HB).toDouble();}}class bB{static const  zD="auto";static const  BE="arrow";static const  DE="button";static const  sG="hand";static const  GF="ibeam";static const  vG="wait";}class wD{var YK;var oK;var yK;var NL;var DM;var RM;var cM;var lM;wD(){YK=new BD();oK=new List<yB>();yK=-1;DM=false;RM=new ED(0);cM=new OF();lM=new TF();NL=jN;mN();} get SE=>YK;mN(){hB.window.requestAnimationFrame(NL);}jN( g){mN();g=g.toDouble();if(yK==-1)yK=g;if(yK>g)yK=g;var j=g-yK;var i=j/1000.0;var k=g/1000.0;var l=false;if(j>=1){yK=g;RM.xL=i;YF.dispatchEvent(RM);YK.zB(i);for(int h=0;h<oK.length;h++ ){oK[h].SE.zB(i);}if(DM){DM=false;cF.dispatchEvent(lM);}for(int h=0;h<oK.length;h++ ){oK[h].fI(k,i);}aF.dispatchEvent(cM);}} HI( g){if(g.VE!=null){g.VE.qI(g);}oK.add(g);g.qO=this;} qI( g){if(g.VE==this){oK.remove(g);g.qO=null;}}}class gC{final  matrix=new DB.vJ();var alpha=1.0;var JD=CD.TD;var yL; get iI{if(yL==null)yL=new gC();return yL;}}class XC{static var qE=bB.zD;static var fG=false;static var zE=null;static var rG=null;static var uG=null;static var zG=new LB.StreamController<String>();static var EH=zG.stream.asBroadcastStream();static  dF( i){var h=i;var g="auto";if(qE!=bB.zD){h=qE;}switch (h){case bB.zD:g="auto";break;case bB.BE:g="default";break;case bB.DE:g="pointer";break;case bB.sG:g="move";break;case bB.GF:g="text";break;case bB.vG:g="wait";break;}if(fG){g="none";}return g;}}class ZC{static const  AE="center";static const  gG="end";static const  nG="justify";static const  HF="right";}class XG extends JB implements oB{var JL;var VL;var aL;var lL;var uL;var qK;var IM;var TM;var ID;XG( h,[ i=30, g=true]){JL=h;VL=i;aL=0;lL=null;uL=false;qK=g;IM=new EB(EB.WD);TM=new EB(EB.ZH);ID=null;}static const  tG=const VB<EB>(EB.WD); get onProgress=>XG.tG.forTarget(this); get WE=>JL.length; set loop( g){qK=g;} play(){uL=true;lL=null;} stop(){uL=false;lL=null;} zB( j){if(uL==false)return true;if(lL==null){lL=0.0;qN(IM,this,this,wB.bC);}else{lL+= j;var i=1.0/VL;while (uL&&lL>=i){var h=aL;var g=qK?(h+1)%WE:LC.min(h+1,WE-1);aL=g;lL-= i;if(h!=g){qN(IM,this,this,wB.bC);if(aL!=g)return true;}if(h!=g&&g==WE-1&&qK==false){qN(TM,this,this,wB.bC);if(aL!=g)return true;}}}return true;} pB( i,[ h]){var g=JL[aL];return KE(i,g.width,g.height,h);} lB( g, h){var i=JL[aL];if(g>=0&&h>=0&&g<i.width&&h<i.height)return this;return null;} UB( h){var g=JL[aL];if(g is !CB)return;if(ID==null)g.UB(h);else g.HG(h,ID);}}class TJ extends aC{var qK;var HL;TJ( i, h, g){qK=h;HL=g;}set hD( g){HL=g;} stop(){}}class wB{static const  rE=1;static const  bC=2;static const  lG=3;}class xB{var mK;var QL;dispatchEvent( g){qN(g,this,this,wB.bC);} QO( h, j, i){if(j&&QL!=null){var g=QL[h];if(g!=null&&g.SN)return true;}if(i&&mK!=null){var g=mK[h];if(g!=null&&g.SN)return true;}return false;} SM( h, g){if(g){if(QL==null)QL=new Map<String,hC>();}else{if(mK==null)mK=new Map<String,hC>();}var i=g?QL:mK;return i.putIfAbsent(h,(){return new hC(this,h,g);});}qN( g, k, l, j){var h=(j==wB.rE)?QL:mK;if(h==null)return;var i=h[g.type];if(i==null)return;g.IL=k;g.NO=l;g.LO=j;g.OO=false;g.RO=false;i.dispatchEvent(g);}}class SG{}class iC{static const  ZG=0;static const  eG=1;static const  HF=2;static const  pG=3;static const  DF=4;}class VJ extends TB{var rK=new DB.vJ(); get OM=>rK; get matrix=>rK;set matrix( g){rK=g;}}abstract class aB{static  mC( g,[ h=null]){switch (fC.DH){case "WebAudioApi":return uD.mC(g,h);case "AudioElement":return xD.mC(g,h);default:return YC.mC(g,h);}}static var UF=new WC(mp3:true,mp4:true,ogg:true,wav:true); get length; play([ h=false, g]);}abstract class aC extends xB{ set hD( g); stop();}class WC{var mp3;var mp4;var ogg;var wav;var ignoreErrors;WC({this.mp3: false,this.mp4: false,this.ogg: false,this.wav: false,this.ignoreErrors: true});}class XB{var volume;var pan;var lJ=1;var mJ=0;var pJ=1;var oJ=0;XB([this.volume=1,this.pan=0]);}class fC{static var DH=WH();static var VD=fH();static var VF=hH();static  WH(){var h=(VD!=null)?"WebAudioApi":"AudioElement";var g=hB.window.navigator.userAgent;if(g.contains("IEMobile"))if(g.contains("9.0")||g.contains("10.0"))h="Mock";if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod"))if(g.contains("OS 3")||g.contains("OS 4")||g.contains("OS 5"))h="Mock";if(VF.length==0)h="Mock";print("StageXL: supported audio engine is: ${h}");return h;}static  fH(){if(iE.AudioContext.supported)return new iE.AudioContext();return null;}static  hH(){var g=new List<String>();var h=new hB.AudioElement();var i=["maybe","probably"];if(i.indexOf(h.canPlayType("audio/mpeg",""))!=-1)g.add("mp3");if(i.indexOf(h.canPlayType("audio/mp4",""))!=-1)g.add("mp4");if(i.indexOf(h.canPlayType("audio/ogg",""))!=-1)g.add("ogg");if(i.indexOf(h.canPlayType("audio/wav",""))!=-1)g.add("wav");print("StageXL: supported audio types are: ${g}");return g;}static  fF( i, h){var l=new RegExp(r"(mp3|mp4|ogg|wav)$",multiLine:false,caseSensitive:true);var g=VF.toList();var k=l.firstMatch(i);var j=new List<String>();if(k==null){throw new ArgumentError("Unsupported file extension.");}if(g.length==0){throw new UnsupportedError("This browser supports no known audio codec.");}if(!h.mp3)g.remove("mp3");if(!h.mp4)g.remove("mp4");if(!h.ogg)g.remove("ogg");if(!h.wav)g.remove("wav");var m=k.group(1);if(g.contains(m)){j.add(i);g.remove(m);}for(var n in g){j.add(i.replaceAll(l,n));}return j;}}class xD extends aB{var tK;var KL;var gL;xD(){gL=new List<QD>();tK=new hB.AudioElement();tK.onEnded.listen(qM);KL=new List<hB.AudioElement>();KL.add(tK);hB.document.body.children.add(tK);}static  mC( l,[ g=null]){if(g==null)g=aB.UF;var n=new xD();var h=n.tK;var i=fC.fF(l,g);var j=new LB.Completer<aB>();if(i.length==0){return YC.mC(l,g);}var k;var m;t(q){k.cancel();m.cancel();j.complete(n);}o(q){if(i.length>0){h.src=i.removeAt(0);h.load();}else{k.cancel();m.cancel();if(g.ignoreErrors){YC.mC(l,g).then((s)=>j.complete(s));}else{j.completeError(new StateError("Failed to load audio."));}}}k=h.onCanPlayThrough.listen(t);m=h.onError.listen(o);h.src=i.removeAt(0);h.load();return j.future;} get length{return tK.duration;} play([ h=false, g]){if(g==null)g=new XB();return new QD(this,h,g);} IN( h){var g;if(KL.length==0){g=tK.clone(true);g.onEnded.listen(qM);}else{g=KL.removeAt(0);}gL.add(h);return g;} TO( g){var h=g.tK;var i=gL.indexOf(g);gL.removeAt(i);KL.add(h);if(tK.currentTime>0&&tK.ended==false)tK.currentTime=0;} qM( j){var i=j.target;var g=null;for(int h=0;h<gL.length&&g==null;h++ )if(gL[h].tK==i)g=gL[h];if(g!=null)g.stop();}}class QD extends aC{var EL;var tK;var qK;var HL;QD( g, i, h){EL=g;qK=i;HL=h;tK=g.IN(this);tK.loop=qK;this.hD=h;tK.play();} set hD( g){HL=g;if(tK!=null)tK.volume=(HL!=null)?HL.volume:1;} stop(){if(tK!=null){if(tK.ended==false)tK.pause();EL.TO(this);tK=null;}}}class uD extends aB{var pK;uD(){if(fC.VD==null)throw new UnsupportedError("This browser does not support Web Audio API.");}static  mC( i,[ g=null]){if(g==null)g=aB.UF;var m=new uD();var h=new LB.Completer<aB>();var j=fC.fF(i,g);var s=fC.VD;if(j.length==0){return YC.mC(i,g);}t(n){s.decodeAudioData(n.response,( q){m.pK=q;h.complete(m);},(o){if(g.ignoreErrors){YC.mC(i,g).then((k)=>h.complete(k));}else{h.completeError(new StateError("Failed to decode audio."));}});}l(o){if(j.length>0){hB.HttpRequest.request(j.removeAt(0),responseType:'arraybuffer').then(t).catchError(l);}else{if(g.ignoreErrors){YC.mC(i,g).then((k)=>h.complete(k));}else{h.completeError(new StateError("Failed to load audio."));}}}l(null);return h.future;} get length{return pK.duration;} play([ h=false, g]){if(g==null)g=new XB();return new UJ(this,h,g);}}class UJ extends aC{var CL;var HL;var qK;var oL;var GM;UJ( j, h, i){CL=j;qK=h;HL=i;var g=fC.VD;oL=g.createGain();oL.connect(g.destination,0,0);oL.gain.value=(HL!=null)?LC.pow(HL.volume,2):1;GM=g.createBufferSource();GM.buffer=CL.pK;GM.loop=h;GM.connect(oL,0,0);GM.start(0);} set hD( g){HL=g;oL.gain.value=(HL!=null)?LC.pow(HL.volume,2):1;} stop(){GM.stop(0);}}class YC extends aB{YC(){}static  mC( g,[ h=null]){return new LB.Future<aB>.value(new YC());} get length{return double.NAN;} play([ h=false, g]){if(g==null){g=new XB();}return new TJ(this,h,g);}}class vC{var bK;var hK;var WK=0.0;var aK=0.0;var iK=0.0;var vK=0.0;var rL=0.0;var EM=0.0;var NM=0.0;vC.sJ(this.bK,this.hK); get x=>WK; get y=>aK; get width=>iK; get height=>vK; get aD=>rL; get OE=>EM; get leading=>NM;}class SD{var font;var size;var color;var bold;var italic;var underline;var align;var topMargin;var leftMargin;var rightMargin;var indent;var leading;SD(this.font,this.size,this.color,{this.bold: false,this.italic: false,this.underline: false,this.align: "left",this.topMargin: 0.0,this.leftMargin: 0.0,this.rightMargin: 0.0,this.indent: 0.0,this.leading: 0.0}); clone(){return new SD(font,size,color,bold:bold,italic:italic,underline:underline,align:align,topMargin:topMargin,leftMargin:leftMargin,rightMargin:rightMargin,indent:indent,leading:leading);}}class vB{final  nK=new List<oE>();var lK;static  mC( n, AB){var k=new LB.Completer<vB>();var g=new vB();switch (AB){case RD.cG:case RD.CE:hB.HttpRequest.getString(n).then((t){var o=yI.parse(t);var h=o["frames"];var q=o["meta"];var HB=gH(n,q["image"]);if(h is List){for(var s in h){var j=s as Map;var i=j["filename"] as String;var l=eF(i);var m=new oE.uJ(g,l,j);g.nK.add(m);}}if(h is Map){for(String i in h.keys){var j=h[i] as Map;var l=eF(i);var m=new oE.uJ(g,l,j);g.nK.add(m);}}CB.mC(HB).then(( FB){g.lK=FB;k.complete(g);}).catchError((w){k.completeError(new StateError("Failed to load image."));});}).catchError((w){k.completeError(new StateError("Failed to load json file."));});break;}return k.future;} NC( h){for(int g=0;g<nK.length;g++ ){var i=nK[g];if(i.name==h){return new CB.CK(i);}}throw new ArgumentError("TextureAtlasFrame not found: '${h}'");} bI( j){var h=new List<CB>();for(int g=0;g<nK.length;g++ ){var i=nK[g];if(i.name.startsWith(j)){h.add(new CB.CK(i));}}return h;} get YI{return nK.map((g)=>g.name).toList(growable:false);}}class mE extends JB{var bK="";var GL=null;var ZL=UG.HE;var qL=jC.bG;var JM=0;var UM=0;var aM=0.0;var gM=0.0;var mM=0.0;var tM=0.0;var wM=0.0;var BN=false;var EN=false;var JN=false;var QN=false;var WN=false;var ZN="•";var cN=0x000000;var fN=0x000000;var kN=0;var iK=100;var vK=100;var nN=0.0;var pN=0.0;final  sN=new List<vC>();var xN=true;var DO=null;var sL=null;mE([ h, g]){this.text=(h!=null)?h:"";this.MC=(g!=null)?g:new SD("Arial",12,0x000000);this.onKeyDown.listen(SO);this.kI.listen(VO);this.onMouseDown.listen(YO);} get text=>bK; get type=>qL; get border=>WN; get borderColor=>fN; get width=>iK; get height=>vK; set text( g){bK=g.replaceAll('\r\n','\n').replaceAll('\r','\n');JM=bK.length;xN=true;} set MC( g){GL=g.clone();xN=true;} set wordWrap( g){BN=g;xN=true;} set width( g){iK=g.toDouble();xN=true;} set height( g){vK=g.toDouble();xN=true;} pB( h,[ g]){return KE(h,iK,vK,g);} lB( g, h){if(g>=0&&h>=0&&g<iK&&h<vK)return this;return null;} UB( i){PP();aM+= i.SI;var g=i.sL;g.drawImageScaled(DO,0.0,0.0,iK,vK);if(qL==jC.AD){var h=this.UC;if(h!=null&&h.focus==this&&aM.remainder(0.8)<0.4){g.fillStyle=DD(GL.color);g.fillRect(gM,mM,tM,wM);}}}QP( FB){sN.clear();var j=0;var h='';var n='';var HB=0;var k=GL.size.toDouble();var QB=GL.topMargin.toDouble();var OB=GL.align.toString();var AB=FB.aD.toDouble();var RB=FB.OE.toDouble();for(var w in bK.split('\n')){if(BN==false){sN.add(new vC.sJ(w,j));j+= w.length+1;}else{h=null;for(var t in w.split(' ')){n=h;h=(n==null)?t:"${n} ${t}";h=SP(h);HB=sL.measureText(h).width.toDouble();if(HB>=iK){if(n==null){sN.add(new vC.sJ(h,j));j+= h.length+1;h=null;}else{sN.add(new vC.sJ(n,j));j+= n.length+1;h=SP(t);}}}if(h!=null){sN.add(new vC.sJ(h,j));j+= h.length+1;}}}nN=0.0;pN=0.0;var q=0.0;var s=QB+k;for(int i=0;i<sN.length;i++ ){var g=sN[i];if(g is !vC)continue;var o=sL.measureText(g.bK).width.toDouble();switch (OB){case ZC.AE:case ZC.nG:q=(iK-o)/2;break;case ZC.HF:case ZC.gG:q=(iK-o);break;default:q=0;}g.WK=q;g.aK=s;g.iK=o;g.vK=k;g.rL=AB;g.EM=RB;g.NM=0.0;s=s+k;nN=LC.max(nN,o);pN=pN+k;}if(qL==jC.AD){for(int i=sN.length-1;i>=0;i-- ){var g=sN[i];if(g is !vC)continue;if(JM>=g.hK){var NB=JM-g.hK;var PB=g.bK.substring(0,NB);UM=i;gM=g.WK+sL.measureText(PB).width.toDouble();mM=g.aK-AB*0.9;tM=1.0;wM=k;break;}}var l=0.0;var m=0.0;while (l+gM>iK)l-= iK*0.2;while (l+gM<0)l+= iK*0.2;while (m+mM+wM>vK)m-= k;while (m+mM<0)m+= k;gM+= l;mM+= m;for(int i=0;i<sN.length;i++ ){var g=sN[i];if(g is !vC)continue;g.WK+= l;g.aK+= m;}}} SP( g){if(g is !String)return g;if(JN==false)return g;var h="";for(int i=0;i<g.length;i++ ){h="${h}${ZN}";}return h;}PP({ calculateOnly: false}){if(xN){xN=false;var h=(yB.XD?GD:1.0)/oC;var k=(iK*h).ceil();var i=(vK*h).ceil();if(DO==null){DO=new hB.CanvasElement(width:k,height:i);sL=DO.context2D;}if(DO.width!=k)DO.width=k;if(DO.height!=i)DO.height=i;var g="${GL.size}px ${GL.font},sans-serif";if(GL.bold)g="bold ${g}";if(GL.italic)g="italic ${g}";sL.font=g;sL.textAlign="start";sL.textBaseline="alphabetic";sL.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);QP(mG(g));if(calculateOnly){xN=true;return;}sL.setTransform(h,0.0,0.0,h,0.0,0.0);if(QN){sL.fillStyle=DD(cN);sL.fillRect(0,0,iK,vK);}else{sL.clearRect(0,0,iK,vK);}sL.fillStyle=DD(GL.color);for(int l=0;l<sN.length;l++ ){var j=sN[l];sL.fillText(j.bK,j.WK,j.aK);}if(WN){sL.strokeStyle=DD(fN);sL.lineWidth=1;sL.strokeRect(0,0,iK,vK);}}}SO( s){if(qL==jC.AD){PP(calculateOnly:true);var l=bK;var n=l.length;var j=sN;var g=JM;var i=UM;var h=-1;switch (s.keyCode){case hB.KeyCode.BACKSPACE:if(g>0){bK=l.substring(0,g-1)+l.substring(g);h=g-1;}break;case hB.KeyCode.END:var m=j[i];h=m.hK+m.bK.length;break;case hB.KeyCode.HOME:var m=j[i];h=m.hK;break;case hB.KeyCode.LEFT:if(g>0){h=g-1;}break;case hB.KeyCode.UP:if(i>0&&i<j.length){var o=j[i];var k=j[i-1];var q=LC.min(g-o.hK,k.bK.length);h=k.hK+q;}else{h=0;}break;case hB.KeyCode.RIGHT:if(g<n){h=g+1;}break;case hB.KeyCode.DOWN:if(i>=0&&i<j.length-1){var o=j[i];var k=j[i+1];var q=LC.min(g-o.hK,k.bK.length);h=k.hK+q;}else{h=n;}break;case hB.KeyCode.DELETE:if(g<n){bK=l.substring(0,g)+l.substring(g+1);h=g;}break;}if(h!=-1){JM=h;aM=0.0;xN=true;}}}VO( j){if(qL==jC.AD){var i=bK.length;var h=JM;var g=j.text;if(g=='\r')g='\n';if(g=='\n'&&EN==false)g='';if(g=='')return;if(kN!=0&&i>=kN)return;bK=bK.substring(0,h)+g+bK.substring(h);JM=JM+g.length;aM=0.0;xN=true;}}YO( n){var AB=n.rF.toDouble();var l=n.sF.toDouble();if(sL==null)return;sL.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);for(int i=0;i<sN.length;i++ ){var g=sN[i];if(g is !vC)continue;var m=g.bK;var w=g.WK;var s=g.aK-g.rL;var t=g.aK+g.EM;if(s<=l&&t>=l){var o=double.INFINITY;var j=0;for(var h=0;h<=m.length;h++ ){var q=sL.measureText(m.substring(0,h)).width.toDouble();var k=(w+q-AB).abs();if(k<o){o=k;j=h;}}JM=g.hK+j;aM=0.0;xN=true;}}}}class CB implements qD{var iK;var vK;var LL;var XL;var dL;var pL;var zL;var KM;var WM;var dM;var iM;var nM;var sM;var vM;var CN;var sL;static var UF=new rD();CB( i, l,[ j=true, g=0xFFFFFFFF,k=1.0]){iK=jB(i);vK=jB(l);LL=j;XL=k.toDouble();dL=XL/oC;pL=((1.0-dL).abs()<0.001)?0:1;WM=0;dM=0;zL=iK;KM=vK;iM=0;nM=0;sM=(iK*dL).ceil();vM=(vK*dL).ceil();var h=new hB.CanvasElement(width:sM,height:vM);CN=h;sL=h.context2D;sL.fillStyle=LL?FE(g):DD(g);sL.fillRect(0,0,sM,vM);}CB.BK( g,[ j=1.0]){var h=jB(g.naturalWidth);var i=jB(g.naturalHeight);LL=true;XL=aH(j);dL=XL;iK=(h/XL).round();vK=(i/XL).round();pL=((1.0-dL).abs()<0.001)?0:1;WM=0;dM=0;zL=iK;KM=vK;iM=0;nM=0;sM=h;vM=i;CN=g;}CB.CK( g){var h=g.wI.lK;iK=g.mI.toInt();vK=g.lI.toInt();LL=true;XL=h.XL;dL=h.dL;pL=g.uI?3:2;WM=g.offsetX;dM=g.offsetY;zL=g.nF;KM=g.mF;iM=(g.ZI*dL).floor();nM=(g.aI*dL).floor();sM=(g.nF*dL).ceil();vM=(g.mF*dL).ceil();CN=h.CN;}static  mC( g,[ i=null, l=1.0]){if(i==null){i=CB.UF;}if(yB.XD&&i.autoHiDpi){if(g.contains("@1x.")&&GD>=1.5){l=l*2.0;g=g.replaceAll("@1x.","@2x.");}}var j=new LB.Completer<CB>();var h=new hB.ImageElement();var k;var m;k=h.onLoad.listen((s){k.cancel();m.cancel();j.complete(new CB.BK(h,l));});m=h.onError.listen((s){k.cancel();m.cancel();j.completeError(new StateError("Error loading image."));});if(i.webp==false){h.src=g;return j.future;}vH.then(( o){var q=new RegExp(r"(png|jpg|jpeg)$",multiLine:false,caseSensitive:true);var n=q.firstMatch(g);if(o==false||n==null){h.src=g;}else{h.src=g.substring(0,g.length-n.group(1).length)+"webp";}});return j.future;} get width=>iK; get height=>vK; get IC=>XL; getImageData( h, j, g, i,[ m]){if(m!=null&&m!=XL){var n=new CB(g,i,true,0,m);n.rC(this,new DB(1.0,0.0,0.0,1.0,-h,-j));return n.getImageData(h,j,g,i);}RP();var l=XL;var k=dL;if(oC>1.0){return sL.getImageDataHD(h*l,j*l,g*l,i*l);}else{return sL.getImageData(h*k,j*k,g*k,i*k);}} putImageData( j, k, g){RP();var i=XL;var h=dL;if(oC>1.0){sL.putImageDataHD(j,k*i,g*i);}else{sL.putImageData(j,k*h,g*h);}} createImageData( h, i){RP();var g=XL;var j=dL;return sL.createImageData(h*g,i*g);} clone([ g]){g=(g!=null)?g:XL;var h=new CB(iK,vK,true,0,g);h.rC(this);return h;} QI( j, g, h){RP();var i=j.getImageData(g.x,g.y,g.width,g.height,XL);sL.putImageData(i,h.x,h.y);} rC( h,[ g=null]){RP();g=(g==null)?new DB.vJ():g.clone();g.scale(dL,dL);var i=new iB.zJ(sL,g);h.UB(i);sL.globalAlpha=1.0;sL.globalCompositeOperation=CD.TD;} fillRect( g, h){RP();sL.setTransform(dL,0.0,0.0,dL,0.0,0.0);sL.fillStyle=FE(h);sL.fillRect(g.x,g.y,g.width,g.height);} clear(){RP();sL.setTransform(dL,0.0,0.0,dL,0.0,0.0);sL.clearRect(0,0,iK,vK);} UB( h){var g=h.context;switch (pL){case 0:g.drawImage(CN,WM,dM);break;case 1:g.drawImageScaled(CN,WM,dM,zL,KM);break;case 2:g.drawImageScaledFromSource(CN,iM,nM,sM,vM,WM,dM,zL,KM);break;case 3:g.transform(0.0,-1.0,1.0,0.0,WM,dM+KM);g.drawImageScaledFromSource(CN,iM,nM,vM,sM,0.0,0.0,KM,zL);break;}} HG( o, g){if(g.width==0||g.height==0)return;var i=o.context;if(pL!=0){RP();}var h=(g.x-WM)*dL;var n=(g.y-dM)*dL;var q=g.width*dL;var k=g.height*dL;var l=g.x+WM;var j=g.y+dM;var s=g.width;var m=g.height;i.drawImageScaledFromSource(CN,h,n,q,k,l,j,s,m);} RP(){if(sL==null){var g=XL/oC;var j=(iK*g).ceil();var i=(vK*g).ceil();var h=new hB.CanvasElement(width:j,height:i);var k=new DB(g,0.0,0.0,g,0.0,0.0);var l=new iB.zJ(h.context2D,k);this.UB(l);XL=XL;dL=g;pL=((1.0-dL).abs()<0.001)?0:1;WM=0;dM=0;zL=iK;KM=vK;iM=0;nM=0;sM=j;vM=i;CN=h;sL=h.context2D;}}}class WJ extends YB{final  zK;final  rK;WJ( h,[ g]):zK=h,rK=(g!=null)?g:new DB.vJ(); get matrix=>rK; clone(){return new WJ(zK,rK.clone());} apply( l, h, k, j){var n=new u(j.x,j.y,h.width,h.height);var o=new u(0,0,k.width,k.height);var i=new xC();var g=new VJ();var m=new jE(zK);i.x=j.x;i.y=j.y;i.IB(g);g.matrix=rK;g.JD=CD.IH;g.IB(m);if(!n.containsRect(o)){g.mask=new kC.tJ(0,0,h.width,h.height);g.mask.JC=i;}if(!identical(l,k)||!h.topLeft.PE(j)){k.QI(l,h,j);}k.rC(i,i.xI);} sC(){return new u.rJ();}}typedef  lC( ratio);typedef  YG<zC extends EB>( event);class sE<zC extends EB> extends LB.StreamSubscription<zC>{var iL=0;var tL=false;var MM;var ZM;sE(this.MM,this.ZM); get isPaused=>iL>0; onError( g(error)){} cancel(){MM.NI(this);} pause([ g]){iL++ ;if(g!=null){g.whenComplete(resume);}} resume(){if(iL==0){throw new StateError("Subscription is not paused.");}iL-- ;}}class BD implements oB{var kL;var FM;var QM=0.0;BD(){kL=new sD();FM=kL;} add( g){if(g is !oB){throw new ArgumentError("The supplied animatable does not extend type Animatable.");}if(this.contains(g)==false){var h=new sD();FM.AC=g;FM.PC=h;FM=h;}} remove( h){if(h!=null){var g=kL;while (identical(g,FM)==false){if(identical(g.AC,h)){g.AC=null;break;}g=g.PC;}}} contains( h){if(h!=null){var g=kL;while (identical(g,FM)==false){if(identical(g.AC,h))return true;g=g.PC;}}return false;} rI( i){var g=kL;while (identical(g,FM)==false){var h=g.AC;if(h is YD&&identical(h.TI,i)){g.AC=null;}g=g.PC;}} YE( g, i,[ h]){var j=h!=null?new YD(g,i,h):new YD(g,i);add(j);return j;} transition( l, h, j, i, k( value)){var g=new NF(l,h,j,i);g.yF=k;add(g);return g;} RI( h, i){var g=new lE(h,i);add(g);return g;} zB( j){QM+= j;var g=kL;var i=FM;while (identical(g,i)==false){var k=g.AC;if(k==null){var h=g.PC;g.AC=h.AC;g.PC=h.PC;if(identical(h,i))i=g;if(identical(h,FM))FM=g;}else if(k.zB(j)==false){g.AC=null;}else{g=g.PC;}}return true;}}class CD{static const  TD="source-over";static const  IH="destination-in";} DD( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";} mG( g){if(yD.containsKey(g)==false){yD[g]=new GE(g);}return yD[g];}class ED extends PD{var xL; get zF=>xL;ED( g):super(EB.EE),xL=g;}class CF{static var KH=kE.HE;static var OH=new LB.StreamController<String>();static var SH=OH.stream.asBroadcastStream();static  get cH=>KH;}class cB{static const  LF="B";static const  AH="BL";static const  PF="BR";static const  eG="L";static const  HF="R";static const  JH="T";static const  NH="TR";static const  HE="";} FE( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class NF extends oB{final  zM;final  DN;final  KN;var RN;var VN;var YN;var bN;var TL;var DL;var gN;var iN;var lN;NF( h, i, j,[ g]):zM=h,DN=i,KN=(g!=null)?g:FC.nC{RN=h;DL=0.0;TL=LC.max(0.0001,j);gN=0.0;iN=false;lN=false;} zB( i){if(DL<TL||lN==false){DL=DL+i;if(DL>TL)DL=TL;if(DL>=0.0){if(lN==false){lN=true;if(VN!=null)VN();}var g=DL/TL;var h=KN(g);RN=zM+h*(DN-zM);if(YN!=null)YN(iN?RN.round():RN);if(bN!=null&&DL==TL)bN();}}return DL<TL;} get iD=>zM; get kD=>DN; get currentTime=>DL; set yF( g( value)){YN=g;} set onComplete( g()){bN=g;}}class OF extends PD{OF():super(EB.JF);}class iB{final  sL;var DL=0.0;var NN=0.0;var UN;var aN;iB.zJ( i,[ h]):sL=i{UN=new gC();aN=UN;var g=UN.matrix;if(h is DB){g.cD(h);}sL.setTransform(g.a,g.b,g.c,g.d,g.mB,g.nB);sL.globalAlpha=1.0;sL.globalCompositeOperation=CD.TD;} get context=>sL; get currentTime=>DL; get SI=>NN; reset([ i, h, j]){DL=(h is num)?h:0.0;NN=(j is num)?j:0.0;aN=UN;var g=UN.matrix;if(i is DB){g.cD(i);}sL.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);sL.clearRect(0,0,sL.canvas.width,sL.canvas.height);sL.setTransform(g.a,g.b,g.c,g.d,g.mB,g.nB);sL.globalAlpha=1.0;sL.globalCompositeOperation=CD.TD;} sI( h){var g=h.OM;var t=h.uM;var k=h.HN;var j=h.eN;var o=h.hN;var m=aN as gC;var i=aN.iI as gC;aN=i;var n=i.matrix;var s=m.alpha.toDouble()*t;var q=(o!=null)?o:m.JD;n.lF(g,m.matrix);i.alpha=s;i.JD=q;if(k!=null){if(k.JC==null){g=i.matrix;}else if(identical(k.JC,h)){g=i.matrix;}else if(identical(k.JC,h.parent)){g=m.matrix;}else{g=k.JC.XE(h);if(g==null)g=JE;else g.concat(i.matrix);}k.JI(this,g);}if(j!=null){if(j.JC==null){g=i.matrix;}else if(identical(j.JC,h)){g=i.matrix;}else if(identical(j.JC,h.parent)){g=m.matrix;}else{g=j.JC.XE(h);if(g==null)g=JE;else g.concat(i.matrix);}j.aJ(this,g);}var l=n;sL.setTransform(l.a,l.b,l.c,l.d,l.mB,l.nB);sL.globalCompositeOperation=q;sL.globalAlpha=s;if(h.MI){h.KP(this);}else{h.UB(this);}if(j!=null){j.eJ();}if(k!=null){k.VI();}aN=m;}}class TF extends PD{TF():super(EB.SF);}class GE{var fontStyle;var aD=0;var OE=0;var height=0;GE( j){this.fontStyle=j;var h=new hB.Element.tag("span");h.style.font=this.fontStyle;h.text="Hg";var g=new hB.Element.tag("div");g.style.display="inline-block";g.style.width="1px";g.style.height="0px";var i=new hB.Element.tag("div");i.append(g);i.append(h);hB.document.body.append(i);try {g.style.verticalAlign="baseline";this.aD=g.offsetTop-h.offsetTop;g.style.verticalAlign="bottom";this.height=g.offsetTop-h.offsetTop;this.OE=height-aD;}catch (k){}finally {i.remove();}}}class FC{static  nC( g){return g;}static  TH( g){return 0.5-0.5*LC.cos(g*2.0*LC.PI);}static  jH( g){return g*g*g;}static  kH( g){g=1.0-g;return 1.0-g*g*g;}static  mH( g){g=g*2.0;return (g<1.0)?0.5*jH(g):0.5*kH(g-1.0)+0.5;}static  BI( g){var h=1.70158;return g*g*((h+1.0)*g-h);}static  EI( g){var h=1.70158;g=g-1.0;return g*g*((h+1.0)*g+h)+1.0;}static  FI( g){g=g*2.0;return (g<1.0)?0.5*BI(g):0.5*EI(g-1.0)+0.5;}}class FD{static const  zD="auto";static const  UH="stop";static const  ZF="once";} QH( g){if(g is bool){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a bool.");}}final  YF=new IE<ED>();final  aF=new IE<OF>(); jB( g){if(g is int){return g;}else{throw new ArgumentError("The supplied value (${g}) is not an int.");}}class bF{var target=null;var GC=false;var NE=0;var HD=0;var vF,xF;var tF,uF;bF(this.vF,this.xF,this.tF,this.uF);}final  cF=new IE<TF>(); aH( g){if(g is num){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a number.");}}class IE<zC extends PD>{final  mK=[] ;ME( g){mK.add(g);}dispatchEvent( g){var j=mK;var k=mK.length;for(int h=0;h<k;h++ ){var i=j[h];if(i.SN){g.IL=i.IL;g.NO=i.IL;g.LO=wB.bC;g.OO=false;g.RO=false;i.dispatchEvent(g);}else{j.removeAt(h);k-- ;h-- ;}}}}class dB{final  UE;var iD=double.NAN;var kD=double.NAN;dB(this.UE); dC( g){this.kD=g.toDouble();} get eI=>!iD.isNaN&&!kD.isNaN; UO( g){switch (UE){case 'x':return g.x;case 'y':return g.y;case 'pivotX':return g.HC;case 'pivotY':return g.QC;case 'scaleX':return g.SC;case 'scaleY':return g.TC;case 'skewX':return g.skewX;case 'skewY':return g.skewY;case 'rotation':return g.RC;case 'alpha':return g.alpha;default:return 0.0;}} iO( g, h){switch (UE){case 'x':g.x=h;break;case 'y':g.y=h;break;case 'pivotX':g.HC=h;break;case 'pivotY':g.QC=h;break;case 'scaleX':g.SC=h;break;case 'scaleY':g.TC=h;break;case 'skewX':g.skewX=h;break;case 'skewY':g.skewY=h;break;case 'rotation':g.RC=h;break;case 'alpha':g.alpha=h;break;}}}class dH{static var eH=0;var lD=eH++ ;var target=null;var eD=false;dH(this.target,this.eD);} eF( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);}class XJ extends kC{final  aO;XJ( i, g, h, j):aO=new u(i,g,h,j);IO(){sL.rect(aO.x,aO.y,aO.width,aO.height);}}class yB extends TB{static var XD=DI;var DO;var sL;var eO,gO;var hO;var jO,lO;var mO;var oO;var pO;var qO;var YK;var rO;var sO;var tO;var uO;var vO;var wO;var xO;var yO;var zO;var BP;var CP;var DP;yB( k, g,[ j, i, h]){if(g is !hB.CanvasElement){throw new ArgumentError("The canvas argument is not a CanvasElement");}if(g.tabIndex==-1)g.tabIndex=0;if(g.style.outline=="")g.style.outline="none";sK=k;DO=g;DO.focus();sL=g.context2D;eO=(j!=null)?j:g.width;gO=(i!=null)?i:g.height;hO=(h!=null)?h:30;jO=-1;lO=-1;mO=new u.rJ();oO=new DB.vJ();pO=new DB.vJ();JP();qO=null;YK=new BD();sO=new iB.zJ(sL);tO=FD.zD;uO=wC.EF;vO=cB.HE;zO=[new bF(BB.AF,BB.FF,BB.uE,BB.jG),new bF(BB.LH,BB.PH,BB.WF,BB.WF),new bF(BB.VH,BB.XH,BB.XF,BB.XF)];wO=bB.BE;yO=null;xO=new GB(0,0);CP=new BB(BB.uE,true);XC.EH.listen(EH);DO.onMouseDown.listen(LP);DO.onMouseUp.listen(LP);DO.onMouseMove.listen(LP);DO.onMouseOut.listen(LP);DO.onMouseWheel.listen(MP);BP=new Map<int,dH>();DP=new MB(MB.tE,true);CF.SH.listen(NP);NP(null);DO.onKeyDown.listen(OP);DO.onKeyUp.listen(OP);DO.onKeyPress.listen(OP);} get VE=>qO; get SE=>YK; get dD=>xO; get focus=>rO; get align=>vO;TP(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){TP();}set y( g){TP();}set HC( g){TP();}set QC( g){TP();}set SC( g){TP();}set TC( g){TP();}set skewX( g){TP();}set skewY( g){TP();}set RC( g){TP();}set alpha( g){TP();}set width( g){TP();}set height( g){TP();}fI( g, h){if(tO==FD.zD||tO==FD.ZF){JP();sO.reset(pO,g,h);UB(sO);if(tO==FD.ZF)tO=FD.UH;}}JP(){var w=DO.getBoundingClientRect();var FB=DO.clientLeft+w.left;var AB=DO.clientTop+w.top;var h=DO.clientWidth;var j=DO.clientHeight;var o=eO;var t=gO;if(h is !num)throw "dart2js_hint";if(j is !num)throw "dart2js_hint";if(o is !num)throw "dart2js_hint";if(t is !num)throw "dart2js_hint";if(h==0||j==0)return;var i=1.0;var g=1.0;var k=0.0;var m=0.0;var n=h/o;var l=j/t;switch (uO){case wC.aG:i=n;g=l;break;case wC.hG:i=g=(n>l)?n:l;break;case wC.qG:i=g=1.0;break;case wC.EF:i=g=(n<l)?n:l;break;}switch (vO){case cB.NH:case cB.HF:case cB.PF:k=(h-o*i);break;case cB.JH:case cB.HE:case cB.LF:k=(h-o*i)/2;break;}switch (vO){case cB.AH:case cB.LF:case cB.PF:m=(j-t*g);break;case cB.eG:case cB.HE:case cB.HF:m=(j-t*g)/2;break;}var q=mO;q.x=-k/i;q.y=-m/g;q.width=h/i;q.height=j/g;var s=(yB.XD?GD:1.0)/oC;pO.gD(i,0.0,0.0,g,k,m);pO.scale(s,s);oO.gD(1.0,0.0,0.0,1.0,-FB-k,-AB-m);oO.scale(1.0/i,1.0/g);if(jO!=h||lO!=j){jO=h;lO=j;DO.width=(jO*s).round();DO.height=(lO*s).round();if(DO.clientWidth!=h||DO.clientHeight!=j){DO.style.width="${h}px";DO.style.height="${j}px";}dispatchEvent(new EB(EB.FH));}}EH( g){DO.style.cursor=XC.dF(wO);}LP( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var q=j.button;var g=null;var i=oO.fO(j.client);var m=null;if(q<0||q>2)return;if(j.type=="mousemove"&&xO.PE(i))return;var h=zO[q];xO=i;if(XC.zE!=null)XC.zE.MO();if(j.type!="mouseout")g=lB(i.x,i.y) as JB;var k=bB.BE;if(g is xC&&(g as xC).ZE){k=bB.DE;}if(g is pE&&(g as pE).ZE){k=bB.DE;}if(g is mE&&(g as mE).type==jC.AD){k=bB.GF;}if(wO!=k){wO=k;DO.style.cursor=XC.dF(k);}if(yO!=null&&yO!=g){yO.dispatchEvent(CP..JO(BB.MF,true)..bO=(yO.UC!=null)?yO.OC(i):new GB.rJ()..cO=i..PO=h.GC);yO=null;}if(g!=null&&g!=yO){g.dispatchEvent(CP..JO(BB.QF,true)..bO=g.OC(i)..cO=i..PO=h.GC);yO=g;}var l=null;var o=false;var s=false;if(j.type=="mousedown"){DO.focus();l=h.vF;if(g!=h.target||n>h.NE+500)h.HD=0;h.GC=true;h.target=g;h.NE=n;h.HD++ ;}if(j.type=="mouseup"){l=h.xF;h.GC=false;o=(h.target==g);s=o&&h.HD.isEven&&(n<h.NE+500);}if(j.type=="mousemove"){l=BB.KF;}if(l!=null&&g!=null){m=g.OC(i);g.dispatchEvent(CP..JO(l,true)..bO=m..cO=i..PO=h.GC..WO=h.HD);if(o){if(s&&g.UI){g.dispatchEvent(CP..JO(h.uF,true)..bO=m..cO=i..PO=h.GC);}else{g.dispatchEvent(CP..JO(h.tF,true)..bO=m..cO=i..PO=h.GC);}}}}MP( h){var g=oO.fO(h.client);var i=lB(g.x,g.y) as JB;if(i!=null){i.dispatchEvent(CP..JO(BB.RF,true)..bO=i.OC(g)..cO=g..XO=h.deltaX..ZO=h.deltaY);if(CP.jD)h.preventDefault();}}var XP=[] ;NP( h){XP.forEach((g)=>g.cancel());if(CF.cH==kE.oG){XP=[DO.onTouchStart.listen(YP),DO.onTouchEnd.listen(YP),DO.onTouchMove.listen(YP),DO.onTouchEnter.listen(YP),DO.onTouchLeave.listen(YP),DO.onTouchCancel.listen(YP)];}}YP( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=oO.fO(m.client);var h=lB(i.x,i.y) as JB;var g=BP.containsKey(l)?BP[l]:new dH(h,BP.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(DP..JO(MB.CH,true)..bO=(g.target.UC!=null)?g.target.OC(i):new GB.rJ()..cO=i..tN=g.lD..vN=g.eD);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(DP..JO(MB.xG,true)..bO=h.OC(i)..cO=i..tN=g.lD..vN=g.eD);g.target=h;}var k=null;if(j.type=="touchstart"){DO.focus();BP[l]=g;k=MB.tE;}if(j.type=="touchend"){BP.remove(l);k=MB.yE;}if(j.type=="touchcancel"){BP.remove(l);k=MB.BF;}if(j.type=="touchmove"){k=MB.IF;}if(k!=null&&h!=null){h.dispatchEvent(DP..JO(k,true)..bO=h.OC(i)..cO=i..tN=g.lD..vN=g.eD);}}}OP( g){if(g.keyCode==8){g.preventDefault();}if(rO==null){return;}if(g.type=="keypress"){var j=g.charCode;var k=g.keyCode;if(k==13)j=13;if(j==0)return;var l=new yC(yC.wE,true)..bK=new String.fromCharCodes([j]);rO.dispatchEvent(l);}else{var h=iC.ZG;var i="";if(g.type=="keyup")i=EC.xE;if(g.type=="keydown")i=EC.vE;if(g.keyLocation==hB.KeyLocation.LEFT)h=iC.eG;if(g.keyLocation==hB.KeyLocation.RIGHT)h=iC.HF;if(g.keyLocation==hB.KeyLocation.NUMPAD)h=iC.pG;if(g.keyLocation==hB.KeyLocation.JOYSTICK)h=iC.DF;if(g.keyLocation==hB.KeyLocation.MOBILE)h=iC.DF;var m=new EC(i,true)..XM=g.altKey..fM=g.ctrlKey..kM=g.shiftKey..GN=g.charCode..LN=g.keyCode..PN=h;rO.dispatchEvent(m);}}} gH( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";}class YJ extends kC{final  nO;YJ( i, g, h):nO=new WG(i,g,h);IO(){sL.arc(nO.x,nO.y,nO.DG,0,LC.PI*2.0,false);}} nH(){var g=new hB.CanvasElement(width:1,height:1);g.context2D.fillStyle="#000000";g.context2D.fillRect(0,0,1,1);var i=g.context2D.getImageData(0,0,1,1).data;var h=(i[0]==0);return h;}class ZJ extends kC{final  AP;ZJ( g):AP=g.toList(growable:false){if(g.length<3){throw new ArgumentError("A custom mask needs at least 3 points.");}}IO(){for(int g=0;g<AP.length;g++ ){sL.lineTo(AP[g].x,AP[g].y);}sL.lineTo(AP[0].x,AP[0].y);}} pH(){var i=new LB.Completer<bool>();var g=new hB.ImageElement(); h(){i.complete(g.width==2&&g.height==2);}g.onLoad.listen((j)=>h());g.onError.listen((j)=>h());g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return i.future;} qH( h){if(cC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];h[g+0]=(h[g+0]*i)~/255;h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;h[g+3]=(h[g+3]*i)~/255;}}}class YD implements oB{final  FP;final  KN;final  GP=new List<dB>();var VN;var YN;var bN;var HP;var TL;var DL;var gN;var iN;var lN;YD( g, i,[ h=FC.nC]):FP=g,KN=h{HP=new nE(this);DL=0.0;TL=LC.max(0.0001,i);gN=0.0;iN=false;lN=false;} get pC=>HP; mL( g){if(FP!=null&&lN==false){GP.add(g);}} complete(){if(TL>=DL)zB(TL-DL);} zB( m){if(DL<TL||lN==false){DL=DL+m;if(DL>TL){DL=TL;}if(DL>=0.0){if(lN==false){lN=true;for(int h=0;h<GP.length;h++ ){var g=GP[h];g.iD=g.UO(FP);}if(VN!=null){VN();}}var k=DL/TL;var l=KN(k).toDouble();for(int h=0;h<GP.length;h++ ){var g=GP[h];if(g.eI){var i=g.iD.toDouble();var n=g.kD.toDouble();var j=i+l*(n-i);g.iO(FP,iN?j.round():j);}}if(YN!=null){YN();}if(bN!=null&&DL==TL){bN();}}}return DL<TL;} get TI=>FP; get currentTime=>DL; set yF( g()){YN=g;} set onComplete( g()){bN=g;}} rH( h){if(cC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];if(i>0){h[g+0]=(h[g+0]*255)~/i;h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;}}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];if(i>0){h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;h[g+3]=(h[g+3]*255)~/i;}}}}final  cC=nH();final  vH=pH();final  ZD=new VG<List<v>>(()=>new List<v>());final  JE=new DB.vJ(); KE( g, m, n, j){m=m.toDouble();n=n.toDouble();var HB=0.0;var FB=0.0;var s=m*g.a;var AB=m*g.b;var t=m*g.a+n*g.c;var q=m*g.b+n*g.d;var w=n*g.c;var o=n*g.d;var h=HB;if(h>s)h=s;if(h>t)h=t;if(h>w)h=w;var i=FB;if(i>AB)i=AB;if(i>q)i=q;if(i>o)i=o;var l=HB;if(l<s)l=s;if(l<t)l=t;if(l<w)l=w;var k=FB;if(k<AB)k=AB;if(k<q)k=q;if(k<o)k=o;if(j==null)j=new u.rJ();j.x=g.mB+h;j.y=g.nB+i;j.width=l-h;j.height=k-i;return j;}final  wH=new hB.CanvasElement(width:16,height:16);final  gF=wH.context2D;final  oC=gF.backingStorePixelRatio==null?1.0:gF.backingStorePixelRatio.toDouble();final  GD=hB.window.devicePixelRatio==null?1.0:hB.window.devicePixelRatio;final  zH=((){var g=hB.window.navigator.userAgent.toLowerCase();return g.indexOf("iphone")>=0||g.indexOf("ipad")>=0||g.indexOf("ipod")>=0||g.indexOf("android")>=0||g.indexOf("webos")>=0||g.indexOf("windows phone")>=0;})();final  AI=hB.window.screen==null?1024:LC.max(hB.window.screen.width,hB.window.screen.height);final  DI=GD>1.0&&(!zH||AI>480);//@ sourceMappingURL=stagexl_demos.dart.map
