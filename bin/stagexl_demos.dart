import "dart:async" as OB;import "dart:web_audio" as OE;import "dart:json" as FI;import "dart:html" as WB;import "dart:math" as OC;class GI{static const  HI="Chrome";static const  II="Firefox";static const  JI="Internet Explorer";static const  KI="Safari";final  aH;final  minimumVersion;const GI(this.aH,[this.minimumVersion]);}class LI{final  name;const LI(this.name);}class OI extends RB{final  NJ=[{'name':'DropShadowFilter (black)','filter':new ZI(10,OC.PI/4,pB.HD,0.8,8,8)},{'name':'GlowFilter (red)','filter':new XI(pB.EF,1.0,20,20)},{'name':'ColorMatrixFilter (grayscale)','filter':new YI.HJ()},{'name':'ColorMatrixFilter (invert)','filter':new YI.JJ()},{'name':'BlurFilter (radius 1)','filter':new aI(1,1)},{'name':'BlurFilter (radius 5)','filter':new aI(5,5)},{'name':'BlurFilter (radius 10)','filter':new aI(10,10)},{'name':'BlurFilter (radius 20)','filter':new aI(20,20)}];OI(){var m=new CB(940,500,true,0x000000);var k=QB.YC('king');var o=new CB(230,245,true,0xFFF0F0F0);var p=new PE(m);JB(p);for(int h=0;h<NJ.length;h++ ){var i=235*(h%4);var j=250*(h~/4);var q=NJ[h]['filter'] as hB;var t=NJ[h]['name'] as String;var u=new BB(0,0,k.width,k.height);var n=new AB(i+40,j+45);m.ZH(k,u,n,q);var l=new PE(o);l.x=i;l.y=j;tD(l,0);var g=new dI();g.HC=new dD('Helvetica Neue, Helvetica, Arial',14,pB.HD);g.x=i+5;g.y=j+5;g.width=200;g.text=t;JB(g);}}}class NI extends RB{final  MJ=new OC.Random();NI(){var g=new nC();g.CC=470;g.JC=250;g.x=470;g.y=250;JB(g);for(int h=0;h<150;h++ ){var w=1+MJ.nextInt(3);var p=QB.YC('flower${w}');var i=new PE(p);i.CC=64;i.JC=64;i.x=64+MJ.nextInt(940-128);i.y=64+MJ.nextInt(500-128);g.JB(i);var o=new KD(i,600,VC.JD);o.iC.KC.aC(OC.PI*60.0);ZB.add(o);}var k=new List<AB>();for(int h=0;h<6;h++ ){var n=(h*60)*OC.PI/180;var m=(h*60+30)*OC.PI/180;k.add(new AB(470+200*OC.cos(n),250+200*OC.sin(n)));k.add(new AB(470+100*OC.cos(m),250+100*OC.sin(m)));}var t=new oC.BJ(100,100,740,300);var u=new oC.DJ(470,250,200);var q=new oC.EJ(k);WB.query('#mask-none').onClick.listen((j)=>g.mask=null);WB.query('#mask-rectangle').onClick.listen((j)=>g.mask=t);WB.query('#mask-circle').onClick.listen((j)=>g.mask=u);WB.query('#mask-custom').onClick.listen((j)=>g.mask=q);WB.query('#mask-spin').onClick.listen((j){var l=new KD(g,2.0,VC.WH);l.iC.KC.aC(OC.PI*4.0);l.onComplete=()=>g.KC=0.0;ZB.add(l);});}}class MI extends RB{var MJ=new OC.Random();var PJ;var QJ;MI(){PJ=QB.NF('walkTextureAtlas');QJ=PJ.kH('walk');SJ();}SJ(){var h=MJ.nextDouble();var g=new hF(QJ,30);g.x=-128;g.y=20.0+180.0*h;g.LC=g.MC=0.5+0.5*h;g.play();JB(g);CI((k,j)=>(k.y-j.y).toInt());var i=new KD(g,5.0+(1.0-h)*5.0,VC.JD);i.iC.x.aC(940.0);i.onComplete=(){ZB.remove(g);YF(g);};ZB.add(g);ZB.add(i);ZB.cH(SJ,0.2);}}class TI extends PE implements zB{var XD,YD;TI( g,this.XD,this.YD):super(g){this.CC=g.width/2;this.JC=g.height/2;} GC( i){var g=x+XD*i;var h=y+YD*i;if(g>910||g<30)XD=-XD;else x=g;if(h>470||h<30)YD=-YD;else y=h;return true;}}class SI extends RB{final  OJ=['C4','A3','A3','C4','D4','G3','G3','A3','A3#','F4','F4','E4','C4','D4','C4','A3#','A3','C4','D4','D4','D4','G4','F4','E4','F4','D4','C4','F3','G3','A3','D4','C4','C4','A3#','A3','E3','F3'];final  RJ=['Hey ','Jude, ',"don't ",'make ','it ','bad.<br>','Take ','a ','sad ','song ','and ','make ','it ','better.<br>','','','','Remember ','','','to ','let ','her ','into ','','your ','heart.<br>','Than ','you ','can ','start ','','to ','make ','things ','better.','',' '];SI(){var h=new PE(QB.YC('Background'));JB(h);var g=new cF(OJ,RJ);g.x=120;g.y=30;JB(g);WB.query('#startOver').onClick.listen((i)=>g.AI());}}class RI extends RB{final  text='Filet mignon leberkas pig pork chop biltong, short loin strip steak turkey brisket ' 'venison. Pastrami venison pancetta, leberkas pork chop chicken prosciutto beef ribs ' 'bresaola kielbasa swine biltong capicola. Hamburger beef ribs ball tip drumstick salami ' 'pig. Capicola pork loin shank, salami chicken hamburger tail. Sirloin spare ribs ' 'ground round cow strip steak prosciutto swine bacon corned beef.';RI(){var j=new dI();j.HC=new dD('Helvetica,Arial',14,pB.JH,bold:true,italic:true);j.text=text;j.x=10;j.y=10;j.width=920;j.height=20;JB(j);var h=new dI();h.HC=new dD('Helvetica,Arial',16,pB.EF);h.text=text;h.x=10;h.y=50;h.width=200;h.height=300;h.wordWrap=true;JB(h);var g=new dI();g.HC=new dD('Helvetica,Arial',16,pB.cG,align:TC.lE);g.text=text;g.x=300;g.y=50;g.width=200;g.height=300;g.wordWrap=true;JB(g);var i=new dI();i.HC=new dD('Caesar Dressing',30,pB.HD,align:TC.jD);i.text=text;i.x=590;i.y=50;i.width=340;i.height=300;i.wordWrap=true;JB(i);}}class QI extends RB{QI(){var g=new dI();g.HC=new dD('Helvetica,Arial',14,pB.wG,bold:true);g.text='ToDo: show a cool demo ...';g.x=10;g.y=10;g.width=920;g.height=20;JB(g);}}var wB;var ZD;var ZB;var QB; main(){CB.rE.webp=true;var k=WB.window.location.pathname;var j=new RegExp(r"([A-Za-z0-9-]+)\.html",multiLine:false,caseSensitive:false);var g=j.firstMatch(k);if(g!=null&&g.groupCount==1){var h=g.group(1);print("current page: ${h}");var i=WB.query("#stage");if(i!=null){wB=new tB('stage',i);ZD=new fD();ZD.YH(wB);ZB=ZD.xD;QB=new SE();}switch (h){case "filter":QB..jB('king','images/king.png')..load().then((YJ)=>wB.JB(new OI()));break;case "masking":QB..jB('flower1','images/Flower1.png')..jB('flower2','images/Flower2.png')..jB('flower3','images/Flower3.png')..load().then((YJ)=>wB.JB(new NI()));break;case "flipbook":QB..FF('walkTextureAtlas','images/walk.json',FD.mD)..load().then((YJ)=>wB.JB(new MI()));break;case "performance":QB..FF('flags','images/flags.json',FD.mD)..load().then((YJ)=>wB.JB(new UI()));break;case "sound":QB..jB('KeyBlack','images/piano/KeyBlack.png')..jB('KeyWhite0','images/piano/KeyWhite0.png')..jB('KeyWhite1','images/piano/KeyWhite1.png')..jB('KeyWhite2','images/piano/KeyWhite2.png')..jB('KeyWhite3','images/piano/KeyWhite3.png')..jB('Finger','images/piano/Finger.png')..jB('Background','images/piano/Background.jpg')..HB('Cheer','sounds/Cheer.mp3')..HB('Note1','sounds/piano/Note1.mp3')..HB('Note2','sounds/piano/Note2.mp3')..HB('Note3','sounds/piano/Note3.mp3')..HB('Note4','sounds/piano/Note4.mp3')..HB('Note5','sounds/piano/Note5.mp3')..HB('Note6','sounds/piano/Note6.mp3')..HB('Note7','sounds/piano/Note7.mp3')..HB('Note8','sounds/piano/Note8.mp3')..HB('Note9','sounds/piano/Note9.mp3')..HB('Note10','sounds/piano/Note10.mp3')..HB('Note11','sounds/piano/Note11.mp3')..HB('Note12','sounds/piano/Note12.mp3')..HB('Note13','sounds/piano/Note13.mp3')..HB('Note14','sounds/piano/Note14.mp3')..HB('Note15','sounds/piano/Note15.mp3')..HB('Note16','sounds/piano/Note16.mp3')..HB('Note17','sounds/piano/Note17.mp3')..HB('Note18','sounds/piano/Note18.mp3')..HB('Note19','sounds/piano/Note19.mp3')..HB('Note20','sounds/piano/Note20.mp3')..HB('Note21','sounds/piano/Note21.mp3')..HB('Note22','sounds/piano/Note22.mp3')..HB('Note23','sounds/piano/Note23.mp3')..HB('Note24','sounds/piano/Note24.mp3')..HB('Note25','sounds/piano/Note25.mp3')..load().then((YJ)=>wB.JB(new SI()));break;case "text":wB.JB(new RI());break;case "tweener":wB.JB(new QI());break;}}}class UI extends RB{UI(){TJ(250);WB.query('#minus10').onClick.listen((g)=>UJ(10));WB.query('#minus50').onClick.listen((g)=>UJ(50));WB.query('#plus50').onClick.listen((g)=>TJ(50));WB.query('#plus10').onClick.listen((g)=>TJ(10));this.sH.listen(VJ);}var WJ=null;VJ( g){if(WJ==null){WJ=1.00/g.TF;}else{WJ=0.05/g.TF+0.95*WJ;}WB.query('#fpsMeter').innerHtml='fps: ${WJ.round()}';}TJ( l){var g=new OC.Random();var i=QB.NF('flags');var j=i.hH;while ( --l>=0){var k=j[g.nextInt(j.length)];var m=i.YC(k);var h=new TI(m,g.nextInt(200)-100,g.nextInt(200)-100);h.x=30+g.nextInt(940-60);h.y=30+g.nextInt(500-60);JB(h);ZB.add(h);}WB.query('#flagCounter').innerHtml='Flags: ${yD}';}UJ( h){while ( --h>=0&&yD>0){var g=lH(0);g.ZF();ZB.remove(g);}WB.query('#flagCounter').innerHtml='Flags: ${yD}';}}class cF extends RB{final  lC;final  kC;final  XJ=['C3','C3#','D3','D3#','E3','F3','F3#','G3','G3#','A3','A3#','B3','C4','C4#','D4','D4#','E4','F4','F4#','G4','G4#','A4','A4#','B4','C5'];var ZJ=new Map<String,dF>();var aJ;var bJ=0;cF(this.lC,this.kC){for(int h=0,i=0;h<XJ.length;h++ ){var k=QB.MF('Note${h+1}');var j=XJ[h];var g=ZJ[j]=new dF(this,j,k);if(j.endsWith('#')){g.x=i-16;g.y=35;JB(g);}else{g.x=i;g.y=35;tD(g,0);i=i+47;}}aJ=new PE(QB.YC('Finger'));aJ.CC=20;JB(aJ);cJ();}bH( g){if(bJ<lC.length&&lC[bJ]==g){if(bJ==lC.length-1)QB.MF('Cheer').play();bJ++ ;cJ();}}AI(){bJ=0;aJ.alpha=1;cJ();}cJ(){var h=WB.query('#lyrics');var m=-1;h.innerHtml='';for(int g=0,j=0;g<kC.length;g++ ){if(kC[g]!='')j=g;if(g==this.bJ)m=j;}for(int g=0;g<kC.length;g++ ){if(g==m){h.appendHtml('<span id="word">${kC[g]}</span>');}else{h.appendHtml(kC[g]);}}if(bJ<lC.length){var k=lC[bJ];if(ZJ.containsKey(k)){var i=ZJ[k];ZB.yH(aJ);aJ.y=0;var n=new KD(this.aJ,0.4,VC.HH);var l=new KD(this.aJ,0.4,VC.oG);n.iC.x.aC(i.x+i.width/2);l.iC.y.aC(-10);ZB.add(n);ZB.add(l);}}else{var o=new KD(aJ,0.4,VC.JD);o.iC.alpha.aC(0);ZB.add(o);}}}class dF extends nC{final  UF;final  cB;final  bF;dF(this.UF,this.cB,this.bF){var h;if(cB.endsWith('#')){h='KeyBlack';}else if(cB.startsWith('C5')){h='KeyWhite0';}else if(cB.startsWith('C')||cB.startsWith('F')){h='KeyWhite1';}else if(cB.startsWith('D')||cB.startsWith('G')||cB.startsWith('A')){h='KeyWhite2';}else if(cB.startsWith('E')||cB.startsWith('B')){h='KeyWhite3';}var i=QB.YC(h);var l=new PE(i);this.JB(l);var j=cB.endsWith('#')?pB.XH:pB.HD;var k=new dD('Helvetica,Arial',10,j,align:TC.jD);var g=new dI();g.HC=k;g.text=cB;g.width=i.width;g.height=20;g.RF=false;g.y=i.height-20;JB(g);this.GE=true;this.onMouseDown.listen(dJ);this.onMouseOver.listen(dJ);this.onMouseUp.listen(eJ);this.onMouseOut.listen(eJ);}dJ( g){if(g.BC){this.bF.play();this.alpha=0.7;this.UF.bH(this.cB);}}eJ( g){this.alpha=1.0;}}const VI=const WI();class WI{const WI();}class RE{static const  vE="none";static const  FG="touchPoint";}class FD{static const  rF="json";static const  mD="jsonarray";}class XB{var volume;var pan;var vI=1;var wI=0;var zI=1;var yI=0;XB([this.volume=1,this.pan=0]);}class fC{static var XG=rG();static var ID=AH();static var sE=BH();static  rG(){var h=(ID!=null)?"WebAudioApi":"AudioElement";var g=WB.window.navigator.userAgent;if(g.contains("IEMobile"))if(g.contains("9.0")||g.contains("10.0"))h="Mock";if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod"))if(g.contains("OS 3")||g.contains("OS 4")||g.contains("OS 5"))h="Mock";if(sE.length==0)h="Mock";print("StageXL: supported audio engine is: ${h}");return h;}static  AH(){if(OE.AudioContext.supported)return new OE.AudioContext();return null;}static  BH(){var g=new List<String>();var h=new WB.AudioElement();var i=["maybe","probably"];if(i.indexOf(h.canPlayType("audio/mpeg",""))!=-1)g.add("mp3");if(i.indexOf(h.canPlayType("audio/mp4",""))!=-1)g.add("mp4");if(i.indexOf(h.canPlayType("audio/ogg",""))!=-1)g.add("ogg");if(i.indexOf(h.canPlayType("audio/wav",""))!=-1)g.add("wav");print("StageXL: supported audio types are: ${g}");return g;}static  DF( i, h){var l=new RegExp(r"(mp3|mp4|ogg|wav)$",multiLine:false,caseSensitive:true);var g=sE.toList();var k=l.firstMatch(i);var j=new List<String>();if(k==null){throw new ArgumentError("Unsupported file extension.");}if(g.length==0){throw new UnsupportedError("This browser supports no known audio codec.");}if(!h.mp3)g.remove("mp3");if(!h.mp4)g.remove("mp4");if(!h.ogg)g.remove("ogg");if(!h.wav)g.remove("wav");var m=k.group(1);if(g.contains(m)){j.add(i);g.remove(m);}for(var n in g){j.add(i.replaceAll(l,n));}return j;}}class eD extends fB{var zJ;var RK;var nK;eD(){nK=new List<DD>();zJ=new WB.AudioElement();zJ.onEnded.listen(eL);RK=new List<WB.AudioElement>();RK.add(zJ);WB.document.body.children.add(zJ);}static  hC( k,[ soundLoadOptions=null]){if(soundLoadOptions==null)soundLoadOptions=fB.rE;var m=new eD();var g=m.zJ;var h=fC.DF(k,soundLoadOptions);var i=new OB.Completer<fB>();if(h.length==0){return QC.hC(k,soundLoadOptions);}var j;var l;q(o){j.cancel();l.cancel();i.complete(m);}n(o){if(h.length>0){g.src=h.removeAt(0);g.load();}else{j.cancel();l.cancel();if(soundLoadOptions.ignoreErrors){QC.hC(k,soundLoadOptions).then((p)=>i.complete(p));}else{i.completeError(new StateError("Failed to load audio."));}}}j=g.onCanPlayThrough.listen(q);l=g.onError.listen(n);g.src=h.removeAt(0);g.load();return i.future;} get length{return zJ.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new XB();return new DD(this,loop,soundTransform);} uL( h){var g;if(RK.length==0){g=zJ.clone(true);g.onEnded.listen(eL);}else{g=RK.removeAt(0);}nK.add(h);return g;} DN( g){var h=g.zJ;var i=nK.indexOf(g);nK.removeAt(i);RK.add(h);if(zJ.currentTime>0&&zJ.ended==false)zJ.currentTime=0;} eL( j){var i=j.target;var g=null;for(int h=0;h<nK.length&&g==null;h++ )if(nK[h].zJ==i)g=nK[h];if(g!=null)g.stop();}}class DD extends PC{var NK;var zJ;var vJ;var OK;DD( g, i, h){NK=g;vJ=i;OK=h;zJ=g.uL(this);zJ.loop=vJ;this.TD=h;zJ.play();} set TD( g){OK=g;if(zJ!=null)zJ.volume=(OK!=null)?OK.volume:1;} stop(){if(zJ!=null){if(zJ.ended==false)zJ.pause();NK.DN(this);zJ=null;}}}class cD extends fB{var wJ;cD(){if(fC.ID==null)throw new UnsupportedError("This browser does not support Web Audio API.");}static  hC( h,[ soundLoadOptions=null]){if(soundLoadOptions==null)soundLoadOptions=fB.rE;var l=new cD();var g=new OB.Completer<fB>();var i=fC.DF(h,soundLoadOptions);var p=fC.ID;if(i.length==0){return QC.hC(h,soundLoadOptions);}q(m){p.decodeAudioData(m.response,( o){l.wJ=o;g.complete(l);},(n){if(soundLoadOptions.ignoreErrors){QC.hC(h,soundLoadOptions).then((j)=>g.complete(j));}else{g.completeError(new StateError("Failed to decode audio."));}});}k(n){if(i.length>0){WB.HttpRequest.request(i.removeAt(0),responseType:'arraybuffer').then(q).catchError(k);}else{if(soundLoadOptions.ignoreErrors){QC.hC(h,soundLoadOptions).then((j)=>g.complete(j));}else{g.completeError(new StateError("Failed to load audio."));}}}k(null);return g.future;} get length{return wJ.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new XB();return new bI(this,loop,soundTransform);}}class bI extends PC{var LK;var OK;var vJ;var xK;var HL;bI( j, h, i){LK=j;vJ=h;OK=i;var g=fC.ID;xK=g.createGain();xK.connect(g.destination,0,0);xK.gain.value=(OK!=null)?OC.pow(OK.volume,2):1;HL=g.createBufferSource();HL.buffer=LK.wJ;HL.loop=h;HL.connect(xK,0,0);HL.start(0);} set TD( g){OK=g;xK.gain.value=(OK!=null)?OC.pow(OK.volume,2):1;} stop(){HL.stop(0);}}class QC extends fB{QC(){}static  hC( g,[ soundLoadOptions=null]){return new OB.Future<fB>.value(new QC());} get length{return double.NAN;} play([ loop=false, soundTransform]){if(soundTransform==null){soundTransform=new XB();}return new cI(this,loop,soundTransform);}}class cI extends PC{var vJ;var OK;cI( i, h, g){vJ=h;OK=g;}set TD( g){OK=g;} stop(){}}class rB{static const  YE=1;static const  UC=2;static const  DG=3;}class iF{static const  wF="pixel";}class dI extends IB{var xJ="";var JK=0x000000;var dK=null;var sK=mF.vE;var IL=iF.wF;var TL=jF.qF;var aL=false;var fL=false;var iL=0x000000;var nL=false;var rL=0x000000;var vL=0;var yL=0;var CM;var JM;var OM=true;var RM=100;var SM=100;var WM=null;var mL=null;dI([ text, textFormat]){if(text!=null)xJ=text;if(textFormat!=null)HC=textFormat;else dK=new dD("Arial",12,0x000000);CM=new List<String>();JM=new List<eF>();} get text=>xJ; get type=>TL; get width=>RM; get height=>SM; set text( g){xJ=g;OM=true;} set HC( g){dK=g;JK=dK.color;OM=true;} set wordWrap( g){aL=g;OM=true;} set width( g){RM=g;OM=true;} set height( g){SM=g;OM=true;} kB( g,[ returnRectangle]){return sD(g,RM,SM,returnRectangle);} iB( g, h){if(g>=0&&h>=0&&g<RM&&h<SM)return this;return null;} KB( h){BO();if(tB.AC!=1.0){var g=1.0/tB.AC;h.mL.scale(g,g);}h.mL.drawImage(WM,0.0,0.0);} FO( o){var n=CG(o);CM.clear();JM.clear();if(aL==false){for(String h in xJ.replaceAll('\r','').split('\n'))CM.add(h);}else{for(String h in xJ.replaceAll('\r','').split('\n')){var g='';for(String j in h.split(' ')){var m=g;g=(g.length==0)?j:g+' '+j;if(mL.measureText(g).width>RM){if(m.length==0){CM.add(g);g='';}else{CM.add(m);g=j;}}}if(g.isEmpty==false){CM.add(g);}}}vL=0;yL=0;for(String g in CM){var k=mL.measureText(g);var l=0.0;if(dK.align==TC.jD||dK.align==TC.EG)l=(RM-k.width)/2;if(dK.align==TC.lE||dK.align==TC.xF)l=RM-k.width;var i=new eF(l,k.width,dK.size,n.uC,n.OD,0);JM.add(i);vL=OC.max(vL,i.width);yL=yL+i.height;}} BO(){if(OM){OM=false;var g=tB.AC;var i=(RM*g).ceil().toInt();var j=(SM*g).ceil().toInt();if(WM==null){WM=new WB.CanvasElement(width:i,height:j);mL=WM.context2D;mL.scale(g,g);}if(WM.width!=i)WM.width=i;if(WM.height!=j)WM.height=j;var n=new StringBuffer()..write(dK.italic?"italic ":"normal ")..write("normal ")..write(dK.bold?"bold ":"normal ")..write("${dK.size}px ")..write("${dK.font},sans-serif");var k=n.toString();mL.font=k;mL.textAlign="start";mL.textBaseline="alphabetic";mL.fillStyle=sC(JK);FO(k);if(fL){mL.fillStyle=sC(iL);mL.fillRect(0,0,RM,SM);}else{mL.clearRect(0,0,RM,SM);}var l=dK.size;for(int h=0;h<CM.length;h++ ){var m=JM[h];mL.fillStyle=sC(JK);mL.fillText(CM[h],m.x,l);l+= m.height;}if(nL){mL.strokeStyle=sC(rL);mL.lineWidth=1;mL.strokeRect(0,0,RM,SM);}}}}class mF{static const  vE="none";}class jF{static const  qF="dynamic";}class dD{var font;var size;var color;var bold;var italic;var underline;var align;var leftMargin;var rightMargin;var indent;var leading;var letterSpacing=0;var iI=0;var jI=false;var uI=false;dD(this.font,this.size,this.color,{this.bold: false,this.italic: false,this.underline: false,this.align: "left",this.leftMargin: 0,this.rightMargin: 0,this.indent: 0,this.leading: 0});}class TC{static const  jD="center";static const  xF="end";static const  EG="justify";static const  lE="right";}class eF{var uC;var OD;var height;var leading;var width;var x;eF(this.x,this.width,this.height,this.uC,this.OD,this.leading);}class dC{static const  oF=0;static const  uF=1;static const  lE=2;static const  GG=3;static const  hE=4;}class RC{static var XE=gB.iD;static var vF=false;static var dE=null;static var IG=null;static var LG=null;static var SG=new OB.StreamController<String>();static var ZG=SG.stream.asBroadcastStream();static  AF( i){var h=i;var g="auto";if(XE!=gB.iD){h=XE;}switch (h){case gB.iD:g="auto";break;case gB.lD:g="default";break;case gB.oD:g="pointer";break;case gB.JG:g="move";break;case gB.KG:g="text";break;case gB.NG:g="wait";break;}if(vF){g="none";}return g;}}class gB{static const  iD="auto";static const  lD="arrow";static const  oD="button";static const  JG="hand";static const  KG="ibeam";static const  NG="wait";}class pB{static const  HD=0xFF000000;static const  cG=0xFF0000FF;static const  wG=0xFFA9A9A9;static const  JH=0xFF008000;static const  EF=0xFFFF0000;static const  XH=0xFFFFFFFF;}class ZI extends hB{var distance;var angle;var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;ZI([this.distance=4.0,this.angle=OC.PI/4,this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=1.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} clone(){return new ZI(distance,angle,color,alpha,blurX,blurY,strength,inner,knockout,hideObject);} apply( n, k, wC, GB){if(n==wC&&!hideObject){var lB=new CB(k.width,k.height);lB.IF(n,k,new AB.CJ());n=lB;k=new BB(0,0,n.width,n.height);}var mB=n.zM();var HE=mB.getImageData(k.x,k.y,k.width,k.height);var IE=HE.data;var p=k.width;var dB=k.height;var oB=blurX*blurX;var EC=blurY*blurY;var JE=(1<<22)~/oB;var KE=(1<<22)~/EC;var o=blurX;var xC=blurX*2;var PB=blurY;var cC=blurY*2;var VB=p+xC;var MB=dB+cC;var LE=p*4;var eB=VB*4;var LB=WC?3:0;var q=wC.zM();var vB=q.createImageData(VB,MB);var g=vB.data;var l=new List<int>(1024);for(int j=0;j<p;j++ ){var m=0,u=EC>>1;var t=j*4+LB;var w=(j+o)*4+LB;for(int i=0;i<MB;i++ ){g[w]=(u*KE)>>22;w+= eB;if(i>=cC){m-= 2*l[i&1023]-l[(i-PB)&1023];}else if(i>=PB){m-= 2*l[i&1023];}var DB=(i<dB)?IE[t]:0;l[(i+PB)&1023]=DB;u+= m+= DB;t+= LE;}}for(int i=0;i<MB;i++ ){var m=0,u=oB>>1;var t=i*eB+o*4+LB;var w=i*eB+LB;for(int j=0;j<VB;j++ ){g[w]=(u*JE)>>22;w+= 4;if(j>=xC){m-= 2*l[j&1023]-l[(j-o)&1023];}else if(j>=o){m-= 2*l[j&1023];}var DB=(j<p)?g[t]:0;l[(j+o)&1023]=DB;u+= m+= DB;t+= 4;}}var uB=(alpha*256).toInt();var bC=(color>>16)&0xFF;var yC=(color>>8)&0xFF;var nB=(color>>0)&0xFF;if(WC){for(var h=0;h<=g.length-4;h+= 4){g[h+0]=bC;g[h+1]=yC;g[h+2]=nB;g[h+3]=(g[h+3]*uB)>>8;}}else{for(var h=0;h<=g.length-4;h+= 4){g[h+0]=(g[h+0]*uB)>>8;g[h+1]=nB;g[h+2]=yC;g[h+3]=bC;}}var zC=GB.x;var DC=GB.y;var AD=GB.x-o+(this.distance*OC.cos(this.angle)).round().toInt();var BD=GB.y-PB+(this.distance*OC.sin(this.angle)).round().toInt();var ME=new BB(zC,DC,p,dB);var NE=new BB(AD,BD,VB,MB);var UB=ME.union(NE);q.setTransform(1,0,0,1,0,0);q.clearRect(UB.x,UB.y,UB.width,UB.height);q.putImageData(vB,AD,BD);if(this.hideObject==false)q.drawImage(mB.canvas,zC,DC);}}class YI extends hB{final  HK;YI( h):HK=new List<num>(20){if(h.length!=20)throw new ArgumentError("The supplied matrix needs to be a 4 x 5 matrix.");for(int g=0;g<h.length;g++ )HK[g]=h[g];}YI.HJ():HK=[0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0,0,0,1,0];YI.JJ():HK=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]; clone(){return new YI(HK);} apply( DC, m, EC, uB){var q=DC.zM().getImageData(m.x,m.y,m.width,m.height);var h=q.data;var lB=(HK[00]*65536).toInt();var PB=(HK[01]*65536).toInt();var vB=(HK[02]*65536).toInt();var p=(HK[03]*65536).toInt();var mB=(HK[04]*65536).toInt();var oB=(HK[05]*65536).toInt();var VB=(HK[06]*65536).toInt();var eB=(HK[07]*65536).toInt();var w=(HK[08]*65536).toInt();var n=(HK[09]*65536).toInt();var t=(HK[10]*65536).toInt();var u=(HK[11]*65536).toInt();var dB=(HK[12]*65536).toInt();var nB=(HK[13]*65536).toInt();var GB=(HK[14]*65536).toInt();var DB=(HK[15]*65536).toInt();var UB=(HK[16]*65536).toInt();var LB=(HK[17]*65536).toInt();var o=(HK[18]*65536).toInt();var MB=(HK[19]*65536).toInt();if(WC){for(int g=0;g<=h.length-4;g+= 4){var k=h[g+0];var l=h[g+1];var j=h[g+2];var i=h[g+3];h[g+0]=((lB*k)+(PB*l)+(vB*j)+(p*i)+mB)>>16;h[g+1]=((oB*k)+(VB*l)+(eB*j)+(w*i)+n)>>16;h[g+2]=((t*k)+(u*l)+(dB*j)+(nB*i)+GB)>>16;h[g+3]=((DB*k)+(UB*l)+(LB*j)+(o*i)+MB)>>16;}}else{for(int g=0;g<=h.length-4;g+= 4){var i=h[g+0];var j=h[g+1];var l=h[g+2];var k=h[g+3];h[g+0]=((DB*k)+(UB*l)+(LB*j)+(o*i)+MB)>>16;h[g+1]=((t*k)+(u*l)+(dB*j)+(nB*i)+GB)>>16;h[g+2]=((oB*k)+(VB*l)+(eB*j)+(w*i)+n)>>16;h[g+3]=((lB*k)+(PB*l)+(vB*j)+(p*i)+mB)>>16;}}EC.zM().putImageData(q,uB.x,uB.y);}}class SE{var FK;SE(){FK=new Map<String,ED>();} bL( g){var j=g.kind;var h=g.name;var i="${j}.${h}";if(FK.containsKey(i))throw new StateError("ResourceManager already contains a resource called '${h}'");FK[i]=g;} VM( i, g){var h="${i}.${g}";if(FK.containsKey(h)==false)throw new StateError("ResourceManager does not contains a resource called '${g}'");return FK[h];} jB( i, h,[ bitmapDataLoadOptions=null]){var g=new ED("BitmapData",i,h);g.ZM(CB.hC(h,bitmapDataLoadOptions));bL(g);} HB( i, h,[ soundFileSupport=null]){var g=new ED("Sound",i,h);g.ZM(fB.hC(h,soundFileSupport));bL(g);} FF( j, h, i){var g=new ED("TextureAtlas",j,h);g.ZM(yB.hC(h,i));bL(g);} load(){var h=this.vH.map((i)=>i.UK);return OB.Future.wait(h).then((j){var g=this.gH;if(g.length>0)throw new StateError("Failed to load ${g.length} resource(s).");return this;});} get vH{return FK.values.where((g)=>g.RD==null).toList();} get gH{return FK.values.where((g)=>g.error!=null).toList();} YC( g){return VM("BitmapData",g).RD;} MF( g){return VM("Sound",g).RD;} NF( g){return VM("TextureAtlas",g).RD;}}class ED{var oJ;var BK;var MK;var UK;var gK;var lK;ED( g, h, i){oJ=g;BK=h;MK=i;gK=null;lK=null;} get kind=>oJ; get name=>BK; get RD=>lK; get error=>gK;ZM( i){UK=i.then((g){lK=g;gK=null;},onError:(h){lK=null;gK=h;});}}class yB{final  uJ=new List<TE>();var cK;static  hC( n, w){var k=new OB.Completer<yB>();var g=new yB();switch (w){case FD.rF:case FD.mD:WB.HttpRequest.getString(n).then((t){var o=FI.parse(t);var h=o["frames"];var p=o["meta"];var GB=IH(n,p["image"]);if(h is List){for(var q in h){var j=q as Map;var i=j["filename"] as String;var l=CF(i);var m=new TE.FJ(g,l,j);g.uJ.add(m);}}if(h is Map){for(String i in h.keys){var j=h[i] as Map;var l=CF(i);var m=new TE.FJ(g,l,j);g.uJ.add(m);}}CB.hC(GB).then(( DB){g.cK=DB;k.complete(g);}).catchError((u){k.completeError(new StateError("Failed to load image."));});}).catchError((u){k.completeError(new StateError("Failed to load json file."));});break;}return k.future;} YC( h){for(int g=0;g<uJ.length;g++ )if(uJ[g].name==h)return new CB.LJ(uJ[g]);throw new ArgumentError("TextureAtlasFrame not found: '${h}'");} kH( i){var h=new List<CB>();for(int g=0;g<uJ.length;g++ )if(uJ[g].name.startsWith(i))h.add(new CB.LJ(uJ[g]));return h;} get hH{return uJ.map((g)=>g.name).toList(growable:false);}}class QE extends IB{QE();}class TE{final  sJ;final  BK;final  YK;final  iK;final  vK;final  DL;final  ML;final  RL;final  XL;final  ZL;final  dL;TE.FJ( i, h, g):sJ=i,BK=h,YK=qG(g["rotated"]),iK=FC(g["sourceSize"]["w"]),vK=FC(g["sourceSize"]["h"]),DL=FC(g["spriteSourceSize"]["x"]),ML=FC(g["spriteSourceSize"]["y"]),RL=FC(g["frame"]["x"]),XL=FC(g["frame"]["y"]),ZL=FC(g["frame"]["w"]),dL=FC(g["frame"]["h"]); get DI=>sJ; get name=>BK; get BI=>YK; get iH=>RL; get jH=>XL; get LF=>ZL; get KF=>dL; get offsetX=>DL; get offsetY=>ML; get uH=>iK; get tH=>vK;}class lF<rC>{final  mJ=new List<rC>();final  PK;var aK=0;lF( g()):PK=g; VF(){var g=aK;if(g is !int)throw "dart2js_hint";if(g==0){return PK();}else{aK=g-1;return mJ[aK];}}WF( h){var g=aK;if(g is !int)throw "dart2js_hint";if(g==mJ.length){mJ.add(h);}else{mJ[g]=h;}aK=g+1;}reset(){mJ.clear();aK=0;}}class gF{gF();}final  hD=new Map<String,uE>();abstract class PC extends xB{ set TD( g); stop();}abstract class hB{ clone(); apply( h, i, j, g);}class NB extends FB{static const  ZE="touchBegin";static const  cE="touchEnd";static const  fE="touchCancel";static const  mE="touchMove";static const  RG="touchOver";static const  VG="touchOut";var dM;var eM;var hM,iM;var jM,lM;var jL;var wL;var kL;var oL;var rM;var sM;var tM;NB( g,[ bubbles=false]):super(g,bubbles){TM(g,bubbles);} TM( g,[ bubbles=false]){super.TM(g,bubbles);dM=0;eM=false;hM=iM=0;jM=lM=0;jL=false;wL=false;kL=false;oL=false;rM=1.00;sM=0;tM=0;}set NN( g){hM=g.x;iM=g.y;}set ON( g){jM=g.x;lM=g.y;} get VD=>dM; get altKey=>jL; get ctrlKey=>kL; get shiftKey=>oL;}class WE extends FB{static const  zF="textInput";var xJ="";WE( g,[ bubbles=false]):super(g,bubbles); get text=>xJ;}final  GD=new lF<List<s>>(()=>new List<s>());class hF extends IB implements zB{var SK;var bK;var kK;var uK;var zK;var vJ;var JL;var PL;var XC;hF( g,[ frameRate=30, loop=true]){SK=g;bK=frameRate;kK=0;uK=null;zK=false;vJ=loop;JL=new FB(FB.yE);PL=new FB(FB.sG);XC=null;}static const  vG=const aB<FB>(FB.yE); get onProgress=>hF.vG.forTarget(this); get DE=>SK.length; set loop( g){vJ=g;} play(){zK=true;uK=null;} stop(){zK=false;uK=null;} GC( j){if(zK==false)return true;if(uK==null){uK=0.0;bM(JL,this,this,rB.UC);}else{uK+= j;var i=1.0/bK;while (zK&&uK>=i){var h=kK;var g=vJ?(h+1)%DE:OC.min(h+1,DE-1);kK=g;uK-= i;if(h!=g){bM(JL,this,this,rB.UC);if(kK!=g)return true;}if(h!=g&&g==DE-1&&vJ==false){bM(PL,this,this,rB.UC);if(kK!=g)return true;}}}return true;} kB( h,[ returnRectangle]){var g=SK[kK];return sD(h,g.width,g.height,returnRectangle);} iB( g, h){var i=SK[kK];if(g>=0&&h>=0&&g<i.width&&h<i.height)return this;return null;} KB( g){var h=SK[kK];if(XC==null)h.KB(g);else h.aF(g,XC);}}abstract class aD{ KB( g);}class bD{var png;var jpg;var webp;bD({this.png: true,this.jpg: true,this.webp: false});}class UE{final  FE;UE(this.FE);call( h, g){tK(h).aC(g);} get x=>tK("x"); get y=>tK("y"); get LC=>tK("scaleX"); get MC=>tK("scaleY"); get skewX=>tK("skewX"); get skewY=>tK("skewY"); get CC=>tK("pivotX"); get JC=>tK("pivotY"); get KC=>tK("rotation"); get alpha=>tK("alpha"); tK( h){var g=new bB(h);this.FE.tK(g);return g;}}class PE extends s{var bitmapData;var pixelSnapping;var XC;PE([this.bitmapData=null,this.pixelSnapping="auto"]){XC=null;} kB( h,[ returnRectangle]){var g=(bitmapData!=null)?bitmapData.width:0;var i=(bitmapData!=null)?bitmapData.height:0;return sD(h,g,i,returnRectangle);} iB( g, h){if(bitmapData!=null&&g>=0.0&&h>=0.0&&g<bitmapData.width&&h<bitmapData.height)return this;return null;} KB( g){if(bitmapData==null)return;if(XC==null){bitmapData.KB(g);}else{bitmapData.aF(g,XC);}}}class SC{var mp3;var mp4;var ogg;var wav;var ignoreErrors;SC({this.mp3: false,this.mp4: false,this.ogg: false,this.wav: false,this.ignoreErrors: true});}class nC extends RB{var kI=false;var GE=false;var vD=null;var rK=null;var CL=null;AN(){var i=this.PD;var j=this.ZC;var m=this.visible;if(i!=null&&this.ZC!=null){var h=RC.LG;if(h!=null){var g=KN.WD(i);if(g.x<h.left)g.x=h.left;if(g.x>h.right)g.x=h.right;if(g.y<h.top)g.y=h.top;if(g.y>h.bottom)g.y=h.bottom;i=KN.GF().WD(g);}var l=new AB(pL,sL).add(i).subtract(RC.IG);var k=KN.WD(l);this.visible=false;CL=j.iB(j.pH,j.qH);this.x=k.x;this.y=k.y;this.visible=m;}} kB( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new BB.CJ();super.kB(g,returnRectangle);if(rK!=null){returnRectangle=rK.oN(g).union(returnRectangle);}return returnRectangle;} iB( i, j){var h=null;if(this.vD!=null){var g=this.EE(this.vD);if(g!=null){var k=i*g.a+j*g.c+g.SB;var l=i*g.b+j*g.d+g.TB;if(this.vD.iB(k,l)!=null){h=this;}}}else{h=super.iB(i,j);if(h==null&&rK!=null){if(rK.AO(i,j)){h=this;}}}return h;}KB( g){if(rK!=null)rK.KB(g);super.KB(g);}}class aI extends hB{var blurX;var blurY;aI([this.blurX=4,this.blurY=4]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} clone(){return new aI(blurX,blurY);} apply( bC, q, DC, lB){var EC=bC.zM();var LB=EC.getImageData(q.x,q.y,q.width,q.height);var mB=LB.data;var w=LB.width;var dB=LB.height;var UB=blurX*blurX;var nB=blurY*blurY;var uB=(1<<22)~/UB;var cC=(1<<22)~/nB;var l=blurX;var oB=blurX*2;var u=blurY;var eB=blurY*2;var MB=w+oB;var DB=dB+eB;var vB=w*4;var GB=MB*4;var VB=DC.zM();var PB=VB.createImageData(MB,DB);var t=PB.data;var j=new List<int>(1024);MH(mB);for(int i=0;i<4;i++ ){for(int h=0;h<w;h++ ){var k=0,m=nB>>1;var n=h*4+i;var o=(h+l)*4+i;for(int g=0;g<DB;g++ ){t[o]=(m*cC)>>22;o+= GB;if(g>=eB){k-= 2*j[g&1023]-j[(g-u)&1023];}else if(g>=u){k-= 2*j[g&1023];}var p=(g<dB)?mB[n]:0;j[(g+u)&1023]=p;m+= k+= p;n+= vB;}}}for(int i=0;i<4;i++ ){for(int g=0;g<DB;g++ ){var k=0,m=UB>>1;var n=g*GB+l*4+i;var o=g*GB+i;for(int h=0;h<MB;h++ ){t[o]=(m*uB)>>22;o+= 4;if(h>=oB){k-= 2*j[h&1023]-j[(h-l)&1023];}else if(h>=l){k-= 2*j[h&1023];}var p=(h<w)?t[n]:0;j[(h+l)&1023]=p;m+= k+= p;n+= 4;}}}QH(t);VB.putImageData(PB,lB.x-l,lB.y-u);}}class oC{var NC=null;oC();factory oC.BJ( i, g, h, j){return new eI(i,g,h,j);}factory oC.DJ( i, g, h){return new fI(i,g,h);}factory oC.EJ( g){return new gI(g);} KB( i, g){var h=i.context;h.setTransform(g.a,g.b,g.c,g.d,g.SB,g.TB);}}class mC{static const  pF="exactFit";static const  yF="noBorder";static const  HG="noScale";static const  iE="showAll";}class qB extends FB{static const  kD="keyDown";static const  bE="keyUp";var jL;var kL;var oL;var qL;var wL;var BM;var FM;var IM;qB( g,[ bubbles=false]):super(g,bubbles){TM(g,bubbles);} TM( g,[ bubbles=false]){super.TM(g,bubbles);jL=false;kL=false;oL=false;qL=false;wL=false;BM=0;FM=0;IM=0;} get altKey=>jL; get ctrlKey=>kL; get shiftKey=>oL; get charCode=>BM; get keyCode=>FM; get keyLocation=>IM;}class v extends FB{static const  aE="click";static const  AG="doubleClick";static const  eE="mouseDown";static const  kE="mouseUp";static const  nE="mouseMove";static const  oE="mouseOut";static const  pE="mouseOver";static const  qE="mouseWheel";static const  tE="middleClick";static const  gG="middleMouseDown";static const  kG="middleMouseUp";static const  wE="rightClick";static const  pG="rightMouseDown";static const  tG="rightMouseUp";var hM,iM;var jM,lM;var BN;var jL;var wL;var kL;var oL;var GN;var HN;var IN;v( g,[ bubbles=false]):super(g,bubbles){TM(g,bubbles);} TM( g,[ bubbles=false]){super.TM(g,bubbles);hM=iM=0;jM=lM=0;BN=false;jL=false;wL=false;kL=false;oL=false;GN=0;HN=0;IN=0;}set NN( g){hM=g.x;iM=g.y;}set ON( g){jM=g.x;lM=g.y;} get BC=>BN; get altKey=>jL; get ctrlKey=>kL; get shiftKey=>oL; get vC=>GN; get deltaX=>HN; get deltaY=>IN;}class VE implements zB{final  AK;var KK=0.0;var ZK=0.0;var jK=1;VE( g, h):AK=g{ZK=OC.max(h,0.0001);} GC( h){var g=KK+h;while (g>=ZK&&jK>0){KK=ZK;jK-- ;AK();g-= ZK;}KK=g;return (jK>0);} get currentTime=>KK;}abstract class zB{ GC( g);}class qC implements zB{final  GK=new List<zB>();var eK=0;var pK=0.0; add( g){if(g==null)return;if(this.contains(g))return;if(eK==GK.length){GK.add(g);}else{GK[eK]=g;}eK++ ;} remove( h){if(h==null)return;for(int g=0;g<eK;g++ ){if(identical(GK[g],h)){GK[g]=null;break;}}} contains( h){if(h==null)return false;for(int g=0;g<eK;g++ ){if(identical(GK[g],h)){return true;}}return false;} yH( i){if(i==null)return;for(int g=0;g<eK;g++ ){var h=GK[g];if(h!=null&&h is KD){if(identical(h.dH,i)){GK[g]=null;}}}} FE( h, i,[ transitionFunction]){var g=new KD(h,i,transitionFunction);add(g);return g;} cH( h, i){var g=new VE(h,i);add(g);return g;} GC( k){pK+= k;var i=eK;var h=0;if(i is !int)throw "dart2js_hint";for(int g=0;g<i;g++ ){var j=GK[g];if(j==null)continue;if(j.GC(k)==false){GK[g]=null;continue;}if(h!=g){GK[h]=j;GK[g]=null;}h++ ;}if(h!=i){for(int g=i;g<eK;g++ ){GK[h++ ]=GK[g];GK[g]=null;}eK=h;}return true;}}abstract class RB extends IB{final  WK=new List<s>();var qK=true;var AL=true; get yD=>WK.length; JB( g){if(g.parent==this){var h=WK.indexOf(g);WK.removeAt(h);WK.add(g);}else{tD(g,WK.length);}} tD( g, h){if(h<0||h>WK.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){WK.removeAt(WK.indexOf(g));if(h>WK.length)h-- ;WK.insert(h,g);}else{g.ZF();g.PN(this);WK.insert(h,g);g.dispatchEvent(new FB(FB.tF,true));if(this.ZC!=null)SN(g,new FB(FB.BG));}} YF( h){var g=WK.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");wH(g);} wH( g){if(g<0||g>=WK.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=WK[g];h.dispatchEvent(new FB(FB.MG,true));if(this.ZC!=null)SN(h,new FB(FB.QG));h.PN(null);WK.removeAt(g);} lH( g){if(g<0||g>=WK.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");return WK[g];} CI( g){WK.sort(g);} contains( g){for(;g!=null;g=g.nM)if(g==this)return true;return false;} kB( n,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new BB.CJ();if(WK.length==0)return super.kB(n,returnRectangle);var h=double.INFINITY;var i=double.INFINITY;var k=double.NEGATIVE_INFINITY;var j=double.NEGATIVE_INFINITY;var o=WK.length;for(int l=0;l<WK.length;l++ ){var m=WK[l];oM.HF(m.KN,n);var g=m.kB(oM,returnRectangle);if(g.left<h)h=g.left;if(g.top<i)i=g.top;if(g.right>k)k=g.right;if(g.bottom>j)j=g.bottom;}returnRectangle.x=h;returnRectangle.y=i;returnRectangle.width=k-h;returnRectangle.height=j-i;return returnRectangle;} iB( i, k){i=i.toDouble();k=k.toDouble();var n=null;for(int l=WK.length-1;l>=0;l-- ){var j=WK[l];if(j.visible){var g=j.KN;var o=i-g.SB;var m=k-g.TB;var q=(g.d*o-g.c*m)/g.jC;var p=(g.a*m-g.b*o)/g.jC;var h=j.iB(q,p);if(h!=null){if(h is IB)if(h.RF)return qK?h:this;n=this;}}}return n;} KB( i){for(int h=0;h<WK.length;h++ ){var g=WK[h];if(!g.QM&&g.visible)i.zH(g);}}KO( g, i){i.add(g);if(g is RB){var k=g as RB;var j=k.WK;for(int h=0;h<j.length;h++ ){KO(j[h],i);}}}SN( i, j){var g=GD.VF() as List<s>;KO(i,g);for(int h=0;h<g.length;h++ ){g[h].dispatchEvent(j);}g.clear();GD.WF(g);}}class XI extends hB{var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;XI([this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=2.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} clone(){return new XI(color,alpha,blurX,blurY,strength,inner,knockout,hideObject);} apply( n, k, wC, GB){if(n==wC&&!hideObject){var lB=new CB(k.width,k.height);lB.IF(n,k,new AB.CJ());n=lB;k=new BB(0,0,n.width,n.height);}var mB=n.zM();var HE=mB.getImageData(k.x,k.y,k.width,k.height);var IE=HE.data;var p=k.width;var dB=k.height;var oB=blurX*blurX;var EC=blurY*blurY;var JE=(1<<22)~/oB;var KE=(1<<22)~/EC;var o=blurX;var xC=blurX*2;var PB=blurY;var cC=blurY*2;var VB=p+xC;var MB=dB+cC;var LE=p*4;var eB=VB*4;var LB=WC?3:0;var q=wC.zM();var vB=q.createImageData(VB,MB);var g=vB.data;var l=new List<int>(1024);for(int j=0;j<p;j++ ){var m=0,u=EC>>1;var t=j*4+LB;var w=(j+o)*4+LB;for(int i=0;i<MB;i++ ){g[w]=(u*KE)>>22;w+= eB;if(i>=cC){m-= 2*l[i&1023]-l[(i-PB)&1023];}else if(i>=PB){m-= 2*l[i&1023];}var DB=(i<dB)?IE[t]:0;l[(i+PB)&1023]=DB;u+= m+= DB;t+= LE;}}for(int i=0;i<MB;i++ ){var m=0,u=oB>>1;var t=i*eB+o*4+LB;var w=i*eB+LB;for(int j=0;j<VB;j++ ){g[w]=(u*JE)>>22;w+= 4;if(j>=xC){m-= 2*l[j&1023]-l[(j-o)&1023];}else if(j>=o){m-= 2*l[j&1023];}var DB=(j<p)?g[t]:0;l[(j+o)&1023]=DB;u+= m+= DB;t+= 4;}}var uB=(alpha*256).toInt();var bC=(color>>16)&0xFF;var yC=(color>>8)&0xFF;var nB=(color>>0)&0xFF;if(WC){for(var h=0;h<=g.length-4;h+= 4){g[h+0]=bC;g[h+1]=yC;g[h+2]=nB;g[h+3]=(g[h+3]*uB)>>8;}}else{for(var h=0;h<=g.length-4;h+= 4){g[h+0]=(g[h+0]*uB)>>8;g[h+1]=nB;g[h+2]=yC;g[h+3]=bC;}}var zC=GB.x;var DC=GB.y;var AD=GB.x-o;var BD=GB.y-PB;var ME=new BB(zC,DC,p,dB);var NE=new BB(AD,BD,VB,MB);var UB=ME.union(NE);q.setTransform(1,0,0,1,0,0);q.clearRect(UB.x,UB.y,UB.width,UB.height);q.putImageData(vB,AD,BD);if(this.hideObject==false)q.drawImage(mB.canvas,zC,DC);}}abstract class IB extends s{var eH=false;var RF=true;var AJ=true;var tabIndex=0;static const  OG=const aB<v>(v.oE);static const  aG=const aB<v>(v.pE);static const  hG=const aB<v>(v.nE);static const  lG=const aB<v>(v.eE);static const  uG=const aB<v>(v.kE);static const  FH=const aB<v>(v.qE); get onMouseOut=>IB.OG.forTarget(this); get onMouseOver=>IB.aG.forTarget(this); get onMouseMove=>IB.hG.forTarget(this); get onMouseDown=>IB.lG.forTarget(this); get onMouseUp=>IB.uG.forTarget(this); get onMouseWheel=>IB.FH.forTarget(this);static const  NH=const aB<NB>(NB.mE);static const  OH=const aB<NB>(NB.cE);static const  PH=const aB<NB>(NB.fE); get onTouchMove=>IB.NH.forTarget(this); get onTouchEnd=>IB.OH.forTarget(this); get onTouchCancel=>IB.PH.forTarget(this);static const  SH=const aB<qB>(qB.bE);static const  TH=const aB<qB>(qB.kD); get onKeyUp=>IB.SH.forTarget(this); get onKeyDown=>IB.TH.forTarget(this);}class pC extends FB{var pJ;pC( g):super(FB.rD,false){pJ=g;} get TF=>pJ; get LD=>false;}class AB{var fJ;var jJ;AB( h, g):fJ=h,jJ=g;AB.CJ():this(0,0); clone()=>new AB(fJ,jJ); toString()=>"Point [x=${fJ}, y=${jJ}]"; get x=>fJ; get y=>jJ; get length=>OC.sqrt(fJ*fJ+jJ*jJ);set x( g){fJ=g;}set y( g){jJ=g;} add( g){return new AB(fJ+g.x,jJ+g.y);} subtract( g){return new AB(fJ-g.x,jJ-g.y);}ND( g){fJ=g.x;jJ=g.y;} JF( g){return fJ==g.x&&jJ==g.y;}}class BB{var fJ;var jJ;var qJ;var CK;BB( i, g, h, j):fJ=i,jJ=g,qJ=h,CK=j;BB.CJ():this(0,0,0,0); clone()=>new BB(fJ,jJ,qJ,CK); toString()=>"Rectangle [x=${fJ}, y=${jJ}, width=${qJ}, height=${CK}]"; get x=>fJ; get y=>jJ; get width=>qJ; get height=>CK; get left=>fJ; get top=>jJ; get right=>fJ+qJ; get bottom=>jJ+CK; get size=>new AB(qJ,CK);set x( g){fJ=g;}set y( g){jJ=g;}set width( g){qJ=g;}set height( g){CK=g;} contains( g, h){return fJ<=g&&jJ<=h&&fJ+qJ>=g&&jJ+CK>=h;} JF( g){return fJ==g.x&&jJ==g.y&&qJ==g.width&&CK==g.height;} get isEmpty{return qJ==0&&CK==0;}ND( g){fJ=g.x;jJ=g.y;qJ=g.width;CK=g.height;} union( g){var i=OC.min(this.left,g.left);var h=OC.min(this.top,g.top);var j=OC.max(this.right,g.right);var k=OC.max(this.bottom,g.bottom);return new BB(i,h,j-i,k-h);} align(){var h=this.left.floor();var g=this.top.floor();var i=this.right.ceil();var j=this.bottom.ceil();return new BB(h,g,i-h,j-g);}}class fF{var x;var y;var XF;fF(this.x,this.y,this.XF);}class EB{var gJ,hJ,kJ,lJ,nJ,rJ;var DK;EB( h, i, g, j, k, l):gJ=h.toDouble(),hJ=i.toDouble(),kJ=g.toDouble(),lJ=j.toDouble(),nJ=k.toDouble(),rJ=l.toDouble(),DK=(h*j-i*g).toDouble();EB.GJ():gJ=1.0,hJ=0.0,kJ=0.0,lJ=1.0,nJ=0.0,rJ=0.0,DK=1.0; clone(){return new EB(gJ,hJ,kJ,lJ,nJ,rJ);} GF(){var h=(lJ/DK);var i=-(hJ/DK);var g=-(kJ/DK);var j=(gJ/DK);var k=-(h*nJ+g*rJ);var l=-(i*nJ+j*rJ);return new EB(h,i,g,j,k,l);} get a=>gJ; get b=>hJ; get c=>kJ; get d=>lJ; get SB=>nJ; get TB=>rJ; get jC=>DK; WD( h){var i=h.x.toDouble();var g=h.y.toDouble();return new AB(i*gJ+g*kJ+nJ,i*hJ+g*lJ+rJ);} QN( h){var i=h.x.toDouble();var g=h.y.toDouble();return new AB(i*gJ+g*kJ+nJ,i*hJ+g*lJ+rJ);} concat( g){var m=gJ;var p=hJ;var q=kJ;var o=lJ;var l=nJ;var n=rJ;var u=DK;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var w=g.SB;var t=g.TB;var DB=g.jC;gJ=(m*j+p*i).toDouble();hJ=(m*k+p*h).toDouble();kJ=(q*j+o*i).toDouble();lJ=(q*k+o*h).toDouble();nJ=(l*j+n*i+w).toDouble();rJ=(l*k+n*h+t).toDouble();DK=(u*DB).toDouble();} mH(){gJ=1.0;hJ=0.0;kJ=0.0;lJ=1.0;nJ=0.0;rJ=0.0;DK=1.0;} wD(){var j=gJ;var m=hJ;var l=kJ;var k=lJ;var h=nJ;var i=rJ;var g=DK;gJ=(k/g).toDouble();hJ=-(m/g).toDouble();kJ=-(l/g).toDouble();lJ=(j/g).toDouble();nJ=-(gJ*h+kJ*i).toDouble();rJ=-(hJ*h+lJ*i).toDouble();DK=(1.0/g).toDouble();} scale( h, g){gJ=(gJ*h).toDouble();hJ=(hJ*g).toDouble();kJ=(kJ*h).toDouble();lJ=(lJ*g).toDouble();nJ=(nJ*h).toDouble();rJ=(rJ*g).toDouble();DK=(DK*h*g).toDouble();} SD( h, i, g, k, j, l){gJ=h.toDouble();hJ=i.toDouble();kJ=g.toDouble();lJ=k.toDouble();nJ=j.toDouble();rJ=l.toDouble();DK=(gJ*lJ-hJ*kJ).toDouble();} ND( g){gJ=g.a.toDouble();hJ=g.b.toDouble();kJ=g.c.toDouble();lJ=g.d.toDouble();nJ=g.SB.toDouble();rJ=g.TB.toDouble();DK=g.jC.toDouble();} HF( h, g){var n=h.a;var q=h.b;var t=h.c;var p=h.d;var m=h.SB;var o=h.TB;var w=h.jC;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var DB=g.SB;var u=g.TB;var GB=g.jC;gJ=(n*k+q*j).toDouble();hJ=(n*l+q*i).toDouble();kJ=(t*k+p*j).toDouble();lJ=(t*l+p*i).toDouble();nJ=(m*k+o*j+DB).toDouble();rJ=(m*l+o*i+u).toDouble();DK=(w*GB).toDouble();}}class fD{var iJ;var yJ;var IK;var VK;var KL;var UL;fD(){iJ=new qC();yJ=new List<tB>();IK=-1;KL=CD.jE;UL=new pC(0);VK=HM;NM();} get xD=>iJ;NM(){WB.window.requestAnimationFrame(VK);}HM( g){NM();g=g.toDouble();if(IK==-1)IK=g;if(IK>g)IK=g;var k=g-IK;var h=k/1000.0;var l=g/1000.0;if(k>=1){IK=g;UL.pJ=h;KL.kM(UL);iJ.GC(h);for(int i=0;i<yJ.length;i++ ){var j=yJ[i];j.xD.GC(h);j.oH(l,h);}}} YH( g){if(g.AE!=null){g.AE.xH(g);}yJ.add(g);g.WN=this;} xH( g){if(g.AE==this){yJ.remove(g);g.WN=null;}}}class kF{}class gC{final  matrix=new EB.GJ();var alpha=1.0;var MD=nD.pD;var BL; get rH{if(BL==null)BL=new gC();return BL;}}abstract class fB{static  hC( g,[ soundLoadOptions=null]){switch (fC.XG){case "WebAudioApi":return cD.hC(g,soundLoadOptions);case "AudioElement":return eD.hC(g,soundLoadOptions);default:return QC.hC(g,soundLoadOptions);}}static var rE=new SC(mp3:true,mp4:true,ogg:true,wav:true); get length; play([ loop=false, soundTransform]);}class FB{static const  tF="added";static const  BG="addedToStage";static const  rD="enterFrame";static const  MG="removed";static const  QG="removedFromStage";static const  WG="resize";static const  sG="complete";static const  yE="progress";var TL;var wM;var mM;var QK;var yM;var qM;var uM;FB( g,[ bubbles=false]){TM(g,bubbles);} TM( g,[ bubbles=false]){TL=g;wM=bubbles;mM=rB.UC;QK=null;yM=null;qM=false;uM=false;} get UD=>qM; get type=>TL; get bubbles=>wM; get LD=>true; get target=>QK;}class xB{var tJ;var XK;dispatchEvent( g){bM(g,this,this,rB.UC);} CN( h, j, i){if(j&&XK!=null){var g=XK[h];if(g!=null&&g.LN)return true;}if(i&&tJ!=null){var g=tJ[h];if(g!=null&&g.LN)return true;}return false;} OL( h, g){if(g){if(XK==null)XK=new Map<String,eC>();}else{if(tJ==null)tJ=new Map<String,eC>();}var i=g?XK:tJ;return i.putIfAbsent(h,(){return new eC(this,h,g);});}bM( g, k, l, j){var h=(j==rB.YE)?XK:tJ;if(h==null)return;var i=h[g.type];if(i==null)return;g.QK=k;g.yM=l;g.mM=j;g.qM=false;g.uM=false;i.kM(g);}}class aB<rC extends FB>{final  EK;const aB(this.EK); forTarget( g,{ useCapture: false}){return g.OL(EK,useCapture);}}class eC<rC extends FB> extends OB.Stream<rC>{final  QK;final  EK;final  mK;final  EL=new List<sF>();var WL=0;eC(this.QK,this.EK,this.mK); get isBroadcast=>true; asBroadcastStream()=>this; listen( h( event),{ onError(error), onDone(), cancelOnError: false}){var g=new sF<rC>(this,h);if(WL==EL.length){EL.add(g);}else{EL[WL]=g;}WL++ ;if(EK==FB.rD&&mK==false)CD.jE.lL(this);return g;} MM( h){for(int g=0;g<WL;g++ ){if(identical(EL[g],h)){EL[g]=null;break;}}} get LN{for(var g=0;g<WL;g++ )if(EL[g]!=null)return true;return false;} kM( k){var i=WL;var h=0;if(i is !int)throw "dart2js_hint";for(int g=0;g<i;g++ ){var j=EL[g];if(j==null)continue;j.GL(k);if(h!=g){EL[h]=j;EL[g]=null;}h++ ;}if(h!=i){for(int g=i;g<WL;g++ ){EL[h++ ]=EL[g];EL[g]=null;}WL=h;}}}class CD<rC extends FB>{final  tJ=new List<eC>();var hK=0;static var jE=new CD<pC>(); lL( g){for(int h=0;h<hK;h++ ){if(tJ[h]==g)return;}if(hK==tJ.length){tJ.add(g);}else{tJ[hK]=g;}hK++ ;} kM( j){j.mM=rB.UC;j.qM=false;j.uM=false;var k=hK;var i=0;if(k is !int)throw "dart2js_hint";for(int g=0;g<k;g++ ){var h=tJ[g];if(h==null)continue;if(h.WL==0){tJ[g]=null;continue;}j.QK=h.QK;j.yM=h.QK;h.kM(j);if(i!=g){tJ[i]=h;tJ[g]=null;}i++ ;}if(i!=k){for(int g=k;g<hK;g++ ){tJ[i++ ]=tJ[g];tJ[g]=null;}hK=i;}}}class CB implements aD{var qJ;var CK;var TK;var fK;var oK;var yK;var FL;var NL;var SL;var VL;var YL;var cL;var hL;var mL;static var rE=new bD(png:true,jpg:true,webp:false);CB( h, i,[ transparent=true, fillColor=0xFFFFFFFF]){qJ=h.toInt();CK=i.toInt();TK=transparent;fK=0;FL=SL=0;NL=VL=0;oK=YL=qJ;yK=cL=CK;var g=new WB.CanvasElement(width:qJ,height:CK);mL=g.context2D;mL.fillStyle=TK?bG(fillColor):sC(fillColor);mL.fillRect(0,0,qJ,CK);hL=g;}CB.KJ( g){if(g==null)throw new ArgumentError();qJ=g.naturalWidth.toInt();CK=g.naturalHeight.toInt();TK=true;fK=0;FL=SL=0;NL=VL=0;oK=YL=qJ;yK=cL=CK;hL=g;}CB.LJ( g){qJ=g.uH.toInt();CK=g.tH.toInt();TK=true;fK=g.BI?2:1;FL=g.offsetX;NL=g.offsetY;oK=g.LF;yK=g.KF;SL=g.iH;VL=g.jH;YL=g.LF;cL=g.KF;hL=g.DI.cK.hL;}static  hC( h,[ bitmapDataLoadOptions=null]){if(bitmapDataLoadOptions==null)bitmapDataLoadOptions=CB.rE;var i=new OB.Completer<CB>();var g=new WB.ImageElement();var j;var k;j=g.onLoad.listen((m){j.cancel();k.cancel();i.complete(new CB.KJ(g));});k=g.onError.listen((m){j.cancel();k.cancel();i.completeError(new StateError("Error loading image."));});if(bitmapDataLoadOptions.webp==false){g.src=h;return i.future;}RH.then(( o){var n=new RegExp(r"(png|jpg|jpeg)$",multiLine:false,caseSensitive:true);var l=n.firstMatch(h);if(o==false||l==null){g.src=h;}else{g.src=h.substring(0,h.length-l.group(1).length)+"webp";}});return i.future;} get width=>qJ; get height=>CK; clone(){var g=new CB(qJ,CK,true,0);g.fH(this);return g;} ZH( i, j, g, h){h.apply(i,j,this,g);} IF( j, g, h,[ alphaBitmapData=null, alphaPoint=null, mergeAlpha=false]){var i=j.zM().getImageData(g.x,g.y,g.width,g.height);zM().putImageData(i,h.x,h.y);} fH( h,[ matrix=null]){var g=zM();var i=new YB.IJ(g,matrix);h.KB(i);g.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);} clear(){var g=zM();g.clearRect(0,0,qJ,CK);} KB( h){var g=h.context;switch (fK){case 0:g.drawImage(hL,FL,NL);break;case 1:g.drawImageScaledFromSource(hL,SL,VL,YL,cL,FL,NL,oK,yK);break;case 2:g.transform(0.0,-1.0,1.0,0.0,FL,NL+yK);g.drawImageScaledFromSource(hL,SL,VL,cL,YL,0.0,0.0,yK,oK);break;case 3:g.drawImageScaled(hL,FL,NL,oK,yK);break;}} aF( PB, g){var w=PB.context;if(g.width<=0.0||g.height<=0.0)return;switch (fK){case 0:w.drawImageScaledFromSource(hL,g.x-FL,g.y-NL,g.width,g.height,g.x+FL,g.y+NL,g.width,g.height);break;case 1:var j=SL;var h=VL;var p=j+YL;var q=h+cL;var l=SL-FL+g.x;var m=VL-NL+g.y;var u=l+g.width;var t=m+g.height;var o=(j>l)?j:l;var n=(h>m)?h:m;var DB=(p<u)?p:u;var MB=(q<t)?q:t;var k=DB-o;var i=MB-n;var LB=FL-j+o;var GB=NL-h+n;if(k>0.0&&i>0.0){w.drawImageScaledFromSource(hL,o,n,k,i,LB,GB,k,i);}break;case 2:var j=SL;var h=VL;var p=j+cL;var q=h+YL;var l=SL+NL-g.y+yK-g.height;var m=VL-FL+g.x;var u=l+g.height;var t=m+g.width;var o=(j>l)?j:l;var n=(h>m)?h:m;var DB=(p<u)?p:u;var MB=(q<t)?q:t;var k=MB-n;var i=DB-o;var LB=FL-h+n;var GB=NL+p-DB;if(k>0.0&&i>0.0){w.transform(0.0,-1.0,1.0,0.0,LB,GB+i);w.drawImageScaledFromSource(hL,o,n,i,k,0,0,i,k);}break;}} zM(){if(mL==null){var g=new WB.CanvasElement(width:qJ,height:CK);mL=g.context2D;switch (fK){case 0:mL.drawImage(hL,FL,NL);break;case 1:mL.drawImageScaledFromSource(hL,SL,VL,YL,cL,FL,NL,oK,yK);break;case 2:mL.transform(0.0,-1.0,1.0,0.0,FL,NL+yK);mL.drawImageScaledFromSource(hL,SL,VL,cL,YL,0.0,0.0,yK,oK);mL.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);break;}fK=0;FL=SL=0;NL=VL=0;oK=YL=qJ;yK=cL=CK;hL=g;}return mL;}}typedef  gD( ratio);typedef  nF<rC extends FB>( event);class sF<rC extends FB> extends OB.StreamSubscription<rC>{var wK;var GL;var LL;var QL;sF(this.wK,this.GL){LL=0;QL=false;} cancel(){if(QL==false){wK.MM(this);QL=true;GL=null;}} onError( g(error)){} get JN=>LL>0; pause([ resumeSignal]){LL++ ;if(resumeSignal!=null){resumeSignal.whenComplete(resume);}} resume(){if(JN==false){throw new StateError("Subscription is not paused.");}LL-- ;}}class nD{static const  pD="source-over";} sC( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";} CG( g){if(hD.containsKey(g)==false){hD[g]=new uE(g);}return hD[g];}final  qD=new EB.GJ();class gE{static var eG=RE.vE;static var jG=new OB.StreamController<String>();static var mG=jG.stream.asBroadcastStream();static  get xG=>eG;}abstract class s extends xB implements aD{static var UG=0;var gL=UG++ ;var fJ=0.0;var jJ=0.0;var pL=0.0;var sL=0.0;var tL=1.0;var xL=1.0;var AM=0.0;var DM=0.0;var GM=0.0;var KM=1.0;var PM=true;var QM=false;var UM=null;var XM=null;var YM=null;var aM=false;var cM=null;var fM=null;var gM=null;var BK="";var nM=null;final  oM=new EB.GJ();final  vM=new EB.GJ();var xM=true;static const  GH=const aB<pC>(FB.rD); get sH=>s.GH.forTarget(this); get x=>fJ; get y=>jJ; get CC=>pL; get JC=>sL; get LC=>tL; get MC=>xL; get skewX=>AM; get skewY=>DM; get KC=>GM; get visible=>PM; get alpha=>KM; get MD=>gM; get name=>BK; get parent=>nM; get PD{var g=this.ZC;return (g!=null)?this.IC(g.hN):null;} get pH{var g=this.PD;return (g!=null)?g.x:0.0;} get qH{var g=this.PD;return (g!=null)?g.y:0.0;} get root{var g=this;while (g.nM!=null)g=g.nM;return g;} get ZC{var g=this.root;if(g is tB)return g;return null;}set x( g){fJ=g.toDouble();xM=true;}set y( g){jJ=g.toDouble();xM=true;}set CC( g){pL=g.toDouble();xM=true;}set JC( g){sL=g.toDouble();xM=true;}set LC( g){tL=g.toDouble();xM=true;}set MC( g){xL=g.toDouble();xM=true;}set skewX( g){AM=g.toDouble();xM=true;}set skewY( g){DM=g.toDouble();xM=true;}set KC( g){GM=g.toDouble();xM=true;}set visible( g){PM=g;}set alpha( g){KM=g.toDouble();}set mask( g){UM=g;}set MD( g){gM=g;} setTransform( h, g,[ scaleX, scaleY, rotation, skewX, skewY, pivotX, pivotY]){xM=true;fJ=h.toDouble();jJ=g.toDouble();if(scaleX!=null){tL=scaleX.toDouble();if(scaleY!=null){xL=scaleY.toDouble();if(rotation!=null){GM=rotation.toDouble();if(skewX!=null){AM=skewX.toDouble();if(skewY!=null){DM=skewY.toDouble();if(pivotX!=null){pL=pivotX.toDouble();if(pivotY!=null)sL=pivotY.toDouble();}}}}}}} get width=>kB(KN).width; get height=>kB(KN).height; set width( h){this.LC=1;var g=this.width;this.LC=(g!=0.0)?h/g:1.0;} set height( h){this.MC=1;var g=this.height;this.MC=(g!=0.0)?h/g:1.0;} ZF(){if(nM!=null)nM.YF(this);} get KN{if(xM){xM=false;var j=AM+GM;var i=DM+GM;if(j==0.0&&i==0.0){vM.SD(tL,0.0,0.0,xL,fJ-pL*tL,jJ-sL*xL);}else{var g,l,k,h;var m=OC.cos(j);var n=OC.sin(j);if(j==i){g=tL*m;l=tL*n;k=-xL*n;h=xL*m;}else{g=tL*OC.cos(i);l=tL*OC.sin(i);k=-xL*n;h=xL*m;}var p=fJ-(pL*g+sL*k);var o=jJ-(pL*l+sL*h);vM.SD(g,l,k,h,p,o);}}return vM;} EE( h){if(h==nM)return KN.clone();if(h.nM==this)return h.KN.GF();var j=new EB.GJ();var g=this;while (g!=h&&g.nM!=null){j.concat(g.KN);g=g.nM;}if(h==null&&g!=null){j.concat(g.KN);g=null;}if(g==h)return j;var k=new EB.GJ();var i=h;while (i!=this&&i.nM!=null){k.concat(i.KN);i=i.nM;}k.wD();if(i==this)return k;if(i!=g)return null;j.concat(k);return j;} kB( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new BB.CJ();returnRectangle.x=g.SB;returnRectangle.y=g.TB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} iB( g, h){if(kB(qD).contains(g,h))return this;return null;} IC( h){oM.mH();for(s g=this;g!=null;g=g.nM)oM.concat(g.KN);oM.wD();return oM.WD(h);} dispatchEvent( h){var g=null;if(h.LD||h.bubbles){for(s j=nM;j!=null;j=j.nM){if(j.CN(h.type,h.LD,h.bubbles)){if(g==null)g=GD.VF() as List<s>;g.add(j);}}}if(h.LD&&g!=null){for(int i=g.length-1;i>=0&&h.UD==false;i-- ){g[i].bM(h,this,g[i],rB.YE);}}if(h.UD==false){bM(h,this,this,rB.UC);}if(h.bubbles&&g!=null){for(int i=0;i<g.length&&h.UD==false;i++ ){g[i].bM(h,this,g[i],rB.DG);}}if(g!=null){g.clear();GD.WF(g);}} PN( h){for(var g=h;g!=null;g=g.nM)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");nM=h;} KB( g);}class sB{static const  PG="B";static const  TG="BL";static const  YG="BR";static const  uF="L";static const  lE="R";static const  dG="T";static const  fG="TL";static const  iG="TR";static const  vE="";}class YB{final  mL;var KK=0.0;var zL=0.0;var EM;var LM;YB.IJ( h,[ matrix]):mL=h{EM=new gC();LM=EM;if(matrix!=null){EM.matrix.ND(matrix);}var g=EM.matrix;mL.setTransform(g.a,g.b,g.c,g.d,g.SB,g.TB);mL.globalAlpha=1.0;mL.globalCompositeOperation=nD.pD;} get context=>mL; get currentTime=>KK; reset([ matrix, currentTime, deltaTime]){KK=?currentTime?currentTime:0.0;zL=?deltaTime?deltaTime:0.0;LM=EM;if(matrix!=null){EM.matrix.ND(matrix);}var g=EM.matrix;mL.setTransform(g.a,g.b,g.c,g.d,g.SB,g.TB);mL.globalAlpha=1.0;mL.globalCompositeOperation=nD.pD;mL.clearRect(0,0,mL.canvas.width,mL.canvas.height);} zH( h){var g=h.KN;var u=h.KM;var j=h.UM;var k=h.fM;var n=h.gM;var t=h.XM;var l=LM as gC;var i=LM.rH as gC;LM=i;var p=i.matrix;var o=l.alpha*u;var q=(n!=null)?n:l.MD;p.HF(g,l.matrix);i.alpha=o;i.MD=q;if(j!=null||k!=null){mL.save();if(j!=null){if(j.NC==null){g=i.matrix;}else if(identical(j.NC,h)){g=i.matrix;}else if(identical(j.NC,h.parent)){g=l.matrix;}else{g=j.NC.EE(h);if(g==null)g=qD;else g.concat(i.matrix);}j.KB(this,g);}if(k!=null){if(k.NC==null){g=i.matrix;}else if(identical(k.NC,h)){g=i.matrix;}else if(identical(k.NC,h.parent)){g=l.matrix;}else{g=k.NC.EE(h);if(g==null)g=qD;else g.concat(i.matrix);}k.KB(this,g);}}var m=p;mL.setTransform(m.a,m.b,m.c,m.d,m.SB,m.TB);mL.globalCompositeOperation=q;mL.globalAlpha=o;if(t!=null){t.KB(this);}else{h.KB(this);}if(j!=null||k!=null){mL.restore();}LM=l;}} bG( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class uE{var fontStyle;var uC=0;var OD=0;var height=0;uE( j){this.fontStyle=j;var h=new WB.Element.tag("span");h.style.font=this.fontStyle;h.text="Hg";var g=new WB.Element.tag("div");g.style.display="inline-block";g.style.width="1px";g.style.height="0px";var i=new WB.Element.tag("div");i.append(g);i.append(h);WB.document.body.append(i);try {g.style.verticalAlign="baseline";this.uC=g.offsetTop-h.offsetTop;g.style.verticalAlign="bottom";this.height=g.offsetTop-h.offsetTop;this.OD=height-uC;}catch (k){}finally {i.remove();}}}class VC{static  JD( g){return g;}static  oG( g){return 0.5-0.5*OC.cos(g*2.0*OC.PI);}static  DH( g){return g*g*g;}static  EH( g){g=1.0-g;return 1.0-g*g*g;}static  HH( g){g=g*2.0;return (g<1.0)?0.5*DH(g):0.5*EH(g-1.0)+0.5;}static  UH( g){var h=1.70158;return g*g*((h+1.0)*g-h);}static  VH( g){var h=1.70158;g=g-1.0;return g*g*((h+1.0)*g+h)+1.0;}static  WH( g){g=g*2.0;return (g<1.0)?0.5*UH(g):0.5*VH(g-1.0)+0.5;}}class tC{static const  iD="auto";static const  nG="stop";static const  xE="once";} qG( g){if(g is bool){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a bool.");}}class zE{var target=null;var BC=false;var uD=0;var vC=0;var QF,SF;var OF,PF;zE(this.QF,this.SF,this.OF,this.PF);}class eI extends oC{final  pM;eI( i, g, h, j):pM=new BB(i,g,h,j); KB( i, g){var h=i.context;h.setTransform(g.a,g.b,g.c,g.d,g.SB,g.TB);h.beginPath();h.rect(pM.x,pM.y,pM.width,pM.height);h.clip();}} FC( g){if(g is int){return g;}else{throw new ArgumentError("The supplied value (${g}) is not an int.");}}class bB{final  zD;var BE=double.NAN;var CE=double.NAN;bB(this.zD); aC( g){this.CE=g.toDouble();} get nH=>!BE.isNaN&&!CE.isNaN; EN( g){switch (zD){case 'x':return g.x;case 'y':return g.y;case 'pivotX':return g.CC;case 'pivotY':return g.JC;case 'scaleX':return g.LC;case 'scaleY':return g.MC;case 'skewX':return g.skewX;case 'skewY':return g.skewY;case 'rotation':return g.KC;case 'alpha':return g.alpha;default:return 0.0;}} RN( g, h){switch (zD){case 'x':g.x=h;break;case 'y':g.y=h;break;case 'pivotX':g.CC=h;break;case 'pivotY':g.JC=h;break;case 'scaleX':g.LC=h;break;case 'scaleY':g.MC=h;break;case 'skewX':g.skewX=h;break;case 'skewY':g.skewY=h;break;case 'rotation':g.KC=h;break;case 'alpha':g.alpha=h;break;}}}class yG{static var zG=0;var VD=zG++ ;var target=null;var QD=false;yG(this.target,this.QD);}class fI extends oC{final  MN;fI( i, g, h):MN=new fF(i,g,h); KB( i, g){var h=i.context;h.setTransform(g.a,g.b,g.c,g.d,g.SB,g.TB);h.beginPath();h.arc(MN.x,MN.y,MN.XF,0,OC.PI*2.0,false);h.clip();}}class tB extends RB{static var CH=true;static var BF=1.0;static get AC=>BF;var WM;var mL;var TN,UN;var RM,SM;var VN,XN;var ZN;var aN;var WN;var iJ;var nI=30;var bN;var cN;var dN;var eN;var fN;var gN;var hN;var iN;var jN;var kN;var lN;var mN;var nN;tB( j, g){BK=j;WM=g;WM.focus();mL=g.context2D;if(tB.CH){var h=WB.window.devicePixelRatio;var i=mL.backingStorePixelRatio;if(h==null)h=1.0;if(i==null)i=1.0;BF=h/i;}TN=g.width;UN=g.height;sN(TN,UN);VN=g.clientWidth;XN=g.clientHeight;ZN=new EB.GJ();aN=new EB.GJ();WN=null;iJ=new qC();cN=new YB.IJ(mL);dN=tC.iD;eN=mC.iE;fN=sB.vE;jN=[new zE(v.eE,v.kE,v.aE,v.AG),new zE(v.gG,v.kG,v.tE,v.tE),new zE(v.pG,v.tG,v.wE,v.wE)];gN=gB.lD;iN=null;hN=new AB(0,0);lN=new v(v.aE,true);RC.ZG.listen(ZG);WM.onMouseDown.listen(CO);WM.onMouseUp.listen(CO);WM.onMouseMove.listen(CO);WM.onMouseOut.listen(CO);WM.onMouseWheel.listen(DO);kN=new Map<int,yG>();nN=new NB(NB.ZE,true);gE.mG.listen(EO);EO(null);mN=new qB(qB.kD,true);WM.onKeyDown.listen(GO);WM.onKeyUp.listen(GO);WM.onKeyPress.listen(HO);} get AE=>WN; get xD=>iJ; get PD=>hN; get focus=>bN; get align=>fN;IO(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){IO();}set y( g){IO();}set CC( g){IO();}set JC( g){IO();}set LC( g){IO();}set MC( g){IO();}set skewX( g){IO();}set skewY( g){IO();}set KC( g){IO();}set alpha( g){IO();}set width( g){IO();}set height( g){IO();}oH( g, h){if(dN==tC.iD||dN==tC.xE){JO();cN.reset(aN,g,h);KB(cN);if(dN==tC.xE)dN=tC.nG;}}JO(){var m=WM.getBoundingClientRect();var n=WM.clientLeft+m.left;var o=WM.clientTop+m.top;var k=WM.clientWidth;var l=WM.clientHeight;if(k==0||l==0)return;var g=TN;var h=UN;var i=0;var j=0;switch (eN){case mC.pF:g=TN;h=UN;break;case mC.yF:if(k*UN>l*TN){h=(TN*l)~/k;}else{g=(UN*k)~/l;}break;case mC.HG:g=k;h=l;break;case mC.iE:if(k*UN>l*TN){g=(UN*k)~/l;}else{h=(TN*l)~/k;}break;}switch (fN){case sB.PG:i=(TN-g+1)~/2;j=(UN-h);break;case sB.TG:i=0;j=(UN-h);break;case sB.YG:i=(TN-g);j=(UN-h);break;case sB.uF:i=0;j=(UN-h+1)~/2;break;case sB.lE:i=(TN-g);j=(UN-h+1)~/2;break;case sB.dG:i=(TN-g+1)~/2;j=0;break;case sB.fG:i=0;j=0;break;case sB.iG:i=(TN-g+1);j=0;break;case sB.vE:i=(TN-g+1)~/2;j=(UN-h+1)~/2;break;}aN.SD(1.0,0.0,0.0,1.0,0-i,0-j);ZN.SD(g/k,0.0,0.0,h/l,i-n,j-o);if(RM!=g||SM!=h){sN(g,h);}if(AC!=1.0){aN.scale(AC,AC);}if(VN!=k||XN!=l){VN=k;XN=l;dispatchEvent(new FB(FB.WG));}}sN( h, g){if(AC==1.0){WM.width=RM=h;WM.height=SM=g;}else{RM=h;SM=g;WM.width=(RM*AC).round();WM.height=(SM*AC).round();WM.style.width="${RM}px";WM.style.height="${SM}px";}}ZG( g){WM.style.cursor=RC.AF(gN);}CO( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var p=j.button;var h=null;var i=ZN.QN(j.client);var m=null;if(p<0||p>2)return;if(j.type=="mousemove"&&hN.JF(i))return;var g=jN[p];hN=i;if(RC.dE!=null)RC.dE.AN();if(j.type!="mouseout")h=iB(i.x,i.y) as IB;var l=gB.lD;if(h is nC&&(h as nC).GE){l=gB.oD;}if(h is QE&&(h as QE).GE){l=gB.oD;}if(gN!=l){gN=l;WM.style.cursor=RC.AF(l);}if(iN!=null&&iN!=h){iN.dispatchEvent(lN..TM(v.oE,true)..NN=(iN.ZC!=null)?iN.IC(i):new AB.CJ()..ON=i..BN=g.BC);iN=null;}if(h!=null&&h!=iN){h.dispatchEvent(lN..TM(v.pE,true)..NN=h.IC(i)..ON=i..BN=g.BC);iN=h;}var k=null;var o=false;var q=false;if(j.type=="mousedown"){k=g.QF;if(h!=g.target||n>g.uD+500)g.vC=0;g.BC=true;g.target=h;g.uD=n;g.vC++ ;}if(j.type=="mouseup"){k=g.SF;g.BC=false;o=(g.target==h);q=o&&g.vC.isEven&&(n<g.uD+500);}if(j.type=="mousemove"){k=v.nE;}if(k!=null&&h!=null){m=h.IC(i);h.dispatchEvent(lN..TM(k,true)..NN=m..ON=i..BN=g.BC..GN=g.vC);if(o){if(q&&h.eH){h.dispatchEvent(lN..TM(g.PF,true)..NN=m..ON=i..BN=g.BC);}else{h.dispatchEvent(lN..TM(g.OF,true)..NN=m..ON=i..BN=g.BC);}}}}DO( h){var g=ZN.QN(h.client);var i=iB(g.x,g.y) as IB;if(i!=null){i.dispatchEvent(lN..TM(v.qE,true)..NN=i.IC(g)..ON=g..HN=h.deltaX..IN=h.deltaY);if(lN.UD)h.preventDefault();}}var LO=[] ;EO( h){LO.forEach((g)=>g.cancel());if(gE.xG==RE.FG){LO=[WM.onTouchStart.listen(MO),WM.onTouchEnd.listen(MO),WM.onTouchMove.listen(MO),WM.onTouchEnter.listen(MO),WM.onTouchLeave.listen(MO),WM.onTouchCancel.listen(MO)];}}MO( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=ZN.QN(m.client);var h=iB(i.x,i.y) as IB;var g=kN.containsKey(l)?kN[l]:new yG(h,kN.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(nN..TM(NB.VG,true)..NN=(g.target.ZC!=null)?g.target.IC(i):new AB.CJ()..ON=i..dM=g.VD..eM=g.QD);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(nN..TM(NB.RG,true)..NN=h.IC(i)..ON=i..dM=g.VD..eM=g.QD);g.target=h;}var k=null;if(j.type=="touchstart"){kN[l]=g;k=NB.ZE;}if(j.type=="touchend"){kN.remove(l);k=NB.cE;}if(j.type=="touchcancel"){kN.remove(l);k=NB.fE;}if(j.type=="touchmove"){k=NB.mE;}if(k!=null&&h!=null){h.dispatchEvent(nN..TM(k,true)..NN=h.IC(i)..ON=i..dM=g.VD..eM=g.QD);}}}GO( g){g.preventDefault();var h=null;if(g.type=="keyup")h=qB.bE;if(g.type=="keydown")h=qB.kD;mN..TM(h,true)..jL=g.altKey..kL=g.ctrlKey..oL=g.shiftKey..BM=g.charCode..FM=g.keyCode..IM=dC.oF;if(g.keyLocation==WB.KeyLocation.LEFT)mN.IM=dC.uF;if(g.keyLocation==WB.KeyLocation.RIGHT)mN.IM=dC.lE;if(g.keyLocation==WB.KeyLocation.NUMPAD)mN.IM=dC.GG;if(g.keyLocation==WB.KeyLocation.JOYSTICK)mN.IM=dC.hE;if(g.keyLocation==WB.KeyLocation.MOBILE)mN.IM=dC.hE;if(bN!=null)bN.dispatchEvent(mN);}HO( g){var i=(g.charCode!=0)?g.charCode:g.keyCode;var h=new WE(WE.zF,true);h.xJ=new String.fromCharCodes([i]);if(bN!=null)bN.dispatchEvent(h);}} CF( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);}class gI extends oC{final  YN;gI( g):YN=g.toList(growable:false){if(g.length<3)throw new ArgumentError("A custom mask needs at least 3 points.");} KB( j, g){var h=j.context;h.setTransform(g.a,g.b,g.c,g.d,g.SB,g.TB);h.beginPath();for(int i=0;i<YN.length;i++ )h.lineTo(YN[i].x,YN[i].y);h.clip();}} IH( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";} KH(){var g=new WB.CanvasElement(width:1,height:1);g.context2D.fillStyle="#000000";g.context2D.fillRect(0,0,1,1);var i=g.context2D.getImageData(0,0,1,1).data;var h=(i[0]==0);return h;} LH(){var i=new OB.Completer<bool>();var g=new WB.ImageElement(); h(){i.complete(g.width==2&&g.height==2);}g.onLoad.listen((j)=>h());g.onError.listen((j)=>h());g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return i.future;}class KD implements zB{final  pN;final  qN;final  rN=new List<bB>();var tN;var uN;var vN;var wN;var ZK;var KK;var xN;var yN;var zN;KD( g, h,[ transitionFunction]):pN=g,qN=(?transitionFunction)?transitionFunction:VC.JD{wN=new UE(this);KK=0.0;ZK=OC.max(0.0001,h);xN=0.0;yN=false;zN=false;} get iC=>wN; tK( g){if(pN!=null&&zN==false){rN.add(g);}} GC( m){if(KK<ZK||zN==false){KK=KK+m;if(KK>ZK){KK=ZK;}if(KK>=0.0){if(zN==false){zN=true;for(int h=0;h<rN.length;h++ ){var g=rN[h];g.BE=g.EN(pN);}if(tN!=null){tN();}}var k=KK/ZK;var l=qN(k).toDouble();for(int h=0;h<rN.length;h++ ){var g=rN[h];if(g.nH){var i=g.BE.toDouble();var n=g.CE.toDouble();var j=i+l*(n-i);g.RN(pN,yN?j.round():j);}}if(uN!=null){uN();}if(vN!=null&&KK==ZK){vN();}}}return KK<ZK;} get dH=>pN; get currentTime=>KK; set onComplete( g()){vN=g;}} MH( h){if(WC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];h[g+0]=(h[g+0]*i)~/255;h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;h[g+3]=(h[g+3]*i)~/255;}}} QH( h){if(WC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];if(i>0){h[g+0]=(h[g+0]*255)~/i;h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;}}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];if(i>0){h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;h[g+3]=(h[g+3]*255)~/i;}}}}var WC=KH();var RH=LH(); sD( g, m, n, j){m=m.toDouble();n=n.toDouble();var GB=0.0;var DB=0.0;var q=m*g.a;var w=m*g.b;var t=m*g.a+n*g.c;var p=m*g.b+n*g.d;var u=n*g.c;var o=n*g.d;var h=GB;if(h>q)h=q;if(h>t)h=t;if(h>u)h=u;var i=DB;if(i>w)i=w;if(i>p)i=p;if(i>o)i=o;var l=GB;if(l<q)l=q;if(l<t)l=t;if(l<u)l=u;var k=DB;if(k<w)k=w;if(k<p)k=p;if(k<o)k=o;if(j==null)j=new BB.CJ();j.x=g.SB+h;j.y=g.TB+i;j.width=l-h;j.height=k-i;return j;}//@ sourceMappingURL=stagexl_demos.dart.map
