import "dart:web_audio" as ZE;import "dart:html" as XB;import "dart:math" as JC;import "dart:json" as cI;import "dart:async" as LB;class dI{static const  eI="Chrome";static const  fI="Firefox";static const  gI="Internet Explorer";static const  hI="Safari";final  sH;final  minimumVersion;const dI(this.sH,[this.minimumVersion]);}class iI{final  name;const iI(this.name);}class oI extends TB{final  hJ=[{'name':'DropShadowFilter (black)','filter':new xI(10,JC.PI/4,cB.QD,0.8,8,8)},{'name':'GlowFilter (red)','filter':new tI(cB.aF,1.0,20,20)},{'name':'ColorMatrixFilter (grayscale)','filter':new vI.bJ()},{'name':'ColorMatrixFilter (invert)','filter':new vI.dJ()},{'name':'BlurFilter (radius 1)','filter':new uI(1,1)},{'name':'BlurFilter (radius 5)','filter':new uI(5,5)},{'name':'BlurFilter (radius 20)','filter':new uI(20,20)},{'name':'AlphaMaskFilter','filter':new AJ(SB.MC("sun"))}];oI(){var l=SB.MC('king');var v=new CB(230,245,true,0xFFF0F0F0);var p=new List<dE>();for(int h=0;h<hJ.length;h++ ){var q=hJ[h]['filter'] as bB;var w=hJ[h]['name'] as String;var m=235*(h%4);var n=250*(h~/4);var k=q.qC();k.HI(l.width,l.height);var o=new dE(v);o.x=m;o.y=n;HB(o);var i=new dE(l);i.x=m+40;i.y=n+45;i.BI=[q];i.rH(k.left,k.top,k.width,k.height);HB(i);p.add(i);var g=new hE();g.LC=new OD('Helvetica Neue, Helvetica, Arial',14,cB.QD);g.x=m+5;g.y=n+5;g.width=200;g.text=w;HB(g);}var s=hJ[7]["filter"];var DB=p[7];var j=s.matrix;YB.transition(0.0,JC.PI*2*100,600.0,CC.lC,(GB){j.jF();j.translate(-64,-64);j.scale(1.0,1.5);j.rotate(GB);j.translate(l.width/2-15,l.height/2-20);DB.xF();});}}class pI extends TB{final  gJ=new JC.Random();pI(){var g=new tC();g.FC=470;g.OC=250;g.x=470;g.y=250;HB(g);for(int h=0;h<150;h++ ){var w=1+gJ.nextInt(3);var p=SB.MC('flower${w}');var i=new dE(p);i.FC=64;i.OC=64;i.x=64+gJ.nextInt(940-128);i.y=64+gJ.nextInt(500-128);g.HB(i);var o=new TD(i,600,CC.lC);o.nC.PC.bC(JC.PI*60.0);YB.add(o);}var k=new List<EB>();for(int h=0;h<6;h++ ){var n=(h*60)*JC.PI/180;var m=(h*60+30)*JC.PI/180;k.add(new EB(470+200*JC.cos(n),250+200*JC.sin(n)));k.add(new EB(470+100*JC.cos(m),250+100*JC.sin(m)));}var s=new gC.UJ(100,100,740,300);var v=new gC.WJ(470,250,200);var q=new gC.YJ(k);XB.query('#mask-none').onClick.listen((j)=>g.mask=null);XB.query('#mask-rectangle').onClick.listen((j)=>g.mask=s);XB.query('#mask-circle').onClick.listen((j)=>g.mask=v);XB.query('#mask-custom').onClick.listen((j)=>g.mask=q);XB.query('#mask-spin').onClick.listen((j){var l=new TD(g,2.0,CC.oH);l.nC.PC.bC(JC.PI*4.0);l.onComplete=()=>g.PC=0.0;YB.add(l);});}}class jI extends TB{var gJ=new JC.Random();var jJ;var kJ;jI(){jJ=SB.iF('walkTextureAtlas');kJ=jJ.FI('walk');mJ();}mJ(){var h=gJ.nextDouble();var g=new IG(kJ,30);g.x=-128;g.y=20.0+180.0*h;g.QC=g.RC=0.5+0.5*h;g.play();HB(g);ZI((k,j)=>(k.y-j.y).toInt());var i=new TD(g,5.0+(1.0-h)*5.0,CC.lC);i.nC.x.bC(940.0);i.onComplete=(){YB.remove(g);yF(g);};YB.add(g);YB.add(i);YB.wH(mJ,0.2);}}class lI extends dE implements sB{var jD,kD;lI( g,this.jD,this.kD):super(g){this.FC=g.width/2;this.OC=g.height/2;} DC( i){var g=x+jD*i;var h=y+kD*i;if(g>910||g<30)jD=-jD;else x=g;if(h>470||h<30)kD=-kD;else y=h;return true;}}class nI extends TB{final  iJ=['C4','A3','A3','C4','D4','G3','G3','A3','A3#','F4','F4','E4','C4','D4','C4','A3#','A3','C4','D4','D4','D4','G4','F4','E4','F4','D4','C4','F3','G3','A3','D4','C4','C4','A3#','A3','E3','F3'];final  lJ=['Hey ','Jude, ',"don't ",'make ','it ','bad.<br>','Take ','a ','sad ','song ','and ','make ','it ','better.<br>','','','','Remember ','','','to ','let ','her ','into ','','your ','heart.<br>','Than ','you ','can ','start ','','to ','make ','things ','better.','',' '];nI(){var h=new dE(SB.MC('Background'));HB(h);var g=new CG(iJ,lJ);g.x=120;g.y=30;HB(g);XB.query('#startOver').onClick.listen((i)=>g.XI());}}class kI extends TB{final  text='Filet mignon leberkas pig pork chop biltong, short loin strip steak turkey brisket ' 'venison. Pastrami venison pancetta, leberkas pork chop chicken prosciutto beef ribs ' 'bresaola kielbasa swine biltong capicola. Hamburger beef ribs ball tip drumstick salami ' 'pig. Capicola pork loin shank, salami chicken hamburger tail. Sirloin spare ribs ' 'ground round cow strip steak prosciutto swine bacon corned beef.';kI(){var j=new hE();j.LC=new OD('Helvetica,Arial',14,cB.aH,bold:true,italic:true);j.text=text;j.x=10;j.y=10;j.width=920;j.height=20;HB(j);var h=new hE();h.LC=new OD('Helvetica,Arial',16,cB.aF);h.text=text;h.x=10;h.y=50;h.width=200;h.height=300;h.wordWrap=true;HB(h);var g=new hE();g.LC=new OD('Helvetica,Arial',16,cB.tG,align:WC.zE);g.text=text;g.x=300;g.y=50;g.width=200;g.height=300;g.wordWrap=true;HB(g);var i=new hE();i.LC=new OD('Caesar Dressing',30,cB.QD,align:WC.uD);i.text=text;i.x=590;i.y=50;i.width=340;i.height=300;i.wordWrap=true;HB(i);}}class mI extends TB{mI(){var g=new hE();g.LC=new OD('Helvetica,Arial',14,cB.NH,bold:true);g.text='ToDo: show a cool demo ...';g.x=10;g.y=10;g.width=920;g.height=20;HB(g);}}var xB;var lD;var YB;var SB; main(){CB.PF.webp=true;var k=XB.window.location.pathname;var j=new RegExp(r"([A-Za-z0-9-]+)\.html",multiLine:false,caseSensitive:false);var g=j.firstMatch(k);if(g!=null&&g.groupCount==1){var h=g.group(1);print("current page: ${h}");var i=XB.query("#stage");if(i!=null){xB=new uB('stage',i);lD=new qD();lD.qH(xB);YB=lD.JE;SB=new aE();}switch (h){case "filter":SB..kB('king','images/king.png')..kB('sun','images/Sun.png')..load().then((sJ)=>xB.HB(new oI()));break;case "masking":SB..kB('flower1','images/Flower1.png')..kB('flower2','images/Flower2.png')..kB('flower3','images/Flower3.png')..load().then((sJ)=>xB.HB(new pI()));break;case "flipbook":SB..cF('walkTextureAtlas','images/walk.json',ND.wD)..load().then((sJ)=>xB.HB(new jI()));break;case "performance":SB..cF('flags','images/flags.json',ND.wD)..load().then((sJ)=>xB.HB(new qI()));break;case "sound":SB..kB('KeyBlack','images/piano/KeyBlack.png')..kB('KeyWhite0','images/piano/KeyWhite0.png')..kB('KeyWhite1','images/piano/KeyWhite1.png')..kB('KeyWhite2','images/piano/KeyWhite2.png')..kB('KeyWhite3','images/piano/KeyWhite3.png')..kB('Finger','images/piano/Finger.png')..kB('Background','images/piano/Background.jpg')..JB('Cheer','sounds/Cheer.mp3')..JB('Note1','sounds/piano/Note1.mp3')..JB('Note2','sounds/piano/Note2.mp3')..JB('Note3','sounds/piano/Note3.mp3')..JB('Note4','sounds/piano/Note4.mp3')..JB('Note5','sounds/piano/Note5.mp3')..JB('Note6','sounds/piano/Note6.mp3')..JB('Note7','sounds/piano/Note7.mp3')..JB('Note8','sounds/piano/Note8.mp3')..JB('Note9','sounds/piano/Note9.mp3')..JB('Note10','sounds/piano/Note10.mp3')..JB('Note11','sounds/piano/Note11.mp3')..JB('Note12','sounds/piano/Note12.mp3')..JB('Note13','sounds/piano/Note13.mp3')..JB('Note14','sounds/piano/Note14.mp3')..JB('Note15','sounds/piano/Note15.mp3')..JB('Note16','sounds/piano/Note16.mp3')..JB('Note17','sounds/piano/Note17.mp3')..JB('Note18','sounds/piano/Note18.mp3')..JB('Note19','sounds/piano/Note19.mp3')..JB('Note20','sounds/piano/Note20.mp3')..JB('Note21','sounds/piano/Note21.mp3')..JB('Note22','sounds/piano/Note22.mp3')..JB('Note23','sounds/piano/Note23.mp3')..JB('Note24','sounds/piano/Note24.mp3')..JB('Note25','sounds/piano/Note25.mp3')..load().then((sJ)=>xB.HB(new nI()));break;case "text":xB.HB(new kI());break;case "tweener":xB.HB(new mI());break;}}}class qI extends TB{qI(){nJ(250);XB.query('#minus10').onClick.listen((g)=>oJ(10));XB.query('#minus50').onClick.listen((g)=>oJ(50));XB.query('#plus50').onClick.listen((g)=>nJ(50));XB.query('#plus10').onClick.listen((g)=>nJ(10));this.NI.listen(pJ);}var qJ=null;pJ( g){if(qJ==null){qJ=1.00/g.sF;}else{qJ=0.05/g.sF+0.95*qJ;}XB.query('#fpsMeter').innerHtml='fps: ${qJ.round()}';}nJ( l){var g=new JC.Random();var i=SB.iF('flags');var j=i.CI;while ( --l>=0){var k=j[g.nextInt(j.length)];var m=i.MC(k);var h=new lI(m,g.nextInt(200)-100,g.nextInt(200)-100);h.x=30+g.nextInt(940-60);h.y=30+g.nextInt(500-60);HB(h);YB.add(h);}XB.query('#flagCounter').innerHtml='Flags: ${KE}';}oJ( h){while ( --h>=0&&KE>0){var g=GI(0);g.zF();YB.remove(g);}XB.query('#flagCounter').innerHtml='Flags: ${KE}';}}class CG extends TB{final  sC;final  rC;final  rJ=['C3','C3#','D3','D3#','E3','F3','F3#','G3','G3#','A3','A3#','B3','C4','C4#','D4','D4#','E4','F4','F4#','G4','G4#','A4','A4#','B4','C5'];var tJ=new Map<String,DG>();var uJ;var vJ=0;CG(this.sC,this.rC){for(int h=0,i=0;h<rJ.length;h++ ){var k=SB.hF('Note${h+1}');var j=rJ[h];var g=tJ[j]=new DG(this,j,k);if(j.endsWith('#')){g.x=i-16;g.y=35;HB(g);}else{g.x=i;g.y=35;bF(g,0);i=i+47;}}uJ=new dE(SB.MC('Finger'));uJ.FC=20;HB(uJ);wJ();}uH( g){if(vJ<sC.length&&sC[vJ]==g){if(vJ==sC.length-1)SB.hF('Cheer').play();vJ++ ;wJ();}}XI(){vJ=0;uJ.alpha=1;wJ();}wJ(){var h=XB.query('#lyrics');var m=-1;h.innerHtml='';for(int g=0,j=0;g<rC.length;g++ ){if(rC[g]!='')j=g;if(g==this.vJ)m=j;}for(int g=0;g<rC.length;g++ ){if(g==m){h.appendHtml('<span id="word">${rC[g]}</span>');}else{h.appendHtml(rC[g]);}}if(vJ<sC.length){var k=sC[vJ];if(tJ.containsKey(k)){var i=tJ[k];YB.VI(uJ);uJ.y=0;var n=new TD(this.uJ,0.4,CC.YH);var l=new TD(this.uJ,0.4,CC.FH);n.nC.x.bC(i.x+i.width/2);l.nC.y.bC(-10);YB.add(n);YB.add(l);}}else{var o=new TD(uJ,0.4,CC.lC);o.nC.alpha.bC(0);YB.add(o);}}}class DG extends tC{final  tF;final  gB;final  BG;DG(this.tF,this.gB,this.BG){var h;if(gB.endsWith('#')){h='KeyBlack';}else if(gB.startsWith('C5')){h='KeyWhite0';}else if(gB.startsWith('C')||gB.startsWith('F')){h='KeyWhite1';}else if(gB.startsWith('D')||gB.startsWith('G')||gB.startsWith('A')){h='KeyWhite2';}else if(gB.startsWith('E')||gB.startsWith('B')){h='KeyWhite3';}var i=SB.MC(h);var l=new dE(i);this.HB(l);var j=gB.endsWith('#')?cB.pH:cB.QD;var k=new OD('Helvetica,Arial',10,j,align:WC.uD);var g=new hE();g.LC=k;g.text=gB;g.width=i.width;g.height=20;g.pF=false;g.y=i.height-20;HB(g);this.QE=true;this.onMouseDown.listen(xJ);this.onMouseOver.listen(xJ);this.onMouseUp.listen(yJ);this.onMouseOut.listen(yJ);}xJ( g){if(g.EC){this.BG.play();this.alpha=0.7;this.tF.uH(this.gB);}}yJ( g){this.alpha=1.0;}}const rI=const sI();class sI{const sI();}class wC{var EK;var LK;var zJ=0.0;var DK=0.0;var KK=0.0;var XK=0.0;var VL=0.0;var gL=0.0;var pL=0.0;wC.XJ(this.EK,this.LK); get x=>zJ; get y=>DK; get width=>KK; get height=>XK; get WD=>VL; get FE=>gL; get leading=>pL;}abstract class rD{ KB( g);}abstract class bB{ clone(); apply( h, i, j, g); qC();}class uI extends bB{var blurX;var blurY;uI([this.blurX=4,this.blurY=4]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>64||blurY>64)throw new ArgumentError("Error #9004: The maximum blur size is 64.");} clone(){return new uI(blurX,blurY);} apply( IC, s, w, nB){var OB=IC.getImageData(s.x,s.y,s.width,s.height,w.GC);var oB=OB.data;var j=w.GC;var GB=OB.width;var iB=OB.height;var hB=(blurX*blurX*j*j).floor();var pB=(blurY*blurY*j*j).floor();var vB=(1<<22)~/hB;var cC=(1<<22)~/pB;var m=(blurX*j).floor();var qB=(blurX*j*2).floor();var DB=(blurY*j).floor();var rB=(blurY*j*2).floor();var NB=GB+qB;var QB=iB+rB;var wB=GB*4;var PB=NB*4;var RB=w.createImageData(NB,QB);var v=RB.data;var k=new List<int>(1024);cH(oB);for(int i=0;i<4;i++ ){for(int h=0;h<GB;h++ ){var l=0,n=pB>>1;var o=h*4+i;var p=(h+m)*4+i;for(int g=0;g<QB;g++ ){v[p]=(n*cC)>>22;p+= PB;if(g>=rB){l-= 2*k[g&1023]-k[(g-DB)&1023];}else if(g>=DB){l-= 2*k[g&1023];}var q=(g<iB)?oB[o]:0;k[(g+DB)&1023]=q;n+= l+= q;o+= wB;}}}for(int i=0;i<4;i++ ){for(int g=0;g<QB;g++ ){var l=0,n=hB>>1;var o=g*PB+m*4+i;var p=g*PB+i;for(int h=0;h<NB;h++ ){v[p]=(n*vB)>>22;p+= 4;if(h>=qB){l-= 2*k[h&1023]-k[(h-m)&1023];}else if(h>=m){l-= 2*k[h&1023];}var q=(h<GB)?v[o]:0;k[(h+m)&1023]=q;n+= l+= q;o+= 4;}}}dH(v);w.putImageData(RB,nB.x-m,nB.y-DB);} qC(){return new u(-blurX,-blurY,2*blurX,2*blurY);}}class vI extends bB{final  TK;vI( h):TK=new List<num>(20){if(h.length!=20)throw new ArgumentError("The supplied matrix needs to be a 4 x 5 matrix.");for(int g=0;g<h.length;g++ )TK[g]=h[g];}vI.bJ():TK=[0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0,0,0,1,0];vI.dJ():TK=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]; clone(){return new vI(TK);} apply( IC, m, hB, vB){var q=IC.getImageData(m.x,m.y,m.width,m.height,hB.GC);var h=q.data;var nB=(TK[00]*65536).toInt();var OB=(TK[01]*65536).toInt();var wB=(TK[02]*65536).toInt();var p=(TK[03]*65536).toInt();var oB=(TK[04]*65536).toInt();var qB=(TK[05]*65536).toInt();var NB=(TK[06]*65536).toInt();var rB=(TK[07]*65536).toInt();var w=(TK[08]*65536).toInt();var n=(TK[09]*65536).toInt();var s=(TK[10]*65536).toInt();var v=(TK[11]*65536).toInt();var iB=(TK[12]*65536).toInt();var pB=(TK[13]*65536).toInt();var GB=(TK[14]*65536).toInt();var DB=(TK[15]*65536).toInt();var RB=(TK[16]*65536).toInt();var QB=(TK[17]*65536).toInt();var o=(TK[18]*65536).toInt();var PB=(TK[19]*65536).toInt();if(ZC){for(int g=0;g<=h.length-4;g+= 4){var k=h[g+0];var l=h[g+1];var j=h[g+2];var i=h[g+3];h[g+0]=((nB*k)+(OB*l)+(wB*j)+(p*i)+oB)>>16;h[g+1]=((qB*k)+(NB*l)+(rB*j)+(w*i)+n)>>16;h[g+2]=((s*k)+(v*l)+(iB*j)+(pB*i)+GB)>>16;h[g+3]=((DB*k)+(RB*l)+(QB*j)+(o*i)+PB)>>16;}}else{for(int g=0;g<=h.length-4;g+= 4){var i=h[g+0];var j=h[g+1];var l=h[g+2];var k=h[g+3];h[g+0]=((DB*k)+(RB*l)+(QB*j)+(o*i)+PB)>>16;h[g+1]=((s*k)+(v*l)+(iB*j)+(pB*i)+GB)>>16;h[g+2]=((qB*k)+(NB*l)+(rB*j)+(w*i)+n)>>16;h[g+3]=((nB*k)+(OB*l)+(wB*j)+(p*i)+oB)>>16;}}hB.putImageData(q,vB.x,vB.y);} qC(){return new u(0,0,0,0);}}class xI extends bB{var distance;var angle;var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;xI([this.distance=4.0,this.angle=JC.PI/4,this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=1.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>64||blurY>64)throw new ArgumentError("Error #9004: The maximum blur size is 64.");} clone(){return new xI(distance,angle,color,alpha,blurX,blurY,strength,inner,knockout,hideObject);} apply( NB, o, m, PB){var oB=NB;if(NB==m&&!hideObject){oB=NB.clone(m.GC);}var RE=NB.getImageData(o.x,o.y,o.width,o.height,m.GC);var SE=RE.data;var k=m.GC;var q=o.width;var hB=o.height;var wB=(blurX*blurX*k*k).floor();var vB=(blurY*blurY*k*k).floor();var TE=(1<<22)~/wB;var UE=(1<<22)~/vB;var p=(blurX*k).floor();var GD=(blurX*k*2).floor();var QB=(blurY*k).floor();var qB=(blurY*k*2).floor();var RB=q+GD;var OB=hB+qB;var VE=q*4;var iB=RB*4;var GB=ZC?3:0;var HD=m.createImageData(RB,OB);var h=HD.data;var l=new List<int>(1024);for(int i=0;i<q;i++ ){var n=0,v=vB>>1;var s=i*4+GB;var w=(i+p)*4+GB;for(int j=0;j<OB;j++ ){h[w]=(v*UE)>>22;w+= iB;if(j>=qB){n-= 2*l[j&1023]-l[(j-QB)&1023];}else if(j>=QB){n-= 2*l[j&1023];}var DB=(j<hB)?SE[s]:0;l[(j+QB)&1023]=DB;v+= n+= DB;s+= VE;}}for(int j=0;j<OB;j++ ){var n=0,v=wB>>1;var s=j*iB+p*4+GB;var w=j*iB+GB;for(int i=0;i<RB;i++ ){h[w]=(v*TE)>>22;w+= 4;if(i>=GD){n-= 2*l[i&1023]-l[(i-p)&1023];}else if(i>=p){n-= 2*l[i&1023];}var DB=(i<q)?h[s]:0;l[(i+p)&1023]=DB;v+= n+= DB;s+= 4;}}var cC=(alpha*256).toInt();var pB=(color>>16)&0xFF;var nB=(color>>8)&0xFF;var ID=(color>>0)&0xFF;if(ZC){for(var g=0;g<=h.length-4;g+= 4){h[g+0]=pB;h[g+1]=nB;h[g+2]=ID;h[g+3]=(h[g+3]*cC)>>8;}}else{for(var g=0;g<=h.length-4;g+= 4){h[g+0]=(h[g+0]*cC)>>8;h[g+1]=ID;h[g+2]=nB;h[g+3]=pB;}}var JD=PB.x;var rB=PB.y;var IC=PB.x-p+(this.distance*JC.cos(this.angle)).round();var KD=PB.y-QB+(this.distance*JC.sin(this.angle)).round();var WE=new u(JD,rB,q,hB);var XE=new u(IC,KD,RB,OB);var YE=WE.union(XE);m.fillRect(YE,cB.DE);m.putImageData(HD,IC,KD);if(this.hideObject==false){m.pC(oB,new AB(1.0,0.0,0.0,1.0,JD,rB));}} qC(){var h=(this.distance*JC.cos(this.angle)).round();var g=(this.distance*JC.sin(this.angle)).round();var i=new u(0,0,0,0);var j=new u(h-blurX,g-blurY,2*blurX,2*blurY);return i.union(j);}}class tI extends bB{var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;tI([this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=2.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>64||blurY>64)throw new ArgumentError("Error #9004: The maximum blur size is 64.");} clone(){return new tI(color,alpha,blurX,blurY,strength,inner,knockout,hideObject);} apply( NB, o, m, PB){var oB=NB;if(NB==m&&!hideObject){oB=NB.clone(m.GC);}var RE=NB.getImageData(o.x,o.y,o.width,o.height,m.GC);var SE=RE.data;var k=m.GC;var q=o.width;var hB=o.height;var wB=(blurX*blurX*k*k).floor();var vB=(blurY*blurY*k*k).floor();var TE=(1<<22)~/wB;var UE=(1<<22)~/vB;var p=(blurX*k).floor();var GD=(blurX*k*2).floor();var QB=(blurY*k).floor();var qB=(blurY*k*2).floor();var RB=q+GD;var OB=hB+qB;var VE=q*4;var iB=RB*4;var GB=ZC?3:0;var HD=m.createImageData(RB,OB);var h=HD.data;var l=new List<int>(1024);for(int i=0;i<q;i++ ){var n=0,v=vB>>1;var s=i*4+GB;var w=(i+p)*4+GB;for(int j=0;j<OB;j++ ){h[w]=(v*UE)>>22;w+= iB;if(j>=qB){n-= 2*l[j&1023]-l[(j-QB)&1023];}else if(j>=QB){n-= 2*l[j&1023];}var DB=(j<hB)?SE[s]:0;l[(j+QB)&1023]=DB;v+= n+= DB;s+= VE;}}for(int j=0;j<OB;j++ ){var n=0,v=wB>>1;var s=j*iB+p*4+GB;var w=j*iB+GB;for(int i=0;i<RB;i++ ){h[w]=(v*TE)>>22;w+= 4;if(i>=GD){n-= 2*l[i&1023]-l[(i-p)&1023];}else if(i>=p){n-= 2*l[i&1023];}var DB=(i<q)?h[s]:0;l[(i+p)&1023]=DB;v+= n+= DB;s+= 4;}}var cC=(alpha*256).toInt();var pB=(color>>16)&0xFF;var nB=(color>>8)&0xFF;var ID=(color>>0)&0xFF;if(ZC){for(var g=0;g<=h.length-4;g+= 4){h[g+0]=pB;h[g+1]=nB;h[g+2]=ID;h[g+3]=(h[g+3]*cC)>>8;}}else{for(var g=0;g<=h.length-4;g+= 4){h[g+0]=(h[g+0]*cC)>>8;h[g+1]=ID;h[g+2]=nB;h[g+3]=pB;}}var JD=PB.x;var rB=PB.y;var IC=PB.x-p;var KD=PB.y-QB;var WE=new u(JD,rB,q,hB);var XE=new u(IC,KD,RB,OB);var YE=WE.union(XE);m.fillRect(YE,cB.DE);m.putImageData(HD,IC,KD);if(this.hideObject==false){m.pC(oB,new AB(1.0,0.0,0.0,1.0,JD,rB));}} qC(){return new u(-blurX,-blurY,2*blurX,2*blurY);}}abstract class t extends zB implements rD{static var VG=0;var BL=VG++ ;var zJ=0.0;var DK=0.0;var WL=0.0;var jL=0.0;var rL=1.0;var AM=1.0;var GM=0.0;var LM=0.0;var RM=0.0;var XM=1.0;var aM=true;var dM=false;var kM=null;var pM=null;var uM=null;var yM=false;var HN=null;var IN=null;var LN=null;var VK="";var TN=null;final  WN=new AB.aJ();final  aN=new AB.aJ();var fN=true;static const  UH=const aB<CD>(FB.yD); get NI=>t.UH.forTarget(this); get x=>zJ; get y=>DK; get FC=>WL; get OC=>jL; get QC=>rL; get RC=>AM; get skewX=>GM; get skewY=>LM; get PC=>RM; get visible=>aM; get alpha=>XM; get mask=>kM; get tH=>pM!=null; get FD=>LN; get name=>VK; get parent=>TN; get ZD{var g=this.SC;return (g!=null)?this.NC(g.dO):null;} get KI{var g=this.ZD;return (g!=null)?g.x:0.0;} get LI{var g=this.ZD;return (g!=null)?g.y:0.0;} get root{var g=this;while (g.TN!=null)g=g.TN;return g;} get SC{var g=this.root;if(g is uB)return g;return null;}set x( g){zJ=g.toDouble();fN=true;}set y( g){DK=g.toDouble();fN=true;}set FC( g){WL=g.toDouble();fN=true;}set OC( g){jL=g.toDouble();fN=true;}set QC( g){rL=g.toDouble();fN=true;}set RC( g){AM=g.toDouble();fN=true;}set skewX( g){GM=g.toDouble();fN=true;}set skewY( g){LM=g.toDouble();fN=true;}set PC( g){RM=g.toDouble();fN=true;}set visible( g){aM=g;}set alpha( g){XM=g.toDouble();}set mask( g){kM=g;}set BI( g){HN=g;}set FD( g){LN=g;} setTransform( h, g,[ scaleX, scaleY, rotation, skewX, skewY, pivotX, pivotY]){fN=true;zJ=h.toDouble();DK=g.toDouble();if(scaleX!=null){rL=scaleX.toDouble();if(scaleY!=null){AM=scaleY.toDouble();if(rotation!=null){RM=rotation.toDouble();if(skewX!=null){GM=skewX.toDouble();if(skewY!=null){LM=skewY.toDouble();if(pivotX!=null){WL=pivotX.toDouble();if(pivotY!=null)jL=pivotY.toDouble();}}}}}}} get width=>mB(qL).width; get height=>mB(qL).height; set width( h){this.QC=1;var g=this.width;this.QC=(g!=0.0)?h/g:1.0;} set height( h){this.RC=1;var g=this.height;this.RC=(g!=0.0)?h/g:1.0;} zF(){if(TN!=null)TN.yF(this);} get qL{if(fN){fN=false;var j=GM+RM;var i=LM+RM;if(j==0.0&&i==0.0){aN.cD(rL,0.0,0.0,AM,zJ-WL*rL,DK-jL*AM);}else{var g,l,k,h;var m=JC.cos(j);var n=JC.sin(j);if(j==i){g=rL*m;l=rL*n;k=-AM*n;h=AM*m;}else{g=rL*JC.cos(i);l=rL*JC.sin(i);k=-AM*n;h=AM*m;}var p=zJ-(WL*g+jL*k);var o=DK-(WL*l+jL*h);aN.cD(g,l,k,h,p,o);}}return aN;} get bI{return qL.clone();} OE( h){if(h==TN)return qL.clone();if(h.TN==this)return h.qL.dF();var j=new AB.aJ();var g=this;while (g!=h&&g.TN!=null){j.concat(g.qL);g=g.TN;}if(h==null&&g!=null){j.concat(g.qL);g=null;}if(g==h)return j;var k=new AB.aJ();var i=h;while (i!=this&&i.TN!=null){k.concat(i.qL);i=i.TN;}k.IE();if(i==this)return k;if(i!=g)return null;j.concat(k);return j;} mB( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new u.VJ();returnRectangle.x=g.VB;returnRectangle.y=g.WB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} lB( g, h){if(mB(CE).contains(g,h))return this;return null;} NC( h){WN.jF();for(t g=this;g!=null;g=g.TN)WN.concat(g.qL);WN.IE();return WN.iD(h);} rH( k, i, g, h,{ debugBorder: false}){var j=uB.SD?VD:1.0;pM=new CB(g,h,true,cB.DE,j);uM=new u(k,i,g,h);yM=debugBorder;xF();} xF(){if(pM==null)return;var j=uM.x;var k=uM.y;var g=uM.width;var h=uM.height;pM.clear();pM.pC(this,new AB(1.0,0.0,0.0,1.0,-j,-k));if(HN!=null){for(int i=0;i<HN.length;i++ ){var l=new u(0,0,g,h);var m=new EB.VJ();HN[i].apply(pM,l,pM,m);}}if(yM){pM.fillRect(new u(0,0,g,1),0xFFFF00FF);pM.fillRect(new u(g-1,0,1,h),0xFFFF00FF);pM.fillRect(new u(0,h-1,g,1),0xFFFF00FF);pM.fillRect(new u(0,0,1,h),0xFFFF00FF);}} qO( g){var h=g.context;h.transform(1.0,0.0,0.0,1.0,uM.x,uM.y);pM.KB(g);} dispatchEvent( h){var g=null;if(h.XD||h.bubbles){for(t j=TN;j!=null;j=j.TN){if(j.wN(h.type,h.XD,h.bubbles)){if(g==null)g=UD.uF() as List<t>;g.add(j);}}}if(h.XD&&g!=null){for(int i=g.length-1;i>=0&&h.fD==false;i-- ){g[i].XN(h,this,g[i],tB.jE);}}if(h.fD==false){XN(h,this,this,tB.YC);}if(h.bubbles&&g!=null){for(int i=0;i<g.length&&h.fD==false;i++ ){g[i].XN(h,this,g[i],tB.YG);}}if(g!=null){g.clear();UD.vF(g);}} JO( h){for(var g=h;g!=null;g=g.TN)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");TN=h;} KB( g);}abstract class IB extends t{var zH=false;var pF=true;var TJ=true;var tabIndex=0;static const  iG=const aB<BB>(BB.GF);static const  sG=const aB<BB>(BB.KF);static const  yG=const aB<BB>(BB.CF);static const  DH=const aB<BB>(BB.rE);static const  KH=const aB<BB>(BB.xE);static const  XH=const aB<BB>(BB.MF); get onMouseOut=>IB.iG.forTarget(this); get onMouseOver=>IB.sG.forTarget(this); get onMouseMove=>IB.yG.forTarget(this); get onMouseDown=>IB.DH.forTarget(this); get onMouseUp=>IB.KH.forTarget(this); get onMouseWheel=>IB.XH.forTarget(this);static const  eH=const aB<MB>(MB.AF);static const  fH=const aB<MB>(MB.pE);static const  gH=const aB<MB>(MB.sE); get onTouchMove=>IB.eH.forTarget(this); get onTouchEnd=>IB.fH.forTarget(this); get onTouchCancel=>IB.gH.forTarget(this);static const  jH=const aB<BC>(BC.oE);static const  kH=const aB<BC>(BC.mE); get onKeyUp=>IB.jH.forTarget(this); get onKeyDown=>IB.kH.forTarget(this);static const  mH=const aB<uC>(uC.nE); get OI=>IB.mH.forTarget(this);}abstract class TB extends IB{final  rK=new List<t>();var ML=true;var YL=true; get KE=>rK.length; HB( g){if(g.parent==this){var h=rK.indexOf(g);rK.removeAt(h);rK.add(g);}else{bF(g,rK.length);}} bF( g, h){if(h<0||h>rK.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){rK.removeAt(rK.indexOf(g));if(h>rK.length)h-- ;rK.insert(h,g);}else{g.zF();g.JO(this);rK.insert(h,g);g.dispatchEvent(new FB(FB.QG,true));if(this.SC!=null)RO(g,new FB(FB.XG));}} yF( h){var g=rK.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");TI(g);} TI( g){if(g<0||g>=rK.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=rK[g];h.dispatchEvent(new FB(FB.kG,true));if(this.SC!=null)RO(h,new FB(FB.nG));h.JO(null);rK.removeAt(g);} GI( g){if(g<0||g>=rK.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");return rK[g];} ZI( g){rK.sort(g);} contains( g){for(;g!=null;g=g.TN)if(g==this)return true;return false;} mB( n,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new u.VJ();if(rK.length==0)return super.mB(n,returnRectangle);var h=double.INFINITY;var i=double.INFINITY;var k=double.NEGATIVE_INFINITY;var j=double.NEGATIVE_INFINITY;var o=rK.length;for(int l=0;l<rK.length;l++ ){var m=rK[l];WN.eF(m.qL,n);var g=m.mB(WN,returnRectangle);if(g.left<h)h=g.left;if(g.top<i)i=g.top;if(g.right>k)k=g.right;if(g.bottom>j)j=g.bottom;}returnRectangle.x=h;returnRectangle.y=i;returnRectangle.width=k-h;returnRectangle.height=j-i;return returnRectangle;} lB( i, k){i=i.toDouble();k=k.toDouble();var n=null;for(int l=rK.length-1;l>=0;l-- ){var j=rK[l];if(j.visible){var g=j.qL;var o=i-g.VB;var m=k-g.WB;var q=(g.d*o-g.c*m)/g.oC;var p=(g.a*m-g.b*o)/g.oC;var h=j.lB(q,p);if(h!=null){if(h is IB)if(h.pF)return ML?h:this;n=this;}}}return n;} KB( i){for(int h=0;h<rK.length;h++ ){var g=rK[h];if(!g.dM&&g.visible)i.WI(g);}}zO( g, i){i.add(g);if(g is TB){var k=g as TB;var j=k.rK;for(int h=0;h<j.length;h++ ){zO(j[h],i);}}}RO( i, j){var g=UD.uF() as List<t>;zO(i,g);for(int h=0;h<g.length;h++ ){g[h].dispatchEvent(j);}g.clear();UD.vF(g);}}class xC{static const  MG="exactFit";static const  UG="noBorder";static const  dG="noScale";static const  vE="showAll";}class BC extends FB{static const  mE="keyDown";static const  oE="keyUp";var zL=false;var HM=false;var NM=false;var UM=false;var bM=false;var jM=0;var oM=0;var rM=0;BC( g,[ bubbles=false]):super(g,bubbles); get altKey=>zL; get ctrlKey=>HM; get shiftKey=>NM; get charCode=>jM; get keyCode=>oM; get keyLocation=>rM;}class AB{var AK,BK,FK,GK,IK,NK;var YK;AB( h, i, g, j, k, l):AK=h.toDouble(),BK=i.toDouble(),FK=g.toDouble(),GK=j.toDouble(),IK=k.toDouble(),NK=l.toDouble(),YK=(h*j-i*g).toDouble();AB.aJ():AK=1.0,BK=0.0,FK=0.0,GK=1.0,IK=0.0,NK=0.0,YK=1.0; clone(){return new AB(AK,BK,FK,GK,IK,NK);} dF(){var h=(GK/YK);var i=-(BK/YK);var g=-(FK/YK);var j=(AK/YK);var k=-(h*IK+g*NK);var l=-(i*IK+j*NK);return new AB(h,i,g,j,k,l);} get a=>AK; get b=>BK; get c=>FK; get d=>GK; get VB=>IK; get WB=>NK; get oC=>YK; iD( h){var i=h.x.toDouble();var g=h.y.toDouble();return new EB(i*AK+g*FK+IK,i*BK+g*GK+NK);} NO( h){var i=h.x.toDouble();var g=h.y.toDouble();return new EB(i*AK+g*FK+IK,i*BK+g*GK+NK);} concat( g){var m=AK;var p=BK;var q=FK;var o=GK;var l=IK;var n=NK;var v=YK;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var w=g.VB;var s=g.WB;var DB=g.oC;AK=(m*j+p*i).toDouble();BK=(m*k+p*h).toDouble();FK=(q*j+o*i).toDouble();GK=(q*k+o*h).toDouble();IK=(l*j+n*i+w).toDouble();NK=(l*k+n*h+s).toDouble();YK=(v*DB).toDouble();} jF(){AK=1.0;BK=0.0;FK=0.0;GK=1.0;IK=0.0;NK=0.0;YK=1.0;} IE(){var j=AK;var m=BK;var l=FK;var k=GK;var h=IK;var i=NK;var g=YK;AK=(k/g).toDouble();BK=-(m/g).toDouble();FK=-(l/g).toDouble();GK=(j/g).toDouble();IK=-(AK*h+FK*i).toDouble();NK=-(BK*h+GK*i).toDouble();YK=(1.0/g).toDouble();} rotate( i){var g=JC.cos(i);var h=JC.sin(i);var j=AK;var n=BK;var m=FK;var l=GK;var k=IK;var o=NK;AK=(j*g-n*h).toDouble();BK=(j*h+n*g).toDouble();FK=(m*g-l*h).toDouble();GK=(m*h+l*g).toDouble();IK=(k*g-o*h).toDouble();NK=(k*h+o*g).toDouble();} scale( h, g){AK=(AK*h).toDouble();BK=(BK*g).toDouble();FK=(FK*h).toDouble();GK=(GK*g).toDouble();IK=(IK*h).toDouble();NK=(NK*g).toDouble();YK=(YK*h*g).toDouble();} translate( g, h){IK=(IK+g).toDouble();NK=(NK+h).toDouble();} cD( h, i, g, k, j, l){AK=h.toDouble();BK=i.toDouble();FK=g.toDouble();GK=k.toDouble();IK=j.toDouble();NK=l.toDouble();YK=(AK*GK-BK*FK).toDouble();} YD( g){AK=g.a.toDouble();BK=g.b.toDouble();FK=g.c.toDouble();GK=g.d.toDouble();IK=g.VB.toDouble();NK=g.WB.toDouble();YK=g.oC.toDouble();} eF( h, g){var n=h.a;var q=h.b;var s=h.c;var p=h.d;var m=h.VB;var o=h.WB;var w=h.oC;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var DB=g.VB;var v=g.WB;var GB=g.oC;AK=(n*k+q*j).toDouble();BK=(n*l+q*i).toDouble();FK=(s*k+p*j).toDouble();GK=(s*l+p*i).toDouble();IK=(m*k+o*j+DB).toDouble();NK=(m*l+o*i+v).toDouble();YK=(w*GB).toDouble();}}class FG{}class gE extends IB{gE();}class tB{static const  jE=1;static const  YC=2;static const  YG=3;}class uC extends FB{static const  nE="textInput";var EK="";uC( g,[ bubbles=false]):super(g,bubbles); get text=>EK;}class dC<yC extends FB> extends LB.Stream<yC>{final  kK;final  ZK;final  IL;final  eL=new List<PG>();var CM=0;dC(this.kK,this.ZK,this.IL); get isBroadcast=>true; asBroadcastStream()=>this; listen( h( event),{ onError(error), onDone(), cancelOnError: false}){var g=new PG<yC>(this,h);if(CM==eL.length){eL.add(g);}else{eL[CM]=g;}CM++ ;if(IL==false){switch (ZK){case FB.yD:AC.wE.GN(this);break;case FB.BF:AC.FF.GN(this);break;case FB.NF:AC.LF.GN(this);break;}}return g;} CN( h){for(int g=0;g<CM;g++ ){if(identical(eL[g],h)){eL[g]=null;break;}}} get FO{for(var g=0;g<CM;g++ )if(eL[g]!=null)return true;return false;} nN( k){var i=CM;var h=0;if(i is !int)throw "dart2js_hint";for(int g=0;g<i;g++ ){var j=eL[g];if(j==null)continue;j.fL(k);if(h!=g){eL[h]=eL[g];eL[g]=null;}h++ ;}if(h!=i){for(int g=i;g<CM;g++ ){eL[h++ ]=eL[g];eL[g]=null;}CM=h;}}}class gC{var HC=null;gC();factory gC.UJ( i, g, h, j){return new BJ(i,g,h,j);}factory gC.WJ( i, g, h){return new CJ(i,g,h);}factory gC.YJ( g){return new DJ(g);} KB( i, g){var h=i.context;h.setTransform(g.a,g.b,g.c,g.d,g.VB,g.WB);}}class MB extends FB{static const  kE="touchBegin";static const  pE="touchEnd";static const  sE="touchCancel";static const  AF="touchMove";static const  jG="touchOver";static const  oG="touchOut";var ZN;var bN;var dN,eN;var gN,hN;var zL;var bM;var HM;var NM;var kN;var lN;var mN;MB( g,[ bubbles=false]):super(g,bubbles){pN(g,bubbles);} pN( g,[ bubbles=false]){super.pN(g,bubbles);ZN=0;bN=false;dN=eN=0;gN=hN=0;zL=false;bM=false;HM=false;NM=false;kN=1.00;lN=0;mN=0;}set HO( g){dN=g.x;eN=g.y;}set IO( g){gN=g.x;hN=g.y;} get hD=>ZN; get kF=>dN; get lF=>eN; get altKey=>zL; get ctrlKey=>HM; get shiftKey=>NM;}class HG{HG();}class IG extends IB implements sB{var nK;var wK;var GL;var PL;var XL;var RK;var kL;var wL;var aC;IG( g,[ frameRate=30, loop=true]){nK=g;wK=frameRate;GL=0;PL=null;XL=false;RK=loop;kL=new FB(FB.VF);wL=new FB(FB.LH);aC=null;}static const  MH=const aB<FB>(FB.VF); get onProgress=>IG.MH.forTarget(this); get NE=>nK.length; set loop( g){RK=g;} play(){XL=true;PL=null;} stop(){XL=false;PL=null;} DC( j){if(XL==false)return true;if(PL==null){PL=0.0;XN(kL,this,this,tB.YC);}else{PL+= j;var i=1.0/wK;while (XL&&PL>=i){var h=GL;var g=RK?(h+1)%NE:JC.min(h+1,NE-1);GL=g;PL-= i;if(h!=g){XN(kL,this,this,tB.YC);if(GL!=g)return true;}if(h!=g&&g==NE-1&&RK==false){XN(wL,this,this,tB.YC);if(GL!=g)return true;}}}return true;} mB( h,[ returnRectangle]){var g=nK[GL];return BE(h,g.width,g.height,returnRectangle);} lB( g, h){var i=nK[GL];if(g>=0&&h>=0&&g<i.width&&h<i.height)return this;return null;} KB( g){var h=nK[GL];if(aC==null)h.KB(g);else h.AG(g,aC);}}class wI extends TB{var TK=new AB.aJ(); get qL=>TK; get matrix=>TK;set matrix( g){TK=g;}}abstract class jB{static  kC( g,[ soundLoadOptions=null]){switch (hC.pG){case "WebAudioApi":return pD.kC(g,soundLoadOptions);case "AudioElement":return nD.kC(g,soundLoadOptions);default:return XC.kC(g,soundLoadOptions);}}static var PF=new VC(mp3:true,mp4:true,ogg:true,wav:true); get length; play([ loop=false, soundTransform]);}abstract class UC extends zB{ set dD( g); stop();}class VC{var mp3;var mp4;var ogg;var wav;var ignoreErrors;VC({this.mp3: false,this.mp4: false,this.ogg: false,this.wav: false,this.ignoreErrors: true});}class ZB{var volume;var pan;var OJ=1;var PJ=0;var SJ=1;var RJ=0;ZB([this.volume=1,this.pan=0]);}class hC{static var pG=IH();static var RD=RH();static var QF=SH();static  IH(){var h=(RD!=null)?"WebAudioApi":"AudioElement";var g=XB.window.navigator.userAgent;if(g.contains("IEMobile"))if(g.contains("9.0")||g.contains("10.0"))h="Mock";if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod"))if(g.contains("OS 3")||g.contains("OS 4")||g.contains("OS 5"))h="Mock";if(QF.length==0)h="Mock";print("StageXL: supported audio engine is: ${h}");return h;}static  RH(){if(ZE.AudioContext.supported)return new ZE.AudioContext();return null;}static  SH(){var g=new List<String>();var h=new XB.AudioElement();var i=["maybe","probably"];if(i.indexOf(h.canPlayType("audio/mpeg",""))!=-1)g.add("mp3");if(i.indexOf(h.canPlayType("audio/mp4",""))!=-1)g.add("mp4");if(i.indexOf(h.canPlayType("audio/ogg",""))!=-1)g.add("ogg");if(i.indexOf(h.canPlayType("audio/wav",""))!=-1)g.add("wav");print("StageXL: supported audio types are: ${g}");return g;}static  YF( i, h){var l=new RegExp(r"(mp3|mp4|ogg|wav)$",multiLine:false,caseSensitive:true);var g=QF.toList();var k=l.firstMatch(i);var j=new List<String>();if(k==null){throw new ArgumentError("Unsupported file extension.");}if(g.length==0){throw new UnsupportedError("This browser supports no known audio codec.");}if(!h.mp3)g.remove("mp3");if(!h.mp4)g.remove("mp4");if(!h.ogg)g.remove("ogg");if(!h.wav)g.remove("wav");var m=k.group(1);if(g.contains(m)){j.add(i);g.remove(m);}for(var n in g){j.add(i.replaceAll(l,n));}return j;}}class nD extends jB{var UK;var mK;var KL;nD(){KL=new List<LD>();UK=new XB.AudioElement();UK.onEnded.listen(TM);mK=new List<XB.AudioElement>();mK.add(UK);XB.document.body.children.add(UK);}static  kC( k,[ soundLoadOptions=null]){if(soundLoadOptions==null)soundLoadOptions=jB.PF;var m=new nD();var g=m.UK;var h=hC.YF(k,soundLoadOptions);var i=new LB.Completer<jB>();if(h.length==0){return XC.kC(k,soundLoadOptions);}var j;var l;q(o){j.cancel();l.cancel();i.complete(m);}n(o){if(h.length>0){g.src=h.removeAt(0);g.load();}else{j.cancel();l.cancel();if(soundLoadOptions.ignoreErrors){XC.kC(k,soundLoadOptions).then((p)=>i.complete(p));}else{i.completeError(new StateError("Failed to load audio."));}}}j=g.onCanPlayThrough.listen(q);l=g.onError.listen(n);g.src=h.removeAt(0);g.load();return i.future;} get length{return UK.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new ZB();return new LD(this,loop,soundTransform);} lM( h){var g;if(mK.length==0){g=UK.clone(true);g.onEnded.listen(TM);}else{g=mK.removeAt(0);}KL.add(h);return g;} yN( g){var h=g.UK;var i=KL.indexOf(g);KL.removeAt(i);mK.add(h);if(UK.currentTime>0&&UK.ended==false)UK.currentTime=0;} TM( j){var i=j.target;var g=null;for(int h=0;h<KL.length&&g==null;h++ )if(KL[h].UK==i)g=KL[h];if(g!=null)g.stop();}}class LD extends UC{var hK;var UK;var RK;var jK;LD( g, i, h){hK=g;RK=i;jK=h;UK=g.lM(this);UK.loop=RK;this.dD=h;UK.play();} set dD( g){jK=g;if(UK!=null)UK.volume=(jK!=null)?jK.volume:1;} stop(){if(UK!=null){if(UK.ended==false)UK.pause();hK.yN(this);UK=null;}}}class pD extends jB{var QK;pD(){if(hC.RD==null)throw new UnsupportedError("This browser does not support Web Audio API.");}static  kC( h,[ soundLoadOptions=null]){if(soundLoadOptions==null)soundLoadOptions=jB.PF;var l=new pD();var g=new LB.Completer<jB>();var i=hC.YF(h,soundLoadOptions);var p=hC.RD;if(i.length==0){return XC.kC(h,soundLoadOptions);}q(m){p.decodeAudioData(m.response,( o){l.QK=o;g.complete(l);},(n){if(soundLoadOptions.ignoreErrors){XC.kC(h,soundLoadOptions).then((j)=>g.complete(j));}else{g.completeError(new StateError("Failed to decode audio."));}});}k(n){if(i.length>0){XB.HttpRequest.request(i.removeAt(0),responseType:'arraybuffer').then(q).catchError(k);}else{if(soundLoadOptions.ignoreErrors){XC.kC(h,soundLoadOptions).then((j)=>g.complete(j));}else{g.completeError(new StateError("Failed to load audio."));}}}k(null);return g.future;} get length{return QK.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new ZB();return new yI(this,loop,soundTransform);}}class yI extends UC{var fK;var jK;var RK;var SL;var iL;yI( j, h, i){fK=j;RK=h;jK=i;var g=hC.RD;SL=g.createGain();SL.connect(g.destination,0,0);SL.gain.value=(jK!=null)?JC.pow(jK.volume,2):1;iL=g.createBufferSource();iL.buffer=fK.QK;iL.loop=h;iL.connect(SL,0,0);iL.start(0);} set dD( g){jK=g;SL.gain.value=(jK!=null)?JC.pow(jK.volume,2):1;} stop(){iL.stop(0);}}class XC extends jB{XC(){}static  kC( g,[ soundLoadOptions=null]){return new LB.Future<jB>.value(new XC());} get length{return double.NAN;} play([ loop=false, soundTransform]){if(soundTransform==null){soundTransform=new ZB();}return new zI(this,loop,soundTransform);}}class zI extends UC{var RK;var jK;zI( i, h, g){RK=h;jK=g;}set dD( g){jK=g;} stop(){}}class hE extends IB{var EK="";var iK=null;var CL=JG.AE;var UL=eC.NG;var lL=0;var vL=0;var BM=0.0;var IM=0.0;var PM=0.0;var WM=0.0;var ZM=0.0;var eM=false;var hM=false;var mM=false;var sM=false;var xM=false;var AN="•";var EN=0x000000;var JN=0x000000;var NN=0;var KK=100;var XK=100;var SN=0.0;var VN=0.0;final  YN=new List<wC>();var cN=true;var iN=null;var iM=null;hE([ text, textFormat]){this.text=(text!=null)?text:"";this.LC=(textFormat!=null)?textFormat:new OD("Arial",12,0x000000);this.onKeyDown.listen(xN);this.OI.listen(zN);this.onMouseDown.listen(DO);} get text=>EK; get type=>UL; get width=>KK; get height=>XK; set text( g){EK=g.replaceAll('\r\n','\n').replaceAll('\r','\n');lL=EK.length;cN=true;} set LC( g){iK=g.clone();cN=true;} set wordWrap( g){eM=g;cN=true;} set width( g){KK=g.toDouble();cN=true;} set height( g){XK=g.toDouble();cN=true;} mB( g,[ returnRectangle]){return BE(g,KK,XK,returnRectangle);} lB( g, h){if(g>=0&&h>=0&&g<KK&&h<XK)return this;return null;} KB( i){uO();BM+= i.xH;var g=i.iM;g.drawImageScaled(iN,0.0,0.0,KK,XK);if(UL==eC.zC){var h=this.SC;if(h!=null&&h.focus==this&&BM.remainder(0.8)<0.4){g.fillStyle=BD(iK.color);g.fillRect(IM,PM,WM,ZM);}}}vO( DB){YN.clear();var j=0;var h='';var n='';var GB=0;var k=iK.size.toDouble();var QB=iK.topMargin.toDouble();var OB=iK.align.toString();var w=DB.WD.toDouble();var RB=DB.FE.toDouble();for(var v in EK.split('\n')){if(eM==false){YN.add(new wC.XJ(v,j));j+= v.length+1;}else{h=null;for(var s in v.split(' ')){n=h;h=(n==null)?s:"${n} ${s}";h=yO(h);GB=iM.measureText(h).width.toDouble();if(GB>=KK){if(n==null){YN.add(new wC.XJ(h,j));j+= h.length+1;h=null;}else{YN.add(new wC.XJ(n,j));j+= n.length+1;h=yO(s);}}}if(h!=null){YN.add(new wC.XJ(h,j));j+= h.length+1;}}}SN=0.0;VN=0.0;var p=0.0;var q=QB+k;for(int i=0;i<YN.length;i++ ){var g=YN[i];if(g is !wC)continue;var o=iM.measureText(g.EK).width.toDouble();switch (OB){case WC.uD:case WC.aG:p=(KK-o)/2;break;case WC.zE:case WC.TG:p=(KK-o);break;default:p=0;}g.zJ=p;g.DK=q;g.KK=o;g.XK=k;g.VL=w;g.gL=RB;g.pL=0.0;q=q+k;SN=JC.max(SN,o);VN=VN+k;}if(UL==eC.zC){for(int i=YN.length-1;i>=0;i-- ){var g=YN[i];if(g is !wC)continue;if(lL>=g.LK){var NB=lL-g.LK;var PB=g.EK.substring(0,NB);vL=i;IM=g.zJ+iM.measureText(PB).width.toDouble();PM=g.DK-w*0.9;WM=1.0;ZM=k;break;}}var l=0.0;var m=0.0;while (l+IM>KK)l-= KK*0.2;while (l+IM<0)l+= KK*0.2;while (m+PM+ZM>XK)m-= k;while (m+PM<0)m+= k;IM+= l;PM+= m;for(int i=0;i<YN.length;i++ ){var g=YN[i];if(g is !wC)continue;g.zJ+= l;g.DK+= m;}}} yO( g){if(g is !String)return g;if(mM==false)return g;var h="";for(int i=0;i<g.length;i++ ){h="${h}${AN}";}return h;}uO({ calculateOnly: false}){if(cN){cN=false;var h=(uB.SD?VD:1.0)/mC;var k=(KK*h).ceil();var i=(XK*h).ceil();if(iN==null){iN=new XB.CanvasElement(width:k,height:i);iM=iN.context2D;}if(iN.width!=k)iN.width=k;if(iN.height!=i)iN.height=i;var g="${iK.size}px ${iK.font},sans-serif";if(iK.bold)g="bold ${g}";if(iK.italic)g="italic ${g}";iM.font=g;iM.textAlign="start";iM.textBaseline="alphabetic";iM.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);vO(ZG(g));if(calculateOnly){cN=true;return;}iM.setTransform(h,0.0,0.0,h,0.0,0.0);if(sM){iM.fillStyle=BD(EN);iM.fillRect(0,0,KK,XK);}else{iM.clearRect(0,0,KK,XK);}iM.fillStyle=BD(iK.color);for(int l=0;l<YN.length;l++ ){var j=YN[l];iM.fillText(j.EK,j.zJ,j.DK);}if(xM){iM.strokeStyle=BD(JN);iM.lineWidth=1;iM.strokeRect(0,0,KK,XK);}}}xN( q){if(UL==eC.zC){uO(calculateOnly:true);var l=EK;var n=l.length;var j=YN;var g=lL;var i=vL;var h=-1;switch (q.keyCode){case XB.KeyCode.BACKSPACE:if(g>0){EK=l.substring(0,g-1)+l.substring(g);h=g-1;}break;case XB.KeyCode.END:var m=j[i];h=m.LK+m.EK.length;break;case XB.KeyCode.HOME:var m=j[i];h=m.LK;break;case XB.KeyCode.LEFT:if(g>0){h=g-1;}break;case XB.KeyCode.UP:if(i>0&&i<j.length){var o=j[i];var k=j[i-1];var p=JC.min(g-o.LK,k.EK.length);h=k.LK+p;}else{h=0;}break;case XB.KeyCode.RIGHT:if(g<n){h=g+1;}break;case XB.KeyCode.DOWN:if(i>=0&&i<j.length-1){var o=j[i];var k=j[i+1];var p=JC.min(g-o.LK,k.EK.length);h=k.LK+p;}else{h=n;}break;case XB.KeyCode.DELETE:if(g<n){EK=l.substring(0,g)+l.substring(g+1);h=g;}break;}if(h!=-1){lL=h;BM=0.0;cN=true;}}}zN( j){if(UL==eC.zC){var i=EK.length;var h=lL;var g=j.text;if(g=='\r')g='\n';if(g=='\n'&&hM==false)g='';if(g=='')return;if(NN!=0&&i>=NN)return;EK=EK.substring(0,h)+g+EK.substring(h);lL=lL+g.length;BM=0.0;cN=true;}}DO( n){var w=n.kF.toDouble();var l=n.lF.toDouble();if(iM==null)return;iM.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);for(int i=0;i<YN.length;i++ ){var g=YN[i];if(g is !wC)continue;var m=g.EK;var v=g.zJ;var q=g.DK-g.VL;var s=g.DK+g.gL;if(q<=l&&s>=l){var o=double.INFINITY;var j=0;for(var h=0;h<=m.length;h++ ){var p=iM.measureText(m.substring(0,h)).width.toDouble();var k=(v+p-w).abs();if(k<o){o=k;j=h;}}lL=g.LK+j;BM=0.0;cN=true;}}}}class JG{static const  AE="none";}class eC{static const  NG="dynamic";static const  zC="input";}class OD{var font;var size;var color;var bold;var italic;var underline;var align;var topMargin;var leftMargin;var rightMargin;var indent;var leading;OD(this.font,this.size,this.color,{this.bold: false,this.italic: false,this.underline: false,this.align: "left",this.topMargin: 0.0,this.leftMargin: 0.0,this.rightMargin: 0.0,this.indent: 0.0,this.leading: 0.0}); clone(){return new OD(font,size,color,bold:bold,italic:italic,underline:underline,align:align,topMargin:topMargin,leftMargin:leftMargin,rightMargin:rightMargin,indent:indent,leading:leading);}}class WC{static const  uD="center";static const  TG="end";static const  aG="justify";static const  zE="right";}class vC implements sB{final  aK=new List<sB>();var xK=0;var LL=0.0; add( g){if(g==null)return;if(this.contains(g))return;if(xK==aK.length){aK.add(g);}else{aK[xK]=g;}xK++ ;} remove( h){if(h==null)return;for(int g=0;g<xK;g++ ){if(identical(aK[g],h)){aK[g]=null;break;}}} contains( h){if(h==null)return false;for(int g=0;g<xK;g++ ){if(identical(aK[g],h)){return true;}}return false;} VI( i){if(i==null)return;for(int g=0;g<xK;g++ ){var h=aK[g];if(h!=null&&h is TD){if(identical(h.yH,i)){aK[g]=null;}}}} PE( g, h,[ transitionFunction]){var i=transitionFunction!=null?new TD(g,h,transitionFunction):new TD(g,h);add(i);return i;} transition( l, h, j, i, k( value)){var g=new HF(l,h,j,i);g.rF=k;add(g);return g;} wH( h, i){var g=new cE(h,i);add(g);return g;} DC( j){LL+= j;var i=xK;var h=0;if(i is !int)throw "dart2js_hint";for(int g=0;g<i;g++ ){var k=aK[g];if(k==null)continue;if(k.DC(j)==false){aK[g]=null;continue;}if(h!=g){aK[h]=aK[g];aK[g]=null;}h++ ;}if(h!=i){for(int g=i;g<xK;g++ ){aK[h++ ]=aK[g];aK[g]=null;}xK=h;}return true;}}class iC{static const  LG=0;static const  RG=1;static const  zE=2;static const  cG=3;static const  uE=4;}class TC{static var iE=dB.tD;static var SG=false;static var qE=null;static var eG=null;static var gG=null;static var lG=new LB.StreamController<String>();static var qG=lG.stream.asBroadcastStream();static  WF( i){var h=i;var g="auto";if(iE!=dB.tD){h=iE;}switch (h){case dB.tD:g="auto";break;case dB.vD:g="default";break;case dB.xD:g="pointer";break;case dB.fG:g="move";break;case dB.yE:g="text";break;case dB.hG:g="wait";break;}if(SG){g="none";}return g;}}class dB{static const  tD="auto";static const  vD="arrow";static const  xD="button";static const  fG="hand";static const  yE="ibeam";static const  hG="wait";}class cB{static const  QD=0xFF000000;static const  tG=0xFF0000FF;static const  NH=0xFFA9A9A9;static const  aH=0xFF008000;static const  aF=0xFFFF0000;static const  DE=0x00FFFFFF;static const  pH=0xFFFFFFFF;}class eE{static const  AE="none";static const  bG="touchPoint";}class aE{var bK;aE(){bK=new Map<String,MD>();} MM( g){var j=g.kind;var h=g.name;var i="${j}.${h}";if(bK.containsKey(i))throw new StateError("ResourceManager already contains a resource called '${h}'");bK[i]=g;} RN( i, g){var h="${i}.${g}";if(bK.containsKey(h)==false)throw new StateError("ResourceManager does not contains a resource called '${g}'");return bK[h];} kB( i, h,[ bitmapDataLoadOptions=null]){var g=new MD("BitmapData",i,h);g.UN(CB.kC(h,bitmapDataLoadOptions));MM(g);} JB( i, h,[ soundFileSupport=null]){var g=new MD("Sound",i,h);g.UN(jB.kC(h,soundFileSupport));MM(g);} cF( j, h, i){var g=new MD("TextureAtlas",j,h);g.UN(yB.kC(h,i));MM(g);} load(){var h=this.SI.map((i)=>i.pK);return LB.Future.wait(h).then((j){var g=this.AI;if(g.length>0)throw new StateError("Failed to load ${g.length} resource(s).");return this;});} get SI{return bK.values.where((g)=>g.bD==null).toList();} get AI{return bK.values.where((g)=>g.error!=null).toList();} MC( g){return RN("BitmapData",g).bD;} hF( g){return RN("Sound",g).bD;} iF( g){return RN("TextureAtlas",g).bD;}}class MD{var JK;var VK;var gK;var pK;var AL;var JL;MD( g, h, i){JK=g;VK=h;gK=i;AL=null;JL=null;} get kind=>JK; get name=>VK; get bD=>JL; get error=>AL;UN( i){pK=i.then((g){JL=g;AL=null;},onError:(h){JL=null;AL=h;});}}class yB{final  SK=new List<fE>();var zK;static  kC( n, w){var k=new LB.Completer<yB>();var g=new yB();switch (w){case ND.OG:case ND.wD:XB.HttpRequest.getString(n).then((s){var o=cI.parse(s);var h=o["frames"];var p=o["meta"];var GB=TH(n,p["image"]);if(h is List){for(var q in h){var j=q as Map;var i=j["filename"] as String;var l=XF(i);var m=new fE.ZJ(g,l,j);g.SK.add(m);}}if(h is Map){for(String i in h.keys){var j=h[i] as Map;var l=XF(i);var m=new fE.ZJ(g,l,j);g.SK.add(m);}}CB.kC(GB).then(( DB){g.zK=DB;k.complete(g);}).catchError((v){k.completeError(new StateError("Failed to load image."));});}).catchError((v){k.completeError(new StateError("Failed to load json file."));});break;}return k.future;} MC( h){for(int g=0;g<SK.length;g++ )if(SK[g].name==h)return new CB.fJ(SK[g]);throw new ArgumentError("TextureAtlasFrame not found: '${h}'");} FI( i){var h=new List<CB>();for(int g=0;g<SK.length;g++ )if(SK[g].name.startsWith(i))h.add(new CB.fJ(SK[g]));return h;} get CI{return SK.map((g)=>g.name).toList(growable:false);}}class ND{static const  OG="json";static const  wD="jsonarray";}class fE{final  MK;final  VK;final  tK;final  FL;final  RL;final  dL;final  oL;final  xL;final  DM;final  JM;final  SM;fE.ZJ( i, h, g):MK=i,VK=h,tK=CH(g["rotated"]),FL=KC(g["sourceSize"]["w"]),RL=KC(g["sourceSize"]["h"]),dL=KC(g["spriteSourceSize"]["x"]),oL=KC(g["spriteSourceSize"]["y"]),xL=KC(g["frame"]["x"]),DM=KC(g["frame"]["y"]),JM=KC(g["frame"]["w"]),SM=KC(g["frame"]["h"]); get aI=>MK; get name=>VK; get YI=>tK; get DI=>xL; get EI=>DM; get gF=>JM; get fF=>SM; get offsetX=>dL; get offsetY=>oL; get RI=>FL; get QI=>RL;}class EG<yC>{final  HK=new List<yC>();final  lK;var vK=0;EG( g()):lK=g; uF(){var g=vK;if(g is !int)throw "dart2js_hint";if(g==0){return lK();}else{vK=g-1;return HK[vK];}}vF( h){var g=vK;if(g is !int)throw "dart2js_hint";if(g==HK.length){HK.add(h);}else{HK[g]=h;}vK=g+1;}reset(){HK.clear();vK=0;}}final  sD=new Map<String,zD>();class BB extends FB{static const  lE="click";static const  WG="doubleClick";static const  rE="mouseDown";static const  xE="mouseUp";static const  CF="mouseMove";static const  GF="mouseOut";static const  KF="mouseOver";static const  MF="mouseWheel";static const  RF="middleClick";static const  xG="middleMouseDown";static const  BH="middleMouseUp";static const  SF="rightClick";static const  HH="rightMouseDown";static const  JH="rightMouseUp";var dN,eN;var gN,hN;var vN;var zL;var bM;var HM;var NM;var BO;var CO;var EO;BB( g,[ bubbles=false]):super(g,bubbles){pN(g,bubbles);} pN( g,[ bubbles=false]){super.pN(g,bubbles);dN=eN=0;gN=hN=0;vN=false;zL=false;bM=false;HM=false;NM=false;BO=0;CO=0;EO=0;}set HO( g){dN=g.x;eN=g.y;}set IO( g){gN=g.x;hN=g.y;} get kF=>dN; get lF=>eN; get EC=>vN; get altKey=>zL; get ctrlKey=>HM; get shiftKey=>NM; get ED=>BO; get deltaX=>CO; get deltaY=>EO;}class AC<yC extends FB>{final  OK=new List<dC>();var DL=0;static var wE=new AC<CD>();static var FF=new AC<IF>();static var LF=new AC<OF>(); GN( g){for(int h=0;h<DL;h++ ){if(OK[h]==g)return;}if(DL==OK.length){OK.add(g);}else{OK[DL]=g;}DL++ ;} nN( i){i.oN=tB.YC;i.qN=false;i.sN=false;var k=DL;var h=0;if(k is !int)throw "dart2js_hint";for(int g=0;g<k;g++ ){var j=OK[g];if(j==null)continue;if(j.CM==0){OK[g]=null;continue;}i.kK=j.kK;i.uN=j.kK;j.nN(i);if(h!=g){OK[h]=OK[g];OK[g]=null;}h++ ;}if(h!=k){for(int g=k;g<DL;g++ ){OK[h++ ]=OK[g];OK[g]=null;}DL=h;}}}class aB<yC extends FB>{final  ZK;const aB(this.ZK); forTarget( g,{ useCapture: false}){return g.sL(ZK,useCapture);}}class mD extends FB{mD( g):super(g,false); get XD=>false;}class GG{var x;var y;var wF;GG(this.x,this.y,this.wF);}class zB{var OK;var sK;dispatchEvent( g){XN(g,this,this,tB.YC);} wN( h, j, i){if(j&&sK!=null){var g=sK[h];if(g!=null&&g.FO)return true;}if(i&&OK!=null){var g=OK[h];if(g!=null&&g.FO)return true;}return false;} sL( h, g){if(g){if(sK==null)sK=new Map<String,dC>();}else{if(OK==null)OK=new Map<String,dC>();}var i=g?sK:OK;return i.putIfAbsent(h,(){return new dC(this,h,g);});}XN( g, k, l, j){var h=(j==tB.jE)?sK:OK;if(h==null)return;var i=h[g.type];if(i==null)return;g.kK=k;g.uN=l;g.oN=j;g.qN=false;g.sN=false;i.nN(g);}}class fC{final  matrix=new AB.aJ();var alpha=1.0;var FD=AD.PD;var aL; get MI{if(aL==null)aL=new fC();return aL;}}class cE implements sB{final  WK;var eK=0.0;var uK=0.0;var EL=1;cE( g, h):WK=g{uK=JC.max(h,0.0001);} DC( h){var g=eK+h;while (g>=uK&&EL>0){eK=uK;EL-- ;WK();g-= uK;}eK=g;return (EL>0);} get currentTime=>eK;}abstract class sB{ DC( g);}class tC extends TB{var FJ=false;var QE=false;var HE=null;var NL=null;var cL=null;tN(){var i=this.ZD;var j=this.SC;var m=this.visible;if(i!=null&&this.SC!=null){var h=TC.gG;if(h!=null){var g=qL.iD(i);if(g.x<h.left)g.x=h.left;if(g.x>h.right)g.x=h.right;if(g.y<h.top)g.y=h.top;if(g.y>h.bottom)g.y=h.bottom;i=qL.dF().iD(g);}var l=new EB(WL,jL).add(i).subtract(TC.eG);var k=qL.iD(l);this.visible=false;cL=j.lB(j.KI,j.LI);this.x=k.x;this.y=k.y;this.visible=m;}} mB( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new u.VJ();super.mB(g,returnRectangle);if(NL!=null){returnRectangle=NL.jO(g).union(returnRectangle);}return returnRectangle;} lB( i, j){var h=null;if(this.HE!=null){var g=this.OE(this.HE);if(g!=null){var k=i*g.a+j*g.c+g.VB;var l=i*g.b+j*g.d+g.WB;if(this.HE.lB(k,l)!=null){h=this;}}}else{h=super.lB(i,j);if(h==null&&NL!=null){if(NL.oO(i,j)){h=this;}}}return h;}KB( g){if(NL!=null)NL.KB(g);super.KB(g);}}class dE extends t{var bitmapData;var pixelSnapping;var aC;dE([this.bitmapData=null,this.pixelSnapping="auto"]){aC=null;} mB( h,[ returnRectangle]){var g=(bitmapData!=null)?bitmapData.width:0;var i=(bitmapData!=null)?bitmapData.height:0;return BE(h,g,i,returnRectangle);} lB( g, h){if(bitmapData!=null&&g>=0.0&&h>=0.0&&g<bitmapData.width&&h<bitmapData.height)return this;return null;} KB( g){if(bitmapData==null)return;if(aC==null){bitmapData.KB(g);}else{bitmapData.AG(g,aC);}}}class FB{static const  QG="added";static const  XG="addedToStage";static const  yD="enterFrame";static const  BF="exitFrame";static const  kG="removed";static const  nG="removedFromStage";static const  rG="resize";static const  NF="render";static const  LH="complete";static const  VF="progress";var UL;var rN;var oN;var kK;var uN;var qN;var sN;FB( g,[ bubbles=false]){pN(g,bubbles);} pN( g,[ bubbles=false]){UL=g;rN=bubbles;oN=tB.YC;kK=null;uN=null;qN=false;sN=false;} get fD=>qN; get type=>UL; get bubbles=>rN; get XD=>true; get target=>kK;}class oD{var png;var jpg;var webp;var autoHiDpi;oD({this.png: true,this.jpg: true,this.webp: false,this.autoHiDpi: true});}class bE{final  PE;bE(this.PE);call( h, g){OL(h).bC(g);} get x=>OL("x"); get y=>OL("y"); get QC=>OL("scaleX"); get RC=>OL("scaleY"); get skewX=>OL("skewX"); get skewY=>OL("skewY"); get FC=>OL("pivotX"); get OC=>OL("pivotY"); get PC=>OL("rotation"); get alpha=>OL("alpha"); OL( h){var g=new fB(h);this.PE.OL(g);return g;}}class EB{var zJ;var DK;EB( h, g):zJ=h,DK=g;EB.VJ():this(0,0); clone()=>new EB(zJ,DK); toString()=>"Point [x=${zJ}, y=${DK}]"; get x=>zJ; get y=>DK; get length=>JC.sqrt(zJ*zJ+DK*DK);set x( g){zJ=g;}set y( g){DK=g;} add( g){return new EB(zJ+g.x,DK+g.y);} subtract( g){return new EB(zJ-g.x,DK-g.y);}YD( g){zJ=g.x;DK=g.y;} GE( g){return zJ==g.x&&DK==g.y;}}class qD{var CK;var PK;var dK;var qK;var hL;var tL;var FM;var OM;qD(){CK=new vC();PK=new List<uB>();dK=-1;hL=false;tL=new CD(0);FM=new IF();OM=new OF();qK=ON;QN();} get JE=>CK;QN(){XB.window.requestAnimationFrame(qK);}ON( g){QN();g=g.toDouble();if(dK==-1)dK=g;if(dK>g)dK=g;var j=g-dK;var i=j/1000.0;var k=g/1000.0;var l=false;if(j>=1){dK=g;tL.ZL=i;AC.wE.nN(tL);CK.DC(i);for(int h=0;h<PK.length;h++ ){PK[h].JE.DC(i);}if(hL){hL=false;AC.LF.nN(OM);}for(int h=0;h<PK.length;h++ ){PK[h].JI(k,i);}AC.FF.nN(FM);}} qH( g){if(g.ME!=null){g.ME.UI(g);}PK.add(g);g.VO=this;} UI( g){if(g.ME==this){PK.remove(g);g.VO=null;}}}class u{var zJ;var DK;var KK;var XK;u( i, g, h, j):zJ=i,DK=g,KK=h,XK=j;u.VJ():this(0,0,0,0); clone()=>new u(zJ,DK,KK,XK); toString()=>"Rectangle [x=${zJ}, y=${DK}, width=${KK}, height=${XK}]"; get x=>zJ; get y=>DK; get width=>KK; get height=>XK; get left=>zJ; get top=>DK; get right=>zJ+KK; get bottom=>DK+XK; get topLeft=>new EB(zJ,DK); get size=>new EB(KK,XK);set x( g){zJ=g;}set y( g){DK=g;}set width( g){KK=g;}set height( g){XK=g;} contains( g, h){return zJ<=g&&DK<=h&&zJ+KK>=g&&DK+XK>=h;} containsRect( g){return zJ<=g.x&&DK<=g.y&&zJ+KK>=g.right&&DK+XK>=g.bottom;} GE( g){return zJ==g.x&&DK==g.y&&KK==g.width&&XK==g.height;} get isEmpty{return KK==0&&XK==0;}YD( g){zJ=g.x;DK=g.y;KK=g.width;XK=g.height;}HI( h, g){KK=KK+h;XK=XK+g;} union( g){var i=JC.min(this.left,g.left);var h=JC.min(this.top,g.top);var j=JC.max(this.right,g.right);var k=JC.max(this.bottom,g.bottom);return new u(i,h,j-i,k-h);} align(){var h=this.left.floor();var g=this.top.floor();var i=this.right.ceil();var j=this.bottom.ceil();return new u(h,g,i-h,j-g);}}class AJ extends bB{final  cK;final  TK;AJ( g,[ matrix]):cK=g,TK=(matrix!=null)?matrix:new AB.aJ(); get matrix=>TK; clone(){return new AJ(cK,TK.clone());} apply( l, h, k, j){var n=new u(j.x,j.y,h.width,h.height);var o=new u(0,0,k.width,k.height);var i=new tC();var g=new wI();var m=new dE(cK);i.x=j.x;i.y=j.y;i.HB(g);g.matrix=TK;g.FD=AD.uG;g.HB(m);if(!n.containsRect(o)){g.mask=new gC.UJ(0,0,h.width,h.height);g.mask.HC=i;}if(!identical(l,k)||!h.topLeft.GE(j)){k.vH(l,h,j);}k.pC(i,i.bI);} qC(){return new u.VJ();}}class CB implements rD{var KK;var XK;var oK;var yK;var HL;var TL;var bL;var nL;var yL;var EM;var KM;var QM;var VM;var YM;var fM;var iM;static var PF=new oD();CB( h, i,[ transparent=true, fillColor=0xFFFFFFFF,pixelRatio=1.0]){KK=h.toInt();XK=i.toInt();oK=transparent;yK=pixelRatio.toDouble();HL=yK/mC;TL=((1.0-HL).abs()<0.001)?0:1;yL=0;EM=0;bL=KK;nL=XK;KM=0;QM=0;VM=(KK*HL).ceil();YM=(XK*HL).ceil();var g=new XB.CanvasElement(width:VM,height:YM);fM=g;iM=g.context2D;iM.fillStyle=oK?EF(fillColor):BD(fillColor);iM.fillRect(0,0,VM,YM);}CB.eJ( g,[ pixelRatio=1.0]){var h=g.naturalWidth.toInt();var i=g.naturalHeight.toInt();KK=(h/pixelRatio).round();XK=(i/pixelRatio).round();oK=true;yK=pixelRatio.toDouble();HL=yK;TL=((1.0-HL).abs()<0.001)?0:1;yL=0;EM=0;bL=KK;nL=XK;KM=0;QM=0;VM=h;YM=i;fM=g;}CB.fJ( g){var h=g.aI.zK;KK=g.RI.toInt();XK=g.QI.toInt();oK=true;yK=h.yK;HL=h.HL;TL=g.YI?3:2;yL=g.offsetX;EM=g.offsetY;bL=g.gF;nL=g.fF;KM=(g.DI*HL).floor();QM=(g.EI*HL).floor();VM=(g.gF*HL).ceil();YM=(g.fF*HL).ceil();fM=h.fM;}static  kC( g,[ bitmapDataLoadOptions=null, pixelRatio=1.0]){if(bitmapDataLoadOptions==null){bitmapDataLoadOptions=CB.PF;}if(uB.SD&&bitmapDataLoadOptions.autoHiDpi){if(g.contains("@1x.")&&VD>=1.5){pixelRatio=pixelRatio*2.0;g=g.replaceAll("@1x.","@2x.");}}var i=new LB.Completer<CB>();var h=new XB.ImageElement();var j;var k;j=h.onLoad.listen((m){j.cancel();k.cancel();i.complete(new CB.eJ(h,pixelRatio));});k=h.onError.listen((m){j.cancel();k.cancel();i.completeError(new StateError("Error loading image."));});if(bitmapDataLoadOptions.webp==false){h.src=g;return i.future;}hH.then(( o){var n=new RegExp(r"(png|jpg|jpeg)$",multiLine:false,caseSensitive:true);var l=n.firstMatch(g);if(o==false||l==null){h.src=g;}else{h.src=g.substring(0,g.length-l.group(1).length)+"webp";}});return i.future;} get width=>KK; get height=>XK; get GC=>yK; getImageData( h, j, g, i,[ pixelRatio]){if(pixelRatio!=null&&pixelRatio!=yK){var m=new CB(g,i,true,0,pixelRatio);m.pC(this,new AB(1.0,0.0,0.0,1.0,-h,-j));return m.getImageData(h,j,g,i);}wO();var l=yK;var k=HL;if(mC>1.0){return iM.getImageDataHD(h*l,j*l,g*l,i*l);}else{return iM.getImageData(h*k,j*k,g*k,i*k);}} putImageData( j, k, g){wO();var i=yK;var h=HL;if(mC>1.0){iM.putImageDataHD(j,k*i,g*i);}else{iM.putImageData(j,k*h,g*h);}} createImageData( h, i){wO();var g=yK;var j=HL;return iM.createImageData(h*g,i*g);} clone([ pixelRatio]){pixelRatio=(pixelRatio!=null)?pixelRatio:yK;var g=new CB(KK,XK,true,0,pixelRatio);g.pC(this);return g;} vH( j, g, h){wO();var i=j.getImageData(g.x,g.y,g.width,g.height,yK);iM.putImageData(i,h.x,h.y);} pC( g,[ matrix=null]){wO();matrix=(matrix==null)?new AB.aJ():matrix.clone();matrix.scale(HL,HL);var h=new UB.cJ(iM,matrix);g.KB(h);iM.globalAlpha=1.0;iM.globalCompositeOperation=AD.PD;} fillRect( g, h){wO();iM.setTransform(HL,0.0,0.0,HL,0.0,0.0);iM.fillStyle=EF(h);iM.fillRect(g.x,g.y,g.width,g.height);} clear(){wO();iM.setTransform(HL,0.0,0.0,HL,0.0,0.0);iM.clearRect(0,0,KK,XK);} KB( h){var g=h.context;switch (TL){case 0:g.drawImage(fM,yL,EM);break;case 1:g.drawImageScaled(fM,yL,EM,bL,nL);break;case 2:g.drawImageScaledFromSource(fM,KM,QM,VM,YM,yL,EM,bL,nL);break;case 3:g.transform(0.0,-1.0,1.0,0.0,yL,EM+nL);g.drawImageScaledFromSource(fM,KM,QM,YM,VM,0.0,0.0,nL,bL);break;}} AG( o, g){if(g.width==0||g.height==0)return;var i=o.context;if(TL!=0){wO();}var h=(g.x-yL)*HL;var n=(g.y-EM)*HL;var p=g.width*HL;var k=g.height*HL;var l=g.x+yL;var j=g.y+EM;var q=g.width;var m=g.height;i.drawImageScaledFromSource(fM,h,n,p,k,l,j,q,m);} wO(){if(iM==null){var g=yK/mC;var j=(KK*g).ceil();var i=(XK*g).ceil();var h=new XB.CanvasElement(width:j,height:i);var k=new AB(g,0.0,0.0,g,0.0,0.0);var l=new UB.cJ(h.context2D,k);this.KB(l);yK=yK;HL=g;TL=((1.0-HL).abs()<0.001)?0:1;yL=0;EM=0;bL=KK;nL=XK;KM=0;QM=0;VM=j;YM=i;fM=h;iM=h.context2D;}}}typedef  jC( ratio);typedef  KG<yC extends FB>( event);class PG<yC extends FB> extends LB.StreamSubscription<yC>{var QL;var fL;var mL;var uL;PG(this.QL,this.fL){mL=0;uL=false;} cancel(){if(uL==false){QL.CN(this);uL=true;fL=null;}} onError( g(error)){} get isPaused=>mL>0; pause([ resumeSignal]){mL++ ;if(resumeSignal!=null){resumeSignal.whenComplete(resume);}} resume(){if(isPaused==false){throw new StateError("Subscription is not paused.");}mL-- ;}}class AD{static const  PD="source-over";static const  uG="destination-in";} BD( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";} ZG( g){if(sD.containsKey(g)==false){sD[g]=new zD(g);}return sD[g];}class CD extends mD{var ZL;CD( g):super(FB.yD){ZL=g;} get sF=>ZL;}class tE{static var wG=eE.AE;static var AH=new LB.StreamController<String>();static var EH=AH.stream.asBroadcastStream();static  get OH=>wG;}class eB{static const  DF="B";static const  mG="BL";static const  JF="BR";static const  RG="L";static const  zE="R";static const  vG="T";static const  zG="TR";static const  AE="";} EF( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class HF extends sB{final  cM;final  gM;final  nM;var tM;var wM;var zM;var DN;var uK;var eK;var KN;var MN;var PN;HF( g, h, i,[ transitionFunction]):cM=g,gM=h,nM=(transitionFunction!=null)?transitionFunction:CC.lC{tM=g;eK=0.0;uK=JC.max(0.0001,i);KN=0.0;MN=false;PN=false;} DC( i){if(eK<uK||PN==false){eK=eK+i;if(eK>uK)eK=uK;if(eK>=0.0){if(PN==false){PN=true;if(wM!=null)wM();}var g=eK/uK;var h=nM(g);tM=cM+h*(gM-cM);if(zM!=null)zM(MN?tM.round():tM);if(DN!=null&&eK==uK)DN();}}return eK<uK;} get eD=>cM; get gD=>gM; get currentTime=>eK; set rF( g( value)){zM=g;} set onComplete( g()){DN=g;}}class IF extends mD{IF():super(FB.BF);}class UB{final  iM;var eK=0.0;var qM=0.0;var vM;var BN;UB.cJ( h,[ matrix]):iM=h{vM=new fC();BN=vM;if(matrix!=null){vM.matrix.YD(matrix);}var g=vM.matrix;iM.setTransform(g.a,g.b,g.c,g.d,g.VB,g.WB);iM.globalAlpha=1.0;iM.globalCompositeOperation=AD.PD;} get context=>iM; get currentTime=>eK; get xH=>qM; reset([ matrix, currentTime, deltaTime]){eK=?currentTime?currentTime:0.0;qM=?deltaTime?deltaTime:0.0;BN=vM;if(matrix!=null){vM.matrix.YD(matrix);}var g=vM.matrix;iM.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);iM.clearRect(0,0,iM.canvas.width,iM.canvas.height);iM.setTransform(g.a,g.b,g.c,g.d,g.VB,g.WB);iM.globalAlpha=1.0;iM.globalCompositeOperation=AD.PD;} WI( h){var g=h.qL;var s=h.XM;var k=h.kM;var j=h.IN;var o=h.LN;var m=BN as fC;var i=BN.MI as fC;BN=i;var n=i.matrix;var q=m.alpha*s;var p=(o!=null)?o:m.FD;n.eF(g,m.matrix);i.alpha=q;i.FD=p;if(k!=null||j!=null){iM.save();if(k!=null){if(k.HC==null){g=i.matrix;}else if(identical(k.HC,h)){g=i.matrix;}else if(identical(k.HC,h.parent)){g=m.matrix;}else{g=k.HC.OE(h);if(g==null)g=CE;else g.concat(i.matrix);}k.KB(this,g);}if(j!=null){if(j.HC==null){g=i.matrix;}else if(identical(j.HC,h)){g=i.matrix;}else if(identical(j.HC,h.parent)){g=m.matrix;}else{g=j.HC.OE(h);if(g==null)g=CE;else g.concat(i.matrix);}j.KB(this,g);}}var l=n;iM.setTransform(l.a,l.b,l.c,l.d,l.VB,l.WB);iM.globalCompositeOperation=p;iM.globalAlpha=q;if(h.tH){h.qO(this);}else{h.KB(this);}if(k!=null||j!=null){iM.restore();}BN=m;}}class OF extends mD{OF():super(FB.NF);}class zD{var fontStyle;var WD=0;var FE=0;var height=0;zD( j){this.fontStyle=j;var h=new XB.Element.tag("span");h.style.font=this.fontStyle;h.text="Hg";var g=new XB.Element.tag("div");g.style.display="inline-block";g.style.width="1px";g.style.height="0px";var i=new XB.Element.tag("div");i.append(g);i.append(h);XB.document.body.append(i);try {g.style.verticalAlign="baseline";this.WD=g.offsetTop-h.offsetTop;g.style.verticalAlign="bottom";this.height=g.offsetTop-h.offsetTop;this.FE=height-WD;}catch (k){}finally {i.remove();}}}class CC{static  lC( g){return g;}static  FH( g){return 0.5-0.5*JC.cos(g*2.0*JC.PI);}static  VH( g){return g*g*g;}static  WH( g){g=1.0-g;return 1.0-g*g*g;}static  YH( g){g=g*2.0;return (g<1.0)?0.5*VH(g):0.5*WH(g-1.0)+0.5;}static  lH( g){var h=1.70158;return g*g*((h+1.0)*g-h);}static  nH( g){var h=1.70158;g=g-1.0;return g*g*((h+1.0)*g+h)+1.0;}static  oH( g){g=g*2.0;return (g<1.0)?0.5*lH(g):0.5*nH(g-1.0)+0.5;}}class DD{static const  tD="auto";static const  GH="stop";static const  TF="once";} CH( g){if(g is bool){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a bool.");}} KC( g){if(g is int){return g;}else{throw new ArgumentError("The supplied value (${g}) is not an int.");}}class UF{var target=null;var EC=false;var EE=0;var ED=0;var oF,qF;var mF,nF;UF(this.oF,this.qF,this.mF,this.nF);}class BJ extends gC{final  jN;BJ( i, g, h, j):jN=new u(i,g,h,j); KB( i, g){var h=i.context;h.setTransform(g.a,g.b,g.c,g.d,g.VB,g.WB);h.beginPath();h.rect(jN.x,jN.y,jN.width,jN.height);h.clip();}}class fB{final  LE;var eD=double.NAN;var gD=double.NAN;fB(this.LE); bC( g){this.gD=g.toDouble();} get II=>!eD.isNaN&&!gD.isNaN; AO( g){switch (LE){case 'x':return g.x;case 'y':return g.y;case 'pivotX':return g.FC;case 'pivotY':return g.OC;case 'scaleX':return g.QC;case 'scaleY':return g.RC;case 'skewX':return g.skewX;case 'skewY':return g.skewY;case 'rotation':return g.PC;case 'alpha':return g.alpha;default:return 0.0;}} SO( g, h){switch (LE){case 'x':g.x=h;break;case 'y':g.y=h;break;case 'pivotX':g.FC=h;break;case 'pivotY':g.OC=h;break;case 'scaleX':g.QC=h;break;case 'scaleY':g.RC=h;break;case 'skewX':g.skewX=h;break;case 'skewY':g.skewY=h;break;case 'rotation':g.PC=h;break;case 'alpha':g.alpha=h;break;}}}class PH{static var QH=0;var hD=QH++ ;var target=null;var aD=false;PH(this.target,this.aD);} XF( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);}class CJ extends gC{final  GO;CJ( i, g, h):GO=new GG(i,g,h); KB( i, g){var h=i.context;h.setTransform(g.a,g.b,g.c,g.d,g.VB,g.WB);h.beginPath();h.arc(GO.x,GO.y,GO.wF,0,JC.PI*2.0,false);h.clip();}}class uB extends TB{static var SD=true;var iN;var iM;var KO,LO;var MO;var OO,PO;var QO;var TO;var UO;var VO;var CK;var WO;var XO;var ZO;var aO;var bO;var cO;var dO;var eO;var fO;var gO;var hO;var iO;uB( h, g,[ contentWidth, contentHeight, contentFrameRate]){VK=h;iN=g;iN.focus();iM=g.context2D;KO=(contentWidth!=null)?contentWidth:g.width;LO=(contentHeight!=null)?contentHeight:g.height;MO=(contentFrameRate!=null)?contentFrameRate:30;OO=-1;PO=-1;QO=new u.VJ();TO=new AB.aJ();UO=new AB.aJ();mO();VO=null;CK=new vC();XO=new UB.cJ(iM);ZO=DD.tD;aO=xC.vE;bO=eB.AE;fO=[new UF(BB.rE,BB.xE,BB.lE,BB.WG),new UF(BB.xG,BB.BH,BB.RF,BB.RF),new UF(BB.HH,BB.JH,BB.SF,BB.SF)];cO=dB.vD;eO=null;dO=new EB(0,0);hO=new BB(BB.lE,true);TC.qG.listen(qG);iN.onMouseDown.listen(pO);iN.onMouseUp.listen(pO);iN.onMouseMove.listen(pO);iN.onMouseOut.listen(pO);iN.onMouseWheel.listen(rO);gO=new Map<int,PH>();iO=new MB(MB.kE,true);tE.EH.listen(sO);sO(null);iN.onKeyDown.listen(tO);iN.onKeyUp.listen(tO);iN.onKeyPress.listen(tO);} get ME=>VO; get JE=>CK; get ZD=>dO; get focus=>WO; get align=>bO;xO(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){xO();}set y( g){xO();}set FC( g){xO();}set OC( g){xO();}set QC( g){xO();}set RC( g){xO();}set skewX( g){xO();}set skewY( g){xO();}set PC( g){xO();}set alpha( g){xO();}set width( g){xO();}set height( g){xO();}JI( g, h){if(ZO==DD.tD||ZO==DD.TF){mO();XO.reset(UO,g,h);KB(XO);if(ZO==DD.TF)ZO=DD.GH;}}mO(){var v=iN.getBoundingClientRect();var DB=iN.clientLeft+v.left;var w=iN.clientTop+v.top;var h=iN.clientWidth;var j=iN.clientHeight;var o=KO;var s=LO;if(h is !num)throw "dart2js_hint";if(j is !num)throw "dart2js_hint";if(o is !num)throw "dart2js_hint";if(s is !num)throw "dart2js_hint";if(h==0||j==0)return;var i=1.0;var g=1.0;var k=0.0;var m=0.0;var n=h/o;var l=j/s;switch (aO){case xC.MG:i=n;g=l;break;case xC.UG:i=g=(n>l)?n:l;break;case xC.dG:i=g=1.0;break;case xC.vE:i=g=(n<l)?n:l;break;}switch (bO){case eB.zG:case eB.zE:case eB.JF:k=(h-o*i);break;case eB.vG:case eB.AE:case eB.DF:k=(h-o*i)/2;break;}switch (bO){case eB.mG:case eB.DF:case eB.JF:m=(j-s*g);break;case eB.RG:case eB.AE:case eB.zE:m=(j-s*g)/2;break;}var p=QO;p.x=-k/i;p.y=-m/g;p.width=h/i;p.height=j/g;var q=(uB.SD?VD:1.0)/mC;UO.cD(i,0.0,0.0,g,k,m);UO.scale(q,q);TO.cD(1.0,0.0,0.0,1.0,-DB-k,-w-m);TO.scale(1.0/i,1.0/g);if(OO!=h||PO!=j){OO=h;PO=j;iN.width=(OO*q).round();iN.height=(PO*q).round();if(iN.clientWidth!=h||iN.clientHeight!=j){iN.style.width="${h}px";iN.style.height="${j}px";}dispatchEvent(new FB(FB.rG));}}qG( g){iN.style.cursor=TC.WF(cO);}pO( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var p=j.button;var g=null;var i=TO.NO(j.client);var m=null;if(p<0||p>2)return;if(j.type=="mousemove"&&dO.GE(i))return;var h=fO[p];dO=i;if(TC.qE!=null)TC.qE.tN();if(j.type!="mouseout")g=lB(i.x,i.y) as IB;var k=dB.vD;if(g is tC&&(g as tC).QE){k=dB.xD;}if(g is gE&&(g as gE).QE){k=dB.xD;}if(g is hE&&(g as hE).type==eC.zC){k=dB.yE;}if(cO!=k){cO=k;iN.style.cursor=TC.WF(k);}if(eO!=null&&eO!=g){eO.dispatchEvent(hO..pN(BB.GF,true)..HO=(eO.SC!=null)?eO.NC(i):new EB.VJ()..IO=i..vN=h.EC);eO=null;}if(g!=null&&g!=eO){g.dispatchEvent(hO..pN(BB.KF,true)..HO=g.NC(i)..IO=i..vN=h.EC);eO=g;}var l=null;var o=false;var q=false;if(j.type=="mousedown"){iN.focus();l=h.oF;if(g!=h.target||n>h.EE+500)h.ED=0;h.EC=true;h.target=g;h.EE=n;h.ED++ ;}if(j.type=="mouseup"){l=h.qF;h.EC=false;o=(h.target==g);q=o&&h.ED.isEven&&(n<h.EE+500);}if(j.type=="mousemove"){l=BB.CF;}if(l!=null&&g!=null){m=g.NC(i);g.dispatchEvent(hO..pN(l,true)..HO=m..IO=i..vN=h.EC..BO=h.ED);if(o){if(q&&g.zH){g.dispatchEvent(hO..pN(h.nF,true)..HO=m..IO=i..vN=h.EC);}else{g.dispatchEvent(hO..pN(h.mF,true)..HO=m..IO=i..vN=h.EC);}}}}rO( h){var g=TO.NO(h.client);var i=lB(g.x,g.y) as IB;if(i!=null){i.dispatchEvent(hO..pN(BB.MF,true)..HO=i.NC(g)..IO=g..CO=h.deltaX..EO=h.deltaY);if(hO.fD)h.preventDefault();}}var AP=[] ;sO( h){AP.forEach((g)=>g.cancel());if(tE.OH==eE.bG){AP=[iN.onTouchStart.listen(BP),iN.onTouchEnd.listen(BP),iN.onTouchMove.listen(BP),iN.onTouchEnter.listen(BP),iN.onTouchLeave.listen(BP),iN.onTouchCancel.listen(BP)];}}BP( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=TO.NO(m.client);var h=lB(i.x,i.y) as IB;var g=gO.containsKey(l)?gO[l]:new PH(h,gO.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(iO..pN(MB.oG,true)..HO=(g.target.SC!=null)?g.target.NC(i):new EB.VJ()..IO=i..ZN=g.hD..bN=g.aD);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(iO..pN(MB.jG,true)..HO=h.NC(i)..IO=i..ZN=g.hD..bN=g.aD);g.target=h;}var k=null;if(j.type=="touchstart"){iN.focus();gO[l]=g;k=MB.kE;}if(j.type=="touchend"){gO.remove(l);k=MB.pE;}if(j.type=="touchcancel"){gO.remove(l);k=MB.sE;}if(j.type=="touchmove"){k=MB.AF;}if(k!=null&&h!=null){h.dispatchEvent(iO..pN(k,true)..HO=h.NC(i)..IO=i..ZN=g.hD..bN=g.aD);}}}tO( g){if(g.keyCode==8){g.preventDefault();}if(WO==null){return;}if(g.type=="keypress"){var j=g.charCode;var k=g.keyCode;if(k==13)j=13;if(j==0)return;var l=new uC(uC.nE,true)..EK=new String.fromCharCodes([j]);WO.dispatchEvent(l);}else{var h=iC.LG;var i="";if(g.type=="keyup")i=BC.oE;if(g.type=="keydown")i=BC.mE;if(g.keyLocation==XB.KeyLocation.LEFT)h=iC.RG;if(g.keyLocation==XB.KeyLocation.RIGHT)h=iC.zE;if(g.keyLocation==XB.KeyLocation.NUMPAD)h=iC.cG;if(g.keyLocation==XB.KeyLocation.JOYSTICK)h=iC.uE;if(g.keyLocation==XB.KeyLocation.MOBILE)h=iC.uE;var m=new BC(i,true)..zL=g.altKey..HM=g.ctrlKey..NM=g.shiftKey..jM=g.charCode..oM=g.keyCode..rM=h;WO.dispatchEvent(m);}}} TH( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";}class DJ extends gC{final  YO;DJ( g):YO=g.toList(growable:false){if(g.length<3)throw new ArgumentError("A custom mask needs at least 3 points.");} KB( j, g){var h=j.context;h.setTransform(g.a,g.b,g.c,g.d,g.VB,g.WB);h.beginPath();for(int i=0;i<YO.length;i++ )h.lineTo(YO[i].x,YO[i].y);h.clip();}} ZH(){var g=new XB.CanvasElement(width:1,height:1);g.context2D.fillStyle="#000000";g.context2D.fillRect(0,0,1,1);var i=g.context2D.getImageData(0,0,1,1).data;var h=(i[0]==0);return h;} bH(){var i=new LB.Completer<bool>();var g=new XB.ImageElement(); h(){i.complete(g.width==2&&g.height==2);}g.onLoad.listen((j)=>h());g.onError.listen((j)=>h());g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return i.future;} cH( h){if(ZC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];h[g+0]=(h[g+0]*i)~/255;h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;h[g+3]=(h[g+3]*i)~/255;}}}class TD implements sB{final  kO;final  nM;final  lO=new List<fB>();var wM;var zM;var DN;var nO;var uK;var eK;var KN;var MN;var PN;TD( g, h,[ transitionFunction]):kO=g,nM=(?transitionFunction)?transitionFunction:CC.lC{nO=new bE(this);eK=0.0;uK=JC.max(0.0001,h);KN=0.0;MN=false;PN=false;} get nC=>nO; OL( g){if(kO!=null&&PN==false){lO.add(g);}} DC( m){if(eK<uK||PN==false){eK=eK+m;if(eK>uK){eK=uK;}if(eK>=0.0){if(PN==false){PN=true;for(int h=0;h<lO.length;h++ ){var g=lO[h];g.eD=g.AO(kO);}if(wM!=null){wM();}}var k=eK/uK;var l=nM(k).toDouble();for(int h=0;h<lO.length;h++ ){var g=lO[h];if(g.II){var i=g.eD.toDouble();var n=g.gD.toDouble();var j=i+l*(n-i);g.SO(kO,MN?j.round():j);}}if(zM!=null){zM();}if(DN!=null&&eK==uK){DN();}}}return eK<uK;} get yH=>kO; get currentTime=>eK; set rF( g()){zM=g;} set onComplete( g()){DN=g;}} dH( h){if(ZC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];if(i>0){h[g+0]=(h[g+0]*255)~/i;h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;}}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];if(i>0){h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;h[g+3]=(h[g+3]*255)~/i;}}}}final  ZC=ZH();final  hH=bH();final  UD=new EG<List<t>>(()=>new List<t>()); BE( g, m, n, j){m=m.toDouble();n=n.toDouble();var GB=0.0;var DB=0.0;var q=m*g.a;var w=m*g.b;var s=m*g.a+n*g.c;var p=m*g.b+n*g.d;var v=n*g.c;var o=n*g.d;var h=GB;if(h>q)h=q;if(h>s)h=s;if(h>v)h=v;var i=DB;if(i>w)i=w;if(i>p)i=p;if(i>o)i=o;var l=GB;if(l<q)l=q;if(l<s)l=s;if(l<v)l=v;var k=DB;if(k<w)k=w;if(k<p)k=p;if(k<o)k=o;if(j==null)j=new u.VJ();j.x=g.VB+h;j.y=g.WB+i;j.width=l-h;j.height=k-i;return j;}final  CE=new AB.aJ();final  iH=new XB.CanvasElement(width:16,height:16);final  ZF=iH.context2D;final  mC=ZF.backingStorePixelRatio==null?1.0:ZF.backingStorePixelRatio.toDouble();final  VD=XB.window.devicePixelRatio==null?1.0:XB.window.devicePixelRatio;//@ sourceMappingURL=stagexl_demos.dart.map
