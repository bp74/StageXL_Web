import "dart:math" as nB;import "dart:html" as tB;import "dart:json" as MD;import "dart:async" as HB;class wG{static const  xG="Chrome";static const  yG="Firefox";static const  zG="Internet Explorer";static const  AH="Safari";final  LG;final  minimumVersion;const wG(this.LG,[this.minimumVersion]);}class BH{final  name;const BH(this.name);}class EH extends VB{EH(){var k=AC.VG('flump');var i=new HH(k,'idle');i.x=500;i.y=200;QB(i);var j=new HH(k,'walk');j.x=150;j.y=460;QB(j);var g=new HH(k,'attack');g.x=450;g.y=460;QB(g);var h=new HH(k,'defeat');h.x=720;h.y=460;QB(h);cB.add(i);cB.add(j);cB.add(g);cB.add(h);IB.uC('images/flumpLibraryAtlas0.png').then((m){var l=new jC(m);l.x=40;l.y=40;QB(l);});}}class DH extends VB{var YH;DH(){YH=AC.YG('levelUp');ZH();IB.uC('images/LevelupTextureAtlas.png').then((h){var g=new jC(h);g.x=70;g.y=40;QB(g);});}ZH(){var l=330;for(int j=0;j<7;j++ ){var h=YH.VE('LevelUp${j}');var g=new jC(h);g.gB=h.width/2;g.hB=h.height/2;g.x=l+h.width/2;g.y=150;g.KB=0.0;g.LB=0.0;QB(g);var k=new tC(g,2.0,rC.DG);k.UC.KB.KC(1.0);k.UC.LB.KC(1.0);k.QE=j*0.05;var i=new tC(g,0.4,rC.EE);i.UC.KB.KC(0.0);i.UC.LB.KC(0.0);i.QE=2.0;i.onComplete=()=>g.gE();cB.add(k);cB.add(i);l=l+5+h.width;}cB.OG(()=>ZH(),3.0);}}class CH extends VB{var zC;var background;var ZB;var PH;var backgroundColor=0;var aC='{"maxParticles":200, "duration":0, "lifeSpan":0.9, "lifespanVariance":0.4, "startSize":10, "startSizeVariance":20, "finishSize":70, "finishSizeVariance":0, "shape":"circle", "emitterType":0, "location":{"x":0, "y":0}, "locationVariance":{"x":0, "y":0}, "speed":100, "speedVariance":10, "angle":0, "angleVariance":360, "gravity":{"x":0, "y":100}, "radialAcceleration":20, "radialAccelerationVariance":0, "tangentialAcceleration":10, "tangentialAccelerationVariance":0, "minRadius":0, "maxRadius":100, "maxRadiusVariance":0, "rotatePerSecond":0, "rotatePerSecondVariance":0, "compositeOperation":"source-over", "startColor":{"red":1, "green":0.75, "blue":0, "alpha":1}, "finishColor":{"red":1, "green":0, "blue":0, "alpha":0}}';CH(){zC=new IB(380,600,true,backgroundColor);background=new jC(zC);QB(background);ZB=new SC(aC);ZB.x=190;ZB.y=300;ZB.start();QB(ZB);cB.add(ZB);this.eG.listen((l){var j=tB.query("#particleEmitterJson") as tB.InputElement;var k=tB.query("#particleEmitterBackground") as tB.InputElement;var i=j.value;var h=int.parse(k.value)|0xFF000000;if(i!=aC){aC=i;ZB.lE(aC);}if(h!=backgroundColor){backgroundColor=h;zC.fillRect(new CB(0,0,380,600),backgroundColor);}if(ZB.jG==0){ZB.start();}});var g=new QD(380,600);g.onMouseMove.listen(bH);g.onMouseDown.listen(bH);QB(g);}bH( g){if(g.fB){ZB.qG(g.YE-190,g.ZE-300);}}}var zB;var gC;var cB;var AC; main(){IB.DE.webp=true;var k=tB.window.location.pathname;var j=new RegExp(r"([A-Za-z0-9-_]+)\.html",multiLine:false,caseSensitive:false);var g=j.firstMatch(k);if(g!=null&&g.groupCount==1){var h=g.group(1);print("current page: ${h}");var i=tB.query("#stage");if(i!=null){zB=new lB('stage',i);gC=new iC();gC.JG(zB);cB=gC.FD;AC=new VD();}switch (h){case "flump":AC..IG('flump','images/flumpLibrary.json')..load().then((aH)=>zB.QB(new EH()));break;case "texture_packer":AC..KG('levelUp','images/LevelupTextureAtlas.json',lC.bD)..load().then((aH)=>zB.QB(new DH()));break;case "particle_emitter":zB.QB(new CH());break;}}}const FH=const GH();class GH{const GH();}class kB{var pH;var II;dispatchEvent( g){AK(g,this,this,pB.MC);} YK( h, j, i){if(j&&II!=null){var g=II[h];if(g!=null&&g.mK)return true;}if(i&&pH!=null){var g=pH[h];if(g!=null&&g.mK)return true;}return false;} uI( h, g){if(g){if(II==null)II=new Map<String,vB>();}else{if(pH==null)pH=new Map<String,vB>();}var i=g?II:pH;return i.putIfAbsent(h,(){return new vB(this,h,g);});}AK( g, k, l, j){var h=(j==pB.XD)?II:pH;if(h==null)return;var i=h[g.type];if(i==null)return;g.DI=k;g.VK=l;g.NK=j;g.RK=false;g.TK=false;i.MK(g);}}class MB{static const  nC="auto";static const  oC="arrow";static const  pC="button";static const  PF="hand";static const  mD="ibeam";static const  QF="wait";}abstract class tE{}class sE extends v{static const  GF="textInput";var AJ="";sE( g,[ bubbles=false]):super(g,bubbles);}class PD extends BB{PD();}abstract class VB extends BB{final  GI=new List<p>();var ZI=true;var gI=true; QB( g){if(g.parent==this){var h=GI.indexOf(g);GI.removeAt(h);GI.add(g);}else{HG(g,GI.length);}} HG( g, h){if(h<0||h>GI.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){GI.removeAt(GI.indexOf(g));if(h>GI.length)h-- ;GI.insert(h,g);}else{g.gE();g.vK(this);GI.insert(h,g);g.dispatchEvent(new v(v.BF,true));if(this.dC!=null)IL(g,new v(v.JF));}} lG( h){var g=GI.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");mG(g);} mG( g){if(g<0||g>=GI.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=GI[g];h.dispatchEvent(new v(v.TF,true));if(this.dC!=null)IL(h,new v(v.WF));h.vK(null);GI.removeAt(g);} contains( g){for(;g!=null;g=g.xJ)if(g==this)return true;return false;} mB( n,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new CB.RH();if(GI.length==0)return super.mB(n,returnRectangle);var h=double.INFINITY;var i=double.INFINITY;var k=double.NEGATIVE_INFINITY;var j=double.NEGATIVE_INFINITY;var o=GI.length;for(int l=0;l<GI.length;l++ ){var m=GI[l];zJ.PE(m.gL,n);var g=m.mB(zJ,returnRectangle);if(g.left<h)h=g.left;if(g.top<i)i=g.top;if(g.right>k)k=g.right;if(g.bottom>j)j=g.bottom;}returnRectangle.x=h;returnRectangle.y=i;returnRectangle.width=k-h;returnRectangle.height=j-i;return returnRectangle;} rB( i, k){i=i.toDouble();k=k.toDouble();var n=null;for(int l=GI.length-1;l>=0;l-- ){var j=GI[l];if(j.visible){var g=j.gL;var o=i-g.aB;var m=k-g.bB;var s=(g.d*o-g.c*m)/g.xB;var q=(g.a*m-g.b*o)/g.xB;var h=j.rB(s,q);if(h!=null){if(h is BB)if(h.cG)return ZI?h:this;n=this;}}}return n;} FB( i){for(int h=0;h<GI.length;h++ ){var g=GI[h];if(!g.ZJ&&g.visible)i.hE(g);}}gM( g, i){i.add(g);if(g is VB){var k=g as VB;var j=k.GI;for(int h=0;h<j.length;h++ ){gM(j[h],i);}}}IL( i, j){var g=RC.eE() as List<p>;gM(i,g);for(int h=0;h<g.length;h++ ){g[h].dispatchEvent(j);}g.clear();RC.fE(g);}}class CC{static const  yE="exactFit";static const  FF="noBorder";static const  OF="noScale";static const  jD="showAll";}class TD{var png;var jpg;var webp;var autoHiDpi;TD({this.png: true,this.jpg: true,this.webp: false,this.autoHiDpi: true});}class rE{rE();}class vE{vE();}class CB{var cH;var gH;var mH;var uH;CB( i, g, h, j):cH=i,gH=g,mH=h,uH=j;CB.RH():this(0,0,0,0); clone()=>new CB(cH,gH,mH,uH); toString()=>"Rectangle [x=${cH}, y=${gH}, width=${mH}, height=${uH}]"; get x=>cH; get y=>gH; get width=>mH; get height=>uH; get left=>cH; get top=>gH; get right=>cH+mH; get bottom=>gH+uH;set x( g){cH=g;}set y( g){gH=g;}set width( g){mH=g;}set height( g){uH=g;} contains( g, h){return cH<=g&&gH<=h&&cH+mH>=g&&gH+uH>=h;} SE( g){return cH==g.x&&gH==g.y&&mH==g.width&&uH==g.height;} get isEmpty{return mH==0&&uH==0;}YC( g){cH=g.x;gH=g.y;mH=g.width;uH=g.height;}}class QD extends BB{var width;var height;QD(this.width,this.height); mB( g,[ returnRectangle]){return ME(g,width,height,returnRectangle);} rB( g, h){if(g>=0.0&&h>=0.0&&g<width&&h<height)return this;return null;} FB( g){}}class kC extends v{kC( g):super(g,false); get VC=>false;}class t extends v{static const  ZD="click";static const  IF="doubleClick";static const  fD="mouseDown";static const  lD="mouseUp";static const  pD="mouseMove";static const  tD="mouseOut";static const  YF="mouseOver";static const  xD="mouseWheel";static const  CE="middleClick";static const  dF="middleMouseDown";static const  hF="middleMouseUp";static const  FE="rightClick";static const  mF="rightMouseDown";static const  nF="rightMouseUp";var EK,FK;var HK,IK;var XK;var BJ;var YJ;var IJ;var NJ;var dK;var fK;var hK;t( g,[ bubbles=false]):super(g,bubbles){OK(g,bubbles);} OK( g,[ bubbles=false]){super.OK(g,bubbles);EK=FK=0;HK=IK=0;XK=false;BJ=false;YJ=false;IJ=false;NJ=false;dK=0;fK=0;hK=0;}set rK( g){EK=g.x;FK=g.y;}set tK( g){HK=g.x;IK=g.y;} get YE=>EK; get ZE=>FK; get fB=>XK; get altKey=>BJ; get ctrlKey=>IJ; get shiftKey=>NJ; get GC=>dK; get deltaX=>fK; get deltaY=>hK;}class vB<EC extends v> extends HB.Stream<EC>{final  DI;final  wH;final  WI;final  lI=new List<AF>();var DJ=0;vB(this.DI,this.wH,this.WI); get isBroadcast=>true; asBroadcastStream()=>this; listen( h( event),{ onError(error), onDone(), cancelOnError: false}){var g=new AF<EC>(this,h);if(DJ==lI.length){lI.add(g);}else{lI[DJ]=g;}DJ++ ;if(WI==false){switch (wH){case v.qC:eB.kD.qJ(this);break;case v.oD:eB.sD.qJ(this);break;case v.zD:eB.wD.qJ(this);break;}}return g;} pJ( h){for(int g=0;g<DJ;g++ ){if(identical(lI[g],h)){lI[g]=null;break;}}} get mK{for(var g=0;g<DJ;g++ )if(lI[g]!=null)return true;return false;} MK( k){var i=DJ;var h=0;if(i is !int)throw "dart2js_hint";for(int g=0;g<i;g++ ){var j=lI[g];if(j==null)continue;j.nI(k);if(h!=g){lI[h]=lI[g];lI[g]=null;}h++ ;}if(h!=i){for(int g=i;g<DJ;g++ ){lI[h++ ]=lI[g];lI[g]=null;}DJ=h;}}}abstract class SB{ UB( g);}class BC implements SB{final  xH=new List<SB>();var MI=0;var YI=0.0; add( g){if(g==null)return;if(this.contains(g))return;if(MI==xH.length){xH.add(g);}else{xH[MI]=g;}MI++ ;} remove( h){if(h==null)return;for(int g=0;g<MI;g++ ){if(identical(xH[g],h)){xH[g]=null;break;}}} contains( h){if(h==null)return false;for(int g=0;g<MI;g++ ){if(identical(xH[g],h)){return true;}}return false;} LD( g, h,[ transitionFunction]){var i=transitionFunction!=null?new tC(g,h,transitionFunction):new tC(g,h);add(i);return i;} OG( h, i){var g=new OD(h,i);add(g);return g;} UB( j){YI+= j;var i=MI;var h=0;if(i is !int)throw "dart2js_hint";for(int g=0;g<i;g++ ){var k=xH[g];if(k==null)continue;if(k.UB(j)==false){xH[g]=null;continue;}if(h!=g){xH[h]=xH[g];xH[g]=null;}h++ ;}if(h!=i){for(int g=i;g<MI;g++ ){xH[h++ ]=xH[g];xH[g]=null;}MI=h;}return true;}}abstract class oB{ FB( g);}class TB<EC extends v>{final  wH;const TB(this.wH); forTarget( g,{ useCapture: false}){return g.uI(wH,useCapture);}}class AB{var dH,eH,hH,iH,kH,nH;var vH;AB( h, i, g, j, k, l):dH=h.toDouble(),eH=i.toDouble(),hH=g.toDouble(),iH=j.toDouble(),kH=k.toDouble(),nH=l.toDouble(),vH=(h*j-i*g).toDouble();AB.TH():dH=1.0,eH=0.0,hH=0.0,iH=1.0,kH=0.0,nH=0.0,vH=1.0; clone(){return new AB(dH,eH,hH,iH,kH,nH);} NG(){var h=(iH/vH);var i=-(eH/vH);var g=-(hH/vH);var j=(dH/vH);var k=-(h*kH+g*nH);var l=-(i*kH+j*nH);return new AB(h,i,g,j,k,l);} get a=>dH; get b=>eH; get c=>hH; get d=>iH; get aB=>kH; get bB=>nH; get xB=>vH; sG( h){var i=h.x.toDouble();var g=h.y.toDouble();return new GB(i*dH+g*hH+kH,i*eH+g*iH+nH);} BL( h){var i=h.x.toDouble();var g=h.y.toDouble();return new GB(i*dH+g*hH+kH,i*eH+g*iH+nH);} concat( g){var m=dH;var q=eH;var s=hH;var o=iH;var l=kH;var n=nH;var DB=vH;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var JB=g.aB;var w=g.bB;var RB=g.xB;dH=(m*j+q*i).toDouble();eH=(m*k+q*h).toDouble();hH=(s*j+o*i).toDouble();iH=(s*k+o*h).toDouble();kH=(l*j+n*i+JB).toDouble();nH=(l*k+n*h+w).toDouble();vH=(DB*RB).toDouble();} ZG(){dH=1.0;eH=0.0;hH=0.0;iH=1.0;kH=0.0;nH=0.0;vH=1.0;} XE(){var j=dH;var m=eH;var l=hH;var k=iH;var h=kH;var i=nH;var g=vH;dH=(k/g).toDouble();eH=-(m/g).toDouble();hH=-(l/g).toDouble();iH=(j/g).toDouble();kH=-(dH*h+hH*i).toDouble();nH=-(eH*h+iH*i).toDouble();vH=(1.0/g).toDouble();} scale( h, g){dH=(dH*h).toDouble();eH=(eH*g).toDouble();hH=(hH*h).toDouble();iH=(iH*g).toDouble();kH=(kH*h).toDouble();nH=(nH*g).toDouble();vH=(vH*h*g).toDouble();} IC( h, i, g, k, j, l){dH=h.toDouble();eH=i.toDouble();hH=g.toDouble();iH=k.toDouble();kH=j.toDouble();nH=l.toDouble();vH=(dH*iH-eH*hH).toDouble();} YC( g){dH=g.a.toDouble();eH=g.b.toDouble();hH=g.c.toDouble();iH=g.d.toDouble();kH=g.aB.toDouble();nH=g.bB.toDouble();vH=g.xB.toDouble();} PE( h, g){var n=h.a;var s=h.b;var w=h.c;var q=h.d;var m=h.aB;var o=h.bB;var JB=h.xB;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var RB=g.aB;var DB=g.bB;var iB=g.xB;dH=(n*k+s*j).toDouble();eH=(n*l+s*i).toDouble();hH=(w*k+q*j).toDouble();iH=(w*l+q*i).toDouble();kH=(m*k+o*j+RB).toDouble();nH=(m*l+o*i+DB).toDouble();vH=(JB*iB).toDouble();}}abstract class p extends kB implements oB{static var HF=0;var RI=HF++ ;var cH=0.0;var gH=0.0;var fI=0.0;var pI=0.0;var tI=1.0;var CJ=1.0;var HJ=0.0;var KJ=0.0;var RJ=0.0;var VJ=1.0;var XJ=true;var ZJ=false;var dJ=null;var fJ=null;var jJ=null;var nJ=false;var rJ=null;var sJ=null;var tJ=null;var tH="";var xJ=null;final  zJ=new AB.TH();final  CK=new AB.TH();var GK=true;static const  sF=const TB<OC>(v.qC); get eG=>p.sF.forTarget(this); get x=>cH; get y=>gH; get gB=>fI; get hB=>pI; get KB=>tI; get LB=>CJ; get skewX=>HJ; get skewY=>KJ; get HC=>RJ; get visible=>XJ; get alpha=>VJ; get MG=>fJ!=null; get XC=>tJ; get name=>tH; get parent=>xJ; get root{var g=this;while (g.xJ!=null)g=g.xJ;return g;} get dC{var g=this.root;if(g is lB)return g;return null;}set x( g){cH=g.toDouble();GK=true;}set y( g){gH=g.toDouble();GK=true;}set gB( g){fI=g.toDouble();GK=true;}set hB( g){pI=g.toDouble();GK=true;}set KB( g){tI=g.toDouble();GK=true;}set LB( g){CJ=g.toDouble();GK=true;}set skewX( g){HJ=g.toDouble();GK=true;}set skewY( g){KJ=g.toDouble();GK=true;}set HC( g){RJ=g.toDouble();GK=true;}set visible( g){XJ=g;}set alpha( g){VJ=g.toDouble();}set XC( g){tJ=g;} setTransform( h, g,[ scaleX, scaleY, rotation, skewX, skewY, pivotX, pivotY]){GK=true;cH=h.toDouble();gH=g.toDouble();if(scaleX!=null){tI=scaleX.toDouble();if(scaleY!=null){CJ=scaleY.toDouble();if(rotation!=null){RJ=rotation.toDouble();if(skewX!=null){HJ=skewX.toDouble();if(skewY!=null){KJ=skewY.toDouble();if(pivotX!=null){fI=pivotX.toDouble();if(pivotY!=null)pI=pivotY.toDouble();}}}}}}} get width=>mB(gL).width; get height=>mB(gL).height; set width( h){this.KB=1;var g=this.width;this.KB=(g!=0.0)?h/g:1.0;} set height( h){this.LB=1;var g=this.height;this.LB=(g!=0.0)?h/g:1.0;} gE(){if(xJ!=null)xJ.lG(this);} get gL{if(GK){GK=false;var j=HJ+RJ;var i=KJ+RJ;if(j==0.0&&i==0.0){CK.IC(tI,0.0,0.0,CJ,cH-fI*tI,gH-pI*CJ);}else{var g,l,k,h;var m=nB.cos(j);var n=nB.sin(j);if(j==i){g=tI*m;l=tI*n;k=-CJ*n;h=CJ*m;}else{g=tI*nB.cos(i);l=tI*nB.sin(i);k=-CJ*n;h=CJ*m;}var q=cH-(fI*g+pI*k);var o=gH-(fI*l+pI*h);CK.IC(g,l,k,h,q,o);}}return CK;} jE( h){if(h==xJ)return gL.clone();if(h.xJ==this)return h.gL.NG();var j=new AB.TH();var g=this;while (g!=h&&g.xJ!=null){j.concat(g.gL);g=g.xJ;}if(h==null&&g!=null){j.concat(g.gL);g=null;}if(g==h)return j;var k=new AB.TH();var i=h;while (i!=this&&i.xJ!=null){k.concat(i.gL);i=i.xJ;}k.XE();if(i==this)return k;if(i!=g)return null;j.concat(k);return j;} mB( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new CB.RH();returnRectangle.x=g.aB;returnRectangle.y=g.bB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} rB( g, h){if(mB(vC).contains(g,h))return this;return null;} qB( h){zJ.ZG();for(p g=this;g!=null;g=g.xJ)zJ.concat(g.gL);zJ.XE();return zJ.sG(h);} MM( g){var h=g.context;h.transform(1.0,0.0,0.0,1.0,jJ.x,jJ.y);fJ.FB(g);} dispatchEvent( h){var g=null;if(h.VC||h.bubbles){for(p j=xJ;j!=null;j=j.xJ){if(j.YK(h.type,h.VC,h.bubbles)){if(g==null)g=RC.eE() as List<p>;g.add(j);}}}if(h.VC&&g!=null){for(int i=g.length-1;i>=0&&h.eC==false;i-- ){g[i].AK(h,this,g[i],pB.XD);}}if(h.eC==false){AK(h,this,this,pB.MC);}if(h.bubbles&&g!=null){for(int i=0;i<g.length&&h.eC==false;i++ ){g[i].AK(h,this,g[i],pB.LF);}}if(g!=null){g.clear();RC.fE(g);}} vK( h){for(var g=h;g!=null;g=g.xJ)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");xJ=h;} FB( g);}class eB<EC extends v>{final  pH=new List<vB>();var SI=0;static var kD=new eB<OC>();static var sD=new eB<uD>();static var wD=new eB<BE>(); qJ( g){for(int h=0;h<SI;h++ ){if(pH[h]==g)return;}if(SI==pH.length){pH.add(g);}else{pH[SI]=g;}SI++ ;} MK( i){i.NK=pB.MC;i.RK=false;i.TK=false;var k=SI;var h=0;if(k is !int)throw "dart2js_hint";for(int g=0;g<k;g++ ){var j=pH[g];if(j==null)continue;if(j.DJ==0){pH[g]=null;continue;}i.DI=j.DI;i.VK=j.DI;j.MK(i);if(h!=g){pH[h]=pH[g];pH[g]=null;}h++ ;}if(h!=k){for(int g=k;g<SI;g++ ){pH[h++ ]=pH[g];pH[g]=null;}SI=h;}}}class ND extends BB{ND();}class qE{static const  EF="input";}class uB{static const  xE=0;static const  CF=1;static const  yD=2;static const  NF=3;static const  iD=4;}class DC{static var WD=MB.nC;static var DF=false;static var eD=null;static var UF=new HB.StreamController<String>();static var ZF=UF.stream.asBroadcastStream();static  IE( i){var h=i;var g="auto";if(WD!=MB.nC){h=WD;}switch (h){case MB.nC:g="auto";break;case MB.oC:g="default";break;case MB.pC:g="pointer";break;case MB.PF:g="move";break;case MB.mD:g="text";break;case MB.QF:g="wait";break;}if(DF){g="none";}return g;}}class EB extends v{static const  YD="touchBegin";static const  dD="touchEnd";static const  gD="touchCancel";static const  nD="touchMove";static const  SF="touchOver";static const  XF="touchOut";var BK;var DK;var EK,FK;var HK,IK;var BJ;var YJ;var IJ;var NJ;var JK;var KK;var LK;EB( g,[ bubbles=false]):super(g,bubbles){OK(g,bubbles);} OK( g,[ bubbles=false]){super.OK(g,bubbles);BK=0;DK=false;EK=FK=0;HK=IK=0;BJ=false;YJ=false;IJ=false;NJ=false;JK=1.00;KK=0;LK=0;}set rK( g){EK=g.x;FK=g.y;}set tK( g){HK=g.x;IK=g.y;} get fC=>BK; get YE=>EK; get ZE=>FK; get altKey=>BJ; get ctrlKey=>IJ; get shiftKey=>NJ;}class RD{static const  sC="none";static const  MF="touchPoint";}class UD{final  LD;UD(this.LD);call( h, g){aI(h).KC(g);} get x=>aI("x"); get y=>aI("y"); get KB=>aI("scaleX"); get LB=>aI("scaleY"); get skewX=>aI("skewX"); get skewY=>aI("skewY"); get gB=>aI("pivotX"); get hB=>aI("pivotY"); get HC=>aI("rotation"); get alpha=>aI("alpha"); aI( h){var g=new PB(h);this.LD.aI(g);return g;}}class VD{var yH;VD(){yH=new Map<String,LC>();} MJ( g){var j=g.kind;var h=g.name;var i="${j}.${h}";if(yH.containsKey(i))throw new StateError("ResourceManager already contains a resource called '${h}'");yH[i]=g;} wJ( i, g){var h="${i}.${g}";if(yH.containsKey(h)==false)throw new StateError("ResourceManager does not contains a resource called '${g}'");return yH[h];} KG( j, h, i){var g=new LC("TextureAtlas",j,h);g.yJ(dB.uC(h,i));MJ(g);} IG( i, h){var g=new LC("FlumpLibrary",i,h);g.yJ(WB.uC(h));MJ(g);} load(){var h=this.kG.map((i)=>i.FI);return HB.Future.wait(h).then((j){var g=this.RG;if(g.length>0)throw new StateError("Failed to load ${g.length} resource(s).");return this;});} get kG{return yH.values.where((g)=>g.cC==null).toList();} get RG{return yH.values.where((g)=>g.error!=null).toList();} VE( g){return wJ("BitmapData",g).cC;} YG( g){return wJ("TextureAtlas",g).cC;} VG( g){return wJ("FlumpLibrary",g).cC;}}class LC{var lH;var tH;var BI;var FI;var QI;var XI;LC( g, h, i){lH=g;tH=h;BI=i;QI=null;XI=null;} get kind=>lH; get name=>tH; get cC=>XI; get error=>QI;yJ( i){FI=i.then((g){XI=g;QI=null;},onError:(h){XI=null;QI=h;});}}class dB{final  qH=new List<SD>();var OI;static  uC( n, JB){var k=new HB.Completer<dB>();var g=new dB();switch (JB){case lC.zE:case lC.bD:tB.HttpRequest.getString(n).then((w){var o=MD.parse(w);var h=o["frames"];var q=o["meta"];var iB=LE(n,q["image"]);if(h is List){for(var s in h){var j=s as Map;var i=j["filename"] as String;var l=JE(i);var m=new SD.SH(g,l,j);g.qH.add(m);}}if(h is Map){for(String i in h.keys){var j=h[i] as Map;var l=JE(i);var m=new SD.SH(g,l,j);g.qH.add(m);}}IB.uC(iB).then(( RB){g.OI=RB;k.complete(g);}).catchError((DB){k.completeError(new StateError("Failed to load image."));});}).catchError((DB){k.completeError(new StateError("Failed to load json file."));});break;}return k.future;} VE( h){for(int g=0;g<qH.length;g++ )if(qH[g].name==h)return new IB.XH(qH[g]);throw new ArgumentError("TextureAtlasFrame not found: '${h}'");}}class lC{static const  zE="json";static const  bD="jsonarray";}class SD{final  oH;final  tH;final  JI;final  TI;final  cI;final  mI;final  sI;final  yI;final  EJ;final  JJ;final  SJ;SD.SH( i, h, g):oH=i,tH=h,JI=iF(g["rotated"]),TI=XB(g["sourceSize"]["w"]),cI=XB(g["sourceSize"]["h"]),mI=XB(g["spriteSourceSize"]["x"]),sI=XB(g["spriteSourceSize"]["y"]),yI=XB(g["frame"]["x"]),EJ=XB(g["frame"]["y"]),JJ=XB(g["frame"]["w"]),SJ=XB(g["frame"]["h"]); get rG=>oH; get name=>tH; get pG=>JI; get TG=>yI; get UG=>EJ; get UE=>JJ; get TE=>SJ; get offsetX=>mI; get offsetY=>sI; get iG=>TI; get hG=>cI;}class uE<EC>{final  jH=new List<EC>();final  CI;var LI=0;uE( g()):CI=g; eE(){var g=LI;if(g is !int)throw "dart2js_hint";if(g==0){return CI();}else{LI=g-1;return jH[LI];}}fE( h){var g=LI;if(g is !int)throw "dart2js_hint";if(g==jH.length){jH.add(h);}else{jH[g]=h;}LI=g+1;}reset(){jH.clear();LI=0;}}class jC extends p{var bitmapData;var pixelSnapping;var BD;jC([this.bitmapData=null,this.pixelSnapping="auto"]){BD=null;} mB( h,[ returnRectangle]){var g=(bitmapData!=null)?bitmapData.width:0;var i=(bitmapData!=null)?bitmapData.height:0;return ME(h,g,i,returnRectangle);} rB( g, h){if(bitmapData!=null&&g>=0.0&&h>=0.0&&g<bitmapData.width&&h<bitmapData.height)return this;return null;} FB( g){if(bitmapData==null)return;if(BD==null){bitmapData.FB(g);}else{bitmapData.oG(g,BD);}}}class OD implements SB{final  sH;var AI=0.0;var KI=0.0;var UI=1;OD( g, h):sH=g{KI=nB.max(h,0.0001);} UB( h){var g=AI+h;while (g>=KI&&UI>0){AI=KI;UI-- ;sH();g-= KI;}AI=g;return (UI>0);}}class pB{static const  XD=1;static const  MC=2;static const  LF=3;}class v{static const  BF="added";static const  JF="addedToStage";static const  qC="enterFrame";static const  oD="exitFrame";static const  TF="removed";static const  WF="removedFromStage";static const  aF="resize";static const  zD="render";var QK;var SK;var NK;var DI;var VK;var RK;var TK;v( g,[ bubbles=false]){OK(g,bubbles);} OK( g,[ bubbles=false]){QK=g;SK=bubbles;NK=pB.MC;DI=null;VK=null;RK=false;TK=false;} get eC=>RK; get type=>QK; get bubbles=>SK; get VC=>true; get target=>DI;}class wB{final  matrix=new AB.TH();var alpha=1.0;var XC=NC.PC;var iI; get dG{if(iI==null)iI=new wB();return iI;}}abstract class BB extends p{var PG=false;var cG=true;var QH=true;var tabIndex=0;static const  RF=const TB<t>(t.tD);static const  eF=const TB<t>(t.pD);static const  jF=const TB<t>(t.fD);static const  oF=const TB<t>(t.lD);static const  tF=const TB<t>(t.xD); get onMouseOut=>BB.RF.forTarget(this); get onMouseMove=>BB.eF.forTarget(this); get onMouseDown=>BB.jF.forTarget(this); get onMouseUp=>BB.oF.forTarget(this); get onMouseWheel=>BB.tF.forTarget(this);static const  vF=const TB<EB>(EB.nD);static const  wF=const TB<EB>(EB.dD);static const  yF=const TB<EB>(EB.gD); get onTouchMove=>BB.vF.forTarget(this); get onTouchEnd=>BB.wF.forTarget(this); get onTouchCancel=>BB.yF.forTarget(this);static const  BG=const TB<jB>(jB.cD);static const  CG=const TB<jB>(jB.aD); get onKeyUp=>BB.BG.forTarget(this); get onKeyDown=>BB.CG.forTarget(this);}class iC{var fH;var rH;var zH;var HI;var oI;var wI;var GJ;var OJ;iC(){fH=new BC();rH=new List<lB>();zH=-1;oI=false;wI=new OC(0);GJ=new uD();OJ=new BE();HI=uJ;vJ();} get FD=>fH;vJ(){tB.window.requestAnimationFrame(HI);}uJ( g){vJ();g=g.toDouble();if(zH==-1)zH=g;if(zH>g)zH=g;var j=g-zH;var i=j/1000.0;var k=g/1000.0;var l=false;if(j>=1){zH=g;wI.hI=i;eB.kD.MK(wI);fH.UB(i);for(int h=0;h<rH.length;h++ ){rH[h].FD.UB(i);}if(oI){oI=false;eB.wD.MK(OJ);}for(int h=0;h<rH.length;h++ ){rH[h].bG(k,i);}eB.sD.MK(GJ);}} JG( g){if(g.HD!=null){g.HD.nG(g);}rH.add(g);g.ML=this;} nG( g){if(g.HD==this){rH.remove(g);g.ML=null;}}}class jB extends v{static const  aD="keyDown";static const  cD="keyUp";var BJ=false;var IJ=false;var NJ=false;var TJ=false;var YJ=false;var cJ=0;var eJ=0;var iJ=0;jB( g,[ bubbles=false]):super(g,bubbles); get altKey=>BJ; get ctrlKey=>IJ; get shiftKey=>NJ; get charCode=>cJ; get keyCode=>eJ; get keyLocation=>iJ;}class GB{var cH;var gH;GB( h, g):cH=h,gH=g;GB.RH():this(0,0); clone()=>new GB(cH,gH); toString()=>"Point [x=${cH}, y=${gH}]"; get x=>cH; get y=>gH; get length=>nB.sqrt(cH*cH+gH*gH);set x( g){cH=g;}set y( g){gH=g;} add( g){return new GB(cH+g.x,gH+g.y);}YC( g){cH=g.x;gH=g.y;} SE( g){return cH==g.x&&gH==g.y;}}class hC extends VB{}class IB implements oB{var mH;var uH;var EI;var NI;var VI;var dI;var kI;var rI;var zI;var FJ;var LJ;var PJ;var UJ;var WJ;var aJ;var bJ;static var DE=new TD();IB( h, i,[ transparent=true, fillColor=0xFFFFFFFF,pixelRatio=1.0]){mH=h.toInt();uH=i.toInt();EI=transparent;NI=pixelRatio.toDouble();VI=NI/wC;dI=((1.0-VI).abs()<0.001)?0:1;zI=0;FJ=0;kI=mH;rI=uH;LJ=0;PJ=0;UJ=(mH*VI).ceil();WJ=(uH*VI).ceil();var g=new tB.CanvasElement(width:UJ,height:WJ);aJ=g;bJ=g.context2D;bJ.fillStyle=EI?rD(fillColor):KF(fillColor);bJ.fillRect(0,0,UJ,WJ);}IB.WH( g,[ pixelRatio=1.0]){var h=g.naturalWidth.toInt();var i=g.naturalHeight.toInt();mH=(h/pixelRatio).round();uH=(i/pixelRatio).round();EI=true;NI=pixelRatio.toDouble();VI=NI;dI=((1.0-VI).abs()<0.001)?0:1;zI=0;FJ=0;kI=mH;rI=uH;LJ=0;PJ=0;UJ=h;WJ=i;aJ=g;}IB.XH( g){var h=g.rG.OI;mH=g.iG.toInt();uH=g.hG.toInt();EI=true;NI=h.NI;VI=h.VI;dI=g.pG?3:2;zI=g.offsetX;FJ=g.offsetY;kI=g.UE;rI=g.TE;LJ=(g.TG*VI).floor();PJ=(g.UG*VI).floor();UJ=(g.UE*VI).ceil();WJ=(g.TE*VI).ceil();aJ=h.aJ;}static  uC( g,[ bitmapDataLoadOptions=null, pixelRatio=1.0]){if(bitmapDataLoadOptions==null){bitmapDataLoadOptions=IB.DE;}if(lB.KE&&bitmapDataLoadOptions.autoHiDpi){if(g.contains("@1x.")&&OE>=1.5){pixelRatio=pixelRatio*2.0;g=g.replaceAll("@1x.","@2x.");}}var i=new HB.Completer<IB>();var h=new tB.ImageElement();var j;var k;j=h.onLoad.listen((m){j.cancel();k.cancel();i.complete(new IB.WH(h,pixelRatio));});k=h.onError.listen((m){j.cancel();k.cancel();i.completeError(new StateError("Error loading image."));});if(bitmapDataLoadOptions.webp==false){h.src=g;return i.future;}zF.then(( o){var n=new RegExp(r"(png|jpg|jpeg)$",multiLine:false,caseSensitive:true);var l=n.firstMatch(g);if(o==false||l==null){h.src=g;}else{h.src=g.substring(0,g.length-l.group(1).length)+"webp";}});return i.future;} get width=>mH; get height=>uH; clone([ pixelRatio]){pixelRatio=(pixelRatio!=null)?pixelRatio:NI;var g=new IB(mH,uH,true,0,pixelRatio);g.QG(this);return g;} QG( g,[ matrix=null]){hM();matrix=(matrix==null)?new AB.TH():matrix.clone();matrix.scale(VI,VI);var h=new OB.VH(bJ,matrix);g.FB(h);bJ.globalAlpha=1.0;bJ.globalCompositeOperation=NC.PC;} fillRect( g, h){hM();bJ.setTransform(VI,0.0,0.0,VI,0.0,0.0);bJ.fillStyle=rD(h);bJ.fillRect(g.x,g.y,g.width,g.height);} clear(){hM();bJ.setTransform(VI,0.0,0.0,VI,0.0,0.0);bJ.clearRect(0,0,mH,uH);} FB( h){var g=h.context;switch (dI){case 0:g.drawImage(aJ,zI,FJ);break;case 1:g.drawImageScaled(aJ,zI,FJ,kI,rI);break;case 2:g.drawImageScaledFromSource(aJ,LJ,PJ,UJ,WJ,zI,FJ,kI,rI);break;case 3:g.transform(0.0,-1.0,1.0,0.0,zI,FJ+rI);g.drawImageScaledFromSource(aJ,LJ,PJ,WJ,UJ,0.0,0.0,rI,kI);break;}} oG( o, g){if(g.width==0||g.height==0)return;var i=o.context;if(dI!=0){hM();}var h=(g.x-zI)*VI;var n=(g.y-FJ)*VI;var q=g.width*VI;var k=g.height*VI;var l=g.x+zI;var j=g.y+FJ;var s=g.width;var m=g.height;i.drawImageScaledFromSource(aJ,h,n,q,k,l,j,s,m);} hM(){if(bJ==null){var g=NI/wC;var j=(mH*g).ceil();var i=(uH*g).ceil();var h=new tB.CanvasElement(width:j,height:i);var k=new AB(g,0.0,0.0,g,0.0,0.0);var l=new OB.VH(h.context2D,k);this.FB(l);NI=NI;VI=g;dI=((1.0-VI).abs()<0.001)?0:1;zI=0;FJ=0;kI=mH;rI=uH;LJ=0;PJ=0;UJ=j;WJ=i;aJ=h;bJ=h.context2D;}}}typedef  mC( ratio);typedef  wE<EC extends v>( event);class AF<EC extends v> extends HB.StreamSubscription<EC>{var bI;var nI;var qI;var xI;AF(this.bI,this.nI){qI=0;xI=false;} cancel(){if(xI==false){bI.pJ(this);xI=true;nI=null;}} onError( g(error)){} get isPaused=>qI>0;}class NC{static const  PC="source-over";} KF( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";}class WB{var BI;var eI;var jI;final  vI=new List<xC>();final  QJ=new List<FG>();static  uC( l){var i=new HB.Completer<WB>();tB.HttpRequest.getString(l).then((q){var h=MD.parse(q) as Map;var j=new List();var g=new WB();g.BI=l;g.eI=h["md5"];g.jI=h["frameRate"].toInt();for(var m in h["movies"] as List){var n=new xC(m,g);g.vI.add(n);}for(var o in h["textureGroups"] as List){var k=new FG(o,g);g.QJ.add(k);j.add(k.WC.future);}HB.Future.wait(j).then((w){i.complete(g);}).catchError((s){i.completeError(new StateError("Failed to load image."));});}).catchError((s){i.completeError(new StateError("Failed to load json file."));});return i.future;} sK( h){for(var g in vI)if(g.id==h)return g;throw new ArgumentError("The movie '${h}' is not available.");} HL( g){for(var h in QJ){if(h.ZC.containsKey(g)){return h.ZC[g];}}for(var i in vI){if(i.id==g){return new HH(this,g);}}throw new ArgumentError("The symbol '${g}' is not available.");}}class OC extends kC{var hI;OC( g):super(v.qC){hI=g;}}class hD{static var cF=RD.sC;static var gF=new HB.StreamController<String>();static var kF=gF.stream.asBroadcastStream();static  get pF=>cF;}class NB{static const  qD="B";static const  VF="BL";static const  vD="BR";static const  CF="L";static const  yD="R";static const  bF="T";static const  fF="TR";static const  sC="";} rD( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class uD extends kC{uD():super(v.oD);}class OB{final  bJ;var AI=0.0;var gJ=0.0;var lJ;var oJ;OB.VH( h,[ matrix]):bJ=h{lJ=new wB();oJ=lJ;if(matrix!=null){lJ.matrix.YC(matrix);}var g=lJ.matrix;bJ.setTransform(g.a,g.b,g.c,g.d,g.aB,g.bB);bJ.globalAlpha=1.0;bJ.globalCompositeOperation=NC.PC;} get context=>bJ; reset([ matrix, currentTime, deltaTime]){AI=?currentTime?currentTime:0.0;gJ=?deltaTime?deltaTime:0.0;oJ=lJ;if(matrix!=null){lJ.matrix.YC(matrix);}var g=lJ.matrix;bJ.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);bJ.clearRect(0,0,bJ.canvas.width,bJ.canvas.height);bJ.setTransform(g.a,g.b,g.c,g.d,g.aB,g.bB);bJ.globalAlpha=1.0;bJ.globalCompositeOperation=NC.PC;} hE( h){var g=h.gL;var w=h.VJ;var k=h.dJ;var j=h.sJ;var o=h.tJ;var m=oJ as wB;var i=oJ.dG as wB;oJ=i;var n=i.matrix;var s=m.alpha*w;var q=(o!=null)?o:m.XC;n.PE(g,m.matrix);i.alpha=s;i.XC=q;if(k!=null||j!=null){bJ.save();if(k!=null){if(k.sB==null){g=i.matrix;}else if(identical(k.sB,h)){g=i.matrix;}else if(identical(k.sB,h.parent)){g=m.matrix;}else{g=k.sB.jE(h);if(g==null)g=vC;else g.concat(i.matrix);}k.FB(this,g);}if(j!=null){if(j.sB==null){g=i.matrix;}else if(identical(j.sB,h)){g=i.matrix;}else if(identical(j.sB,h.parent)){g=m.matrix;}else{g=j.sB.jE(h);if(g==null)g=vC;else g.concat(i.matrix);}j.FB(this,g);}}var l=n;bJ.setTransform(l.a,l.b,l.c,l.d,l.aB,l.bB);bJ.globalCompositeOperation=q;bJ.globalAlpha=s;if(h.MG){h.MM(this);}else{h.FB(this);}if(k!=null||j!=null){bJ.restore();}oJ=m;}}class AE{var hJ=0.0;var kJ=0.0;var mJ=0.0;var VJ=0.0;AE.UH( g){hJ=nB.min(1.0,nB.max(0.0,u(g["red"])));kJ=nB.min(1.0,nB.max(0.0,u(g["green"])));mJ=nB.min(1.0,nB.max(0.0,u(g["blue"])));VJ=nB.min(1.0,nB.max(0.0,u(g["alpha"])));}}class BE extends kC{BE():super(v.zD);}class rC{static  EE( g){return g;}static  DG( g){if(g==0.0||g==1.0)return g;return nB.pow(2.0,-10.0*g)*nB.sin((g-0.3/4.0)*(2.0*nB.PI)/0.3)+1;}}class FC{static const  nC="auto";static const  lF="stop";static const  GE="once";} iF( g){if(g is bool){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a bool.");}} XB( g){if(g is int){return g;}else{throw new ArgumentError("The supplied value (${g}) is not an int.");}}class HE{var target=null;var fB=false;var AD=0;var GC=0;var cE,dE;var aE,bE;HE(this.cE,this.dE,this.aE,this.bE);} u( g){if(g is num){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a number.");}}class PB{final  GD;var ID=double.NAN;var KD=double.NAN;PB(this.GD); KC( g){this.KD=g.toDouble();} get aG=>!ID.isNaN&&!KD.isNaN; cK( g){switch (GD){case 'x':return g.x;case 'y':return g.y;case 'pivotX':return g.gB;case 'pivotY':return g.hB;case 'scaleX':return g.KB;case 'scaleY':return g.LB;case 'skewX':return g.skewX;case 'skewY':return g.skewY;case 'rotation':return g.HC;case 'alpha':return g.alpha;default:return 0.0;}} JL( g, h){switch (GD){case 'x':g.x=h;break;case 'y':g.y=h;break;case 'pivotX':g.gB=h;break;case 'pivotY':g.hB=h;break;case 'scaleX':g.KB=h;break;case 'scaleY':g.LB=h;break;case 'skewX':g.skewX=h;break;case 'skewY':g.skewY=h;break;case 'rotation':g.HC=h;break;case 'alpha':g.alpha=h;break;}}}class QC{final  PK;var AI=0.0;var KI=0.0;var cH=0.0;var gH=0.0;var UK=0.0;var WK=0.0;var RJ=0.0;var ZK=0.0;var aK=0.0;var bK=0.0;var eK=0.0;var gK=0.0;var iK=0.0;var jK=0.0;var kK=0.0;var lK=0.0;var nK=0.0;var oK=0.0;var pK;var qK;QC( g):PK=g;wK(){var g=PK;var j=g.AL+g.DL*g.FL;if(j<0.01)j=0.01;AI=0.0;KI=j;cH=g.NL+g.OL*g.FL;gH=g.RL+g.TL*g.FL;aK=g.NL;bK=g.RL;var k=g.YL+g.aL*g.FL;var l=g.cL+g.eL*g.FL;eK=(l*nB.cos(k));gK=(l*nB.sin(k));kK=g.iL+g.jL*g.FL;lK=g.iL/KI;nK=g.YL+g.aL*g.FL;oK=g.mL+g.oL*g.FL;iK=g.iK+g.sL*g.FL;jK=g.jK+g.tL*g.FL;var h=g.uL+g.vL*g.FL;var i=g.wL+g.xL*g.FL;if(h<0.1)h=0.1;if(i<0.1)i=0.1;UK=h;WK=(i-h)/KI;pK=g.pK;} JM( g){var j=PK;var l=KI-AI;if(l<=0.0)return false;if(l<=g)g=l;AI+= g;if(j.KM==SC.EG){nK+= oK*g;kK-= lK*g;cH=j.NL-nB.cos(nK)*kK;gH=j.RL-nB.sin(nK)*kK;if(kK<j.NM){AI=KI;}}else{var h=cH-aK;var i=gH-bK;var k=nB.sqrt(h*h+i*i);if(k<0.01)k=0.01;h=h/k;i=i/k;var n=j.QM;var m=j.RM;eK+= g*(n+h*iK-i*jK);gK+= g*(m+i*iK+h*jK);cH+= eK*g;gH+= gK*g;}UK+= WK*g;return true;}TM( j){var k=AI*32~/KI;var g=32*k;var i=0;var l=cH-UK/2.0;var h=gH-UK/2.0;j.drawImageScaledFromSource(pK,g,i,32,32,l,h,UK,UK);}}class qF{static var rF=0;var fC=rF++ ;var target=null;var bC=false;qF(this.target,this.bC);} JE( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);}class lB extends VB{static var KE=true;var uK;var bJ;var xK,yK;var zK;var CL,EL;var GL;var KL;var LL;var ML;var fH;var PL;var QL;var SL;var UL;var VL;var WL;var XL;var ZL;var bL;var dL;var fL;var hL;lB( h, g,[ contentWidth, contentHeight, contentFrameRate]){tH=h;uK=g;uK.focus();bJ=g.context2D;xK=(contentWidth!=null)?contentWidth:g.width;yK=(contentHeight!=null)?contentHeight:g.height;zK=(contentFrameRate!=null)?contentFrameRate:30;CL=-1;EL=-1;GL=new CB.RH();KL=new AB.TH();LL=new AB.TH();CM();ML=null;fH=new BC();QL=new OB.VH(bJ);SL=FC.nC;UL=CC.jD;VL=NB.sC;bL=[new HE(t.fD,t.lD,t.ZD,t.IF),new HE(t.dF,t.hF,t.CE,t.CE),new HE(t.mF,t.nF,t.FE,t.FE)];WL=MB.oC;ZL=null;XL=new GB(0,0);fL=new t(t.ZD,true);DC.ZF.listen(ZF);uK.onMouseDown.listen(LM);uK.onMouseUp.listen(LM);uK.onMouseMove.listen(LM);uK.onMouseOut.listen(LM);uK.onMouseWheel.listen(OM);dL=new Map<int,qF>();hL=new EB(EB.YD,true);hD.kF.listen(PM);PM(null);uK.onKeyDown.listen(SM);uK.onKeyUp.listen(SM);uK.onKeyPress.listen(SM);} get HD=>ML; get FD=>fH; get focus=>PL;aM(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){aM();}set y( g){aM();}set gB( g){aM();}set hB( g){aM();}set KB( g){aM();}set LB( g){aM();}set skewX( g){aM();}set skewY( g){aM();}set HC( g){aM();}set alpha( g){aM();}set width( g){aM();}set height( g){aM();}bG( g, h){if(SL==FC.nC||SL==FC.GE){CM();QL.reset(LL,g,h);FB(QL);if(SL==FC.GE)SL=FC.lF;}}CM(){var DB=uK.getBoundingClientRect();var RB=uK.clientLeft+DB.left;var JB=uK.clientTop+DB.top;var h=uK.clientWidth;var j=uK.clientHeight;var o=xK;var w=yK;if(h is !num)throw "dart2js_hint";if(j is !num)throw "dart2js_hint";if(o is !num)throw "dart2js_hint";if(w is !num)throw "dart2js_hint";if(h==0||j==0)return;var i=1.0;var g=1.0;var k=0.0;var m=0.0;var n=h/o;var l=j/w;switch (UL){case CC.yE:i=n;g=l;break;case CC.FF:i=g=(n>l)?n:l;break;case CC.OF:i=g=1.0;break;case CC.jD:i=g=(n<l)?n:l;break;}switch (VL){case NB.fF:case NB.yD:case NB.vD:k=(h-o*i);break;case NB.bF:case NB.sC:case NB.qD:k=(h-o*i)/2;break;}switch (VL){case NB.VF:case NB.qD:case NB.vD:m=(j-w*g);break;case NB.CF:case NB.sC:case NB.yD:m=(j-w*g)/2;break;}var q=GL;q.x=-k/i;q.y=-m/g;q.width=h/i;q.height=j/g;var s=(lB.KE?OE:1.0)/wC;LL.IC(i,0.0,0.0,g,k,m);LL.scale(s,s);KL.IC(1.0,0.0,0.0,1.0,-RB-k,-JB-m);KL.scale(1.0/i,1.0/g);if(CL!=h||EL!=j){CL=h;EL=j;uK.width=(CL*s).round();uK.height=(EL*s).round();if(uK.clientWidth!=h||uK.clientHeight!=j){uK.style.width="${h}px";uK.style.height="${j}px";}dispatchEvent(new v(v.aF));}}ZF( g){uK.style.cursor=DC.IE(WL);}LM( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var q=j.button;var g=null;var i=KL.BL(j.client);var m=null;if(q<0||q>2)return;if(j.type=="mousemove"&&XL.SE(i))return;var h=bL[q];XL=i;if(DC.eD!=null)DC.eD.kM();if(j.type!="mouseout")g=rB(i.x,i.y) as BB;var k=MB.oC;if(g is hC&&(g as hC).tG){k=MB.pC;}if(g is PD&&(g as PD).tG){k=MB.pC;}if(g is ND&&(g as ND).type==qE.EF){k=MB.mD;}if(WL!=k){WL=k;uK.style.cursor=DC.IE(k);}if(ZL!=null&&ZL!=g){ZL.dispatchEvent(fL..OK(t.tD,true)..rK=(ZL.dC!=null)?ZL.qB(i):new GB.RH()..tK=i..XK=h.fB);ZL=null;}if(g!=null&&g!=ZL){g.dispatchEvent(fL..OK(t.YF,true)..rK=g.qB(i)..tK=i..XK=h.fB);ZL=g;}var l=null;var o=false;var s=false;if(j.type=="mousedown"){uK.focus();l=h.cE;if(g!=h.target||n>h.AD+500)h.GC=0;h.fB=true;h.target=g;h.AD=n;h.GC++ ;}if(j.type=="mouseup"){l=h.dE;h.fB=false;o=(h.target==g);s=o&&h.GC.isEven&&(n<h.AD+500);}if(j.type=="mousemove"){l=t.pD;}if(l!=null&&g!=null){m=g.qB(i);g.dispatchEvent(fL..OK(l,true)..rK=m..tK=i..XK=h.fB..dK=h.GC);if(o){if(s&&g.PG){g.dispatchEvent(fL..OK(h.bE,true)..rK=m..tK=i..XK=h.fB);}else{g.dispatchEvent(fL..OK(h.aE,true)..rK=m..tK=i..XK=h.fB);}}}}OM( h){var g=KL.BL(h.client);var i=rB(g.x,g.y) as BB;if(i!=null){i.dispatchEvent(fL..OK(t.xD,true)..rK=i.qB(g)..tK=g..fK=h.deltaX..hK=h.deltaY);if(fL.eC)h.preventDefault();}}var lM=[] ;PM( h){lM.forEach((g)=>g.cancel());if(hD.pF==RD.MF){lM=[uK.onTouchStart.listen(mM),uK.onTouchEnd.listen(mM),uK.onTouchMove.listen(mM),uK.onTouchEnter.listen(mM),uK.onTouchLeave.listen(mM),uK.onTouchCancel.listen(mM)];}}mM( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=KL.BL(m.client);var h=rB(i.x,i.y) as BB;var g=dL.containsKey(l)?dL[l]:new qF(h,dL.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(hL..OK(EB.XF,true)..rK=(g.target.dC!=null)?g.target.qB(i):new GB.RH()..tK=i..BK=g.fC..DK=g.bC);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(hL..OK(EB.SF,true)..rK=h.qB(i)..tK=i..BK=g.fC..DK=g.bC);g.target=h;}var k=null;if(j.type=="touchstart"){uK.focus();dL[l]=g;k=EB.YD;}if(j.type=="touchend"){dL.remove(l);k=EB.dD;}if(j.type=="touchcancel"){dL.remove(l);k=EB.gD;}if(j.type=="touchmove"){k=EB.nD;}if(k!=null&&h!=null){h.dispatchEvent(hL..OK(k,true)..rK=h.qB(i)..tK=i..BK=g.fC..DK=g.bC);}}}SM( g){if(g.keyCode==8){g.preventDefault();}if(PL==null){return;}if(g.type=="keypress"){var j=g.charCode;var k=g.keyCode;if(k==13)j=13;if(j==0)return;var l=new sE(sE.GF,true)..AJ=new String.fromCharCodes([j]);PL.dispatchEvent(l);}else{var h=uB.xE;var i="";if(g.type=="keyup")i=jB.cD;if(g.type=="keydown")i=jB.aD;if(g.keyLocation==tB.KeyLocation.LEFT)h=uB.CF;if(g.keyLocation==tB.KeyLocation.RIGHT)h=uB.yD;if(g.keyLocation==tB.KeyLocation.NUMPAD)h=uB.NF;if(g.keyLocation==tB.KeyLocation.JOYSTICK)h=uB.iD;if(g.keyLocation==tB.KeyLocation.MOBILE)h=uB.iD;var m=new jB(i,true)..BJ=g.altKey..IJ=g.ctrlKey..NJ=g.shiftKey..cJ=g.charCode..eJ=g.keyCode..iJ=h;PL.dispatchEvent(m);}}} LE( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";} uF(){var i=new HB.Completer<bool>();var g=new tB.ImageElement(); h(){i.complete(g.width==2&&g.height==2);}g.onLoad.listen((j)=>h());g.onError.listen((j)=>h());g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return i.future;}class HH extends p implements SB{final  kL;final  lL;final  nL=new List<xF>();var pL=0.0;var qL=0.0;var rL=0;var qH=0;HH( g, j):kL=g,lL=g.sK(j){for(var h in lL.DD){var i=new xF(kL,h);nL.add(i);}qH=lL.ED;qL=qH/kL.jI;} UB( h){pL+= h;var i=pL%qL;rL=nB.min((qH*i/qL).toInt(),qH-1);for(var g in nL){g.UB(h);g.iE(rL);}return true;} FB( h){for(var g in nL){if(g.visible){h.hE(g);}}}}class tC implements SB{final  yL;final  zL;final  AM=new List<PB>();var BM;var DM;var EM;var FM;var KI;var AI;var GM;var HM;var IM;tC( g, h,[ transitionFunction]):yL=g,zL=(?transitionFunction)?transitionFunction:rC.EE{FM=new UD(this);AI=0.0;KI=nB.max(0.0001,h);GM=0.0;HM=false;IM=false;} get UC=>FM; aI( g){if(yL!=null&&IM==false){AM.add(g);}} UB( m){if(AI<KI||IM==false){AI=AI+m;if(AI>KI){AI=KI;}if(AI>=0.0){if(IM==false){IM=true;for(int h=0;h<AM.length;h++ ){var g=AM[h];g.ID=g.cK(yL);}if(BM!=null){BM();}}var k=AI/KI;var l=zL(k).toDouble();for(int h=0;h<AM.length;h++ ){var g=AM[h];if(g.aG){var i=g.ID.toDouble();var n=g.KD.toDouble();var j=i+l*(n-i);g.JL(yL,HM?j.round():j);}}if(DM!=null){DM();}if(EM!=null&&AI==KI){EM();}}}return AI<KI;}set QE( g){if(IM==false)AI=AI+GM-g;GM=g;} set onComplete( g()){EM=g;}}class xF extends p implements SB{final  yB;final  CD;final  JD=new Map<String,oB>();var JC;xF( i, h):this.yB=i,this.CD=h{for(var g in h.YB){if(g.ref!=null&&JD.containsKey(g.ref)==false){JD[g.ref]=i.HL(g.ref);}}iE(0);} UB( g){if(JC is SB){var h=JC as SB;h.UB(g);}} iE( w){var g=CD.XG(w);var o=g.x,q=g.y;var n=g.KB,k=g.LB;var m=g.skewX,l=g.skewY;var JB=g.gB,mE=g.hB;var s=g.alpha;if(g.index!=w&&g.kE){var i=CD.WG(g);if(i!=null){var h=(w-g.index)/g.duration;var j=g.RE;if(j!=0){var DB=0.0;if(j<0){var iB=1-h;DB=1-iB*iB;j=0-j;}else{DB=h*h;}h=j*DB+(1-j)*h;}o=o+(i.x-o)*h;q=q+(i.y-q)*h;n=n+(i.KB-n)*h;k=k+(i.LB-k)*h;m=m+(i.skewX-m)*h;l=l+(i.skewY-l)*h;s=s+(i.alpha-s)*h;}}var RB=n*nB.cos(l);var nE=n*nB.sin(l);var oE=-k*nB.sin(m);var pE=k*nB.cos(m);var uG=o-(JB*RB+mE*oE);var vG=q-(JB*nE+mE*pE);GK=false;CK.IC(RB,nE,oE,pE,uG,vG);VJ=s;XJ=g.visible;JC=(g.ref!=null)?JD[g.ref]:null;} FB( g){if(JC!=null){JC.FB(g);}}}final  zF=uF();final  RC=new uE<List<p>>(()=>new List<p>()); ME( g, m, n, j){m=m.toDouble();n=n.toDouble();var iB=0.0;var RB=0.0;var s=m*g.a;var JB=m*g.b;var w=m*g.a+n*g.c;var q=m*g.b+n*g.d;var DB=n*g.c;var o=n*g.d;var h=iB;if(h>s)h=s;if(h>w)h=w;if(h>DB)h=DB;var i=RB;if(i>JB)i=JB;if(i>q)i=q;if(i>o)i=o;var l=iB;if(l<s)l=s;if(l<w)l=w;if(l<DB)l=DB;var k=RB;if(k<JB)k=JB;if(k<q)k=q;if(k<o)k=o;if(j==null)j=new CB.RH();j.x=g.aB+h;j.y=g.bB+i;j.width=l-h;j.height=k-i;return j;}final  vC=new AB.TH();final  AG=new tB.CanvasElement(width:16,height:16);final  NE=AG.context2D;final  wC=NE.backingStorePixelRatio==null?1.0:NE.backingStorePixelRatio.toDouble();final  OE=tB.window.devicePixelRatio==null?1.0:tB.window.devicePixelRatio;class SC extends p implements SB{final  UM=new nB.Random();var VM;var WM;var pK;var XM=0;var YM=0.0;var ZM=0.0;static const  EG=1;var KM=0;var NL=0.0;var RL=0.0;var OL=0.0;var TL=0.0;var bM=0;var qL=0.0;var AL=0.0;var DL=0.0;var uL=0.0;var vL=0.0;var wL=0.0;var xL=0.0;var cM="circle";var QM=0.0;var RM=0.0;var cL=0.0;var eL=0.0;var YL=0.0;var aL=0.0;var iK=0.0;var sL=0.0;var jK=0.0;var tL=0.0;var NM=0.0;var iL=0.0;var jL=0.0;var mL=0.0;var oL=0.0;var tJ;var dM;var eM;SC( g){VM=new QC(this);WM=VM;ZM=0.0;YM=0.0;XM=0;lE(g);} fM(){pK=new tB.CanvasElement(width:1024,height:32);var h=pK.context2D;for(int g=0;g<32;g++ ){var k=15;var i=g*32+15.5;var j=15.5;var w=dM.hJ+g*(eM.hJ-dM.hJ)/31;var q=dM.kJ+g*(eM.kJ-dM.kJ)/31;var DB=dM.mJ+g*(eM.mJ-dM.mJ)/31;var s=dM.VJ+g*(eM.VJ-dM.VJ)/31;var n=(255.0*w).toInt();var o=(255.0*q).toInt();var m=(255.0*DB).toInt();var l=h.createRadialGradient(i,j,0,i,j,k);l.addColorStop(0.00,"rgba(${n}, ${o}, ${m}, ${s})");l.addColorStop(1.00,"rgba(${n}, ${o}, ${m}, 0.0)");h.beginPath();h.moveTo(i+k,j);h.arc(i,j,k,0,nB.PI*2.0,false);h.fillStyle=l;h.fill();}} start([ duration]){ZM=qL;if(duration!=null&&duration is num)ZM=duration;} qG( h, g){NL=u(h);RL=u(g);} get jG=>XM; get FL=>UM.nextDouble()*2.0-1.0; lE( h){var g=MD.parse(h);KM=XB(g["emitterType"]);NL=u(g["location"]["x"]);RL=u(g["location"]["y"]);bM=XB(g["maxParticles"]);qL=u(g["duration"]);AL=u(g["lifeSpan"]);DL=u(g["lifespanVariance"]);uL=u(g["startSize"]);vL=u(g["startSizeVariance"]);wL=u(g["finishSize"]);xL=u(g["finishSizeVariance"]);cM=g["shape"];OL=u(g["locationVariance"]["x"]);TL=u(g["locationVariance"]["y"]);cL=u(g["speed"]);eL=u(g["speedVariance"]);YL=u(g["angle"])*nB.PI/180.0;aL=u(g["angleVariance"])*nB.PI/180.0;QM=u(g["gravity"]["x"]);RM=u(g["gravity"]["y"]);iK=u(g["radialAcceleration"]);sL=u(g["radialAccelerationVariance"]);jK=u(g["tangentialAcceleration"]);tL=u(g["tangentialAccelerationVariance"]);NM=u(g["minRadius"]);iL=u(g["maxRadius"]);jL=u(g["maxRadiusVariance"]);mL=u(g["rotatePerSecond"])*nB.PI/180.0;oL=u(g["rotatePerSecondVariance"])*nB.PI/180.0;tJ=g["compositeOperation"];dM=new AE.UH(g["startColor"]);eM=new AE.UH(g["finishColor"]);if(qL<=0)qL=double.INFINITY;ZM=qL;fM();} UB( i){var h=VM;var k=XM;for(int j=0;j<k;j++ ){var g=h.qK as QC;if(g.JM(i)){h=g;continue;}if(g.qK!=null){h.qK=g.qK;WM.qK=g;WM=g;WM.qK=null;}XM-- ;}if(ZM>0.0){var l=AL/bM;YM+= i;while (YM>0.0){if(XM<bM){var g=h.qK;if(g==null){g=WM=h.qK=new QC(this);}h=g;h.wK();h.JM(YM);XM++ ;}YM-= l;}ZM=nB.max(0.0,ZM-i);}return true;} FB( j){var h=j.context;h.globalCompositeOperation=tJ;var g=VM;for(int i=0;i<XM;i++ ){g=g.qK;g.TM(h);}}}class xC{final  id;final  yB;final  DD=new List<yC>();xC( g, j):yB=j,id=g["id"]{for(var h in g["layers"]){var i=new yC(h);this.DD.add(i);}} get ED{var g=0;for(var h in DD)g=nB.max(g,h.ED);return g;}}class yC{final  name;final  SG;final  YB=new List<TC>();yC( g):this.name=g["name"],this.SG=g.containsKey("flipbook")?g["flipbook"]:false{for(var i in g["keyframes"]){var h=new TC(i);this.YB.add(h);}} get ED{var g=YB[YB.length-1];return g.index+g.duration;} XG( h){var g=1;while (g<YB.length&&YB[g].index<=h)g++ ;return YB[g-1];} WG( h){for(int g=0;g<YB.length-1;g++ )if(identical(YB[g],h))return YB[g+1];return null;}}class TC{var index;var duration;var ref;var label;var x,y;var KB,LB;var skewX,skewY;var gB,hB;var visible;var alpha;var kE;var RE;TC( g){this.index=g["index"];this.duration=g["duration"];this.ref=g.containsKey("ref")?g["ref"]:null;this.label=g.containsKey("label")?g["label"]:null;this.x=g.containsKey("loc")?g["loc"][0]:0.0;this.y=g.containsKey("loc")?g["loc"][1]:0.0;this.KB=g.containsKey("scale")?g["scale"][0]:1.0;this.LB=g.containsKey("scale")?g["scale"][1]:1.0;this.skewX=g.containsKey("skew")?g["skew"][0]:0.0;this.skewY=g.containsKey("skew")?g["skew"][1]:0.0;this.gB=g.containsKey("pivot")?g["pivot"][0]:0.0;this.hB=g.containsKey("pivot")?g["pivot"][1]:0.0;this.visible=g.containsKey("visible")?g["visible"]:true;this.alpha=g.containsKey("alpha")?g["alpha"]:1.0;this.kE=g.containsKey("tweened")?g["tweened"]:true;this.RE=g.containsKey("ease")?g["ease"]:0.0;}}class FG{var yB;var ZC;var WC;FG( q,this.yB){this.ZC=new Map<String,GG>();this.WC=new HB.Completer();var k=0;for(var j in q["atlases"] as List){var n=j["file"] as String;var s=LE(yB.BI,n);k++ ;var g=new tB.ImageElement();g.onLoad.listen((o){if( --k==0)this.WC.complete(this);});g.onError.listen((o){this.WC.completeError(new StateError("Failed to load image."));});g.src=s;for(var i in j["textures"] as List){var m=i["symbol"] as String;var h=i["rect"] as List;var l=i["origin"] as List;var w=new GG(h[0],h[1],h[2],h[3],l[0],l[1],g);this.ZC[m]=w;}}}}class GG implements oB{var x,y,width,height;var fG,gG;var WE;var iM;var jM;GG(this.x,this.y,this.width,this.height,this.fG,this.gG,this.WE); FB( g){g.context.drawImageScaledFromSource(WE,x,y,width,height,0,0,width,height);}}//@ sourceMappingURL=stagexl_runtimes.dart.map
