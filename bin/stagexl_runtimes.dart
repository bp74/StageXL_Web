import "dart:async" as JB;import "dart:math" as KC;import "dart:json" as QE;import "dart:html" as yB;class WG{static const  XG="Chrome";static const  YG="Firefox";static const  ZG="Internet Explorer";static const  aG="Safari";final  oF;final  minimumVersion;const WG(this.oF,[this.minimumVersion]);}class bG{final  name;const bG(this.name);}class dG extends aB{var vG;dG(){vG=zB.AG('levelUp');wG();HB.qC('images/LevelupTextureAtlas.png').then((h){var g=new ID(h);g.x=70;g.y=40;bB(g);});}wG(){var l=330;for(int j=0;j<7;j++ ){var h=vG.BE('LevelUp${j}');var g=new ID(h);g.cB=h.width/2;g.dB=h.height/2;g.x=l+h.width/2;g.y=150;g.KB=0.0;g.LB=0.0;bB(g);var k=new rC(g,2.0,pC.hF);k.RC.KB.JC(1.0);k.RC.LB.JC(1.0);k.wD=j*0.05;var i=new rC(g,0.4,pC.nD);i.RC.KB.JC(0.0);i.RC.LB.JC(0.0);i.wD=2.0;i.onComplete=()=>g.KE();eB.add(k);eB.add(i);l=l+5+h.width;}eB.qF(()=>wG(),3.0);}}class cG extends aB{cG(){var k=zB.xF('flump');var i=new gG(k,'idle');i.x=500;i.y=200;bB(i);var j=new gG(k,'walk');j.x=150;j.y=460;bB(j);var g=new gG(k,'attack');g.x=450;g.y=460;bB(g);var h=new gG(k,'defeat');h.x=720;h.y=460;bB(h);eB.add(i);eB.add(j);eB.add(g);eB.add(h);HB.qC('images/flumpLibraryAtlas0.png').then((m){var l=new ID(m);l.x=40;l.y=40;bB(l);});}}var LC;var dC;var eB;var zB; main(){HB.kD.webp=true;var k=yB.window.location.pathname;var j=new RegExp(r"([A-Za-z0-9-]+)\.html",multiLine:false,caseSensitive:false);var g=j.firstMatch(k);if(g!=null&&g.groupCount==1){var h=g.group(1);print("current page: ${h}");var i=yB.query("#stage");if(i!=null){LC=new kB('stage',i);dC=new eC();dC.mF(LC);eB=dC.zC;zB=new MD();}switch (h){case "flump":zB..lF('flump','images/flumpLibrary.json')..load().then((xG)=>LC.bB(new cG()));break;case "texturepacker":zB..nF('levelUp','images/LevelupTextureAtlas.json',gC.UD)..load().then((xG)=>LC.bB(new dG()));break;}}}const eG=const fG();class fG{const fG();}class RB<DC extends w>{final  TH;const RB(this.TH); forTarget( g,{ useCapture: false}){return g.LI(TH,useCapture);}}class HD{var png;var jpg;var webp;HD({this.png: true,this.jpg: true,this.webp: false});}class ID extends q{var bitmapData;var pixelSnapping;var vC;ID([this.bitmapData=null,this.pixelSnapping="auto"]){vC=null;} lB( h,[ returnRectangle]){var g=(bitmapData!=null)?bitmapData.width:0;var i=(bitmapData!=null)?bitmapData.height:0;return fF(h,g,i,returnRectangle);} vB( g, h){if(bitmapData!=null&&g>=0.0&&h>=0.0&&g<bitmapData.width&&h<bitmapData.height)return this;return null;} IB( g){if(bitmapData==null)return;if(vC==null){bitmapData.IB(g);}else{bitmapData.OG(g,vC);}}}final  OC=new UE<List<q>>(()=>new List<q>());class SE{SE();}class jB{static const  RD=1;static const  PC=2;static const  jE=3;}class qB{static const  WE=0;static const  bE=1;static const  hE=2;static const  lE=3;static const  cD=4;}class CC{static var QD=OB.iC;static var cE=false;static var XD=null;static var vE=new JB.StreamController<String>();static var CF=vE.stream.asBroadcastStream();static  rD( i){var h=i;var g="auto";if(QD!=OB.iC){h=QD;}switch (h){case OB.iC:g="auto";break;case OB.kC:g="default";break;case OB.mC:g="pointer";break;case OB.nE:g="move";break;case OB.oE:g="text";break;case OB.qE:g="wait";break;}if(cE){g="none";}return g;}}class OB{static const  iC="auto";static const  kC="arrow";static const  mC="button";static const  nE="hand";static const  oE="ibeam";static const  qE="wait";}class LD{static const  mD="none";static const  kE="touchPoint";}class JD implements PB{final  QH;var XH=0.0;var hH=0.0;var pH=1;JD( g, h):QH=g{hH=KC.max(h,0.0001);} VB( h){var g=XH+h;while (g>=hH&&pH>0){XH=hH;pH-- ;QH();g-= hH;}XH=g;return (pH>0);}}abstract class PB{ VB( g);}class AC implements PB{final  VH=new List<PB>();var kH=0;var tH=0.0; add( g){if(g==null)return;if(this.contains(g))return;if(kH==VH.length){VH.add(g);}else{VH[kH]=g;}kH++ ;} remove( h){if(h==null)return;for(int g=0;g<kH;g++ ){if(identical(VH[g],h)){VH[g]=null;break;}}} contains( h){if(h==null)return false;for(int g=0;g<kH;g++ ){if(identical(VH[g],h)){return true;}}return false;} FD( h, i,[ transitionFunction]){var g=new rC(h,i,transitionFunction);add(g);return g;} qF( h, i){var g=new JD(h,i);add(g);return g;} VB( k){tH+= k;var i=kH;var h=0;if(i is !int)throw "dart2js_hint";for(int g=0;g<i;g++ ){var j=VH[g];if(j==null)continue;if(j.VB(k)==false){VH[g]=null;continue;}if(h!=g){VH[h]=j;VH[g]=null;}h++ ;}if(h!=i){for(int g=i;g<kH;g++ ){VH[h++ ]=VH[g];VH[g]=null;}kH=h;}return true;}}class ZB{final  OH=new List<KD>();var jH;static  qC( n, DB){var k=new JB.Completer<ZB>();var g=new ZB();switch (DB){case gC.YE:case gC.UD:yB.HttpRequest.getString(n).then((u){var o=QE.parse(u);var h=o["frames"];var p=o["meta"];var NB=uD(n,p["image"]);if(h is List){for(var s in h){var j=s as Map;var i=j["filename"] as String;var l=tD(i);var m=new KD.qG(g,l,j);g.OH.add(m);}}if(h is Map){for(String i in h.keys){var j=h[i] as Map;var l=tD(i);var m=new KD.qG(g,l,j);g.OH.add(m);}}HB.qC(NB).then(( FB){g.jH=FB;k.complete(g);}).catchError((BB){k.completeError(new StateError("Failed to load image."));});}).catchError((BB){k.completeError(new StateError("Failed to load json file."));});break;}return k.future;} BE( h){for(int g=0;g<OH.length;g++ )if(OH[g].name==h)return new HB.uG(OH[g]);throw new ArgumentError("TextureAtlasFrame not found: '${h}'");}}class MD{var UH;MD(){UH=new Map<String,MC>();} XI( g){var j=g.kind;var h=g.name;var i="${j}.${h}";if(UH.containsKey(i))throw new StateError("ResourceManager already contains a resource called '${h}'");UH[i]=g;} GJ( i, g){var h="${i}.${g}";if(UH.containsKey(h)==false)throw new StateError("ResourceManager does not contains a resource called '${g}'");return UH[h];} nF( j, h, i){var g=new MC("TextureAtlas",j,h);g.JJ(ZB.qC(h,i));XI(g);} lF( i, h){var g=new MC("FlumpLibrary",i,h);g.JJ(SB.qC(h));XI(g);} load(){var h=this.KG.map((i)=>i.cH);return JB.Future.wait(h).then((j){var g=this.tF;if(g.length>0)throw new StateError("Failed to load ${g.length} resource(s).");return this;});} get KG{return UH.values.where((g)=>g.YC==null).toList();} get tF{return UH.values.where((g)=>g.error!=null).toList();} BE( g){return GJ("BitmapData",g).YC;} AG( g){return GJ("TextureAtlas",g).YC;} xF( g){return GJ("FlumpLibrary",g).YC;}}class fC extends aB{}class BC{static const  XE="exactFit";static const  dE="noBorder";static const  mE="noScale";static const  dD="showAll";}class ND{final  FD;ND(this.FD);call( h, g){vH(h).JC(g);} get x=>vH("x"); get y=>vH("y"); get KB=>vH("scaleX"); get LB=>vH("scaleY"); get skewX=>vH("skewX"); get skewY=>vH("skewY"); get cB=>vH("pivotX"); get dB=>vH("pivotY"); get GC=>vH("rotation"); get alpha=>vH("alpha"); vH( h){var g=new MB(h);this.FD.vH(g);return g;}}class GD extends AB{GD();}class GB{var yG;var CH;var IH;var RH;GB( i, g, h, j):yG=i,CH=g,IH=h,RH=j;GB.pG():this(0,0,0,0); clone()=>new GB(yG,CH,IH,RH); toString()=>"Rectangle [x=${yG}, y=${CH}, width=${IH}, height=${RH}]"; get x=>yG; get y=>CH; get width=>IH; get height=>RH; get left=>yG; get top=>CH; get right=>yG+IH; get bottom=>CH+RH;set x( g){yG=g;}set y( g){CH=g;}set width( g){IH=g;}set height( g){RH=g;} contains( g, h){return yG<=g&&CH<=h&&yG+IH>=g&&CH+RH>=h;} yD( g){return yG==g.x&&CH==g.y&&IH==g.width&&RH==g.height;} get isEmpty{return IH==0&&RH==0;}VC( g){yG=g.x;CH=g.y;IH=g.width;RH=g.height;}}abstract class TE{}class v{var zG,AH,DH,EH,GH,KH;var SH;v( h, i, g, j, k, l):zG=h.toDouble(),AH=i.toDouble(),DH=g.toDouble(),EH=j.toDouble(),GH=k.toDouble(),KH=l.toDouble(),SH=(h*j-i*g).toDouble();v.rG():zG=1.0,AH=0.0,DH=0.0,EH=1.0,GH=0.0,KH=0.0,SH=1.0; clone(){return new v(zG,AH,DH,EH,GH,KH);} pF(){var h=(EH/SH);var i=-(AH/SH);var g=-(DH/SH);var j=(zG/SH);var k=-(h*GH+g*KH);var l=-(i*GH+j*KH);return new v(h,i,g,j,k,l);} get a=>zG; get b=>AH; get c=>DH; get d=>EH; get XB=>GH; get YB=>KH; get tB=>SH; RG( h){var i=h.x.toDouble();var g=h.y.toDouble();return new EB(i*zG+g*DH+GH,i*AH+g*EH+KH);} uJ( h){var i=h.x.toDouble();var g=h.y.toDouble();return new EB(i*zG+g*DH+GH,i*AH+g*EH+KH);} concat( g){var m=zG;var p=AH;var s=DH;var o=EH;var l=GH;var n=KH;var BB=SH;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var DB=g.XB;var u=g.YB;var FB=g.tB;zG=(m*j+p*i).toDouble();AH=(m*k+p*h).toDouble();DH=(s*j+o*i).toDouble();EH=(s*k+o*h).toDouble();GH=(l*j+n*i+DB).toDouble();KH=(l*k+n*h+u).toDouble();SH=(BB*FB).toDouble();} BG(){zG=1.0;AH=0.0;DH=0.0;EH=1.0;GH=0.0;KH=0.0;SH=1.0;} DE(){var j=zG;var m=AH;var l=DH;var k=EH;var h=GH;var i=KH;var g=SH;zG=(k/g).toDouble();AH=-(m/g).toDouble();DH=-(l/g).toDouble();EH=(j/g).toDouble();GH=-(zG*h+DH*i).toDouble();KH=-(AH*h+EH*i).toDouble();SH=(1.0/g).toDouble();} scale( h, g){zG=(zG*h).toDouble();AH=(AH*g).toDouble();DH=(DH*h).toDouble();EH=(EH*g).toDouble();GH=(GH*h).toDouble();KH=(KH*g).toDouble();SH=(SH*h*g).toDouble();} HC( h, i, g, k, j, l){zG=h.toDouble();AH=i.toDouble();DH=g.toDouble();EH=k.toDouble();GH=j.toDouble();KH=l.toDouble();SH=(zG*EH-AH*DH).toDouble();} VC( g){zG=g.a.toDouble();AH=g.b.toDouble();DH=g.c.toDouble();EH=g.d.toDouble();GH=g.XB.toDouble();KH=g.YB.toDouble();SH=g.tB.toDouble();} vD( h, g){var n=h.a;var s=h.b;var u=h.c;var p=h.d;var m=h.XB;var o=h.YB;var DB=h.tB;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var FB=g.XB;var BB=g.YB;var NB=g.tB;zG=(n*k+s*j).toDouble();AH=(n*l+s*i).toDouble();DH=(u*k+p*j).toDouble();EH=(u*l+p*i).toDouble();GH=(m*k+o*j+FB).toDouble();KH=(m*l+o*i+BB).toDouble();SH=(DB*NB).toDouble();}}class UE<DC>{final  FH=new List<DC>();final  ZH;var iH=0;UE( g()):ZH=g; IE(){var g=iH;if(g is !int)throw "dart2js_hint";if(g==0){return ZH();}else{iH=g-1;return FH[iH];}}JE( h){var g=iH;if(g is !int)throw "dart2js_hint";if(g==FH.length){FH.add(h);}else{FH[g]=h;}iH=g+1;}reset(){FH.clear();iH=0;}}abstract class AB extends q{var rF=false;var EG=true;var oG=true;var tabIndex=0;static const  rE=const RB<t>(t.iD);static const  IF=const RB<t>(t.hD);static const  MF=const RB<t>(t.YD);static const  SF=const RB<t>(t.fD);static const  XF=const RB<t>(t.jD); get onMouseOut=>AB.rE.forTarget(this); get onMouseMove=>AB.IF.forTarget(this); get onMouseDown=>AB.MF.forTarget(this); get onMouseUp=>AB.SF.forTarget(this); get onMouseWheel=>AB.XF.forTarget(this);static const  ZF=const RB<CB>(CB.gD);static const  aF=const RB<CB>(CB.WD);static const  cF=const RB<CB>(CB.ZD); get onTouchMove=>AB.ZF.forTarget(this); get onTouchEnd=>AB.aF.forTarget(this); get onTouchCancel=>AB.cF.forTarget(this);static const  eF=const RB<QB>(QB.VD);static const  gF=const RB<QB>(QB.jC); get onKeyUp=>AB.eF.forTarget(this); get onKeyDown=>AB.gF.forTarget(this);}class eC{var BH;var NH;var WH;var dH;var HI;var RI;eC(){BH=new AC();NH=new List<kB>();WH=-1;HI=NC.eD;RI=new PD(0);dH=wI;BJ();} get zC=>BH;BJ(){yB.window.requestAnimationFrame(dH);}wI( g){BJ();g=g.toDouble();if(WH==-1)WH=g;if(WH>g)WH=g;var k=g-WH;var h=k/1000.0;var l=g/1000.0;if(k>=1){WH=g;RI.JH=h;HI.UJ(RI);BH.VB(h);for(int i=0;i<NH.length;i++ ){var j=NH[i];j.zC.VB(h);j.DG(l,h);}}} mF( g){if(g.BD!=null){g.BD.NG(g);}NH.add(g);g.EK=this;} NG( g){if(g.BD==this){NH.remove(g);g.EK=null;}}}class RE{RE();}class KD{final  LH;final  PH;final  gH;final  oH;final  wH;final  DI;final  JI;final  OI;final  UI;final  WI;final  aI;KD.qG( i, h, g):LH=i,PH=h,gH=QF(g["rotated"]),oH=gB(g["sourceSize"]["w"]),wH=gB(g["sourceSize"]["h"]),DI=gB(g["spriteSourceSize"]["x"]),JI=gB(g["spriteSourceSize"]["y"]),OI=gB(g["frame"]["x"]),UI=gB(g["frame"]["y"]),WI=gB(g["frame"]["w"]),aI=gB(g["frame"]["h"]); get QG=>LH; get name=>PH; get PG=>gH; get vF=>OI; get wF=>UI; get AE=>WI; get zD=>aI; get offsetX=>DI; get offsetY=>JI; get JG=>oH; get IG=>wH;}abstract class iB{ IB( g);}class w{static const  aE="added";static const  gE="addedToStage";static const  aD="enterFrame";static const  pE="removed";static const  tE="removedFromStage";static const  zE="resize";var fJ;var gJ;var WJ;var aH;var iJ;var ZJ;var dJ;w( g,[ bubbles=false]){EJ(g,bubbles);} EJ( g,[ bubbles=false]){fJ=g;gJ=bubbles;WJ=jB.PC;aH=null;iJ=null;ZJ=false;dJ=false;} get aC=>ZJ; get type=>fJ; get bubbles=>gJ; get SC=>true; get target=>aH;}class fB{var MH;var fH;dispatchEvent( g){LJ(g,this,this,jB.PC);} kJ( h, j, i){if(j&&fH!=null){var g=fH[h];if(g!=null&&g.pJ)return true;}if(i&&MH!=null){var g=MH[h];if(g!=null&&g.pJ)return true;}return false;} LI( h, g){if(g){if(fH==null)fH=new Map<String,pB>();}else{if(MH==null)MH=new Map<String,pB>();}var i=g?fH:MH;return i.putIfAbsent(h,(){return new pB(this,h,g);});}LJ( g, k, l, j){var h=(j==jB.RD)?fH:MH;if(h==null)return;var i=h[g.type];if(i==null)return;g.aH=k;g.iJ=l;g.WJ=j;g.ZJ=false;g.dJ=false;i.UJ(g);}}class NC<DC extends w>{final  MH=new List<pB>();var nH=0;static var eD=new NC<PD>(); gI( g){for(int h=0;h<nH;h++ ){if(MH[h]==g)return;}if(nH==MH.length){MH.add(g);}else{MH[nH]=g;}nH++ ;} UJ( j){j.WJ=jB.PC;j.ZJ=false;j.dJ=false;var k=nH;var i=0;if(k is !int)throw "dart2js_hint";for(int g=0;g<k;g++ ){var h=MH[g];if(h==null)continue;if(h.TI==0){MH[g]=null;continue;}j.aH=h.aH;j.iJ=h.aH;h.UJ(j);if(i!=g){MH[i]=h;MH[g]=null;}i++ ;}if(i!=k){for(int g=k;g<nH;g++ ){MH[i++ ]=MH[g];MH[g]=null;}nH=i;}}}class rB{final  matrix=new v.rG();var alpha=1.0;var UC=lC.oC;var BI; get FG{if(BI==null)BI=new rB();return BI;}}class EB{var yG;var CH;EB( h, g):yG=h,CH=g;EB.pG():this(0,0); clone()=>new EB(yG,CH); toString()=>"Point [x=${yG}, y=${CH}]"; get x=>yG; get y=>CH; get length=>KC.sqrt(yG*yG+CH*CH);set x( g){yG=g;}set y( g){CH=g;} add( g){return new EB(yG+g.x,CH+g.y);}VC( g){yG=g.x;CH=g.y;} yD( g){return yG==g.x&&CH==g.y;}}class gC{static const  YE="json";static const  UD="jsonarray";}class PD extends w{var JH;PD( g):super(w.aD,false){JH=g;} get SC=>false;}class t extends w{static const  TD="click";static const  fE="doubleClick";static const  YD="mouseDown";static const  fD="mouseUp";static const  hD="mouseMove";static const  iD="mouseOut";static const  BF="mouseOver";static const  jD="mouseWheel";static const  lD="middleClick";static const  HF="middleMouseDown";static const  LF="middleMouseUp";static const  oD="rightClick";static const  PF="rightMouseDown";static const  RF="rightMouseUp";var RJ,SJ;var TJ,VJ;var jJ;var eI;var nI;var fI;var iI;var mJ;var nJ;var oJ;t( g,[ bubbles=false]):super(g,bubbles){EJ(g,bubbles);} EJ( g,[ bubbles=false]){super.EJ(g,bubbles);RJ=SJ=0;TJ=VJ=0;jJ=false;eI=false;nI=false;fI=false;iI=false;mJ=0;nJ=0;oJ=0;}set qJ( g){RJ=g.x;SJ=g.y;}set sJ( g){TJ=g.x;VJ=g.y;} get hB=>jJ; get altKey=>eI; get ctrlKey=>fI; get shiftKey=>iI; get FC=>mJ; get deltaX=>nJ; get deltaY=>oJ;}class QB extends w{static const  jC="keyDown";static const  VD="keyUp";var eI;var fI;var iI;var kI;var nI;var rI;var uI;var xI;QB( g,[ bubbles=false]):super(g,bubbles){EJ(g,bubbles);} EJ( g,[ bubbles=false]){super.EJ(g,bubbles);eI=false;fI=false;iI=false;kI=false;nI=false;rI=0;uI=0;xI=0;} get altKey=>eI; get ctrlKey=>fI; get shiftKey=>iI; get charCode=>rI; get keyCode=>uI; get keyLocation=>xI;}class OD extends w{static const  eE="textInput";var dI="";OD( g,[ bubbles=false]):super(g,bubbles);}class CB extends w{static const  SD="touchBegin";static const  WD="touchEnd";static const  ZD="touchCancel";static const  gD="touchMove";static const  uE="touchOver";static const  yE="touchOut";var NJ;var OJ;var RJ,SJ;var TJ,VJ;var eI;var nI;var fI;var iI;var aJ;var bJ;var cJ;CB( g,[ bubbles=false]):super(g,bubbles){EJ(g,bubbles);} EJ( g,[ bubbles=false]){super.EJ(g,bubbles);NJ=0;OJ=false;RJ=SJ=0;TJ=VJ=0;eI=false;nI=false;fI=false;iI=false;aJ=1.00;bJ=0;cJ=0;}set qJ( g){RJ=g.x;SJ=g.y;}set sJ( g){TJ=g.x;VJ=g.y;} get bC=>NJ; get altKey=>eI; get ctrlKey=>fI; get shiftKey=>iI;}class pB<DC extends w> extends JB.Stream<DC>{final  aH;final  TH;final  rH;final  EI=new List<ZE>();var TI=0;pB(this.aH,this.TH,this.rH); get isBroadcast=>true; asBroadcastStream()=>this; listen( h( event),{ onError(error), onDone(), cancelOnError: false}){var g=new ZE<DC>(this,h);if(TI==EI.length){EI.add(g);}else{EI[TI]=g;}TI++ ;if(TH==w.aD&&rH==false)NC.eD.gI(this);return g;} AJ( h){for(int g=0;g<TI;g++ ){if(identical(EI[g],h)){EI[g]=null;break;}}} get pJ{for(var g=0;g<TI;g++ )if(EI[g]!=null)return true;return false;} UJ( k){var i=TI;var h=0;if(i is !int)throw "dart2js_hint";for(int g=0;g<i;g++ ){var j=EI[g];if(j==null)continue;j.GI(k);if(h!=g){EI[h]=j;EI[g]=null;}h++ ;}if(h!=i){for(int g=i;g<TI;g++ ){EI[h++ ]=EI[g];EI[g]=null;}TI=h;}}}class MC{var HH;var PH;var YH;var cH;var mH;var qH;MC( g, h, i){HH=g;PH=h;YH=i;mH=null;qH=null;} get kind=>HH; get name=>PH; get YC=>qH; get error=>mH;JJ( i){cH=i.then((g){qH=g;mH=null;},onError:(h){qH=null;mH=h;});}}abstract class aB extends AB{final  eH=new List<q>();var uH=true;var AI=true; bB( g){if(g.parent==this){var h=eH.indexOf(g);eH.removeAt(h);eH.add(g);}else{kF(g,eH.length);}} kF( g, h){if(h<0||h>eH.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){eH.removeAt(eH.indexOf(g));if(h>eH.length)h-- ;eH.insert(h,g);}else{g.KE();g.tJ(this);eH.insert(h,g);g.dispatchEvent(new w(w.aE,true));if(this.ZC!=null)yJ(g,new w(w.gE));}} LG( h){var g=eH.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");MG(g);} MG( g){if(g<0||g>=eH.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=eH[g];h.dispatchEvent(new w(w.pE,true));if(this.ZC!=null)yJ(h,new w(w.tE));h.tJ(null);eH.removeAt(g);} contains( g){for(;g!=null;g=g.XJ)if(g==this)return true;return false;} lB( n,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new GB.pG();if(eH.length==0)return super.lB(n,returnRectangle);var h=double.INFINITY;var i=double.INFINITY;var k=double.NEGATIVE_INFINITY;var j=double.NEGATIVE_INFINITY;var o=eH.length;for(int l=0;l<eH.length;l++ ){var m=eH[l];YJ.vD(m.LK,n);var g=m.lB(YJ,returnRectangle);if(g.left<h)h=g.left;if(g.top<i)i=g.top;if(g.right>k)k=g.right;if(g.bottom>j)j=g.bottom;}returnRectangle.x=h;returnRectangle.y=i;returnRectangle.width=k-h;returnRectangle.height=j-i;return returnRectangle;} vB( i, k){i=i.toDouble();k=k.toDouble();var n=null;for(int l=eH.length-1;l>=0;l-- ){var j=eH[l];if(j.visible){var g=j.LK;var o=i-g.XB;var m=k-g.YB;var s=(g.d*o-g.c*m)/g.tB;var p=(g.a*m-g.b*o)/g.tB;var h=j.vB(s,p);if(h!=null){if(h is AB)if(h.EG)return uH?h:this;n=this;}}}return n;} IB( i){for(int h=0;h<eH.length;h++ ){var g=eH[h];if(!g.DJ&&g.visible)i.LE(g);}}vK( g, i){i.add(g);if(g is aB){var k=g as aB;var j=k.eH;for(int h=0;h<j.length;h++ ){vK(j[h],i);}}}yJ( i, j){var g=OC.IE() as List<q>;vK(i,g);for(int h=0;h<g.length;h++ ){g[h].dispatchEvent(j);}g.clear();OC.JE(g);}}class HB implements iB{var IH;var RH;var bH;var lH;var sH;var yH;var FI;var KI;var QI;var SI;var VI;var YI;var cI;var hI;static var kD=new HD(png:true,jpg:true,webp:false);HB( h, i,[ transparent=true, fillColor=0xFFFFFFFF]){IH=h.toInt();RH=i.toInt();bH=transparent;lH=0;FI=QI=0;KI=SI=0;sH=VI=IH;yH=YI=RH;var g=new yB.CanvasElement(width:IH,height:RH);hI=g.context2D;hI.fillStyle=bH?DF(fillColor):iE(fillColor);hI.fillRect(0,0,IH,RH);cI=g;}HB.tG( g){if(g==null)throw new ArgumentError();IH=g.naturalWidth.toInt();RH=g.naturalHeight.toInt();bH=true;lH=0;FI=QI=0;KI=SI=0;sH=VI=IH;yH=YI=RH;cI=g;}HB.uG( g){IH=g.JG.toInt();RH=g.IG.toInt();bH=true;lH=g.PG?2:1;FI=g.offsetX;KI=g.offsetY;sH=g.AE;yH=g.zD;QI=g.vF;SI=g.wF;VI=g.AE;YI=g.zD;cI=g.QG.jH.cI;}static  qC( h,[ bitmapDataLoadOptions=null]){if(bitmapDataLoadOptions==null)bitmapDataLoadOptions=HB.kD;var i=new JB.Completer<HB>();var g=new yB.ImageElement();var j;var k;j=g.onLoad.listen((m){j.cancel();k.cancel();i.complete(new HB.tG(g));});k=g.onError.listen((m){j.cancel();k.cancel();i.completeError(new StateError("Error loading image."));});if(bitmapDataLoadOptions.webp==false){g.src=h;return i.future;}dF.then(( o){var n=new RegExp(r"(png|jpg|jpeg)$",multiLine:false,caseSensitive:true);var l=n.firstMatch(h);if(o==false||l==null){g.src=h;}else{g.src=h.substring(0,h.length-l.group(1).length)+"webp";}});return i.future;} get width=>IH; get height=>RH; clone(){var g=new HB(IH,RH,true,0);g.sF(this);return g;} sF( h,[ matrix=null]){var g=uK();var i=new UB.sG(g,matrix);h.IB(i);g.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);} clear(){var g=uK();g.clearRect(0,0,IH,RH);} IB( h){var g=h.context;switch (lH){case 0:g.drawImage(cI,FI,KI);break;case 1:g.drawImageScaledFromSource(cI,QI,SI,VI,YI,FI,KI,sH,yH);break;case 2:g.transform(0.0,-1.0,1.0,0.0,FI,KI+yH);g.drawImageScaledFromSource(cI,QI,SI,YI,VI,0.0,0.0,yH,sH);break;case 3:g.drawImageScaled(cI,FI,KI,sH,yH);break;}} OG( cC, g){var DB=cC.context;if(g.width<=0.0||g.height<=0.0)return;switch (lH){case 0:DB.drawImageScaledFromSource(cI,g.x-FI,g.y-KI,g.width,g.height,g.x+FI,g.y+KI,g.width,g.height);break;case 1:var j=QI;var h=SI;var p=j+VI;var s=h+YI;var l=QI-FI+g.x;var m=SI-KI+g.y;var BB=l+g.width;var u=m+g.height;var o=(j>l)?j:l;var n=(h>m)?h:m;var FB=(p<BB)?p:BB;var xB=(s<u)?s:u;var k=FB-o;var i=xB-n;var wB=FI-j+o;var NB=KI-h+n;if(k>0.0&&i>0.0){DB.drawImageScaledFromSource(cI,o,n,k,i,wB,NB,k,i);}break;case 2:var j=QI;var h=SI;var p=j+YI;var s=h+VI;var l=QI+KI-g.y+yH-g.height;var m=SI-FI+g.x;var BB=l+g.height;var u=m+g.width;var o=(j>l)?j:l;var n=(h>m)?h:m;var FB=(p<BB)?p:BB;var xB=(s<u)?s:u;var k=xB-n;var i=FB-o;var wB=FI-h+n;var NB=KI+p-FB;if(k>0.0&&i>0.0){DB.transform(0.0,-1.0,1.0,0.0,wB,NB+i);DB.drawImageScaledFromSource(cI,o,n,i,k,0,0,i,k);}break;}} uK(){if(hI==null){var g=new yB.CanvasElement(width:IH,height:RH);hI=g.context2D;switch (lH){case 0:hI.drawImage(cI,FI,KI);break;case 1:hI.drawImageScaledFromSource(cI,QI,SI,VI,YI,FI,KI,sH,yH);break;case 2:hI.transform(0.0,-1.0,1.0,0.0,FI,KI+yH);hI.drawImageScaledFromSource(cI,QI,SI,YI,VI,0.0,0.0,yH,sH);hI.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);break;}lH=0;FI=QI=0;KI=SI=0;sH=VI=IH;yH=YI=RH;cI=g;}return hI;}}typedef  hC( ratio);typedef  VE<DC extends w>( event);class ZE<DC extends w> extends JB.StreamSubscription<DC>{var xH;var GI;var II;var NI;ZE(this.xH,this.GI){II=0;NI=false;} cancel(){if(NI==false){xH.AJ(this);NI=true;GI=null;}} onError( g(error)){}}class lC{static const  oC="source-over";} iE( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";}class SB{var YH;var zH;var CI;final  MI=new List<sC>();final  ZI=new List<iF>();static  qC( l){var i=new JB.Completer<SB>();yB.HttpRequest.getString(l).then((p){var h=QE.parse(p) as Map;var j=new List();var g=new SB();g.YH=l;g.zH=h["md5"];g.CI=h["frameRate"].toInt();for(var m in h["movies"] as List){var n=new sC(m,g);g.MI.add(n);}for(var o in h["textureGroups"] as List){var k=new iF(o,g);g.ZI.add(k);j.add(k.TC.future);}JB.Future.wait(j).then((u){i.complete(g);}).catchError((s){i.completeError(new StateError("Failed to load image."));});}).catchError((s){i.completeError(new StateError("Failed to load json file."));});return i.future;} rJ( h){for(var g in MI)if(g.id==h)return g;throw new ArgumentError("The movie '${h}' is not available.");} vJ( g){for(var h in ZI){if(h.WC.containsKey(g)){return h.WC[g];}}for(var i in MI){if(i.id==g){return new gG(this,g);}}throw new ArgumentError("The symbol '${g}' is not available.");}}final  nC=new v.rG();class bD{static var FF=LD.mD;static var KF=new JB.StreamController<String>();static var NF=KF.stream.asBroadcastStream();static  get TF=>FF;}abstract class q extends fB implements iB{static var xE=0;var bI=xE++ ;var yG=0.0;var CH=0.0;var jI=0.0;var lI=0.0;var mI=1.0;var oI=1.0;var qI=0.0;var sI=0.0;var vI=0.0;var yI=1.0;var CJ=true;var DJ=false;var FJ=null;var HJ=null;var IJ=null;var KJ=false;var MJ=null;var PJ=null;var QJ=null;var PH="";var XJ=null;final  YJ=new v.rG();final  eJ=new v.rG();var hJ=true; get x=>yG; get y=>CH; get cB=>jI; get dB=>lI; get KB=>mI; get LB=>oI; get skewX=>qI; get skewY=>sI; get GC=>vI; get visible=>CJ; get alpha=>yI; get UC=>QJ; get name=>PH; get parent=>XJ; get root{var g=this;while (g.XJ!=null)g=g.XJ;return g;} get ZC{var g=this.root;if(g is kB)return g;return null;}set x( g){yG=g.toDouble();hJ=true;}set y( g){CH=g.toDouble();hJ=true;}set cB( g){jI=g.toDouble();hJ=true;}set dB( g){lI=g.toDouble();hJ=true;}set KB( g){mI=g.toDouble();hJ=true;}set LB( g){oI=g.toDouble();hJ=true;}set skewX( g){qI=g.toDouble();hJ=true;}set skewY( g){sI=g.toDouble();hJ=true;}set GC( g){vI=g.toDouble();hJ=true;}set visible( g){CJ=g;}set alpha( g){yI=g.toDouble();}set UC( g){QJ=g;} setTransform( h, g,[ scaleX, scaleY, rotation, skewX, skewY, pivotX, pivotY]){hJ=true;yG=h.toDouble();CH=g.toDouble();if(scaleX!=null){mI=scaleX.toDouble();if(scaleY!=null){oI=scaleY.toDouble();if(rotation!=null){vI=rotation.toDouble();if(skewX!=null){qI=skewX.toDouble();if(skewY!=null){sI=skewY.toDouble();if(pivotX!=null){jI=pivotX.toDouble();if(pivotY!=null)lI=pivotY.toDouble();}}}}}}} get width=>lB(LK).width; get height=>lB(LK).height; set width( h){this.KB=1;var g=this.width;this.KB=(g!=0.0)?h/g:1.0;} set height( h){this.LB=1;var g=this.height;this.LB=(g!=0.0)?h/g:1.0;} KE(){if(XJ!=null)XJ.LG(this);} get LK{if(hJ){hJ=false;var j=qI+vI;var i=sI+vI;if(j==0.0&&i==0.0){eJ.HC(mI,0.0,0.0,oI,yG-jI*mI,CH-lI*oI);}else{var g,l,k,h;var m=KC.cos(j);var n=KC.sin(j);if(j==i){g=mI*m;l=mI*n;k=-oI*n;h=oI*m;}else{g=mI*KC.cos(i);l=mI*KC.sin(i);k=-oI*n;h=oI*m;}var p=yG-(jI*g+lI*k);var o=CH-(jI*l+lI*h);eJ.HC(g,l,k,h,p,o);}}return eJ;} NE( h){if(h==XJ)return LK.clone();if(h.XJ==this)return h.LK.pF();var j=new v.rG();var g=this;while (g!=h&&g.XJ!=null){j.concat(g.LK);g=g.XJ;}if(h==null&&g!=null){j.concat(g.LK);g=null;}if(g==h)return j;var k=new v.rG();var i=h;while (i!=this&&i.XJ!=null){k.concat(i.LK);i=i.XJ;}k.DE();if(i==this)return k;if(i!=g)return null;j.concat(k);return j;} lB( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new GB.pG();returnRectangle.x=g.XB;returnRectangle.y=g.YB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} vB( g, h){if(lB(nC).contains(g,h))return this;return null;} mB( h){YJ.BG();for(q g=this;g!=null;g=g.XJ)YJ.concat(g.LK);YJ.DE();return YJ.RG(h);} dispatchEvent( h){var g=null;if(h.SC||h.bubbles){for(q j=XJ;j!=null;j=j.XJ){if(j.kJ(h.type,h.SC,h.bubbles)){if(g==null)g=OC.IE() as List<q>;g.add(j);}}}if(h.SC&&g!=null){for(int i=g.length-1;i>=0&&h.aC==false;i-- ){g[i].LJ(h,this,g[i],jB.RD);}}if(h.aC==false){LJ(h,this,this,jB.PC);}if(h.bubbles&&g!=null){for(int i=0;i<g.length&&h.aC==false;i++ ){g[i].LJ(h,this,g[i],jB.jE);}}if(g!=null){g.clear();OC.JE(g);}} tJ( h){for(var g=h;g!=null;g=g.XJ)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");XJ=h;} IB( g);}class TB{static const  sE="B";static const  wE="BL";static const  AF="BR";static const  bE="L";static const  hE="R";static const  EF="T";static const  GF="TL";static const  JF="TR";static const  mD="";}class UB{final  hI;var XH=0.0;var pI=0.0;var tI;var zI;UB.sG( h,[ matrix]):hI=h{tI=new rB();zI=tI;if(matrix!=null){tI.matrix.VC(matrix);}var g=tI.matrix;hI.setTransform(g.a,g.b,g.c,g.d,g.XB,g.YB);hI.globalAlpha=1.0;hI.globalCompositeOperation=lC.oC;} get context=>hI; reset([ matrix, currentTime, deltaTime]){XH=?currentTime?currentTime:0.0;pI=?deltaTime?deltaTime:0.0;zI=tI;if(matrix!=null){tI.matrix.VC(matrix);}var g=tI.matrix;hI.setTransform(g.a,g.b,g.c,g.d,g.XB,g.YB);hI.globalAlpha=1.0;hI.globalCompositeOperation=lC.oC;hI.clearRect(0,0,hI.canvas.width,hI.canvas.height);} LE( h){var g=h.LK;var BB=h.yI;var j=h.FJ;var k=h.PJ;var n=h.QJ;var u=h.HJ;var l=zI as rB;var i=zI.FG as rB;zI=i;var p=i.matrix;var o=l.alpha*BB;var s=(n!=null)?n:l.UC;p.vD(g,l.matrix);i.alpha=o;i.UC=s;if(j!=null||k!=null){hI.save();if(j!=null){if(j.oB==null){g=i.matrix;}else if(identical(j.oB,h)){g=i.matrix;}else if(identical(j.oB,h.parent)){g=l.matrix;}else{g=j.oB.NE(h);if(g==null)g=nC;else g.concat(i.matrix);}j.IB(this,g);}if(k!=null){if(k.oB==null){g=i.matrix;}else if(identical(k.oB,h)){g=i.matrix;}else if(identical(k.oB,h.parent)){g=l.matrix;}else{g=k.oB.NE(h);if(g==null)g=nC;else g.concat(i.matrix);}k.IB(this,g);}}var m=p;hI.setTransform(m.a,m.b,m.c,m.d,m.XB,m.YB);hI.globalCompositeOperation=s;hI.globalAlpha=o;if(u!=null){u.IB(this);}else{h.IB(this);}if(j!=null||k!=null){hI.restore();}zI=l;}} DF( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class pC{static  nD( g){return g;}static  hF( g){if(g==0.0||g==1.0)return g;return KC.pow(2.0,-10.0*g)*KC.sin((g-0.3/4.0)*(2.0*KC.PI)/0.3)+1;}}class EC{static const  iC="auto";static const  OF="stop";static const  pD="once";} QF( g){if(g is bool){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a bool.");}}class qD{var target=null;var hB=false;var uC=0;var FC=0;var GE,HE;var EE,FE;qD(this.GE,this.HE,this.EE,this.FE);} gB( g){if(g is int){return g;}else{throw new ArgumentError("The supplied value (${g}) is not an int.");}}class MB{final  AD;var CD=double.NAN;var ED=double.NAN;MB(this.AD); JC( g){this.ED=g.toDouble();} get CG=>!CD.isNaN&&!ED.isNaN; lJ( g){switch (AD){case 'x':return g.x;case 'y':return g.y;case 'pivotX':return g.cB;case 'pivotY':return g.dB;case 'scaleX':return g.KB;case 'scaleY':return g.LB;case 'skewX':return g.skewX;case 'skewY':return g.skewY;case 'rotation':return g.GC;case 'alpha':return g.alpha;default:return 0.0;}} wJ( g, h){switch (AD){case 'x':g.x=h;break;case 'y':g.y=h;break;case 'pivotX':g.cB=h;break;case 'pivotY':g.dB=h;break;case 'scaleX':g.KB=h;break;case 'scaleY':g.LB=h;break;case 'skewX':g.skewX=h;break;case 'skewY':g.skewY=h;break;case 'rotation':g.GC=h;break;case 'alpha':g.alpha=h;break;}}}class UF{static var VF=0;var bC=VF++ ;var target=null;var XC=false;UF(this.target,this.XC);}class kB extends aB{static var WF=true;static var sD=1.0;static get sB=>sD;var xJ;var hI;var zJ,AK;var BK,CK;var DK,FK;var GK;var HK;var EK;var BH;var iG=30;var IK;var JK;var KK;var MK;var NK;var OK;var PK;var QK;var RK;var SK;var TK;var UK;var WK;kB( j, g){PH=j;xJ=g;xJ.focus();hI=g.context2D;if(kB.WF){var h=yB.window.devicePixelRatio;var i=hI.backingStorePixelRatio;if(h==null)h=1.0;if(i==null)i=1.0;sD=h/i;}zJ=g.width;AK=g.height;fK(zJ,AK);DK=g.clientWidth;FK=g.clientHeight;GK=new v.rG();HK=new v.rG();EK=null;BH=new AC();JK=new UB.sG(hI);KK=EC.iC;MK=BC.dD;NK=TB.mD;RK=[new qD(t.YD,t.fD,t.TD,t.fE),new qD(t.HF,t.LF,t.lD,t.lD),new qD(t.PF,t.RF,t.oD,t.oD)];OK=OB.kC;QK=null;PK=new EB(0,0);TK=new t(t.TD,true);CC.CF.listen(CF);xJ.onMouseDown.listen(nK);xJ.onMouseUp.listen(nK);xJ.onMouseMove.listen(nK);xJ.onMouseOut.listen(nK);xJ.onMouseWheel.listen(oK);SK=new Map<int,UF>();WK=new CB(CB.SD,true);bD.NF.listen(pK);pK(null);UK=new QB(QB.jC,true);xJ.onKeyDown.listen(qK);xJ.onKeyUp.listen(qK);xJ.onKeyPress.listen(rK);} get BD=>EK; get zC=>BH; get focus=>IK;sK(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){sK();}set y( g){sK();}set cB( g){sK();}set dB( g){sK();}set KB( g){sK();}set LB( g){sK();}set skewX( g){sK();}set skewY( g){sK();}set GC( g){sK();}set alpha( g){sK();}set width( g){sK();}set height( g){sK();}DG( g, h){if(KK==EC.iC||KK==EC.pD){tK();JK.reset(HK,g,h);IB(JK);if(KK==EC.pD)KK=EC.OF;}}tK(){var m=xJ.getBoundingClientRect();var n=xJ.clientLeft+m.left;var o=xJ.clientTop+m.top;var k=xJ.clientWidth;var l=xJ.clientHeight;if(k==0||l==0)return;var g=zJ;var h=AK;var i=0;var j=0;switch (MK){case BC.XE:g=zJ;h=AK;break;case BC.dE:if(k*AK>l*zJ){h=(zJ*l)~/k;}else{g=(AK*k)~/l;}break;case BC.mE:g=k;h=l;break;case BC.dD:if(k*AK>l*zJ){g=(AK*k)~/l;}else{h=(zJ*l)~/k;}break;}switch (NK){case TB.sE:i=(zJ-g+1)~/2;j=(AK-h);break;case TB.wE:i=0;j=(AK-h);break;case TB.AF:i=(zJ-g);j=(AK-h);break;case TB.bE:i=0;j=(AK-h+1)~/2;break;case TB.hE:i=(zJ-g);j=(AK-h+1)~/2;break;case TB.EF:i=(zJ-g+1)~/2;j=0;break;case TB.GF:i=0;j=0;break;case TB.JF:i=(zJ-g+1);j=0;break;case TB.mD:i=(zJ-g+1)~/2;j=(AK-h+1)~/2;break;}HK.HC(1.0,0.0,0.0,1.0,0-i,0-j);GK.HC(g/k,0.0,0.0,h/l,i-n,j-o);if(BK!=g||CK!=h){fK(g,h);}if(sB!=1.0){HK.scale(sB,sB);}if(DK!=k||FK!=l){DK=k;FK=l;dispatchEvent(new w(w.zE));}}fK( h, g){if(sB==1.0){xJ.width=BK=h;xJ.height=CK=g;}else{BK=h;CK=g;xJ.width=(BK*sB).round();xJ.height=(CK*sB).round();xJ.style.width="${BK}px";xJ.style.height="${CK}px";}}CF( g){xJ.style.cursor=CC.rD(OK);}nK( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var p=j.button;var h=null;var i=GK.uJ(j.client);var m=null;if(p<0||p>2)return;if(j.type=="mousemove"&&PK.yD(i))return;var g=RK[p];PK=i;if(CC.XD!=null)CC.XD.yK();if(j.type!="mouseout")h=vB(i.x,i.y) as AB;var l=OB.kC;if(h is fC&&(h as fC).SG){l=OB.mC;}if(h is GD&&(h as GD).SG){l=OB.mC;}if(OK!=l){OK=l;xJ.style.cursor=CC.rD(l);}if(QK!=null&&QK!=h){QK.dispatchEvent(TK..EJ(t.iD,true)..qJ=(QK.ZC!=null)?QK.mB(i):new EB.pG()..sJ=i..jJ=g.hB);QK=null;}if(h!=null&&h!=QK){h.dispatchEvent(TK..EJ(t.BF,true)..qJ=h.mB(i)..sJ=i..jJ=g.hB);QK=h;}var k=null;var o=false;var s=false;if(j.type=="mousedown"){k=g.GE;if(h!=g.target||n>g.uC+500)g.FC=0;g.hB=true;g.target=h;g.uC=n;g.FC++ ;}if(j.type=="mouseup"){k=g.HE;g.hB=false;o=(g.target==h);s=o&&g.FC.isEven&&(n<g.uC+500);}if(j.type=="mousemove"){k=t.hD;}if(k!=null&&h!=null){m=h.mB(i);h.dispatchEvent(TK..EJ(k,true)..qJ=m..sJ=i..jJ=g.hB..mJ=g.FC);if(o){if(s&&h.rF){h.dispatchEvent(TK..EJ(g.FE,true)..qJ=m..sJ=i..jJ=g.hB);}else{h.dispatchEvent(TK..EJ(g.EE,true)..qJ=m..sJ=i..jJ=g.hB);}}}}oK( h){var g=GK.uJ(h.client);var i=vB(g.x,g.y) as AB;if(i!=null){i.dispatchEvent(TK..EJ(t.jD,true)..qJ=i.mB(g)..sJ=g..nJ=h.deltaX..oJ=h.deltaY);if(TK.aC)h.preventDefault();}}var zK=[] ;pK( h){zK.forEach((g)=>g.cancel());if(bD.TF==LD.kE){zK=[xJ.onTouchStart.listen(AL),xJ.onTouchEnd.listen(AL),xJ.onTouchMove.listen(AL),xJ.onTouchEnter.listen(AL),xJ.onTouchLeave.listen(AL),xJ.onTouchCancel.listen(AL)];}}AL( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=GK.uJ(m.client);var h=vB(i.x,i.y) as AB;var g=SK.containsKey(l)?SK[l]:new UF(h,SK.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(WK..EJ(CB.yE,true)..qJ=(g.target.ZC!=null)?g.target.mB(i):new EB.pG()..sJ=i..NJ=g.bC..OJ=g.XC);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(WK..EJ(CB.uE,true)..qJ=h.mB(i)..sJ=i..NJ=g.bC..OJ=g.XC);g.target=h;}var k=null;if(j.type=="touchstart"){SK[l]=g;k=CB.SD;}if(j.type=="touchend"){SK.remove(l);k=CB.WD;}if(j.type=="touchcancel"){SK.remove(l);k=CB.ZD;}if(j.type=="touchmove"){k=CB.gD;}if(k!=null&&h!=null){h.dispatchEvent(WK..EJ(k,true)..qJ=h.mB(i)..sJ=i..NJ=g.bC..OJ=g.XC);}}}qK( g){g.preventDefault();var h=null;if(g.type=="keyup")h=QB.VD;if(g.type=="keydown")h=QB.jC;UK..EJ(h,true)..eI=g.altKey..fI=g.ctrlKey..iI=g.shiftKey..rI=g.charCode..uI=g.keyCode..xI=qB.WE;if(g.keyLocation==yB.KeyLocation.LEFT)UK.xI=qB.bE;if(g.keyLocation==yB.KeyLocation.RIGHT)UK.xI=qB.hE;if(g.keyLocation==yB.KeyLocation.NUMPAD)UK.xI=qB.lE;if(g.keyLocation==yB.KeyLocation.JOYSTICK)UK.xI=qB.cD;if(g.keyLocation==yB.KeyLocation.MOBILE)UK.xI=qB.cD;if(IK!=null)IK.dispatchEvent(UK);}rK( g){var i=(g.charCode!=0)?g.charCode:g.keyCode;var h=new OD(OD.eE,true);h.dI=new String.fromCharCodes([i]);if(IK!=null)IK.dispatchEvent(h);}} tD( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);} uD( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";}class gG extends q implements PB{final  VK;final  XK;final  YK=new List<bF>();var ZK=0.0;var aK=0.0;var bK=0;var OH=0;gG( g, j):VK=g,XK=g.rJ(j){for(var h in XK.xC){var i=new bF(VK,h);YK.add(i);}OH=XK.yC;aK=OH/VK.CI;} VB( h){ZK+= h;var i=ZK%aK;bK=KC.min((OH*i/aK).toInt(),OH-1);for(var g in YK){g.VB(h);g.ME(bK);}return true;} IB( h){for(var g in YK){if(g.visible){h.LE(g);}}}} YF(){var i=new JB.Completer<bool>();var g=new yB.ImageElement(); h(){i.complete(g.width==2&&g.height==2);}g.onLoad.listen((j)=>h());g.onError.listen((j)=>h());g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return i.future;}class rC implements PB{final  cK;final  dK;final  eK=new List<MB>();var gK;var hK;var iK;var jK;var hH;var XH;var kK;var lK;var mK;rC( g, h,[ transitionFunction]):cK=g,dK=(?transitionFunction)?transitionFunction:pC.nD{jK=new ND(this);XH=0.0;hH=KC.max(0.0001,h);kK=0.0;lK=false;mK=false;} get RC=>jK; vH( g){if(cK!=null&&mK==false){eK.add(g);}} VB( m){if(XH<hH||mK==false){XH=XH+m;if(XH>hH){XH=hH;}if(XH>=0.0){if(mK==false){mK=true;for(int h=0;h<eK.length;h++ ){var g=eK[h];g.CD=g.lJ(cK);}if(gK!=null){gK();}}var k=XH/hH;var l=dK(k).toDouble();for(int h=0;h<eK.length;h++ ){var g=eK[h];if(g.CG){var i=g.CD.toDouble();var n=g.ED.toDouble();var j=i+l*(n-i);g.wJ(cK,lK?j.round():j);}}if(hK!=null){hK();}if(iK!=null&&XH==hH){iK();}}}return XH<hH;}set wD( g){if(mK==false)XH=XH+kK-g;kK=g;} set onComplete( g()){iK=g;}}class bF extends q implements PB{final  uB;final  wC;final  DD=new Map<String,iB>();var IC;bF( i, h):this.uB=i,this.wC=h{for(var g in h.WB){if(g.nB!=null&&DD.containsKey(g.nB)==false){DD[g.nB]=i.vJ(g.nB);}}ME(0);} VB( g){if(IC is PB){var h=IC as PB;h.VB(g);}} ME( u){var g=wC.zF(u);var o=g.x,p=g.y;var n=g.KB,k=g.LB;var m=g.skewX,l=g.skewY;var DB=g.cB,cC=g.dB;var s=g.alpha;if(g.index!=u&&g.OE){var i=wC.yF(g);if(i!=null){var h=(u-g.index)/g.duration;var j=g.xD;if(j!=0){var BB=0.0;if(j<0){var NB=1-h;BB=1-NB*NB;j=0-j;}else{BB=h*h;}h=j*BB+(1-j)*h;}o=o+(i.x-o)*h;p=p+(i.y-p)*h;n=n+(i.KB-n)*h;k=k+(i.LB-k)*h;m=m+(i.skewX-m)*h;l=l+(i.skewY-l)*h;s=s+(i.alpha-s)*h;}}var FB=n*KC.cos(l);var PE=n*KC.sin(l);var wB=-k*KC.sin(m);var xB=k*KC.cos(m);var UG=o-(DB*FB+cC*wB);var VG=p-(DB*PE+cC*xB);hJ=false;eJ.HC(FB,PE,wB,xB,UG,VG);yI=s;CJ=g.visible;IC=(g.nB!=null)?DD[g.nB]:null;} IB( g){if(IC!=null){IC.IB(g);}}}var dF=YF(); fF( g, m, n, j){m=m.toDouble();n=n.toDouble();var NB=0.0;var FB=0.0;var s=m*g.a;var DB=m*g.b;var u=m*g.a+n*g.c;var p=m*g.b+n*g.d;var BB=n*g.c;var o=n*g.d;var h=NB;if(h>s)h=s;if(h>u)h=u;if(h>BB)h=BB;var i=FB;if(i>DB)i=DB;if(i>p)i=p;if(i>o)i=o;var l=NB;if(l<s)l=s;if(l<u)l=u;if(l<BB)l=BB;var k=FB;if(k<DB)k=DB;if(k<p)k=p;if(k<o)k=o;if(j==null)j=new GB.pG();j.x=g.XB+h;j.y=g.YB+i;j.width=l-h;j.height=k-i;return j;}class sC{final  id;final  uB;final  xC=new List<tC>();sC( g, j):uB=j,id=g["id"]{for(var h in g["layers"]){var i=new tC(h);this.xC.add(i);}} get yC{var g=0;for(var h in xC)g=KC.max(g,h.yC);return g;}}class tC{final  name;final  uF;final  WB=new List<QC>();tC( g):this.name=g["name"],this.uF=g.containsKey("flipbook")?g["flipbook"]:false{for(var i in g["keyframes"]){var h=new QC(i);this.WB.add(h);}} get yC{var g=WB[WB.length-1];return g.index+g.duration;} zF( h){var g=1;while (g<WB.length&&WB[g].index<=h)g++ ;return WB[g-1];} yF( h){for(int g=0;g<WB.length-1;g++ )if(identical(WB[g],h))return WB[g+1];return null;}}class QC{var index;var duration;var nB;var label;var x,y;var KB,LB;var skewX,skewY;var cB,dB;var visible;var alpha;var OE;var xD;QC( g){this.index=g["index"];this.duration=g["duration"];this.nB=g.containsKey("ref")?g["ref"]:null;this.label=g.containsKey("label")?g["label"]:null;this.x=g.containsKey("loc")?g["loc"][0]:0.0;this.y=g.containsKey("loc")?g["loc"][1]:0.0;this.KB=g.containsKey("scale")?g["scale"][0]:1.0;this.LB=g.containsKey("scale")?g["scale"][1]:1.0;this.skewX=g.containsKey("skew")?g["skew"][0]:0.0;this.skewY=g.containsKey("skew")?g["skew"][1]:0.0;this.cB=g.containsKey("pivot")?g["pivot"][0]:0.0;this.dB=g.containsKey("pivot")?g["pivot"][1]:0.0;this.visible=g.containsKey("visible")?g["visible"]:true;this.alpha=g.containsKey("alpha")?g["alpha"]:1.0;this.OE=g.containsKey("tweened")?g["tweened"]:true;this.xD=g.containsKey("ease")?g["ease"]:0.0;}}class iF{var uB;var WC;var TC;iF( p,this.uB){this.WC=new Map<String,jF>();this.TC=new JB.Completer();var k=0;for(var j in p["atlases"] as List){var n=j["file"] as String;var s=uD(uB.YH,n);k++ ;var g=new yB.ImageElement();g.onLoad.listen((o){if( --k==0)this.TC.complete(this);});g.onError.listen((o){this.TC.completeError(new StateError("Failed to load image."));});g.src=s;for(var i in j["textures"] as List){var m=i["symbol"] as String;var h=i["rect"] as List;var l=i["origin"] as List;var u=new jF(h[0],h[1],h[2],h[3],l[0],l[1],g);this.WC[m]=u;}}}}class jF implements iB{var x,y,width,height;var GG,HG;var CE;var wK;var xK;jF(this.x,this.y,this.width,this.height,this.GG,this.HG,this.CE); IB( g){g.context.drawImageScaledFromSource(CE,x,y,width,height,0,0,width,height);}}//@ sourceMappingURL=stagexl_runtimes.dart.map
