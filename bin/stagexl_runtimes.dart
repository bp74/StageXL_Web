import "dart:html" as pB;import "dart:json" as TD;import "dart:async" as IB;import "dart:math" as kB;class MH{static const  NH="Chrome";static const  OH="Firefox";static const  PH="Internet Explorer";static const  QH="Safari";final  ZG;final  minimumVersion;const MH(this.ZG,[this.minimumVersion]);}class RH{final  name;const RH(this.name);}class SH extends YB{var HD;var background;var bB;var iH;var backgroundColor=0;var cC='{"maxParticles":200, "duration":0, "lifeSpan":0.9, "lifespanVariance":0.4, "startSize":10, "startSizeVariance":20, "finishSize":70, "finishSizeVariance":0, "shape":"circle", "emitterType":0, "location":{"x":0, "y":0}, "locationVariance":{"x":0, "y":0}, "speed":100, "speedVariance":10, "angle":0, "angleVariance":360, "gravity":{"x":0, "y":100}, "radialAcceleration":20, "radialAccelerationVariance":0, "tangentialAcceleration":10, "tangentialAccelerationVariance":0, "minRadius":0, "maxRadius":100, "maxRadiusVariance":0, "rotatePerSecond":0, "rotatePerSecondVariance":0, "compositeOperation":"source-over", "startColor":{"red":1, "green":0.75, "blue":0, "alpha":1}, "finishColor":{"red":1, "green":0, "blue":0, "alpha":0}}';SH(){HD=new EB(380,600,true,backgroundColor);background=new nC(HD);TB(background);bB=new UC(cC);bB.x=190;bB.y=300;bB.start();TB(bB);eB.add(bB);this.tG.listen((l){var j=pB.query("#particleEmitterJson") as pB.InputElement;var k=pB.query("#particleEmitterBackground") as pB.InputElement;var i=j.value;var h=int.parse(k.value)|0xFF000000;if(i!=cC){cC=i;bB.sE(cC);}if(h!=backgroundColor){backgroundColor=h;HD.fillRect(new DB(0,0,380,600),backgroundColor);}if(bB.yG==0){bB.start();}});var g=new YD(380,600);g.onMouseMove.listen(uH);g.onMouseDown.listen(uH);TB(g);}uH( g){if(g.gB){bB.GH(g.fE-190,g.gE-300);}}}class UH extends YB{var rH;UH(){rH=CC.nG('levelUp');sH();EB.AD('images/LevelupTextureAtlas.png').then((h){var g=new nC(h);g.x=70;g.y=40;TB(g);});}sH(){var l=330;for(int j=0;j<7;j++ ){var h=rH.cE('LevelUp${j}');var g=new nC(h);g.hB=h.width/2;g.iB=h.height/2;g.x=l+h.width/2;g.y=150;g.MB=0.0;g.NB=0.0;TB(g);var k=new zC(g,2.0,wC.QG);k.WC.MB.MC(1.0);k.WC.NB.MC(1.0);k.XE=j*0.05;var i=new zC(g,0.4,wC.IE);i.WC.MB.MC(0.0);i.WC.NB.MC(0.0);i.XE=2.0;i.onComplete=()=>g.nE();eB.add(k);eB.add(i);l=l+5+h.width;}eB.dG(()=>sH(),3.0);}}class TH extends YB{TH(){var k=CC.kG('flump');var i=new XH(k,'idle');i.x=500;i.y=200;TB(i);var j=new XH(k,'walk');j.x=150;j.y=460;TB(j);var g=new XH(k,'attack');g.x=450;g.y=460;TB(g);var h=new XH(k,'defeat');h.x=720;h.y=460;TB(h);eB.add(i);eB.add(j);eB.add(g);eB.add(h);EB.AD('images/flumpLibraryAtlas0.png').then((m){var l=new nC(m);l.x=40;l.y=40;TB(l);});}}var BC;var iC;var eB;var CC; jC(){EB.HE.webp=true;var g=pB.query("#stage");if(g!=null){BC=new mB('stage',g);iC=new mC();iC.WG(BC);eB=iC.MD;CC=new oC();}} xE(){jC();CC..VG('flump','images/flumpLibrary.json')..load().then((tH)=>BC.TB(new TH()));} yE(){jC();CC..XG('levelUp','images/LevelupTextureAtlas.json',lC.iD)..load().then((tH)=>BC.TB(new UH()));} zE(){jC();BC.TB(new SH());} main(){var j=pB.window.location.pathname;var i=new RegExp(r"([A-Za-z0-9-_]+)\.html",multiLine:false,caseSensitive:false);var g=i.firstMatch(j);if(g!=null&&g.groupCount==1){var h=g.group(1);print("current page: ${h}");switch (h){case 'flump':xE();break;case 'texture_packer':yE();break;case 'particle_emitter':zE();break;}}}const VH=const WH();class WH{const WH();}class qC extends YB{}class mC{var xH;var LI;var SI;var aI;var GJ;var OJ;var YJ;var gJ;mC(){xH=new GC();LI=new List<mB>();SI=-1;GJ=false;OJ=new QC(0);YJ=new zD();gJ=new EE();aI=MK;NK();} get MD=>xH;NK(){pB.window.requestAnimationFrame(aI);}MK( g){NK();g=g.toDouble();if(SI==-1)SI=g;if(SI>g)SI=g;var j=g-SI;var i=j/1000.0;var k=g/1000.0;var l=false;if(j>=1){SI=g;OJ.AJ=i;KE.dispatchEvent(OJ);xH.WB(i);for(int h=0;h<LI.length;h++ ){LI[h].MD.WB(i);}if(GJ){GJ=false;PE.dispatchEvent(gJ);}for(int h=0;h<LI.length;h++ ){LI[h].qG(k,i);}ME.dispatchEvent(YJ);}} WG( g){if(g.OD!=null){g.OD.DH(g);}LI.add(g);g.eL=this;} DH( g){if(g.OD==this){LI.remove(g);g.eL=null;}}}class NC extends w{NC( g):super(g,false); get XC=>false;}class OB{static const  sC="auto";static const  tC="arrow";static const  uC="button";static const  YF="hand";static const  sD="ibeam";static const  aF="wait";}class u extends w{static const  gD="click";static const  RF="doubleClick";static const  mD="mouseDown";static const  rD="mouseUp";static const  vD="mouseMove";static const  yD="mouseOut";static const  iF="mouseOver";static const  BE="mouseWheel";static const  GE="middleClick";static const  nF="middleMouseDown";static const  rF="middleMouseUp";static const  JE="rightClick";static const  wF="rightMouseDown";static const  xF="rightMouseUp";var VK,WK;var YK,ZK;var nK;var UJ;var qJ;var bJ;var fJ;var uK;var wK;var yK;u( g,[ h=false]):super(g,h){eK(g,h);} eK( g,[ h=false]){super.eK(g,h);VK=WK=0;YK=ZK=0;nK=false;UJ=false;qJ=false;bJ=false;fJ=false;uK=0;wK=0;yK=0;}set HL( g){VK=g.x;WK=g.y;}set JL( g){YK=g.x;ZK=g.y;} get fE=>VK; get gE=>WK; get gB=>nK; get altKey=>UJ; get ctrlKey=>bJ; get shiftKey=>fJ; get IC=>uK; get deltaX=>wK; get deltaY=>yK;}class lB extends w{static const  hD="keyDown";static const  jD="keyUp";var UJ=false;var bJ=false;var fJ=false;var lJ=false;var qJ=false;var uJ=0;var wJ=0;var BK=0;lB( g,[ h=false]):super(g,h); get altKey=>UJ; get ctrlKey=>bJ; get shiftKey=>fJ; get charCode=>uJ; get keyCode=>wJ; get keyLocation=>BK;}class EF extends w{static const  PF="textInput";var TJ="";EF( g,[ h=false]):super(g,h);}class GB extends w{static const  fD="touchBegin";static const  kD="touchEnd";static const  nD="touchCancel";static const  tD="touchMove";static const  cF="touchOver";static const  hF="touchOut";var RK;var TK;var VK,WK;var YK,ZK;var UJ;var qJ;var bJ;var fJ;var bK;var cK;var dK;GB( g,[ h=false]):super(g,h){eK(g,h);} eK( g,[ h=false]){super.eK(g,h);RK=0;TK=false;VK=WK=0;YK=ZK=0;UJ=false;qJ=false;bJ=false;fJ=false;bK=1.00;cK=0;dK=0;}set HL( g){VK=g.x;WK=g.y;}set JL( g){YK=g.x;ZK=g.y;} get hC=>RK; get fE=>VK; get gE=>WK; get altKey=>UJ; get ctrlKey=>bJ; get shiftKey=>fJ;}abstract class AF{}abstract class s extends fB implements qB{static var QF=0;var kI=QF++ ;var vH=0.0;var zH=0.0;var yI=0.0;var IJ=0.0;var MJ=1.0;var VJ=1.0;var aJ=0.0;var eJ=0.0;var jJ=0.0;var nJ=1.0;var pJ=true;var rJ=false;var vJ=null;var xJ=null;var DK=null;var HK=false;var JK=null;var KK=null;var LK=null;var MI="";var OK=null;final  QK=new AB.mH();final  SK=new AB.mH();var XK=true;static const  CG=const VB<QC>(w.vC); get tG=>s.CG.forTarget(this); get x=>vH; get y=>zH; get hB=>yI; get iB=>IJ; get MB=>MJ; get NB=>VJ; get skewX=>aJ; get skewY=>eJ; get JC=>jJ; get visible=>pJ; get alpha=>nJ; get aG=>xJ!=null; get ZC=>LK; get name=>MI; get parent=>OK; get root{var g=this;while (g.OK!=null)g=g.OK;return g;} get fC{var g=this.root;return (g is mB)?g:null;}set x( g){if(g is num)vH=g;XK=true;}set y( g){if(g is num)zH=g;XK=true;}set hB( g){if(g is num)yI=g;XK=true;}set iB( g){if(g is num)IJ=g;XK=true;}set MB( g){if(g is num)MJ=g;XK=true;}set NB( g){if(g is num)VJ=g;XK=true;}set skewX( g){if(g is num)aJ=g;XK=true;}set skewY( g){if(g is num)eJ=g;XK=true;}set JC( g){if(g is num)jJ=g;XK=true;}set visible( g){if(g is bool)pJ=g;}set alpha( g){if(g is num)nJ=g;}set ZC( g){LK=g;} setTransform( k, l,[ n, g, h, o, j, i, m]){if(k is num)vH=k;if(l is num)zH=l;if(n is num)MJ=n;if(g is num)VJ=g;if(h is num)jJ=h;if(o is num)aJ=o;if(j is num)eJ=j;if(i is num)yI=i;if(m is num)IJ=m;XK=true;} get width=>oB(vL).width; get height=>oB(vL).height; set width( h){this.MB=1;var g=this.width;this.MB=(g!=0.0)?h/g:1.0;} set height( h){this.NB=1;var g=this.height;this.NB=(g!=0.0)?h/g:1.0;} nE(){if(OK!=null)OK.BH(this);} get tM=>pJ&&!rJ; get vL{if(XK){XK=false;var j=aJ+jJ;var i=eJ+jJ;if(j==0.0&&i==0.0){SK.KC(MJ,0.0,0.0,VJ,vH-yI*MJ,zH-IJ*VJ);}else{var g,l,k,h;var m=kB.cos(j);var n=kB.sin(j);if(j==i){g=MJ*m;l=MJ*n;k=-VJ*n;h=VJ*m;}else{g=MJ*kB.cos(i);l=MJ*kB.sin(i);k=-VJ*n;h=VJ*m;}var q=vH-(yI*g+IJ*k);var o=zH-(yI*l+IJ*h);SK.KC(g,l,k,h,q,o);}}return SK;} qE( h){if(h==OK)return vL.clone();if(h.OK==this)return h.vL.cG();var j=new AB.mH();var g=this;while (g!=h&&g.OK!=null){j.concat(g.vL);g=g.OK;}if(h==null&&g!=null){j.concat(g.vL);g=null;}if(g==h)return j;var k=new AB.mH();var i=h;while (i!=this&&i.OK!=null){k.concat(i.vL);i=i.OK;}k.eE();if(i==this)return k;if(i!=g)return null;j.concat(k);return j;} oB( h,[ g]){if(g==null)g=new DB.kH();g.x=h.cB;g.y=h.dB;g.width=0;g.height=0;return g;} tB( g, h){if(oB(BD).contains(g,h))return this;return null;} sB( h){QK.oG();for(s g=this;g!=null;g=g.OK)QK.concat(g.vL);QK.eE();return QK.IH(h);} bM( g){g.context.translate(DK.x,DK.y);xJ.JB(g);} dispatchEvent( h){var g=null;if(h.XC||h.bubbles){for(s j=OK;j!=null;j=j.OK){if(j.oK(h.type,h.XC,h.bubbles)){if(g==null)g=TC.lE() as List<s>;g.add(j);}}}if(h.XC&&g!=null){for(int i=g.length-1;i>=0&&h.gC==false;i-- ){g[i].PK(h,this,g[i],rB.dD);}}if(h.gC==false){PK(h,this,this,rB.OC);}if(h.bubbles&&g!=null){for(int i=0;i<g.length&&h.gC==false;i++ ){g[i].PK(h,this,g[i],rB.UF);}}if(g!=null){g.clear();TC.mE(g);}} KL( h){for(var g=h;g!=null;g=g.OK)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");OK=h;} JB( g);}abstract class CB extends s{var eG=false;var rG=true;var jH=true;var tabIndex=0;static const  bF=const VB<u>(u.yD);static const  oF=const VB<u>(u.vD);static const  tF=const VB<u>(u.mD);static const  yF=const VB<u>(u.rD);static const  DG=const VB<u>(u.BE); get onMouseOut=>CB.bF.forTarget(this); get onMouseMove=>CB.oF.forTarget(this); get onMouseDown=>CB.tF.forTarget(this); get onMouseUp=>CB.yF.forTarget(this); get onMouseWheel=>CB.DG.forTarget(this);static const  FG=const VB<GB>(GB.tD);static const  GG=const VB<GB>(GB.kD);static const  IG=const VB<GB>(GB.nD); get onTouchMove=>CB.FG.forTarget(this); get onTouchEnd=>CB.GG.forTarget(this); get onTouchCancel=>CB.IG.forTarget(this);static const  LG=const VB<lB>(lB.jD);static const  MG=const VB<lB>(lB.hD); get onKeyUp=>CB.LG.forTarget(this); get onKeyDown=>CB.MG.forTarget(this);}abstract class YB extends CB{final  cI=new List<s>();var qI=true;var zI=true; TB( g){if(g.parent==this){var h=cI.indexOf(g);cI.removeAt(h);cI.add(g);}else{UG(g,cI.length);}} UG( g, h){if(h<0||h>cI.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){cI.removeAt(cI.indexOf(g));if(h>cI.length)h-- ;cI.insert(h,g);}else{g.nE();g.KL(this);cI.insert(h,g);g.dispatchEvent(new w(w.KF,true));if(this.fC!=null)XL(g,new w(w.SF));}} BH( h){var g=cI.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");CH(g);} CH( g){if(g<0||g>=cI.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=cI[g];h.dispatchEvent(new w(w.dF,true));if(this.fC!=null)XL(h,new w(w.gF));h.KL(null);cI.removeAt(g);} contains( g){for(;g!=null;g=g.OK)if(g==this)return true;return false;} oB( o,[ g]){if(g==null)g=new DB.kH();if(cI.length==0)return super.oB(o,g);var i=double.INFINITY;var j=double.INFINITY;var l=double.NEGATIVE_INFINITY;var k=double.NEGATIVE_INFINITY;var q=cI.length;for(int m=0;m<cI.length;m++ ){var n=cI[m];QK.WE(n.vL,o);var h=n.oB(QK,g);if(h.left<i)i=h.left;if(h.top<j)j=h.top;if(h.right>l)l=h.right;if(h.bottom>k)k=h.bottom;}g.x=i;g.y=j;g.width=l-i;g.height=k-j;return g;} tB( i, k){i=i.toDouble();k=k.toDouble();var n=null;for(int l=cI.length-1;l>=0;l-- ){var j=cI[l];if(j.tM){var g=j.vL;var o=i-g.cB;var m=k-g.dB;var t=(g.d*o-g.c*m)/g.zB;var q=(g.a*m-g.b*o)/g.zB;var h=j.tB(t,q);if(h!=null){if(h is CB)if(h.rG)return qI?h:this;n=this;}}}return n;} JB( i){for(int g=0;g<cI.length;g++ ){var h=cI[g];if(h.tM)i.oE(h);}}xM( g, i){i.add(g);if(g is YB){var k=g as YB;var j=k.cI;for(int h=0;h<j.length;h++ ){xM(j[h],i);}}}XL( i, j){var g=TC.lE() as List<s>;xM(i,g);for(int h=0;h<g.length;h++ ){g[h].dispatchEvent(j);}g.clear();TC.mE(g);}}class DC{static const  IF="exactFit";static const  OF="noBorder";static const  XF="noScale";static const  qD="showAll";}class EC{static var cD=OB.sC;static var MF=false;static var lD=null;static var eF=new IB.StreamController<String>();static var jF=eF.stream.asBroadcastStream();static  QE( i){var h=i;var g="auto";if(cD!=OB.sC){h=cD;}switch (h){case OB.sC:g="auto";break;case OB.tC:g="default";break;case OB.uC:g="pointer";break;case OB.YF:g="move";break;case OB.sD:g="text";break;case OB.aF:g="wait";break;}if(MF){g="none";}return g;}}class ZD implements PB{final  NI;var VI=0.0;var gI=0.0;var lI=1;ZD( g, h):NI=g{gI=kB.max(h,0.0001);} WB( h){var g=VI+h;while (g>=gI&&lI>0){VI=gI;lI-- ;NI();g-= gI;}VI=g;return (lI>0);}}class wB{static const  HF=0;static const  LF=1;static const  CE=2;static const  WF=3;static const  pD=4;}class nC extends s{var II;var TI;var hI;nC([ h=null, g="auto"]){this.YG=h;this.AH=g;hI=null;}set YG( g){if(g==null)II=null;if(g is EB)II=g;}set AH( g){if(g is String)TI=g;} oB( k,[ j]){var g=II;var h=0,i=0;if(g!=null){h=g.width;i=g.height;}return UE(k,h,i,j);} tB( h, i){var g=II;if(g==null)return null;if(h<0.0||i<0)return null;if(h>=g.width||i>=g.height)return null;return this;} JB( h){var g=II;if(g==null)return;if(hI==null){g.JB(h);}else{g.EH(h,hI);}}}class VB<FC extends w>{final  RI;const VB(this.RI); forTarget( g,{ useCapture: false}){return g.PJ(RI,useCapture);}}class aD{var png;var jpg;var webp;var autoHiDpi;aD({this.png: true,this.jpg: true,this.webp: false,this.autoHiDpi: true});}abstract class qB{ JB( g);}class bD extends CB{}class VD{final  SD;VD(this.SD);call( h, g){tI(h).MC(g);} get x=>tI("x"); get y=>tI("y"); get MB=>tI("scaleX"); get NB=>tI("scaleY"); get skewX=>tI("skewX"); get skewY=>tI("skewY"); get hB=>tI("pivotX"); get iB=>tI("pivotY"); get JC=>tI("rotation"); get alpha=>tI("alpha"); tI( h){var g=new SB(h);this.SD.tI(g);return g;}}class HB{var vH;var zH;HB( h, g):vH=h,zH=g;HB.kH():this(0,0); clone()=>new HB(vH,zH); toString()=>"Point [x=${vH}, y=${zH}]"; get x=>vH; get y=>zH; get length=>kB.sqrt(vH*vH+zH*zH);set x( g){vH=g;}set y( g){zH=g;} add( g){return new HB(vH+g.x,zH+g.y);}aC( g){vH=g.x;zH=g.y;} ZE( g){return vH==g.x&&zH==g.y;}}abstract class CF{}class DB{var vH;var zH;var FI;var OI;DB( i, g, h, j):vH=i,zH=g,FI=h,OI=j;DB.kH():this(0,0,0,0); clone()=>new DB(vH,zH,FI,OI); toString()=>"Rectangle [x=${vH}, y=${zH}, width=${FI}, height=${OI}]"; get x=>vH; get y=>zH; get width=>FI; get height=>OI; get left=>vH; get top=>zH; get right=>vH+FI; get bottom=>zH+OI;set x( g){vH=g;}set y( g){zH=g;}set width( g){FI=g;}set height( g){OI=g;} contains( g, h){return vH<=g&&zH<=h&&vH+FI>=g&&zH+OI>=h;} ZE( g){return vH==g.x&&zH==g.y&&FI==g.width&&OI==g.height;} get isEmpty{return FI==0&&OI==0;}aC( g){vH=g.x;zH=g.y;FI=g.width;OI=g.height;}}class AB{var wH,yH,AI,BI,EI,HI;var QI;AB( h, i, g, j, k, l):wH=h.toDouble(),yH=i.toDouble(),AI=g.toDouble(),BI=j.toDouble(),EI=k.toDouble(),HI=l.toDouble(),QI=(h*j-i*g).toDouble();AB.mH():wH=1.0,yH=0.0,AI=0.0,BI=1.0,EI=0.0,HI=0.0,QI=1.0; clone(){return new AB(wH,yH,AI,BI,EI,HI);} cG(){var h=(BI/QI);var i=-(yH/QI);var g=-(AI/QI);var j=(wH/QI);var k=-(h*EI+g*HI);var l=-(i*EI+j*HI);return new AB(h,i,g,j,k,l);} get a=>wH; get b=>yH; get c=>AI; get d=>BI; get cB=>EI; get dB=>HI; get zB=>QI; IH( h){var i=h.x.toDouble();var g=h.y.toDouble();return new HB(i*wH+g*AI+EI,i*yH+g*BI+HI);} PL( h){var i=h.x.toDouble();var g=h.y.toDouble();return new HB(i*wH+g*AI+EI,i*yH+g*BI+HI);} concat( g){var m=wH;var q=yH;var t=AI;var o=BI;var l=EI;var n=HI;var FB=QI;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var KB=g.cB;var BB=g.dB;var UB=g.zB;wH=(m*j+q*i).toDouble();yH=(m*k+q*h).toDouble();AI=(t*j+o*i).toDouble();BI=(t*k+o*h).toDouble();EI=(l*j+n*i+KB).toDouble();HI=(l*k+n*h+BB).toDouble();QI=(FB*UB).toDouble();} oG(){wH=1.0;yH=0.0;AI=0.0;BI=1.0;EI=0.0;HI=0.0;QI=1.0;} eE(){var j=wH;var m=yH;var l=AI;var k=BI;var h=EI;var i=HI;var g=QI;wH=(k/g).toDouble();yH=-(m/g).toDouble();AI=-(l/g).toDouble();BI=(j/g).toDouble();EI=-(wH*h+AI*i).toDouble();HI=-(yH*h+BI*i).toDouble();QI=(1.0/g).toDouble();} scale( h, g){wH=(wH*h).toDouble();yH=(yH*g).toDouble();AI=(AI*h).toDouble();BI=(BI*g).toDouble();EI=(EI*h).toDouble();HI=(HI*g).toDouble();QI=(QI*h*g).toDouble();} translate( g, h){EI=(EI+g).toDouble();HI=(HI+h).toDouble();} KC( h, i, g, k, j, l){wH=h.toDouble();yH=i.toDouble();AI=g.toDouble();BI=k.toDouble();EI=j.toDouble();HI=l.toDouble();QI=(wH*BI-yH*AI).toDouble();} aC( g){wH=g.a.toDouble();yH=g.b.toDouble();AI=g.c.toDouble();BI=g.d.toDouble();EI=g.cB.toDouble();HI=g.dB.toDouble();QI=g.zB.toDouble();} WE( h, g){var n=h.a;var t=h.b;var BB=h.c;var q=h.d;var m=h.cB;var o=h.dB;var KB=h.zB;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var UB=g.cB;var FB=g.dB;var jB=g.zB;wH=(n*k+t*j).toDouble();yH=(n*l+t*i).toDouble();AI=(BB*k+q*j).toDouble();BI=(BB*l+q*i).toDouble();EI=(m*k+o*j+UB).toDouble();HI=(m*l+o*i+FB).toDouble();QI=(KB*jB).toDouble();}}abstract class PB{ WB( g);}class yB{final  matrix=new AB.mH();var alpha=1.0;var ZC=PC.RC;var BJ; get sG{if(BJ==null)BJ=new yB();return BJ;}}class YD extends CB{var width;var height;YD(this.width,this.height); oB( h,[ g]){return UE(h,width,height,g);} tB( g, h){if(g>=0.0&&h>=0.0&&g<width&&h<height)return this;return null;} JB( g){}}class w{static const  KF="added";static const  SF="addedToStage";static const  vC="enterFrame";static const  uD="exitFrame";static const  dF="removed";static const  gF="removedFromStage";static const  kF="resize";static const  DE="render";static const  OE="progress";var gK;var hK;var iK;var XI;var kK;var mK;var pK;w( g,[ h=false]){eK(g,h);} eK( g,[ h=false]){gK=g;hK=h;iK=rB.OC;XI=null;kK=null;mK=false;pK=false;} get gC=>mK; get type=>gK; get bubbles=>hK; get XC=>true; get target=>XI;}class rB{static const  dD=1;static const  OC=2;static const  UF=3;}class oC extends fB{final  bI=new Map<String,kC>();static const  ZF=const VB<w>(w.OE); get onProgress=>oC.ZF.forTarget(this);zJ( i, g, k, l){var j="${i}.${g}";if(bI.containsKey(j)){throw new StateError("ResourceManager already contains a resource called '${g}'");}var h=new kC(i,g,k,l);h.complete.then((UK){this.dispatchEvent(new w(w.OE));});bI[j]=h;} aK( i, g){var h="${i}.${g}";if(bI.containsKey(h)==false){throw new StateError("ResourceManager does not contains a resource called '${g}'");}return bI[h];} load(){var i=this.zG.map((h)=>h.complete);return IB.Future.wait(i).then((j){var g=this.gG.length;if(g>0){throw new StateError("Failed to load ${g} resource(s).");}else{return this;}});} get zG{return bI.values.where((g)=>g.eC==null&&g.error==null).toList();} get gG{return bI.values.where((g)=>g.error!=null).toList();} XG( i, g, h){zJ("TextureAtlas",i,g,ZB.AD(g,h));} VG( h, g){zJ("FlumpLibrary",h,g,XB.AD(g));} cE( h){var g=aK("BitmapData",h).eC;if(g is !EB)throw "dart2js_hint";return g;} nG( h){var g=aK("TextureAtlas",h).eC;if(g is !ZB)throw "dart2js_hint";return g;} kG( h){var g=aK("FlumpLibrary",h).eC;if(g is !XB)throw "dart2js_hint";return g;}}class WD{static const  xC="none";static const  VF="touchPoint";}class DF{}class fB{var JI;var dI;dispatchEvent( g){PK(g,this,this,rB.OC);} oK( h, j, i){if(j&&dI!=null){var g=dI[h];if(g!=null&&g.CK)return true;}if(i&&JI!=null){var g=JI[h];if(g!=null&&g.CK)return true;}return false;} PJ( h, g){if(g){if(dI==null)dI=new Map<String,xB>();}else{if(JI==null)JI=new Map<String,xB>();}var i=g?dI:JI;return i.putIfAbsent(h,(){return new xB(this,h,g);});}PK( g, k, l, j){var h=(j==rB.dD)?dI:JI;if(h==null)return;var i=h[g.type];if(i==null)return;g.XI=k;g.kK=l;g.iK=j;g.mK=false;g.pK=false;i.dispatchEvent(g);}}class lC{static const  JF="json";static const  iD="jsonarray";}class xB<FC extends w> extends IB.Stream<FC>{final  XI;final  RI;final  oI;var EJ=[] ;xB(this.XI,this.RI,this.oI); get isBroadcast=>true; asBroadcastStream()=>this; get CK=>EJ.length>0; listen( i( event),{ onError(error), onDone(), cancelOnError: false}){var h=new eD<FC>(this,i);EJ.add(h);if(oI==false){var g=this;switch (RI){case w.vC:KE.GD(g);break;case w.uD:ME.GD(g);break;case w.DE:PE.GD(g);break;}}return h;}bG( j){if(j.xI)return;var i=[] ;for(var g=0;g<EJ.length;g++ ){var h=EJ[g];if(identical(h,j)){h.xI=true;}else{i.add(h);}}EJ=i;}dispatchEvent( j){var k=EJ;var i=EJ.length;for(var g=0;g<i;g++ ){var h=k[g];if(h.xI==false){h.WJ(j);}}}}class BF{static const  NF="input";}class FF<FC>{final  CI=new List<FC>();final  WI;var fI=0;FF( g()):WI=g; lE(){if(fI==0){return WI();}else{fI-- ;return CI[fI];}}mE( g){if(fI==CI.length){CI.add(g);}else{CI[fI]=g;}fI++ ;}reset(){CI.clear();fI=0;}}class XD{final  GI;final  MI;final  eI;final  mI;final  uI;final  FJ;final  KJ;final  RJ;final  XJ;final  cJ;final  kJ;XD.lH( i, h, g):GI=i,MI=h,eI=sF(g["rotated"]),mI=LB(g["sourceSize"]["w"]),uI=LB(g["sourceSize"]["h"]),FJ=LB(g["spriteSourceSize"]["x"]),KJ=LB(g["spriteSourceSize"]["y"]),RJ=LB(g["frame"]["x"]),XJ=LB(g["frame"]["y"]),cJ=LB(g["frame"]["w"]),kJ=LB(g["frame"]["h"]); get HH=>GI; get name=>MI; get FH=>eI; get iG=>RJ; get jG=>XJ; get bE=>cJ; get aE=>kJ; get offsetX=>FJ; get offsetY=>KJ; get xG=>mI; get wG=>uI;}class pC{var nB;var uB;}class ZB{final  KI=new List<XD>();var II;static  AD( n, KB){var k=new IB.Completer<ZB>();var g=new ZB();switch (KB){case lC.JF:case lC.iD:pB.HttpRequest.getString(n).then((BB){var o=TD.parse(BB);var h=o["frames"];var q=o["meta"];var jB=TE(n,q["image"]);if(h is List){for(var t in h){var j=t as Map;var i=j["filename"] as String;var l=RE(i);var m=new XD.lH(g,l,j);g.KI.add(m);}}if(h is Map){for(String i in h.keys){var j=h[i] as Map;var l=RE(i);var m=new XD.lH(g,l,j);g.KI.add(m);}}EB.AD(jB).then(( UB){g.II=UB;k.complete(g);}).catchError((FB){k.completeError(new StateError("Failed to load image."));});}).catchError((FB){k.completeError(new StateError("Failed to load json file."));});break;}return k.future;} cE( h){for(int g=0;g<KI.length;g++ ){var i=KI[g];if(i.name==h){return new EB.qH(i);}}throw new ArgumentError("TextureAtlasFrame not found: '${h}'");}}class UD extends CB{}class kC{var DI;var MI;var UI;var ZI;var iI;var pI;kC( h, i, j, k){DI=h;MI=i;UI=j;iI=null;ZI=null;pI=new IB.Completer();k.then((g){iI=g;}).catchError((l){ZI=l;}).whenComplete((){pI.complete(this);});} toString()=>"ResourceManagerResource [kind=${DI}, name=${MI}, url = ${UI}]"; get name=>MI; get eC=>iI; get error=>ZI; get complete=>pI.future;}class EB implements qB{var FI;var OI;var YI;var jI;var nI;var vI;var DJ;var JJ;var SJ;var ZJ;var dJ;var hJ;var mJ;var oJ;var sJ;var tJ;static var HE=new aD();EB( i, l,[ j=true, g=0xFFFFFFFF,k=1.0]){FI=LB(i);OI=LB(l);YI=j;jI=k.toDouble();nI=jI/CD;vI=((1.0-nI).abs()<0.001)?0:1;SJ=0;ZJ=0;DJ=FI;JJ=OI;dJ=0;hJ=0;mJ=(FI*nI).ceil();oJ=(OI*nI).ceil();var h=new pB.CanvasElement(width:mJ,height:oJ);sJ=h;tJ=h.context2D;tJ.fillStyle=YI?xD(g):TF(g);tJ.fillRect(0,0,mJ,oJ);}EB.pH( g,[ j=1.0]){var h=LB(g.naturalWidth);var i=LB(g.naturalHeight);YI=true;jI=v(j);nI=jI;FI=(h/jI).round();OI=(i/jI).round();vI=((1.0-nI).abs()<0.001)?0:1;SJ=0;ZJ=0;DJ=FI;JJ=OI;dJ=0;hJ=0;mJ=h;oJ=i;sJ=g;}EB.qH( g){var h=g.HH.II;FI=g.xG.toInt();OI=g.wG.toInt();YI=true;jI=h.jI;nI=h.nI;vI=g.FH?3:2;SJ=g.offsetX;ZJ=g.offsetY;DJ=g.bE;JJ=g.aE;dJ=(g.iG*nI).floor();hJ=(g.jG*nI).floor();mJ=(g.bE*nI).ceil();oJ=(g.aE*nI).ceil();sJ=h.sJ;}static  AD( g,[ i=null, l=1.0]){if(i==null){i=EB.HE;}if(mB.SE&&i.autoHiDpi){if(g.contains("@1x.")&&DD>=1.5){l=l*2.0;g=g.replaceAll("@1x.","@2x.");}}var j=new IB.Completer<EB>();var h=new pB.ImageElement();var k;var m;k=h.onLoad.listen((t){k.cancel();m.cancel();j.complete(new EB.pH(h,l));});m=h.onError.listen((t){k.cancel();m.cancel();j.completeError(new StateError("Error loading image."));});if(i.webp==false){h.src=g;return j.future;}JG.then(( o){var q=new RegExp(r"(png|jpg|jpeg)$",multiLine:false,caseSensitive:true);var n=q.firstMatch(g);if(o==false||n==null){h.src=g;}else{h.src=g.substring(0,g.length-n.group(1).length)+"webp";}});return j.future;} get width=>FI; get height=>OI; clone([ g]){g=(g!=null)?g:jI;var h=new EB(FI,OI,true,0,g);h.fG(this);return h;} fG( h,[ g=null]){yM();g=(g==null)?new AB.mH():g.clone();g.scale(nI,nI);var i=new RB.oH(tJ,g);h.JB(i);tJ.globalAlpha=1.0;tJ.globalCompositeOperation=PC.RC;} fillRect( g, h){yM();tJ.setTransform(nI,0.0,0.0,nI,0.0,0.0);tJ.fillStyle=xD(h);tJ.fillRect(g.x,g.y,g.width,g.height);} clear(){yM();tJ.setTransform(nI,0.0,0.0,nI,0.0,0.0);tJ.clearRect(0,0,FI,OI);} JB( h){var g=h.context;switch (vI){case 0:g.drawImage(sJ,SJ,ZJ);break;case 1:g.drawImageScaled(sJ,SJ,ZJ,DJ,JJ);break;case 2:g.drawImageScaledFromSource(sJ,dJ,hJ,mJ,oJ,SJ,ZJ,DJ,JJ);break;case 3:g.transform(0.0,-1.0,1.0,0.0,SJ,ZJ+JJ);g.drawImageScaledFromSource(sJ,dJ,hJ,oJ,mJ,0.0,0.0,JJ,DJ);break;}} EH( o, g){if(g.width==0||g.height==0)return;var i=o.context;if(vI!=0){yM();}var h=(g.x-SJ)*nI;var n=(g.y-ZJ)*nI;var q=g.width*nI;var k=g.height*nI;var l=g.x+SJ;var j=g.y+ZJ;var t=g.width;var m=g.height;i.drawImageScaledFromSource(sJ,h,n,q,k,l,j,t,m);} yM(){if(tJ==null){var g=jI/CD;var j=(FI*g).ceil();var i=(OI*g).ceil();var h=new pB.CanvasElement(width:j,height:i);var k=new AB(g,0.0,0.0,g,0.0,0.0);var l=new RB.oH(h.context2D,k);this.JB(l);jI=jI;nI=g;vI=((1.0-nI).abs()<0.001)?0:1;SJ=0;ZJ=0;DJ=FI;JJ=OI;dJ=0;hJ=0;mJ=j;oJ=i;sJ=h;tJ=h.context2D;}}}typedef  rC( ratio);typedef  GF<FC extends w>( event);class eD<FC extends w> extends IB.StreamSubscription<FC>{var rI=0;var xI=false;var LJ;var WJ;eD(this.LJ,this.WJ); get isPaused=>rI>0; onError( g(error)){} cancel(){LJ.bG(this);} pause([ g]){rI++ ;if(g!=null){g.whenComplete(resume);}} resume(){if(rI==0){throw new StateError("Subscription is not paused.");}rI-- ;}}class GC implements PB{var sI;var HJ;var NJ=0.0;GC(){sI=new pC();HJ=sI;} add( g){if(g is !PB){throw new ArgumentError("The supplied animatable does not extend type Animatable.");}if(this.contains(g)==false){var h=new pC();HJ.nB=g;HJ.uB=h;HJ=h;}} remove( h){if(h!=null){var g=sI;while (identical(g,HJ)==false){if(identical(g.nB,h)){g.nB=null;break;}g=g.uB;}}} contains( h){if(h!=null){var g=sI;while (identical(g,HJ)==false){if(identical(g.nB,h))return true;g=g.uB;}}return false;} SD( g, i,[ h]){var j=h!=null?new zC(g,i,h):new zC(g,i);add(j);return j;} dG( h, i){var g=new ZD(h,i);add(g);return g;} WB( j){NJ+= j;var g=sI;var i=HJ;while (identical(g,i)==false){var k=g.nB;if(k==null){var h=g.uB;g.nB=h.nB;g.uB=h.uB;if(identical(h,i))i=g;if(identical(h,HJ))HJ=g;}else if(k.WB(j)==false){g.nB=null;}else{g=g.uB;}}return true;}}class PC{static const  RC="source-over";} TF( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";}class XB{var UI;var wI;var CJ;final  QJ=new List<ED>();final  iJ=new List<SG>();static  AD( l){var i=new IB.Completer<XB>();pB.HttpRequest.getString(l).then((q){var h=TD.parse(q) as Map;var j=new List();var g=new XB();g.UI=l;g.wI=h["md5"];g.CJ=h["frameRate"].toInt();for(var m in h["movies"] as List){var n=new ED(m,g);g.QJ.add(n);}for(var o in h["textureGroups"] as List){var k=new SG(o,g);g.iJ.add(k);j.add(k.YC.future);}IB.Future.wait(j).then((BB){i.complete(g);}).catchError((t){i.completeError(new StateError("Failed to load image."));});}).catchError((t){i.completeError(new StateError("Failed to load json file."));});return i.future;} IL( h){for(var g in QJ)if(g.id==h)return g;throw new ArgumentError("The movie '${h}' is not available.");} WL( g){for(var h in iJ){if(h.bC.containsKey(g)){return h.bC[g];}}for(var i in QJ){if(i.id==g){return new XH(this,g);}}throw new ArgumentError("The symbol '${g}' is not available.");}}class QC extends NC{var AJ;QC( g):super(w.vC),AJ=g;}class oD{static var mF=WD.xC;static var qF=new IB.StreamController<String>();static var uF=qF.stream.asBroadcastStream();static  get zF=>mF;}class QB{static const  wD="B";static const  fF="BL";static const  AE="BR";static const  LF="L";static const  CE="R";static const  lF="T";static const  pF="TR";static const  xC="";} xD( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class zD extends NC{zD():super(w.uD);}class RB{final  tJ;var VI=0.0;var yJ=0.0;var FK;var IK;RB.oH( i,[ h]):tJ=i{FK=new yB();IK=FK;var g=FK.matrix;if(h is AB){g.aC(h);}tJ.setTransform(g.a,g.b,g.c,g.d,g.cB,g.dB);tJ.globalAlpha=1.0;tJ.globalCompositeOperation=PC.RC;} get context=>tJ; reset([ i, h, j]){VI=(h is num)?h:0.0;yJ=(j is num)?j:0.0;IK=FK;var g=FK.matrix;if(i is AB){g.aC(i);}tJ.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);tJ.clearRect(0,0,tJ.canvas.width,tJ.canvas.height);tJ.setTransform(g.a,g.b,g.c,g.d,g.cB,g.dB);tJ.globalAlpha=1.0;tJ.globalCompositeOperation=PC.RC;} oE( h){var g=h.vL;var BB=h.nJ;var k=h.vJ;var j=h.KK;var o=h.LK;var m=IK as yB;var i=IK.sG as yB;IK=i;var n=i.matrix;var t=m.alpha.toDouble()*BB;var q=(o!=null)?o:m.ZC;n.WE(g,m.matrix);i.alpha=t;i.ZC=q;if(k!=null){if(k.vB==null){g=i.matrix;}else if(identical(k.vB,h)){g=i.matrix;}else if(identical(k.vB,h.parent)){g=m.matrix;}else{g=k.vB.qE(h);if(g==null)g=BD;else g.concat(i.matrix);}k.YH(this,g);}if(j!=null){if(j.vB==null){g=i.matrix;}else if(identical(j.vB,h)){g=i.matrix;}else if(identical(j.vB,h.parent)){g=m.matrix;}else{g=j.vB.qE(h);if(g==null)g=BD;else g.concat(i.matrix);}j.ZH(this,g);}var l=n;tJ.setTransform(l.a,l.b,l.c,l.d,l.cB,l.dB);tJ.globalCompositeOperation=q;tJ.globalAlpha=t;if(h.aG){h.bM(this);}else{h.JB(this);}if(j!=null){j.bH();}if(k!=null){k.aH();}IK=m;}}class EE extends NC{EE():super(w.DE);}class FE{var AK=0.0;var EK=0.0;var GK=0.0;var nJ=0.0;FE.nH( g){AK=kB.min(1.0,kB.max(0.0,v(g["red"])));EK=kB.min(1.0,kB.max(0.0,v(g["green"])));GK=kB.min(1.0,kB.max(0.0,v(g["blue"])));nJ=kB.min(1.0,kB.max(0.0,v(g["alpha"])));}}class wC{static  IE( g){return g;}static  QG( g){if(g==0.0||g==1.0)return g;return kB.pow(2.0,-10.0*g)*kB.sin((g-0.3/4.0)*(2.0*kB.PI)/0.3)+1;}}class HC{static const  sC="auto";static const  vF="stop";static const  LE="once";} sF( g){if(g is bool){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a bool.");}}final  KE=new yC<QC>();final  ME=new yC<zD>(); LB( g){if(g is int){return g;}else{throw new ArgumentError("The supplied value (${g}) is not an int.");}}class NE{var target=null;var gB=false;var ID=0;var IC=0;var jE,kE;var hE,iE;NE(this.jE,this.kE,this.hE,this.iE);}final  PE=new yC<EE>(); v( g){if(g is num){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a number.");}}class yC<FC extends NC>{final  JI=[] ;GD( g){JI.add(g);}dispatchEvent( g){var j=JI;var k=JI.length;for(int h=0;h<k;h++ ){var i=j[h];if(i.CK){g.XI=i.XI;g.kK=i.XI;g.iK=rB.OC;g.mK=false;g.pK=false;i.dispatchEvent(g);}else{j.removeAt(h);k-- ;h-- ;}}}}class SB{final  ND;var PD=double.NAN;var RD=double.NAN;SB(this.ND); MC( g){this.RD=g.toDouble();} get pG=>!PD.isNaN&&!RD.isNaN; sK( g){switch (ND){case 'x':return g.x;case 'y':return g.y;case 'pivotX':return g.hB;case 'pivotY':return g.iB;case 'scaleX':return g.MB;case 'scaleY':return g.NB;case 'skewX':return g.skewX;case 'skewY':return g.skewY;case 'rotation':return g.JC;case 'alpha':return g.alpha;default:return 0.0;}} UL( g, h){switch (ND){case 'x':g.x=h;break;case 'y':g.y=h;break;case 'pivotX':g.hB=h;break;case 'pivotY':g.iB=h;break;case 'scaleX':g.MB=h;break;case 'scaleY':g.NB=h;break;case 'skewX':g.skewX=h;break;case 'skewY':g.skewY=h;break;case 'rotation':g.JC=h;break;case 'alpha':g.alpha=h;break;}}}class SC{final  fK;var VI=0.0;var gI=0.0;var vH=0.0;var zH=0.0;var jK=0.0;var lK=0.0;var jJ=0.0;var qK=0.0;var rK=0.0;var tK=0.0;var vK=0.0;var xK=0.0;var zK=0.0;var AL=0.0;var BL=0.0;var CL=0.0;var DL=0.0;var EL=0.0;var FL;var GL;SC( g):fK=g;LL(){var g=fK;var j=g.OL+g.RL*g.TL;if(j<0.01)j=0.01;VI=0.0;gI=j;vH=g.cL+g.dL*g.TL;zH=g.fL+g.hL*g.TL;rK=g.cL;tK=g.fL;var k=g.mL+g.oL*g.TL;var l=g.rL+g.sL*g.TL;vK=(l*kB.cos(k));xK=(l*kB.sin(k));BL=g.yL+g.zL*g.TL;CL=g.yL/gI;DL=g.mL+g.oL*g.TL;EL=g.CM+g.EM*g.TL;zK=g.zK+g.IM*g.TL;AL=g.AL+g.JM*g.TL;var h=g.KM+g.LM*g.TL;var i=g.MM+g.NM*g.TL;if(h<0.1)h=0.1;if(i<0.1)i=0.1;jK=h;lK=(i-h)/gI;FL=g.FL;} ZM( g){var j=fK;var l=gI-VI;if(l<=0.0)return false;if(l<=g)g=l;VI+= g;if(j.aM==UC.RG){DL+= EL*g;BL-= CL*g;vH=j.cL-kB.cos(DL)*BL;zH=j.fL-kB.sin(DL)*BL;if(BL<j.cM){VI=gI;}}else{var h=vH-rK;var i=zH-tK;var k=kB.sqrt(h*h+i*i);if(k<0.01)k=0.01;h=h/k;i=i/k;var n=j.fM;var m=j.gM;vK+= g*(n+h*zK-i*AL);xK+= g*(m+i*zK+h*AL);vH+= vK*g;zH+= xK*g;}jK+= lK*g;return true;}jM( j){var k=VI*32~/gI;var g=32*k;var i=0;var l=vH-jK/2.0;var h=zH-jK/2.0;j.drawImageScaledFromSource(FL,g,i,32,32,l,h,jK,jK);}}class AG{static var BG=0;var hC=BG++ ;var target=null;var dC=false;AG(this.target,this.dC);} RE( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);}class mB extends YB{static var SE=PG;var ML;var tJ;var NL,QL;var SL;var VL,YL;var ZL;var aL;var bL;var eL;var xH;var gL;var iL;var jL;var kL;var lL;var nL;var pL;var qL;var tL;var uL;var wL;var xL;mB( k, g,[ j, i, h]){if(g is !pB.CanvasElement){throw new ArgumentError("The canvas argument is not a CanvasElement");}if(g.tabIndex==-1)g.tabIndex=0;if(g.style.outline=="")g.style.outline="none";MI=k;ML=g;ML.focus();tJ=g.context2D;NL=(j!=null)?j:g.width;QL=(i!=null)?i:g.height;SL=(h!=null)?h:30;VL=-1;YL=-1;ZL=new DB.kH();aL=new AB.mH();bL=new AB.mH();YM();eL=null;xH=new GC();iL=new RB.oH(tJ);jL=HC.sC;kL=DC.qD;lL=QB.xC;tL=[new NE(u.mD,u.rD,u.gD,u.RF),new NE(u.nF,u.rF,u.GE,u.GE),new NE(u.wF,u.xF,u.JE,u.JE)];nL=OB.tC;qL=null;pL=new HB(0,0);wL=new u(u.gD,true);EC.jF.listen(jF);ML.onMouseDown.listen(dM);ML.onMouseUp.listen(dM);ML.onMouseMove.listen(dM);ML.onMouseOut.listen(dM);ML.onMouseWheel.listen(eM);uL=new Map<int,AG>();xL=new GB(GB.fD,true);oD.uF.listen(hM);hM(null);ML.onKeyDown.listen(iM);ML.onKeyUp.listen(iM);ML.onKeyPress.listen(iM);} get OD=>eL; get MD=>xH; get focus=>gL;sM(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){sM();}set y( g){sM();}set hB( g){sM();}set iB( g){sM();}set MB( g){sM();}set NB( g){sM();}set skewX( g){sM();}set skewY( g){sM();}set JC( g){sM();}set alpha( g){sM();}set width( g){sM();}set height( g){sM();}qG( g, h){if(jL==HC.sC||jL==HC.LE){YM();iL.reset(bL,g,h);JB(iL);if(jL==HC.LE)jL=HC.vF;}}YM(){var FB=ML.getBoundingClientRect();var UB=ML.clientLeft+FB.left;var KB=ML.clientTop+FB.top;var h=ML.clientWidth;var j=ML.clientHeight;var o=NL;var BB=QL;if(h is !num)throw "dart2js_hint";if(j is !num)throw "dart2js_hint";if(o is !num)throw "dart2js_hint";if(BB is !num)throw "dart2js_hint";if(h==0||j==0)return;var i=1.0;var g=1.0;var k=0.0;var m=0.0;var n=h/o;var l=j/BB;switch (kL){case DC.IF:i=n;g=l;break;case DC.OF:i=g=(n>l)?n:l;break;case DC.XF:i=g=1.0;break;case DC.qD:i=g=(n<l)?n:l;break;}switch (lL){case QB.pF:case QB.CE:case QB.AE:k=(h-o*i);break;case QB.lF:case QB.xC:case QB.wD:k=(h-o*i)/2;break;}switch (lL){case QB.fF:case QB.wD:case QB.AE:m=(j-BB*g);break;case QB.LF:case QB.xC:case QB.CE:m=(j-BB*g)/2;break;}var q=ZL;q.x=-k/i;q.y=-m/g;q.width=h/i;q.height=j/g;var t=(mB.SE?DD:1.0)/CD;bL.KC(i,0.0,0.0,g,k,m);bL.scale(t,t);aL.KC(1.0,0.0,0.0,1.0,-UB-k,-KB-m);aL.scale(1.0/i,1.0/g);if(VL!=h||YL!=j){VL=h;YL=j;ML.width=(VL*t).round();ML.height=(YL*t).round();if(ML.clientWidth!=h||ML.clientHeight!=j){ML.style.width="${h}px";ML.style.height="${j}px";}dispatchEvent(new w(w.kF));}}jF( g){ML.style.cursor=EC.QE(nL);}dM( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var q=j.button;var g=null;var i=aL.PL(j.client);var m=null;if(q<0||q>2)return;if(j.type=="mousemove"&&pL.ZE(i))return;var h=tL[q];pL=i;if(EC.lD!=null)EC.lD.BN();if(j.type!="mouseout")g=tB(i.x,i.y) as CB;var k=OB.tC;if(g is qC&&(g as qC).JH){k=OB.uC;}if(g is bD&&(g as bD).JH){k=OB.uC;}if(g is UD&&(g as UD).type==BF.NF){k=OB.sD;}if(nL!=k){nL=k;ML.style.cursor=EC.QE(k);}if(qL!=null&&qL!=g){qL.dispatchEvent(wL..eK(u.yD,true)..HL=(qL.fC!=null)?qL.sB(i):new HB.kH()..JL=i..nK=h.gB);qL=null;}if(g!=null&&g!=qL){g.dispatchEvent(wL..eK(u.iF,true)..HL=g.sB(i)..JL=i..nK=h.gB);qL=g;}var l=null;var o=false;var t=false;if(j.type=="mousedown"){ML.focus();l=h.jE;if(g!=h.target||n>h.ID+500)h.IC=0;h.gB=true;h.target=g;h.ID=n;h.IC++ ;}if(j.type=="mouseup"){l=h.kE;h.gB=false;o=(h.target==g);t=o&&h.IC.isEven&&(n<h.ID+500);}if(j.type=="mousemove"){l=u.vD;}if(l!=null&&g!=null){m=g.sB(i);g.dispatchEvent(wL..eK(l,true)..HL=m..JL=i..nK=h.gB..uK=h.IC);if(o){if(t&&g.eG){g.dispatchEvent(wL..eK(h.iE,true)..HL=m..JL=i..nK=h.gB);}else{g.dispatchEvent(wL..eK(h.hE,true)..HL=m..JL=i..nK=h.gB);}}}}eM( h){var g=aL.PL(h.client);var i=tB(g.x,g.y) as CB;if(i!=null){i.dispatchEvent(wL..eK(u.BE,true)..HL=i.sB(g)..JL=g..wK=h.deltaX..yK=h.deltaY);if(wL.gC)h.preventDefault();}}var CN=[] ;hM( h){CN.forEach((g)=>g.cancel());if(oD.zF==WD.VF){CN=[ML.onTouchStart.listen(DN),ML.onTouchEnd.listen(DN),ML.onTouchMove.listen(DN),ML.onTouchEnter.listen(DN),ML.onTouchLeave.listen(DN),ML.onTouchCancel.listen(DN)];}}DN( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=aL.PL(m.client);var h=tB(i.x,i.y) as CB;var g=uL.containsKey(l)?uL[l]:new AG(h,uL.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(xL..eK(GB.hF,true)..HL=(g.target.fC!=null)?g.target.sB(i):new HB.kH()..JL=i..RK=g.hC..TK=g.dC);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(xL..eK(GB.cF,true)..HL=h.sB(i)..JL=i..RK=g.hC..TK=g.dC);g.target=h;}var k=null;if(j.type=="touchstart"){ML.focus();uL[l]=g;k=GB.fD;}if(j.type=="touchend"){uL.remove(l);k=GB.kD;}if(j.type=="touchcancel"){uL.remove(l);k=GB.nD;}if(j.type=="touchmove"){k=GB.tD;}if(k!=null&&h!=null){h.dispatchEvent(xL..eK(k,true)..HL=h.sB(i)..JL=i..RK=g.hC..TK=g.dC);}}}iM( g){if(g.keyCode==8){g.preventDefault();}if(gL==null){return;}if(g.type=="keypress"){var j=g.charCode;var k=g.keyCode;if(k==13)j=13;if(j==0)return;var l=new EF(EF.PF,true)..TJ=new String.fromCharCodes([j]);gL.dispatchEvent(l);}else{var h=wB.HF;var i="";if(g.type=="keyup")i=lB.jD;if(g.type=="keydown")i=lB.hD;if(g.keyLocation==pB.KeyLocation.LEFT)h=wB.LF;if(g.keyLocation==pB.KeyLocation.RIGHT)h=wB.CE;if(g.keyLocation==pB.KeyLocation.NUMPAD)h=wB.WF;if(g.keyLocation==pB.KeyLocation.JOYSTICK)h=wB.pD;if(g.keyLocation==pB.KeyLocation.MOBILE)h=wB.pD;var m=new lB(i,true)..UJ=g.altKey..bJ=g.ctrlKey..fJ=g.shiftKey..uJ=g.charCode..wJ=g.keyCode..BK=h;gL.dispatchEvent(m);}}} TE( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";} EG(){var i=new IB.Completer<bool>();var g=new pB.ImageElement(); h(){i.complete(g.width==2&&g.height==2);}g.onLoad.listen((j)=>h());g.onError.listen((j)=>h());g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return i.future;}class XH extends s implements PB{final  AM;final  BM;final  DM=new List<HG>();var FM=0.0;var GM=0.0;var HM=0;var KI=0;XH( g, j):AM=g,BM=g.IL(j){for(var h in BM.KD){var i=new HG(AM,h);DM.add(i);}KI=BM.LD;GM=KI/AM.CJ;} WB( h){FM+= h;var i=FM%GM;HM=kB.min((KI*i/GM).toInt(),KI-1);for(var g in DM){g.WB(h);g.pE(HM);}return true;} JB( h){for(var g in DM){if(g.visible){h.oE(g);}}}}class zC implements PB{final  OM;final  PM;final  QM=new List<SB>();var RM;var SM;var TM;var UM;var gI;var VI;var VM;var WM;var XM;zC( g, i,[ h=wC.IE]):OM=g,PM=h{UM=new VD(this);VI=0.0;gI=kB.max(0.0001,i);VM=0.0;WM=false;XM=false;} get WC=>UM; tI( g){if(OM!=null&&XM==false){QM.add(g);}} complete(){if(gI>=VI)WB(gI-VI);} WB( m){if(VI<gI||XM==false){VI=VI+m;if(VI>gI){VI=gI;}if(VI>=0.0){if(XM==false){XM=true;for(int h=0;h<QM.length;h++ ){var g=QM[h];g.PD=g.sK(OM);}if(RM!=null){RM();}}var k=VI/gI;var l=PM(k).toDouble();for(int h=0;h<QM.length;h++ ){var g=QM[h];if(g.pG){var i=g.PD.toDouble();var n=g.RD.toDouble();var j=i+l*(n-i);g.UL(OM,WM?j.round():j);}}if(SM!=null){SM();}if(TM!=null&&VI==gI){TM();}}}return VI<gI;}set XE( g){if(XM==false)VI=VI+VM-g;VM=g;} set onComplete( g()){TM=g;}}class HG extends s implements PB{final  AC;final  JD;final  QD=new Map<String,qB>();var LC;HG( i, h):this.AC=i,this.JD=h{for(var g in h.aB){if(g.ref!=null&&QD.containsKey(g.ref)==false){QD[g.ref]=i.WL(g.ref);}}pE(0);} WB( g){if(LC is PB){var h=LC as PB;h.WB(g);}} pE( BB){var g=JD.mG(BB);var o=g.x,q=g.y;var n=g.MB,k=g.NB;var m=g.skewX,l=g.skewY;var KB=g.hB,tE=g.iB;var t=g.alpha;if(g.index!=BB&&g.rE){var i=JD.lG(g);if(i!=null){var h=(BB-g.index)/g.duration;var j=g.YE;if(j!=0){var FB=0.0;if(j<0){var jB=1-h;FB=1-jB*jB;j=0-j;}else{FB=h*h;}h=j*FB+(1-j)*h;}o=o+(i.x-o)*h;q=q+(i.y-q)*h;n=n+(i.MB-n)*h;k=k+(i.NB-k)*h;m=m+(i.skewX-m)*h;l=l+(i.skewY-l)*h;t=t+(i.alpha-t)*h;}}var UB=n*kB.cos(l);var uE=n*kB.sin(l);var vE=-k*kB.sin(m);var wE=k*kB.cos(m);var KH=o-(KB*UB+tE*vE);var LH=q-(KB*uE+tE*wE);XK=false;SK.KC(UB,uE,vE,wE,KH,LH);nJ=t;pJ=g.visible;LC=(g.ref!=null)?QD[g.ref]:null;} JB( g){if(LC!=null){LC.JB(g);}}}final  JG=EG();final  TC=new FF<List<s>>(()=>new List<s>());final  BD=new AB.mH(); UE( g, m, n, j){m=m.toDouble();n=n.toDouble();var jB=0.0;var UB=0.0;var t=m*g.a;var KB=m*g.b;var BB=m*g.a+n*g.c;var q=m*g.b+n*g.d;var FB=n*g.c;var o=n*g.d;var h=jB;if(h>t)h=t;if(h>BB)h=BB;if(h>FB)h=FB;var i=UB;if(i>KB)i=KB;if(i>q)i=q;if(i>o)i=o;var l=jB;if(l<t)l=t;if(l<BB)l=BB;if(l<FB)l=FB;var k=UB;if(k<KB)k=KB;if(k<q)k=q;if(k<o)k=o;if(j==null)j=new DB.kH();j.x=g.cB+h;j.y=g.dB+i;j.width=l-h;j.height=k-i;return j;}final  KG=new pB.CanvasElement(width:16,height:16);final  VE=KG.context2D;final  CD=VE.backingStorePixelRatio==null?1.0:VE.backingStorePixelRatio.toDouble();final  DD=pB.window.devicePixelRatio==null?1.0:pB.window.devicePixelRatio;final  NG=((){var g=pB.window.navigator.userAgent.toLowerCase();return g.indexOf("iphone")>=0||g.indexOf("ipad")>=0||g.indexOf("ipod")>=0||g.indexOf("android")>=0||g.indexOf("webos")>=0||g.indexOf("windows phone")>=0;})();final  OG=pB.window.screen==null?1024:kB.max(pB.window.screen.width,pB.window.screen.height);final  PG=DD>1.0&&(!NG||OG>480);class UC extends s implements PB{final  kM=new kB.Random();var lM;var mM;var FL;var nM=0;var oM=0.0;var pM=0.0;static const  RG=1;var aM=0;var cL=0.0;var fL=0.0;var dL=0.0;var hL=0.0;var qM=0;var GM=0.0;var OL=0.0;var RL=0.0;var KM=0.0;var LM=0.0;var MM=0.0;var NM=0.0;var rM="circle";var fM=0.0;var gM=0.0;var rL=0.0;var sL=0.0;var mL=0.0;var oL=0.0;var zK=0.0;var IM=0.0;var AL=0.0;var JM=0.0;var cM=0.0;var yL=0.0;var zL=0.0;var CM=0.0;var EM=0.0;var LK;var uM;var vM;UC( g){lM=new SC(this);mM=lM;pM=0.0;oM=0.0;nM=0;sE(g);} wM(){FL=new pB.CanvasElement(width:1024,height:32);var h=FL.context2D;for(int g=0;g<32;g++ ){var k=15;var i=g*32+15.5;var j=15.5;var BB=uM.AK+g*(vM.AK-uM.AK)/31;var q=uM.EK+g*(vM.EK-uM.EK)/31;var FB=uM.GK+g*(vM.GK-uM.GK)/31;var t=uM.nJ+g*(vM.nJ-uM.nJ)/31;var n=(255.0*BB).toInt();var o=(255.0*q).toInt();var m=(255.0*FB).toInt();var l=h.createRadialGradient(i,j,0,i,j,k);l.addColorStop(0.00,"rgba(${n}, ${o}, ${m}, ${t})");l.addColorStop(1.00,"rgba(${n}, ${o}, ${m}, 0.0)");h.beginPath();h.moveTo(i+k,j);h.arc(i,j,k,0,kB.PI*2.0,false);h.fillStyle=l;h.fill();}} start([ g]){pM=GM;if(g!=null&&g is num)pM=g;} GH( h, g){cL=v(h);fL=v(g);} get yG=>nM; get TL=>kM.nextDouble()*2.0-1.0; sE( h){var g=TD.parse(h);aM=LB(g["emitterType"]);cL=v(g["location"]["x"]);fL=v(g["location"]["y"]);qM=LB(g["maxParticles"]);GM=v(g["duration"]);OL=v(g["lifeSpan"]);RL=v(g["lifespanVariance"]);KM=v(g["startSize"]);LM=v(g["startSizeVariance"]);MM=v(g["finishSize"]);NM=v(g["finishSizeVariance"]);rM=g["shape"];dL=v(g["locationVariance"]["x"]);hL=v(g["locationVariance"]["y"]);rL=v(g["speed"]);sL=v(g["speedVariance"]);mL=v(g["angle"])*kB.PI/180.0;oL=v(g["angleVariance"])*kB.PI/180.0;fM=v(g["gravity"]["x"]);gM=v(g["gravity"]["y"]);zK=v(g["radialAcceleration"]);IM=v(g["radialAccelerationVariance"]);AL=v(g["tangentialAcceleration"]);JM=v(g["tangentialAccelerationVariance"]);cM=v(g["minRadius"]);yL=v(g["maxRadius"]);zL=v(g["maxRadiusVariance"]);CM=v(g["rotatePerSecond"])*kB.PI/180.0;EM=v(g["rotatePerSecondVariance"])*kB.PI/180.0;LK=g["compositeOperation"];uM=new FE.nH(g["startColor"]);vM=new FE.nH(g["finishColor"]);if(GM<=0)GM=double.INFINITY;pM=GM;wM();} WB( i){var h=lM;var k=nM;for(int j=0;j<k;j++ ){var g=h.GL as SC;if(g.ZM(i)){h=g;continue;}if(g.GL!=null){h.GL=g.GL;mM.GL=g;mM=g;mM.GL=null;}nM-- ;}if(pM>0.0){var l=OL/qM;oM+= i;while (oM>0.0){if(nM<qM){var g=h.GL;if(g==null){g=mM=h.GL=new SC(this);}h=g;h.LL();h.ZM(oM);nM++ ;}oM-= l;}pM=kB.max(0.0,pM-i);}return true;} JB( j){var h=j.context;h.globalCompositeOperation=LK;var g=lM;for(int i=0;i<nM;i++ ){g=g.GL;g.jM(h);}}}class ED{final  id;final  AC;final  KD=new List<FD>();ED( g, j):AC=j,id=g["id"]{for(var h in g["layers"]){var i=new FD(h);this.KD.add(i);}} get LD{var g=0;for(var h in KD)g=kB.max(g,h.LD);return g;}}class FD{final  name;final  hG;final  aB=new List<VC>();FD( g):this.name=g["name"],this.hG=g.containsKey("flipbook")?g["flipbook"]:false{for(var i in g["keyframes"]){var h=new VC(i);this.aB.add(h);}} get LD{var g=aB[aB.length-1];return g.index+g.duration;} mG( h){var g=1;while (g<aB.length&&aB[g].index<=h)g++ ;return aB[g-1];} lG( h){for(int g=0;g<aB.length-1;g++ )if(identical(aB[g],h))return aB[g+1];return null;}}class VC{var index;var duration;var ref;var label;var x,y;var MB,NB;var skewX,skewY;var hB,iB;var visible;var alpha;var rE;var YE;VC( g){this.index=g["index"];this.duration=g["duration"];this.ref=g.containsKey("ref")?g["ref"]:null;this.label=g.containsKey("label")?g["label"]:null;this.x=g.containsKey("loc")?g["loc"][0]:0.0;this.y=g.containsKey("loc")?g["loc"][1]:0.0;this.MB=g.containsKey("scale")?g["scale"][0]:1.0;this.NB=g.containsKey("scale")?g["scale"][1]:1.0;this.skewX=g.containsKey("skew")?g["skew"][0]:0.0;this.skewY=g.containsKey("skew")?g["skew"][1]:0.0;this.hB=g.containsKey("pivot")?g["pivot"][0]:0.0;this.iB=g.containsKey("pivot")?g["pivot"][1]:0.0;this.visible=g.containsKey("visible")?g["visible"]:true;this.alpha=g.containsKey("alpha")?g["alpha"]:1.0;this.rE=g.containsKey("tweened")?g["tweened"]:true;this.YE=g.containsKey("ease")?g["ease"]:0.0;}}class SG{var AC;var bC;var YC;SG( q,this.AC){this.bC=new Map<String,TG>();this.YC=new IB.Completer();var k=0;for(var j in q["atlases"] as List){var n=j["file"] as String;var t=TE(AC.UI,n);k++ ;var g=new pB.ImageElement();g.onLoad.listen((o){if( --k==0)this.YC.complete(this);});g.onError.listen((o){this.YC.completeError(new StateError("Failed to load image."));});g.src=t;for(var i in j["textures"] as List){var m=i["symbol"] as String;var h=i["rect"] as List;var l=i["origin"] as List;var BB=new TG(h[0],h[1],h[2],h[3],l[0],l[1],g);this.bC[m]=BB;}}}}class TG implements qB{var x,y,width,height;var uG,vG;var dE;var zM;var AN;TG(this.x,this.y,this.width,this.height,this.uG,this.vG,this.dE); JB( g){g.context.drawImageScaledFromSource(dE,x,y,width,height,0,0,width,height);}}//@ sourceMappingURL=stagexl_runtimes.dart.map
