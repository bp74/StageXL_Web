import "dart:web_audio" as UE;import "dart:json" as mF;import "dart:html" as VB;import "dart:math" as eB;import "dart:async" as SB;class nI{static const  oI="Chrome";static const  pI="Firefox";static const  qI="Internet Explorer";static const  rI="Safari";final  xH;final  minimumVersion;const nI(this.xH,[this.minimumVersion]);}class sI{final  name;const sI(this.name);}class yI extends UB{var vJ;yI(){vJ=OB.TF('levelUp');xJ();MB.kD('images/LevelupTextureAtlas.png').then((h){var g=new vC(h);g.x=70;g.y=40;BB(g);});}xJ(){var l=330;for(int j=0;j<7;j++ ){var h=vJ.JC('LevelUp${j}');var g=new vC(h);g.jB=h.width/2;g.nB=h.height/2;g.x=l+h.width/2;g.y=150;g.oB=0.0;g.pB=0.0;BB(g);var k=new zG(g,2.0,s.BD);k.mB('scaleX',1.0);k.mB('scaleY',1.0);k.QF=j*0.05;var i=new zG(g,0.4,s.iC);i.mB('scaleX',0.0);i.mB('scaleY',0.0);i.QF=2.0;i.onComplete=()=>g.IE();TB.add(k);TB.add(i);l=l+5+h.width;}TB.zH(()=>xJ(),3.0);}}class tI extends UB{final  tJ=[{'name':'DropShadowFilter (black)','filter':new FJ(10,eB.PI/4,xB.zC,0.8,8,8)},{'name':'GlowFilter (red)','filter':new GJ(xB.NF,1.0,20,20)},{'name':'ColorMatrixFilter (grayscale)','filter':new EJ.nJ()},{'name':'ColorMatrixFilter (invert)','filter':new EJ.oJ()},{'name':'BlurFilter (radius 1)','filter':new HJ(1,1)},{'name':'BlurFilter (radius 5)','filter':new HJ(5,5)},{'name':'BlurFilter (radius 10)','filter':new HJ(10,10)},{'name':'BlurFilter (radius 20)','filter':new HJ(20,20)}];tI(){var m=new MB(940,500,true,0x000000);var k=OB.JC('king');var o=new MB(230,245,true,0xFFF0F0F0);var p=new vC(m);BB(p);for(int h=0;h<tJ.length;h++ ){var i=235*(h%4);var j=250*(h~/4);var q=tJ[h]['filter'] as VC;var t=tJ[h]['name'] as String;var u=new EB(0,0,k.width,k.height);var n=new GB(i+40,j+45);m.vH(k,u,n,q);var l=new vC(o);l.x=i;l.y=j;zD(l,0);var g=new JJ();g.PC=new VE('Helvetica Neue, Helvetica, Arial',14,xB.zC);g.x=i+5;g.y=j+5;g.width=200;g.text=t;BB(g);}}}class BJ extends UB{final  sJ=new eB.Random();BJ(){var g=new bE();g.jB=470;g.nB=250;g.x=470;g.y=250;BB(g);for(int h=0;h<150;h++ ){var v=1+sJ.nextInt(3);var p=OB.JC('flower${v}');var i=new vC(p);i.jB=64;i.nB=64;i.x=64+sJ.nextInt(940-128);i.y=64+sJ.nextInt(500-128);g.BB(i);var o=new zG(i,600,s.iC);o.mB('rotation',eB.PI*60.0);TB.add(o);}var k=new List<GB>();for(int h=0;h<6;h++ ){var n=(h*60)*eB.PI/180;var m=(h*60+30)*eB.PI/180;k.add(new GB(470+200*eB.cos(n),250+200*eB.sin(n)));k.add(new GB(470+100*eB.cos(m),250+100*eB.sin(m)));}var t=new cE.iJ(100,100,740,300);var u=new cE.kJ(470,250,200);var q=new cE.mJ(k);VB.query('#mask-none').onClick.listen((j)=>g.mask=null);VB.query('#mask-rectangle').onClick.listen((j)=>g.mask=t);VB.query('#mask-circle').onClick.listen((j)=>g.mask=u);VB.query('#mask-custom').onClick.listen((j)=>g.mask=q);VB.query('#mask-spin').onClick.listen((j){var l=new zG(g,2.0,s.OF);l.mB('rotation',eB.PI*4.0);l.onComplete=()=>g.nC=0.0;TB.add(l);});}}class uI extends UB{var sJ=new eB.Random();var vJ;var wJ;}class vI extends vC implements gB{var ND,OD;vI( g,this.ND,this.OD):super(g){this.jB=g.width/2;this.nB=g.height/2;} AC( i){var g=x+ND*i;var h=y+OD*i;if(g>910||g<30)ND=-ND;else x=g;if(h>470||h<30)OD=-OD;else y=h;return true;}}class wI extends UB{final  uJ=['C4','A3','A3','C4','D4','G3','G3','A3','A3#','F4','F4','E4','C4','D4','C4','A3#','A3','C4','D4','D4','D4','G4','F4','E4','F4','D4','C4','F3','G3','A3','D4','C4','C4','A3#','A3','E3','F3'];final  yJ=['Hey ','Jude, ',"don't ",'make ','it ','bad.<br>','Take ','a ','sad ','song ','and ','make ','it ','better.<br>','','','','Remember ','','','to ','let ','her ','into ','','your ','heart.<br>','Than ','you ','can ','start ','','to ','make ','things ','better.','',' '];wI(){var h=new vC(OB.JC('Background'));BB(h);var g=new nF(uJ,yJ);g.x=120;g.y=30;BB(g);VB.query('#startOver').onClick.listen((i)=>g.hI());}}class xI extends UB{final  jI='''
Filet mignon leberkas pig pork chop biltong, short loin strip steak turkey brisket 
venison. Pastrami venison pancetta, leberkas pork chop chicken prosciutto beef ribs 
bresaola kielbasa swine biltong capicola. Hamburger beef ribs ball tip drumstick salami 
pig. Capicola pork loin shank, salami chicken hamburger tail. Sirloin spare ribs
ground round cow strip steak prosciutto swine bacon corned beef.''';xI(){var k=jI.replaceAll('\r','').replaceAll('\n','');var j=new JJ();j.PC=new VE('Helvetica,Arial',14,xB.TH,bold:true,italic:true);j.text=k;j.x=10;j.y=10;j.width=920;j.height=20;BB(j);var h=new JJ();h.PC=new VE('Helvetica,Arial',16,xB.NF);h.text=k;h.x=10;h.y=50;h.width=200;h.height=300;h.wordWrap=true;BB(h);var g=new JJ();g.PC=new VE('Helvetica,Arial',16,xB.mG,align:NC.vE);g.text=k;g.x=300;g.y=50;g.width=200;g.height=300;g.wordWrap=true;BB(g);var i=new JJ();i.PC=new VE('Caesar Dressing',30,xB.zC,align:NC.VD);i.text=k;i.x=590;i.y=50;i.width=340;i.height=300;i.wordWrap=true;BB(i);}}class zI extends UB{zI(){var g=new JJ();g.PC=new VE('Helvetica,Arial',14,xB.GH,bold:true);g.text='ToDo: show a cool demo ...';g.x=10;g.y=10;g.width=920;g.height=20;BB(g);}}class AJ extends UB{AJ(){var k=OB.MI('flump');var i=new MJ(k,'idle');i.x=500;i.y=200;BB(i);var j=new MJ(k,'walk');j.x=150;j.y=460;BB(j);var g=new MJ(k,'attack');g.x=450;g.y=460;BB(g);var h=new MJ(k,'defeat');h.x=720;h.y=460;BB(h);TB.add(i);TB.add(j);TB.add(g);TB.add(h);MB.kD('images/flumpLibraryAtlas0.png').then((m){var l=new vC(m);l.x=40;l.y=40;BB(l);});}}class CJ{final  rJ=[{"name":"linear","transition":s.iC},{"name":"sine","transition":s.FF},{"name":"cosine","transition":s.CH},{"name":"random","transition":s.FH},{"name":"easeInQuadratic","transition":s.eD},{"name":"easeOutQuadratic","transition":s.fD},{"name":"easeInOutQuadratic","transition":s.HH},{"name":"easeOutInQuadratic","transition":s.KH},{"name":"easeInCubic","transition":s.gD},{"name":"easeOutCubic","transition":s.hD},{"name":"easeInOutCubic","transition":s.LF},{"name":"easeOutInCubic","transition":s.QH},{"name":"easeInQuartic","transition":s.iD},{"name":"easeOutQuartic","transition":s.jD},{"name":"easeInOutQuartic","transition":s.UH},{"name":"easeOutInQuartic","transition":s.VH},{"name":"easeInQuintic","transition":s.lD},{"name":"easeOutQuintic","transition":s.mD},{"name":"easeInOutQuintic","transition":s.XH},{"name":"easeOutInQuintic","transition":s.YH},{"name":"easeInCircular","transition":s.nD},{"name":"easeOutCircular","transition":s.oD},{"name":"easeInOutCircular","transition":s.ZH},{"name":"easeOutInCircular","transition":s.aH},{"name":"easeInSine","transition":s.pD},{"name":"easeOutSine","transition":s.qD},{"name":"easeInOutSine","transition":s.cH},{"name":"easeOutInSine","transition":s.gH},{"name":"easeInExponential","transition":s.rD},{"name":"easeOutExponential","transition":s.sD},{"name":"easeInOutExponential","transition":s.hH},{"name":"easeOutInExponential","transition":s.iH},{"name":"easeInBack","transition":s.tD},{"name":"easeOutBack","transition":s.uD},{"name":"easeInOutBack","transition":s.OF},{"name":"easeOutInBack","transition":s.lH},{"name":"easeInElastic","transition":s.vD},{"name":"easeOutElastic","transition":s.BD},{"name":"easeInOutElastic","transition":s.mH},{"name":"easeOutInElastic","transition":s.oH},{"name":"easeInBounce","transition":s.wD},{"name":"easeOutBounce","transition":s.CD},{"name":"easeInOutBounce","transition":s.pH},{"name":"easeOutInBounce","transition":s.qH}]; QI(){var j=new VB.DivElement();for(int h=0;h<rJ.length/4;h++ ){var i=new VB.DivElement();i.classes.add("row");j.children.add(i);for(int g=0;g<4;g++ ){var m=rJ[h*4+g]["name"];var l=rJ[h*4+g]["transition"];var k=JK(m,l);k.id="cell";i.children.add(k);}}return j;} JK( o, q( ratio)){var h=new VB.DivElement();h.classes.add("span3");h.style.height="130px";var j=new VB.CanvasElement(width:200,height:140);j.style.position="absolute";j.style.zIndex="1";h.children.add(j);var i=new VB.DivElement();i.text=o;i.style.position="relative";i.style.zIndex="2";i.style.top="6px";h.children.add(i);var l=new kC("stage",j);var n=new IJ();var g=n.RI;g.beginPath();g.moveTo(0.5,30.5);g.lineTo(199.5,30.5);g.lineTo(199.5,109.5);g.lineTo(0.5,109.5);g.closePath();g.jF(0xFF000000);g.EI(0xFFDFDFDF);g.beginPath();g.moveTo(0.5,109.5);for(int k=0;k<=199;k++ ){var m=k/199.0;var p=0.5+m*199.0;var t=109.5-79.0*q(m);g.lineTo(p,t);}g.jF(0xFF0000FF,2);l.BB(n);l.VF();return h;}}var kB;var PD;var TB;var OB;class DJ extends UB{DJ(){zJ(250);VB.query('#minus10').onClick.listen((g)=>AK(10));VB.query('#minus50').onClick.listen((g)=>AK(50));VB.query('#plus50').onClick.listen((g)=>zJ(50));VB.query('#plus10').onClick.listen((g)=>zJ(10));this.VI.listen(BK);}var CK=null;BK( g){if(CK==null){CK=1.00/g.bF;}else{CK=0.05/g.bF+0.95*CK;}VB.query('#fpsMeter').innerHtml='fps: ${CK.round()}';}zJ( l){var g=new eB.Random();var i=OB.TF('flags');var j=i.HI;while ( --l>=0){var k=j[g.nextInt(j.length)];var m=i.JC(k);var h=new vI(m,g.nextInt(200)-100,g.nextInt(200)-100);h.x=30+g.nextInt(940-60);h.y=30+g.nextInt(500-60);BB(h);TB.add(h);}VB.query('#flagCounter').innerHtml='Flags: ${HE}';}AK( h){while ( --h>=0&&HE>0){var g=LI(0);g.IE();TB.remove(g);}VB.query('#flagCounter').innerHtml='Flags: ${HE}';}} main(){var l=VB.window.location.pathname;var m=new RegExp(r"([A-Za-z0-9-]+)\.html",multiLine:false,caseSensitive:false);var g=m.firstMatch(l);if(g!=null&&g.groupCount==1){var h=g.group(1);print("current page: ${h}");var i=VB.query("#stage");if(i!=null){kB=new kC('stage',i);PD=new tF();PD.uH(kB);TB=PD.UI;OB=new kE();}switch (h){case "filter":OB..lB('king','images/king.png')..load().then((EK)=>kB.BB(new tI()));break;case "masking":OB..lB('flower1','images/Flower1.png')..lB('flower2','images/Flower2.png')..lB('flower3','images/Flower3.png')..load().then((EK)=>kB.BB(new BJ()));break;case "flipbook":OB..AE('walkTextureAtlas','images/walk.json',bC.yC)..load().then((EK)=>kB.BB(new uI()));break;case "performance":OB..AE('flags','images/flags.json',bC.yC)..load().then((EK)=>kB.BB(new DJ()));break;case "sound":OB..lB('KeyBlack','images/piano/KeyBlack.png')..lB('KeyWhite0','images/piano/KeyWhite0.png')..lB('KeyWhite1','images/piano/KeyWhite1.png')..lB('KeyWhite2','images/piano/KeyWhite2.png')..lB('KeyWhite3','images/piano/KeyWhite3.png')..lB('Finger','images/piano/Finger.png')..lB('Background','images/piano/Background.jpg')..FB('Cheer','sounds/Cheer.mp3')..FB('Note1','sounds/piano/Note1.mp3')..FB('Note2','sounds/piano/Note2.mp3')..FB('Note3','sounds/piano/Note3.mp3')..FB('Note4','sounds/piano/Note4.mp3')..FB('Note5','sounds/piano/Note5.mp3')..FB('Note6','sounds/piano/Note6.mp3')..FB('Note7','sounds/piano/Note7.mp3')..FB('Note8','sounds/piano/Note8.mp3')..FB('Note9','sounds/piano/Note9.mp3')..FB('Note10','sounds/piano/Note10.mp3')..FB('Note11','sounds/piano/Note11.mp3')..FB('Note12','sounds/piano/Note12.mp3')..FB('Note13','sounds/piano/Note13.mp3')..FB('Note14','sounds/piano/Note14.mp3')..FB('Note15','sounds/piano/Note15.mp3')..FB('Note16','sounds/piano/Note16.mp3')..FB('Note17','sounds/piano/Note17.mp3')..FB('Note18','sounds/piano/Note18.mp3')..FB('Note19','sounds/piano/Note19.mp3')..FB('Note20','sounds/piano/Note20.mp3')..FB('Note21','sounds/piano/Note21.mp3')..FB('Note22','sounds/piano/Note22.mp3')..FB('Note23','sounds/piano/Note23.mp3')..FB('Note24','sounds/piano/Note24.mp3')..FB('Note25','sounds/piano/Note25.mp3')..load().then((EK)=>kB.BB(new wI()));break;case "text":kB.BB(new xI());break;case "tweener":kB.BB(new zI());break;case "flump":OB..tH('flump','images/flumpLibrary.json')..load().then((EK)=>kB.BB(new AJ()));break;case "texturepacker":OB..AE('levelUp','images/LevelupTextureAtlas.json',bC.yC)..load().then((EK)=>kB.BB(new yI()));break;case "transitions":var k=new CJ();var j=k.QI();VB.query("#transitions").children.add(j);break;}}}class nF extends UB{final  aC;final  ZC;final  DK=['C3','C3#','D3','D3#','E3','F3','F3#','G3','G3#','A3','A3#','B3','C4','C4#','D4','D4#','E4','F4','F4#','G4','G4#','A4','A4#','B4','C5'];var FK=new Map<String,oF>();var GK;var HK=0;nF(this.aC,this.ZC){for(int h=0,i=0;h<DK.length;h++ ){var k=OB.SF('Note${h+1}');var j=DK[h];var g=FK[j]=new oF(this,j,k);if(j.endsWith('#')){g.x=i-16;g.y=35;BB(g);}else{g.x=i;g.y=35;zD(g,0);i=i+47;}}GK=new vC(OB.JC('Finger'));GK.jB=20;BB(GK);IK();}yH( g){if(HK<aC.length&&aC[HK]==g){if(HK==aC.length-1)OB.SF('Cheer').play();HK++ ;IK();}}hI(){HK=0;GK.alpha=1;IK();}IK(){var h=VB.query('#lyrics');var m=-1;h.innerHtml='';for(int g=0,j=0;g<ZC.length;g++ ){if(ZC[g]!='')j=g;if(g==this.HK)m=j;}for(int g=0;g<ZC.length;g++ ){if(g==m){h.appendHtml('<span id="word">${ZC[g]}</span>');}else{h.appendHtml(ZC[g]);}}if(HK<aC.length){var k=aC[HK];if(FK.containsKey(k)){var i=FK[k];TB.fI(GK);GK.y=0;var n=new zG(this.GK,0.4,s.LF);var l=new zG(this.GK,0.4,s.FF);n.mB('x',i.x+i.width/2);l.mB('y',-10);TB.add(n);TB.add(l);}}else{var o=new zG(GK,0.4,s.iC);o.mB('alpha',0);TB.add(o);}}}class oF extends bE{final  cF;final  aB;final  gF;oF(this.cF,this.aB,this.gF){var h;if(aB.endsWith('#')){h='KeyBlack';}else if(aB.startsWith('C5')){h='KeyWhite0';}else if(aB.startsWith('C')||aB.startsWith('F')){h='KeyWhite1';}else if(aB.startsWith('D')||aB.startsWith('G')||aB.startsWith('A')){h='KeyWhite2';}else if(aB.startsWith('E')||aB.startsWith('B')){h='KeyWhite3';}var i=OB.JC(h);var l=new vC(i);this.BB(l);var j=aB.endsWith('#')?xB.nH:xB.zC;var k=new VE('Helvetica,Arial',10,j,align:NC.VD);var g=new JJ();g.PC=k;g.text=aB;g.width=i.width;g.height=20;g.ZF=false;g.y=i.height-20;BB(g);this.KE=true;this.onMouseDown.listen(KK);this.onMouseOver.listen(KK);this.onMouseUp.listen(LK);this.onMouseOut.listen(LK);}KK( g){if(g.FC){this.gF.play();this.alpha=0.7;this.cF.yH(this.aB);}}LK( g){this.alpha=1.0;}}class SD extends fB{var gK;var EL;var XL;SD(){XL=new List<tC>();gK=new VB.AudioElement();gK.onEnded.listen(GM);EL=new List<VB.AudioElement>();EL.add(gK);VB.document.body.children.add(gK);}static  kD( o){var k=new SD();var g=k.gK;var i=new SB.Completer<fB>();var h;var j;n(m){h.cancel();j.cancel();i.complete(k);}l(m){h.cancel();j.cancel();i.completeError(new StateError("Failed to load audio."));}h=g.onCanPlayThrough.listen(n);j=g.onError.listen(l);g.src=fB.IF(o);g.load();return i.future;} get length{return gK.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new ZB();return new tC(this,loop,soundTransform);} YM( h){var g;if(EL.length==0){g=gK.clone(true);g.onEnded.listen(GM);}else{g=EL.removeAt(0);}XL.add(h);return g;} bN( g){var h=g.gK;var i=XL.indexOf(g);XL.removeAt(i);EL.add(h);if(gK.currentTime>0&&gK.ended==false)gK.currentTime=0;} GM(j){var i=j.target;var g=null;for(int h=0;h<XL.length&&g==null;h++ )if(XL[h].gK==i)g=XL[h];if(g!=null)g.stop();}}class wC{var VK;var RK;var tK;var FL;var NL;var VL;wC( g, h, i){VK=g;RK=h;tK=i;NL=null;VL=null;} get kind=>VK; get name=>RK; get mC=>VL; get error=>NL;uM( i){FL=i.then((g){VL=g;NL=null;},onError:( h){VL=null;NL=h.error;});}}class wB{final  YK=new VB.ImageElement();final  QL=new List<ZE>();static  kD( m, u){var l=new SB.Completer<wB>();var j=new wB();switch (u){case bC.EG:case bC.yC: n( k, g){var q=AH(k);var h=new ZE(q,j);h.zK=g["frame"]["x"].toInt();h.HL=g["frame"]["y"].toInt();h.ML=g["frame"]["w"].toInt();h.WL=g["frame"]["h"].toInt();h.eL=g["spriteSourceSize"]["x"].toInt();h.iL=g["spriteSourceSize"]["y"].toInt();h.mL=g["sourceSize"]["w"].toInt();h.uL=g["sourceSize"]["h"].toInt();h.AM=g["rotated"] as bool;j.QL.add(h);}VB.HttpRequest.getString(m).then((t){var o=mF.parse(t);var i=o["frames"];var p=o["meta"];if(i is List)for(var g in i)n(g["filename"],g);if(i is Map)for(String k in i.keys)n(k,i[k]);j.YK..onLoad.listen((v)=>l.complete(j))..onError.listen((v)=>l.completeError(new StateError("Failed to load image.")))..src=JF(m,p["image"]);}).catchError((CB){l.completeError(new StateError("Failed to load json file."));});break;}return l.future;} get HD=>YK; JC( i){var h;for(int g=0;g<QL.length&&h==null;g++ )if(QL[g].name==i)h=new MB.qJ(QL[g]);if(h==null)throw new ArgumentError("TextureAtlasFrame not found: '${i}'");return h;} get HI{return QL.map((g)=>g.name).toList();}}class bC{static const  EG="json";static const  yC="jsonarray";}class ZE{var RK;var jK;var zK;var HL;var ML;var WL;var eL;var iL;var mL;var uL;var AM;ZE( g, h){RK=g;jK=h;} get kI=>jK; get name=>RK; get JI=>zK; get KI=>HL; get II=>ML; get GI=>WL; get offsetX=>eL; get offsetY=>iL; get ZI=>mL; get YI=>uL; get iI=>AM;}class vF<gC>{final  UK=new List<gC>();final  AL;var LL=0;vF( g()):AL=g; bI(){if(LL==0){return AL();}else{LL-- ;return UK[LL];}}cI( g){if(LL==UK.length){UK.add(g);}else{UK[LL]=g;}LL++ ;}reset(){UK.clear();LL=0;}}class xB{static const  zC=0xFF000000;static const  mG=0xFF0000FF;static const  GH=0xFFA9A9A9;static const  TH=0xFF008000;static const  NF=0xFFFF0000;static const  nH=0xFFFFFFFF;}class QD{static var fE=hB.UD;static var JG=false;static var VG=new SB.StreamController<String>();static var ZG=VG.stream.asBroadcastStream();static  KF( i){var h=i;var g="auto";if(fE!=hB.UD)h=fE;switch (h){case hB.UD:g="auto";break;case hB.XD:g="default";break;case hB.YD:g="pointer";break;case hB.WG:g="move";break;case hB.XG:g="text";break;case hB.aG:g="wait";break;}if(JG)g="none";return g;}}class RD extends fB{var dK;RD(){if(cC.AD==null)throw new UnsupportedError("This browser does not support Web Audio API.");}static  kD( n){var h=new RD();var k=fB.IF(n);var g=new SB.Completer<fB>();VB.HttpRequest.request(k,responseType:'arraybuffer').then((i){var j=i.response;var m=cC.AD;m.decodeAudioData(j,( l){h.dK=l;g.complete(h);},(o){g.completeError(new StateError("Failed to decode audio."));});}).catchError((o){g.completeError(new StateError("Failed to load audio."));});return g.future;} get length{return dK.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new ZB();return new LJ(this,loop,soundTransform);}}class LJ extends MC{var sK;var yK;var fK;var fL;var qL;LJ( j, h, i){sK=j;fK=h;yK=i;var g=cC.AD;fL=g.createGain();fL.connect(g.destination,0,0);fL.gain.value=(yK!=null)?eB.pow(yK.volume,2):1;qL=g.createBufferSource();qL.buffer=sK.dK;qL.loop=h;qL.connect(fL,0,0);qL.start(0);} set JD( g){yK=g;fL.gain.value=(yK!=null)?eB.pow(yK.volume,2):1;} stop(){qL.stop(0);}}class YE extends fB{YE(){}static  kD( g){return new SB.Future<fB>.of(()=>new YE());} get length{return double.NAN;} play([ loop=false, soundTransform]){if(soundTransform==null){soundTransform=new ZB();}return new KJ(this,loop,soundTransform);}}class KJ extends MC{var fK;var yK;KJ( i, h, g){fK=h;yK=g;}set JD( g){yK=g;} stop(){}}class dE{static const  DF="none";static const  SG="touchPoint";}class uF{static const  KG="pixel";}class hB{static const  UD="auto";static const  XD="arrow";static const  YD="button";static const  WG="hand";static const  XG="ibeam";static const  aG="wait";}class tC extends MC{var wK;var gK;var fK;var yK;tC( g, i, h){wK=g;fK=i;yK=h;gK=g.YM(this);gK.loop=fK;this.JD=h;gK.play();} set JD( g){yK=g;if(gK!=null)gK.volume=(yK!=null)?yK.volume:1;} stop(){if(gK!=null){if(gK.ended==false)gK.pause();wK.bN(this);gK=null;}}}class JJ extends HB{var iK="";var vK=0x000000;var OL=null;var dL=xF.DF;var rL=uF.KG;var MK=qF.CG;var EM=false;var JM=false;var LM=0x000000;var SM=false;var WM=0x000000;var aM=0;var dM=0;var gM;var kM;var mM=true;var oM=100;var qM=100;var tM=null;var eK=null;JJ(){OL=new VE("Arial",12,0x000000);gM=new List<String>();kM=new List<XE>();} get type=>MK; get width=>oM; get height=>qM; set text( g){iK=g;mM=true;} set PC( g){OL=g;vK=OL.color;mM=true;} set wordWrap( g){EM=g;mM=true;} set width( g){oM=g;mM=true;} set height( g){qM=g;mM=true;} GC( g,[ returnRectangle]){return MF(g,oM,qM,returnRectangle);} KC( g, h){if(g>=0&&h>=0&&g<oM&&h<qM)return this;return null;} QB( g){PO();g.eK.drawImage(tM,0.0,0.0);} SO(){gM.clear();kM.clear();if(EM==false){gM.add(iK);}else{for(String n in iK.replaceAll('\r','').split('\n')){var h=new StringBuffer();var i=0;var g="";for(String j in n.split(' ')){i=h.length;h.write((i>0)?" ${j}":j);g=h.toString();if(eK.measureText(g).width>oM){if(i>0){g=g.substring(0,i);}else{j="";}gM.add(g);h=new StringBuffer();h.write(j);}}if(h.isEmpty==false){gM.add(h.toString());}}}aM=0;dM=0;for(String g in gM){var l=eK.measureText(g);var m=0;if(OL.align==NC.VD||OL.align==NC.RG)m=(oM-l.width)/2;if(OL.align==NC.vE||OL.align==NC.LG)m=oM-l.width;var k=new XE(m,l.width,OL.size,0,0,0);kM.add(k);aM=eB.max(aM,k.width);dM=dM+k.height;}} PO(){if(mM){mM=false;var j=oM.ceil().toInt();var i=qM.ceil().toInt();if(tM==null){tM=new VB.CanvasElement(width:j,height:i);eK=tM.context2d;}if(tM.width!=j)tM.width=j;if(tM.height!=i)tM.height=i;var g=new StringBuffer();g.write(OL.italic?"italic ":"normal ");g.write("normal ");g.write(OL.bold?"bold ":"normal ");g.write("${OL.size}px ");g.write("${OL.font},sans-serif");eK.font=g.toString();eK.textAlign="start";eK.textBaseline="top";eK.fillStyle=hC(vK);SO();if(JM){eK.fillStyle=hC(LM);eK.fillRect(0,0,oM,qM);}else{eK.clearRect(0,0,oM,qM);}var k=0;for(int h=0;h<gM.length;h++ ){var l=kM[h];eK.fillStyle=hC(vK);eK.fillText(gM[h],l.x,k);k+= l.height;}if(SM){eK.strokeStyle=hC(WM);eK.lineWidth=1;eK.strokeRect(0,0,oM,qM);}}}}class xF{static const  DF="none";}class qF{static const  CG="dynamic";}class ZB{var volume;var pan;var bJ=1;var cJ=0;var fJ=1;var eJ=0;ZB([this.volume=1,this.pan=0]);}class VE{var font;var size;var color;var bold;var italic;var underline;var align;var leftMargin;var rightMargin;var indent;var leading;var letterSpacing=0;var OJ=0;var PJ=false;var aJ=false;VE(this.font,this.size,this.color,{this.bold: false,this.italic: false,this.underline: false,this.align: "left",this.leftMargin: 0,this.rightMargin: 0,this.indent: 0,this.leading: 0});}class fC{static const  DG="exactFit";static const  NG="noBorder";static const  UG="noScale";static const  rE="showAll";}class wF{static const  IG="round";}abstract class MC extends EC{ set JD( g); stop();}final  hE=new vF<List<AB>>(()=>new List<AB>());class WE implements gB{final  lK;var xK=0.0;var JL=0.0;var TL=1;WE( g, h):lK=g{JL=eB.max(h,0.0001);} AC( h){var g=xK+h;while (g>=JL&&TL>0){xK=JL;TL-- ;lK();g-= JL;}xK=g;return (TL>0);} get currentTime=>xK;}abstract class gB{ AC( g);}class TD implements gB{final  qK=new List<gB>();var PL=0;var ZL=0.0; add( g){if(g==null)return;if(this.contains(g))return;if(PL==qK.length){qK.add(g);}else{qK[PL]=g;}PL++ ;} remove( h){if(h==null)return;for(int g=0;g<PL;g++ ){if(qK[g]==h){qK[g]=null;break;}}} contains( h){if(h==null)return false;for(int g=0;g<PL;g++ ){if(qK[g]==h){return true;}}return false;} fI( i){if(i==null)return;for(int g=0;g<PL;g++ ){var h=qK[g];if(h!=null&&h is zG){if(h.BI==i){qK[g]=null;}}}} zH( h, i){var g=new WE(h,i);add(g);return g;} AC( k){ZL+= k;var j=PL;var h=0;for(int g=0;g<j;g++ ){var i=qK[g];if(i==null)continue;if(i.AC(k)==false){qK[g]=null;continue;}if(h!=g){qK[h]=i;qK[g]=null;}h++ ;}if(h!=j){for(int g=j;g<PL;g++ ){qK[h++ ]=qK[g];qK[g]=null;}PL=h;}return true;}}class rF{var name;var arguments;rF(this.name,[this.arguments]);}class zF{var name;var bB;var kF;zF(this.name,this.bB,this.kF);}class eE{final  bK=new List<rF>();clear()=>bK.clear();beginPath()=>bK.add(new rF("beginPath"));closePath()=>bK.add(new rF("closePath"));moveTo( h, g)=>bK.add(new rF("moveTo",[h,g]));lineTo( h, g)=>bK.add(new rF("lineTo",[h,g]));arcTo( k, i, g, h, j)=>bK.add(new rF("arcTo",[k,i,g,h,j]));quadraticCurveTo( j, i, g, h)=>bK.add(new rF("quadraticCurveTo",[j,i,g,h]));bezierCurveTo( h, k, l, i, g, j)=>bK.add(new rF("bezierCurveTo",[h,k,l,i,g,j]));arc( l, g, j, i, h, k)=>bK.add(new rF("arc",[l,g,j,i,h,k]));rect( i, g, h, j)=>bK.add(new rF("rect",[i,g,h,j]));jF( g,[ width=1, joints=sF.IG, caps=wF.IG])=>bK.add(new rF("strokeColor",[cD(g),width,joints,caps]));EI( g)=>bK.add(new rF("fillColor",[cD(g)])); QB( k){var h=k.context;h.save();for(var j in bK){var g=j.arguments;switch (j.name){case "beginPath":h.beginPath();break;case "closePath":h.closePath();break;case "moveTo":h.moveTo(g[0],g[1]);break;case "lineTo":h.lineTo(g[0],g[1]);break;case "arcTo":h.arcTo(g[0],g[1],g[2],g[3],g[4]);break;case "quadraticCurveTo":h.quadraticCurveTo(g[0],g[1],g[2],g[3]);break;case "bezierCurveTo":h.bezierCurveTo(g[0],g[1],g[2],g[3],g[4],g[5]);break;case "arc":h.arc(g[0],g[1],g[2],g[3],g[4],g[5]);break;case "rect":h.rect(g[0],g[1],g[2],g[3]);break;case "strokeColor":h.strokeStyle=g[0];h.lineWidth=g[1];h.lineJoin=g[2];h.lineCap=g[3];h.stroke();break;case "strokeGradient":h.strokeStyle=g[0].UO(h);h.lineWidth=g[1];h.lineJoin=g[2];h.lineCap=g[3];h.stroke();break;case "strokePattern":h.strokeStyle=g[0].WO(h);h.lineWidth=g[1];h.lineJoin=g[2];h.lineCap=g[3];LB i=g[0].pK;if(i!=null){h.save();h.transform(i.a,i.b,i.c,i.d,i.cB,i.dB);h.stroke();h.restore();}else{h.stroke();}break;case "fillColor":h.fillStyle=g[0];h.fill();break;case "fillGradient":h.fillStyle=g[0].XJ(h);h.fill();break;case "fillPattern":h.fillStyle=g[0].YJ(h);LB i=g[0].pK;if(i!=null){h.save();h.transform(i.a,i.b,i.c,i.d,i.cB,i.dB);h.fill();h.restore();}else{h.fill();}break;}}h.restore();}}class GB{var x;var y;GB(this.x,this.y);GB.hJ():this(0,0); get length=>eB.sqrt(this.x*this.x+this.y*this.y); add( g)=>new GB(this.x+g.x,this.y+g.y); FD( g){this.x=g.x;this.y=g.y;} equals( g)=>this.x==g.x&&this.y==g.y;}class EB{var x;var y;var width;var height;EB(this.x,this.y,this.width,this.height);EB.hJ():this(0,0,0,0); get left=>this.x; get top=>this.y; get right=>this.x+this.width; get bottom=>this.y+this.height; get size=>new GB(this.width,this.height); set top( g){this.y=g;} contains( g, h)=>(this.x<=g&&this.y<=h&&this.right>=g&&this.bottom>=h); equals( g)=>(this.x==g.x&&this.y==g.y&&this.width==g.width&&this.height==g.height); get isEmpty=>(this.width==0&&this.height==0); FD( g){this.x=g.x;this.y=g.y;this.width=g.width;this.height=g.height;} union( g){var i=eB.min(this.left,g.left);var j=eB.min(this.top,g.top);var h=eB.max(this.right,g.right);var k=eB.max(this.bottom,g.bottom);return new EB(i,h,h-i,k-j);}}class pF{var x;var y;var dF;pF(this.x,this.y,this.dF);}class LB{var NK,OK,QK,SK,WK,aK;var oK;LB.lJ():NK=1.0,OK=0.0,QK=0.0,SK=1.0,WK=0.0,aK=0.0,oK=1.0; get a=>NK; get b=>OK; get c=>QK; get d=>SK; get cB=>WK; get dB=>aK; get XC=>oK; lI( h){var i=h.x.toDouble();var g=h.y.toDouble();return new GB(i*NK+g*QK+WK,i*OK+g*SK+aK);} gN( h){var i=h.x.toDouble();var g=h.y.toDouble();return new GB(i*NK+g*QK+WK,i*OK+g*SK+aK);} concat( g){var m=NK;var p=OK;var q=QK;var o=SK;var l=WK;var n=aK;var u=oK;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var v=g.cB;var t=g.dB;var CB=g.XC;NK=(m*j+p*i).toDouble();OK=(m*k+p*h).toDouble();QK=(q*j+o*i).toDouble();SK=(q*k+o*h).toDouble();WK=(l*j+n*i+v).toDouble();aK=(l*k+n*h+t).toDouble();oK=(u*CB).toDouble();} TI(){NK=1.0;OK=0.0;QK=0.0;SK=1.0;WK=0.0;aK=0.0;oK=1.0;} UF(){var j=NK;var m=OK;var l=QK;var k=SK;var h=WK;var i=aK;var g=oK;NK=(k/g).toDouble();OK=-(m/g).toDouble();QK=-(l/g).toDouble();SK=(j/g).toDouble();WK=-(NK*h+QK*i).toDouble();aK=-(OK*h+SK*i).toDouble();oK=(1.0/g).toDouble();} oC( h, i, g, k, j, l){NK=h.toDouble();OK=i.toDouble();QK=g.toDouble();SK=k.toDouble();WK=j.toDouble();aK=l.toDouble();oK=(NK*SK-OK*QK).toDouble();} FD( g){NK=g.a.toDouble();OK=g.b.toDouble();QK=g.c.toDouble();SK=g.d.toDouble();WK=g.cB.toDouble();aK=g.dB.toDouble();oK=g.XC.toDouble();} PF( h, g){var n=h.a;var q=h.b;var t=h.c;var p=h.d;var m=h.cB;var o=h.dB;var v=h.XC;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var CB=g.cB;var u=g.dB;var DB=g.XC;NK=(n*k+q*j).toDouble();OK=(n*l+q*i).toDouble();QK=(t*k+p*j).toDouble();SK=(t*l+p*i).toDouble();WK=(m*k+o*j+CB).toDouble();aK=(m*l+o*i+u).toDouble();oK=(v*DB).toDouble();}}class tF{var PK;var hK;var rK;var KL;var bL;tF(){PK=new TD();hK=new List<kC>();rK=double.NAN;KL=uC.sE;bL=new dC(0);VB.window.requestAnimationFrame(ZM);} get UI=>PK; ZM( g){VB.window.requestAnimationFrame(ZM);if(rK.isNaN)rK=g;if(rK>g)rK=g;var j=g-rK;var i=j/1000.0;if(j>=1){rK=g;bL.XK=i;KL.EN(bL);PK.AC(i);for(int h=0;h<hK.length;h++ ){var k=hK[h];k.VF();}}} uH( g){hK.add(g);}}class YB{final  eK;final  DL=new List<LB>(100);final  aL=new List<double>(100);var lL=0;YB.jJ( j,[ matrix]):eK=j{for(int h=0;h<100;h++ ){DL[h]=new LB.lJ();aL[h]=1.0;}if(matrix!=null)DL[0].FD(matrix);var g=DL[0];var i=aL[0];eK.setTransform(g.a,g.b,g.c,g.d,g.cB,g.dB);eK.globalAlpha=i;} get context=>eK; reset([ matrix]){if(matrix!=null)DL[0].FD(matrix);lL=0;var g=DL[0];var h=aL[0];eK.setTransform(g.a,g.b,g.c,g.d,g.cB,g.dB);eK.globalAlpha=h;eK.clearRect(0,0,eK.canvas.width,eK.canvas.height);} eF( h){var i=lL;var j=lL+1;var n=DL[i];var g=DL[j];var o=aL[i];var m=aL[j]=h.XM*o;g.PF(h.lN,n);eK.setTransform(g.a,g.b,g.c,g.d,g.cB,g.dB);eK.globalAlpha=m;lL=j;var k=h.eM;var l=h.hM;if(k!=null){eK.save();k.QB(this);}if(l!=null){l.QB(this);}else{h.QB(this);}if(k!=null){eK.restore();}lL=i;}}class IB{static const  GG="added";static const  PG="addedToStage";static const  ZD="enterFrame";static const  YG="removed";static const  dG="removedFromStage";static const  hG="resize";var MK;var UN;var JN;var BL;var XN;var MN;var QN;IB( g,[ bubbles=false]){rM(g,bubbles);} rM( g,[ bubbles=false]){MK=g;UN=bubbles;JN=LC.xC;BL=null;XN=null;MN=false;QN=false;} get LD=>MN; get type=>MK; get bubbles=>UN; get BE=>true; get target=>BL;}class LC{static const  gE=1;static const  xC=2;static const  QG=3;}class EC{var cK; SI( g){if(cK!=null)return cK.containsKey(g)||cK.containsKey("${g}_CAPTURE");else return false;} dispatchEvent( g){ZN(g,this,this,LC.xC);} ZN( g, k, l, i){if(cK!=null){var j=(i==LC.gE)?"${g.type}_CAPTURE":g.type;var h=cK[j];if(h!=null){g.BL=k;g.XN=l;g.JN=i;g.MN=false;g.QN=false;h.EN(g);}}} vL( g, j){if(cK==null)cK=new Map<String,eC>();var i=j?"${g}_CAPTURE":g;var h=cK[i];if(h==null)h=cK[i]=new eC(this,g,j);return h;}}class uC<gC extends IB>{final  cK=new List<eC>();var RL=0;static var sE=new uC<dC>(); QM( g){for(int h=0;h<RL;h++ )if(cK[h]==g)return;if(RL==cK.length)cK.add(g);else cK[RL]=g;RL++ ;} EN( j){j.JN=LC.xC;j.MN=false;j.QN=false;var k=RL;var i=0;for(int g=0;g<k;g++ ){var h=cK[g];if(h==null)continue;if(h.CM==0){cK[g]=null;continue;}j.BL=h.BL;j.XN=h.BL;h.EN(j);if(i!=g){cK[i]=h;cK[g]=null;}i++ ;}if(i!=k){for(int g=k;g<RL;g++ ){cK[i++ ]=cK[g];cK[g]=null;}RL=i;}}}class cC{static var iG=BH();static var AD=MH();static var BF=NH();static  BH(){var h=(AD!=null)?"WebAudioApi":"AudioElement";var g=VB.window.navigator.userAgent;if(g.contains("IEMobile"))if(g.contains("9.0")||g.contains("10.0"))h="Mock";if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod"))if(g.contains("OS 3")||g.contains("OS 4")||g.contains("OS 5"))h="Mock";if(BF.length==0)h="Mock";print("StageXL: supported audio engine is: ${h}");return h;}static  MH(){if(UE.AudioContext.supported)return new UE.AudioContext();return null;}static  NH(){var g=new List<String>();var h=new VB.AudioElement();var i=["maybe","probably"];if(i.indexOf(h.canPlayType("audio/ogg",""))!=-1)g.add("ogg");if(i.indexOf(h.canPlayType("audio/mpeg",""))!=-1)g.add("mp3");if(i.indexOf(h.canPlayType("audio/wav",""))!=-1)g.add("wav");print("StageXL: supported audio types are: ${g}");return g;}}class iB<gC extends IB>{final  nK;const iB(this.nK); forTarget( g,{ useCapture: false}){return g.vL(nK,useCapture);}}class yF extends HB{yF();}class dC extends IB{var XK;dC( g):super(IB.ZD,false){XK=g;} get bF=>XK; get BE=>false;}class w extends IB{static const  iE="click";static const  OG="doubleClick";static const  nE="mouseDown";static const  uE="mouseUp";static const  xE="mouseMove";static const  yE="mouseOut";static const  zE="mouseOver";static const  AF="mouseWheel";static const  CF="middleClick";static const  qG="middleMouseDown";static const  tG="middleMouseUp";static const  EF="rightClick";static const  yG="rightMouseDown";static const  DH="rightMouseUp";var CN,DN;var HN,IN;var aN;var MM;var bM;var PM;var TM;var cN;var dN;var eN;w( g,[ bubbles=false]):super(g,bubbles){rM(g,bubbles);} rM( g,[ bubbles=false]){super.rM(g,bubbles);CN=DN=0;HN=IN=0;aN=false;MM=false;bM=false;PM=false;TM=false;cN=0;dN=0;eN=0;}set fN( g){CN=g.x;DN=g.y;}set jN( g){HN=g.x;IN=g.y;} get FC=>aN; get altKey=>MM; get ctrlKey=>PM; get shiftKey=>TM; get lC=>cN; get deltaX=>dN; get deltaY=>eN;}class vB extends IB{static const  WD="keyDown";static const  lE="keyUp";var MM;var PM;var TM;var VM;var bM;var fM;var iM;var jM;vB( g,[ bubbles=false]):super(g,bubbles){rM(g,bubbles);} rM( g,[ bubbles=false]){super.rM(g,bubbles);MM=false;PM=false;TM=false;VM=false;bM=false;fM=0;iM=0;jM=0;} get altKey=>MM; get ctrlKey=>PM; get shiftKey=>TM; get charCode=>fM; get keyCode=>iM; get keyLocation=>jM;}class aE extends IB{static const  MG="textInput";var iK="";aE( g,[ bubbles=false]):super(g,bubbles){}}class PB extends IB{static const  jE="touchBegin";static const  mE="touchEnd";static const  oE="touchCancel";static const  wE="touchMove";static const  eG="touchOver";static const  gG="touchOut";var yM;var AN;var CN,DN;var HN,IN;var MM;var bM;var PM;var TM;var NN;var PN;var RN;PB( g,[ bubbles=false]):super(g,bubbles){rM(g,bubbles);} rM( g,[ bubbles=false]){super.rM(g,bubbles);yM=0;AN=false;CN=DN=0;HN=IN=0;MM=false;bM=false;PM=false;TM=false;NN=1.00;PN=0;RN=0;}set fN( g){CN=g.x;DN=g.y;}set jN( g){HN=g.x;IN=g.y;} get MD=>yM; get altKey=>MM; get ctrlKey=>PM; get shiftKey=>TM;}abstract class VC{ apply( h, i, j, g);}class HJ extends VC{var blurX;var blurY;HJ([this.blurX=4,this.blurY=4]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} apply( SC, q, HC, qB){var IC=SC.YN();var JB=IC.getImageData(q.x,q.y,q.width,q.height);var rB=JB.data;var v=JB.width;var WB=JB.height;var XB=blurX*blurX;var sB=blurY*blurY;var CC=(1<<22)~/XB;var TC=(1<<22)~/sB;var l=blurX;var tB=blurX*2;var u=blurY;var uB=blurY*2;var KB=v+tB;var CB=WB+uB;var DC=v*4;var DB=KB*4;var RB=HC.YN();var NB=RB.createImageData(KB,CB);var t=NB.data;var j=new List<int>(1024);PH(rB);for(int i=0;i<4;i++ ){for(int h=0;h<v;h++ ){var k=0,m=sB>>1;var n=h*4+i;var o=(h+l)*4+i;for(int g=0;g<CB;g++ ){t[o]=(m*TC)>>22;o+= DB;if(g>=uB){k-= 2*j[g&1023]-j[(g-u)&1023];}else if(g>=u){k-= 2*j[g&1023];}var p=(g<WB)?rB[n]:0;j[(g+u)&1023]=p;m+= k+= p;n+= DC;}}}for(int i=0;i<4;i++ ){for(int g=0;g<CB;g++ ){var k=0,m=XB>>1;var n=g*DB+l*4+i;var o=g*DB+i;for(int h=0;h<KB;h++ ){t[o]=(m*CC)>>22;o+= 4;if(h>=tB){k-= 2*j[h&1023]-j[(h-l)&1023];}else if(h>=l){k-= 2*j[h&1023];}var p=(h<v)?t[n]:0;j[(h+l)&1023]=p;m+= k+= p;n+= 4;}}}WH(t);RB.putImageData(NB,qB.x-l,qB.y-u);}}class EJ extends VC{final  pK;EJ.nJ():pK=[0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0,0,0,1,0];EJ.oJ():pK=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]; apply( HC, m, IC, CC){var q=HC.YN().getImageData(m.x,m.y,m.width,m.height);var h=q.data;var qB=(pK[00]*65536).toInt();var NB=(pK[01]*65536).toInt();var DC=(pK[02]*65536).toInt();var p=(pK[03]*65536).toInt();var rB=(pK[04]*65536).toInt();var tB=(pK[05]*65536).toInt();var RB=(pK[06]*65536).toInt();var uB=(pK[07]*65536).toInt();var v=(pK[08]*65536).toInt();var n=(pK[09]*65536).toInt();var t=(pK[10]*65536).toInt();var u=(pK[11]*65536).toInt();var WB=(pK[12]*65536).toInt();var sB=(pK[13]*65536).toInt();var DB=(pK[14]*65536).toInt();var CB=(pK[15]*65536).toInt();var XB=(pK[16]*65536).toInt();var JB=(pK[17]*65536).toInt();var o=(pK[18]*65536).toInt();var KB=(pK[19]*65536).toInt();if(OC){for(int g=0;g<=h.length-4;g+= 4){var k=h[g+0];var l=h[g+1];var j=h[g+2];var i=h[g+3];h[g+0]=((qB*k)+(NB*l)+(DC*j)+(p*i)+rB)>>16;h[g+1]=((tB*k)+(RB*l)+(uB*j)+(v*i)+n)>>16;h[g+2]=((t*k)+(u*l)+(WB*j)+(sB*i)+DB)>>16;h[g+3]=((CB*k)+(XB*l)+(JB*j)+(o*i)+KB)>>16;}}else{for(int g=0;g<=h.length-4;g+= 4){var i=h[g+0];var j=h[g+1];var l=h[g+2];var k=h[g+3];h[g+0]=((CB*k)+(XB*l)+(JB*j)+(o*i)+KB)>>16;h[g+1]=((t*k)+(u*l)+(WB*j)+(sB*i)+DB)>>16;h[g+2]=((tB*k)+(RB*l)+(uB*j)+(v*i)+n)>>16;h[g+3]=((qB*k)+(NB*l)+(DC*j)+(p*i)+rB)>>16;}}IC.YN().putImageData(q,CC.x,CC.y);}}class FJ extends VC{var distance;var angle;var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;FJ([this.distance=4.0,this.angle=eB.PI/4,this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=1.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} apply( LE, m, ME, CB){var qB=LE.YN();var NE=qB.getImageData(m.x,m.y,m.width,m.height);var OE=NE.data;var p=m.width;var WB=m.height;var TC=blurX*blurX;var DC=blurY*blurY;var PE=(1<<22)~/TC;var QE=(1<<22)~/DC;var n=blurX;var SC=blurX*2;var DB=blurY;var CC=blurY*2;var KB=p+SC;var RB=WB+CC;var RE=p*4;var XB=KB*4;var NB=OC?3:0;var v=ME.YN();var rB=v.createImageData(KB,RB);var h=rB.data;var k=new List<int>(1024);for(int i=0;i<p;i++ ){var l=0,t=DC>>1;var u=i*4+NB;var o=(i+n)*4+NB;for(int j=0;j<RB;j++ ){h[o]=(t*QE)>>22;o+= XB;if(j>=CC){l-= 2*k[j&1023]-k[(j-DB)&1023];}else if(j>=DB){l-= 2*k[j&1023];}var q=(j<WB)?OE[u]:0;k[(j+DB)&1023]=q;t+= l+= q;u+= RE;}}for(int j=0;j<RB;j++ ){var l=0,t=TC>>1;var u=j*XB+n*4+NB;var o=j*XB+NB;for(int i=0;i<KB;i++ ){h[o]=(t*PE)>>22;o+= 4;if(i>=SC){l-= 2*k[i&1023]-k[(i-n)&1023];}else if(i>=n){l-= 2*k[i&1023];}var q=(i<p)?h[u]:0;k[(i+n)&1023]=q;t+= l+= q;u+= 4;}}var tB=(alpha*256).toInt();var qC=(color>>16)&0xFF;var rC=(color>>8)&0xFF;var sB=(color>>0)&0xFF;if(OC){for(var g=0;g<=h.length-4;g+= 4){h[g+0]=qC;h[g+1]=rC;h[g+2]=sB;h[g+3]=(h[g+3]*tB)>>8;}}else{for(var g=0;g<=h.length-4;g+= 4){h[g+0]=(h[g+0]*tB)>>8;h[g+1]=sB;h[g+2]=rC;h[g+3]=qC;}}var HC=CB.x;var uB=CB.y;var IC=CB.x-n+(this.distance*eB.cos(this.angle)).round().toInt();var sC=CB.y-DB+(this.distance*eB.sin(this.angle)).round().toInt();var SE=new EB(HC,uB,p,WB);var TE=new EB(IC,sC,KB,RB);var JB=SE.union(TE);v.setTransform(1,0,0,1,0,0);v.clearRect(JB.x,JB.y,JB.width,JB.height);v.putImageData(rB,IC,sC);if(this.hideObject==false)v.drawImage(qB.canvas,HC,uB);}}class GJ extends VC{var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;GJ([this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=2.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} apply( LE, m, ME, CB){var qB=LE.YN();var NE=qB.getImageData(m.x,m.y,m.width,m.height);var OE=NE.data;var p=m.width;var WB=m.height;var TC=blurX*blurX;var DC=blurY*blurY;var PE=(1<<22)~/TC;var QE=(1<<22)~/DC;var n=blurX;var SC=blurX*2;var DB=blurY;var CC=blurY*2;var KB=p+SC;var RB=WB+CC;var RE=p*4;var XB=KB*4;var NB=OC?3:0;var v=ME.YN();var rB=v.createImageData(KB,RB);var h=rB.data;var k=new List<int>(1024);for(int i=0;i<p;i++ ){var l=0,t=DC>>1;var u=i*4+NB;var o=(i+n)*4+NB;for(int j=0;j<RB;j++ ){h[o]=(t*QE)>>22;o+= XB;if(j>=CC){l-= 2*k[j&1023]-k[(j-DB)&1023];}else if(j>=DB){l-= 2*k[j&1023];}var q=(j<WB)?OE[u]:0;k[(j+DB)&1023]=q;t+= l+= q;u+= RE;}}for(int j=0;j<RB;j++ ){var l=0,t=TC>>1;var u=j*XB+n*4+NB;var o=j*XB+NB;for(int i=0;i<KB;i++ ){h[o]=(t*PE)>>22;o+= 4;if(i>=SC){l-= 2*k[i&1023]-k[(i-n)&1023];}else if(i>=n){l-= 2*k[i&1023];}var q=(i<p)?h[u]:0;k[(i+n)&1023]=q;t+= l+= q;u+= 4;}}var tB=(alpha*256).toInt();var qC=(color>>16)&0xFF;var rC=(color>>8)&0xFF;var sB=(color>>0)&0xFF;if(OC){for(var g=0;g<=h.length-4;g+= 4){h[g+0]=qC;h[g+1]=rC;h[g+2]=sB;h[g+3]=(h[g+3]*tB)>>8;}}else{for(var g=0;g<=h.length-4;g+= 4){h[g+0]=(h[g+0]*tB)>>8;h[g+1]=sB;h[g+2]=rC;h[g+3]=qC;}}var HC=CB.x;var uB=CB.y;var IC=CB.x-n;var sC=CB.y-DB;var SE=new EB(HC,uB,p,WB);var TE=new EB(IC,sC,KB,RB);var JB=SE.union(TE);v.setTransform(1,0,0,1,0,0);v.clearRect(JB.x,JB.y,JB.width,JB.height);v.putImageData(rB,IC,sC);if(this.hideObject==false)v.drawImage(qB.canvas,HC,uB);}}class eC<gC extends IB> extends SB.Stream<gC>{final  BL;final  nK;final  YL;final  nL=new List<FG>();var CM=0;eC(this.BL,this.nK,this.YL); get isBroadcast=>true; asBroadcastStream()=>this; listen( h( event),{ onError( error), onDone(), unsubscribeOnError}){var g=new FG<gC>(this,h);if(CM==nL.length)nL.add(g);else nL[CM]=g;CM++ ;if(nK==IB.ZD&&YL==false)uC.sE.QM(this);return g;} lM( h){for(int g=0;g<CM;g++ ){if(nL[g]==h){nL[g]=null;break;}}} EN( k){var j=CM;var h=0;for(int g=0;g<j;g++ ){var i=nL[g];if(i==null)continue;i.pL(k);if(h!=g){nL[h]=i;nL[g]=null;}h++ ;}if(h!=j){for(int g=j;g<CM;g++ ){nL[h++ ]=nL[g];nL[g]=null;}CM=h;}}}abstract class HB extends AB{var CI=false;var ZF=true;var gJ=true;var tabIndex=0;static const  bG=const iB<w>(w.yE);static const  kG=const iB<w>(w.zE);static const  rG=const iB<w>(w.xE);static const  vG=const iB<w>(w.nE);static const  EH=const iB<w>(w.uE);static const  SH=const iB<w>(w.AF); get onMouseOut=>HB.bG.forTarget(this); get onMouseOver=>HB.kG.forTarget(this); get onMouseMove=>HB.rG.forTarget(this); get onMouseDown=>HB.vG.forTarget(this); get onMouseUp=>HB.EH.forTarget(this); get onMouseWheel=>HB.SH.forTarget(this);static const  bH=const iB<PB>(PB.wE);static const  dH=const iB<PB>(PB.mE);static const  fH=const iB<PB>(PB.oE); get onTouchMove=>HB.bH.forTarget(this); get onTouchEnd=>HB.dH.forTarget(this); get onTouchCancel=>HB.fH.forTarget(this);static const  jH=const iB<vB>(vB.lE);static const  kH=const iB<vB>(vB.WD); get onKeyUp=>HB.jH.forTarget(this); get onKeyDown=>HB.kH.forTarget(this);}abstract class UB extends HB{final  IL=new List<AB>();var cL=true;var jL=true; get HE=>IL.length; BB( g){if(g.parent==this){var h=IL.indexOf(g);IL.removeAt(h);IL.add(g);}else{zD(g,IL.length);}} zD( g, h){if(h<0||h>IL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){IL.removeAt(IL.indexOf(g));if(h>IL.length)h-- ;IL.insert(h,g);}else{g.IE();g.nN(this);IL.insert(h,g);g.dispatchEvent(new IB(IB.GG,true));if(this.KD!=null)vN(g,new IB(IB.PG));}} dI( h){var g=IL.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");eI(g);} eI( g){if(g<0||g>=IL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=IL[g];h.dispatchEvent(new IB(IB.YG,true));if(this.KD!=null)vN(h,new IB(IB.dG));h.nN(null);IL.removeAt(g);} LI( g){if(g<0||g>=IL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");return IL[g];} contains( g){for(;g!=null;g=g.nM)if(g==this)return true;return false;} GC( n,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new EB.hJ();if(IL.length==0)return super.GC(n,returnRectangle);var h=double.INFINITY;var i=double.INFINITY;var k=double.NEGATIVE_INFINITY;var j=double.NEGATIVE_INFINITY;var o=IL.length;for(int l=0;l<IL.length;l++ ){var m=IL[l];pM.PF(m.lN,n);var g=m.GC(pM,returnRectangle);if(g.left<h)h=g.left;if(g.top<i)i=g.top;if(g.right>k)k=g.right;if(g.bottom>j)j=g.bottom;}returnRectangle.x=h;returnRectangle.y=i;returnRectangle.width=k-h;returnRectangle.height=j-i;return returnRectangle;} KC( o, p){var l=null;for(int j=IL.length-1;j>=0;j-- ){var i=IL[j];if(i.visible){var g=i.lN;var m=o-g.cB;var k=p-g.dB;var q=(g.d*m-g.c*k)/g.XC;var n=(g.a*k-g.b*m)/g.XC;var h=i.KC(q,n);if(h!=null){if(h is HB)if(h.ZF)return cL?h:this;l=this;}}}return l;} QB( i){for(int g=0;g<IL.length;g++ ){var h=IL[g];if(h.visible)i.eF(h);}} vN( g, j){g.dispatchEvent(j);if(g is UB){var i=new List<AB>.from(g.IL,growable:false);for(int h=0;h<i.length;h++ )vN(i[h],j);}}}class sF{static const  IG="round";}class NC{static const  VD="center";static const  LG="end";static const  RG="justify";static const  vE="right";}class XE{var wH;var AI;var height;var leading;var width;var x;XE(this.x,this.width,this.height,this.wH,this.AI,this.leading);}class IJ extends AB{var ZK;IJ(){ZK=new eE();} get RI=>ZK; GC( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new EB.hJ();returnRectangle.x=g.cB;returnRectangle.y=g.dB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} KC( g, h){return null;} QB( g){ZK.QB(g);}}class UC{static const  BG=0;static const  HG=1;static const  vE=2;static const  TG=3;static const  qE=4;}abstract class WC{ QB( g);}class bE extends UB{var QJ=false;var KE=false;}class vC extends AB{var bitmapData;var pixelSnapping;var DE;vC([this.bitmapData=null,this.pixelSnapping="auto"]){DE=null;} GC( h,[ returnRectangle]){var g=(bitmapData!=null)?bitmapData.width:0;var i=(bitmapData!=null)?bitmapData.height:0;return MF(h,g,i,returnRectangle);} KC( g, h){if(bitmapData!=null&&g>=0.0&&h>=0.0&&g<bitmapData.width&&h<bitmapData.height)return this;return null;} QB( g){if(bitmapData!=null){if(DE==null)bitmapData.QB(g);else bitmapData.gI(g,DE);}}}abstract class fB{static  kD( g){var h=cC.iG;if(h=="WebAudioApi")return RD.kD(g);if(h=="AudioElement")return SD.kD(g);return YE.kD(g);} get length; play([ loop=false, soundTransform]);static  IF( g){var m=new RegExp(r"\.(ogg|mp3|wav)$",multiLine:false,caseSensitive:false);var i=m.firstMatch(g);var h=cC.BF;if(i==null)throw new ArgumentError("Unsupported file extension.");if(h.length==0)throw new UnsupportedError("This browser supports no known audio codec.");var j=i.group(1).toLowerCase();if(h.indexOf(j)==-1){var l=g.substring(0,g.length-j.length);var k=h[0];g="${l}${k}";}return g;}}class cE{var MK;var TK;var mK;var CL;cE.iJ( i, g, h, j){MK=0;TK=new EB(i,g,h,j);}cE.kJ( i, g, h){MK=1;mK=new pF(i,g,h);}cE.mJ( g){MK=2;CL=g;if(CL.length<3)throw new ArgumentError("A custom mask needs at least 3 points.");} QB( i){var g=i.context;g.beginPath();switch (MK){case 0:g.rect(TK.x,TK.y,TK.width,TK.height);break;case 1:g.arc(mK.x,mK.y,mK.dF,0,eB.PI*2.0,false);break;case 2:g.moveTo(CL[0].x,CL[0].y);for(int h=1;h<CL.length;h++ )g.lineTo(CL[h].x,CL[h].y);break;}g.clip();}}class MB implements WC{var kK;var uK;var GL;var UL;var eK;var oL;var tL;var yL;var zK;var HL;var ML;var WL;MB( g, h,[ transparent=true, fillColor=0xFFFFFFFF]){kK=g;uK=h;GL=transparent;var i=new VB.CanvasElement(width:kK,height:uK);eK=i.context2d;eK.fillStyle=GL?cD(fillColor):hC(fillColor);eK.fillRect(0,0,g,h);UL=i;oL=0;tL=0;yL=0;}MB.pJ( g){if(g==null)throw new ArgumentError();kK=g.naturalWidth;uK=g.naturalHeight;GL=true;UL=g;oL=0;tL=0;yL=0;}MB.qJ( g){kK=g.ZI;uK=g.YI;GL=true;UL=g.kI.HD;oL=g.iI?2:1;tL=g.offsetX;yL=g.offsetY;zK=g.JI;HL=g.KI;ML=g.II;WL=g.GI;}static  kD( i){var h=new SB.Completer<MB>();var g=new VB.ImageElement();g.onLoad.listen((j)=>h.complete(new MB.pJ(g)));g.onError.listen((j)=>h.completeError(new StateError("Error loading image.")));g.src=i;return h.future;} get width=>kK; get height=>uK; vH( i, j, g, h){h.apply(i,j,this,g);} clear(){var g=YN();g.clearRect(0,0,kK,uK);} QB( h){var g=h.context;switch (oL){case 0:g.drawImage(UL,tL,yL);break;case 1:g.drawImageScaledFromSource(UL,zK,HL,ML,WL,tL,yL,ML,WL);break;case 2:g.transform(0.0,-1.0,1.0,0.0,tL,yL+WL);g.drawImageScaledFromSource(UL,zK,HL,WL,ML,0,0,WL,ML);break;}} gI( NB, g){var v=NB.context;if(g.width<=0.0||g.height<=0.0)return;switch (oL){case 0:v.drawImageScaledFromSource(UL,g.x-tL,g.y-yL,g.width,g.height,g.x+tL,g.y+yL,g.width,g.height);break;case 1:var j=zK;var h=HL;var p=j+ML;var q=h+WL;var l=zK-tL+g.x;var m=HL-yL+g.y;var u=l+g.width;var t=m+g.height;var o=(j>l)?j:l;var n=(h>m)?h:m;var CB=(p<u)?p:u;var KB=(q<t)?q:t;var JB=tL-j+o;var DB=yL-h+n;var k=CB-o;var i=KB-n;if(k>0.0&&i>0.0){v.drawImageScaledFromSource(UL,o,n,k,i,JB,DB,k,i);}break;case 2:var j=zK;var h=HL;var p=j+WL;var q=h+ML;var l=zK+yL-g.y+WL-g.height;var m=HL-tL+g.x;var u=l+g.height;var t=m+g.width;var o=(j>l)?j:l;var n=(h>m)?h:m;var CB=(p<u)?p:u;var KB=(q<t)?q:t;var JB=tL-h+n;var DB=yL+p-CB;var k=KB-n;var i=CB-o;if(k>0.0&&i>0.0){v.transform(0.0,-1.0,1.0,0.0,JB,DB+i);v.drawImageScaledFromSource(UL,o,n,i,k,0,0,i,k);}break;}} YN(){if(eK==null){var g=new VB.CanvasElement(width:kK,height:uK);eK=g.context2d;switch (oL){case 0:eK.drawImage(UL,tL,yL);break;case 1:eK.drawImageScaledFromSource(UL,zK,HL,ML,WL,tL,yL,ML,WL);break;case 2:eK.setTransform(0.0,-1.0,1.0,0.0,tL,yL+WL);eK.drawImageScaledFromSource(UL,zK,HL,WL,ML,0,0,WL,ML);eK.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);break;}UL=g;oL=0;tL=0;yL=0;}return eK;}}typedef  AG<gC extends IB>( event);class FG<gC extends IB> extends SB.StreamSubscription<gC>{var gL;var pL;var sL;var xL;FG(this.gL,this.pL){sL=0;xL=false;} cancel(){if(xL==false){gL.lM(this);xL=true;pL=null;}} onError( g( error)){} get VN=>sL>0; pause([ resumeSignal]){sL++ ;if(resumeSignal!=null)resumeSignal.whenComplete(resume);} resume(){if(VN==false)throw new StateError("Subscription is not paused.");sL-- ;}}class kE{var SL;kE(){SL=new Map<String,wC>();} NM( g){var j=g.kind;var h=g.name;var i="${j}.${h}";if(SL.containsKey(i))throw new StateError("ResourceManager already contains a resource called '${h}'");SL[i]=g;} vM( i, g){var h="${i}.${g}";if(SL.containsKey(h)==false)throw new StateError("ResourceManager does not contains a resource called '${g}'");return SL[h];} lB( i, h){var g=new wC("BitmapData",i,h);g.uM(MB.kD(h));NM(g);} FB( i, h){var g=new wC("Sound",i,h);g.uM(fB.kD(h));NM(g);} AE( j, h, i){var g=new wC("TextureAtlas",j,h);g.uM(wB.kD(h,i));NM(g);} tH( i, h){var g=new wC("FlumpLibrary",i,h);g.uM(yB.kD(h));NM(g);} load(){var h=this.aI.map((i)=>i.FL);return SB.Future.wait(h).then((j){var g=this.DI;if(g.length>0)throw new StateError("Failed to load ${g.length} resource(s).");return this;});} get aI{return SL.values.where((g)=>g.mC==null).toList();} get DI{return SL.values.where((g)=>g.error!=null).toList();} JC( g){return vM("BitmapData",g).mC;} SF( g){return vM("Sound",g).mC;} TF( g){return vM("TextureAtlas",g).mC;} MI( g){return vM("FlumpLibrary",g).mC;}} hC( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";}class yB{var tK;var hL;var kL;final  wL=new List<xD>();final  HM=new List<rH>();static  kD( l){var i=new SB.Completer<yB>();VB.HttpRequest.getString(l).then((p){var h=mF.parse(p) as Map;var j=new List();var g=new yB();g.tK=l;g.hL=h["md5"];g.kL=h["frameRate"].toInt();for(var m in h["movies"] as List){var n=new xD(m,g);g.wL.add(n);}for(var o in h["textureGroups"] as List){var k=new rH(o,g);g.HM.add(k);j.add(k.ED.future);}SB.Future.wait(j).then((t){i.complete(g);}).catchError((q){i.completeError(new StateError("Failed to load image."));});}).catchError((q){i.completeError(new StateError("Failed to load json file."));});return i.future;} hN( h){for(var g in wL)if(g.id==h)return g;throw new ArgumentError("The movie '${h}' is not available.");} sN( g){for(var h in HM){if(h.GD.containsKey(g)){return h.GD[g];}}for(var i in wL){if(i.id==g){return new MJ(this,g);}}throw new ArgumentError("The symbol '${g}' is not available.");}}abstract class AB extends EC implements WC{var zL=0.0;var BM=0.0;var DM=0.0;var FM=0.0;var IM=1.0;var KM=1.0;var OM=0.0;var RM=0.0;var UM=0.0;var XM=1.0;var cM=true;var eM=null;var hM=null;var RK="";var nM=null;final  pM=new LB.lJ();final  sM=new LB.lJ();final  wM=new LB.lJ();var zM=true;static const  OH=const iB<dC>(IB.ZD); get VI=>AB.OH.forTarget(this); get x=>zL; get y=>BM; get jB=>DM; get nB=>FM; get oB=>IM; get pB=>KM; get skewX=>OM; get skewY=>RM; get nC=>UM; get alpha=>XM; get visible=>cM; get name=>RK; get parent=>nM; get root{var g=this;while (g.nM!=null)g=g.nM;return g;} get KD{var g=this.root;if(g is kC)return g;return null;}set x( g){zL=g.toDouble();zM=true;}set y( g){BM=g.toDouble();zM=true;}set jB( g){DM=g.toDouble();zM=true;}set nB( g){FM=g.toDouble();zM=true;}set oB( g){IM=g.toDouble();zM=true;}set pB( g){KM=g.toDouble();zM=true;}set skewX( g){OM=g.toDouble();zM=true;}set skewY( g){RM=g.toDouble();zM=true;}set nC( g){UM=g.toDouble();zM=true;}set alpha( g){XM=g.toDouble();zM=true;}set visible( g){cM=g;zM=true;}set mask( g){eM=g;} get width=>GC(lN).width; get height=>GC(lN).height; set width( h){this.oB=1;var g=this.width;this.oB=(g!=0.0)?h/g:1.0;} set height( h){this.pB=1;var g=this.height;this.pB=(g!=0.0)?h/g:1.0;} IE(){if(nM!=null)nM.dI(this);} get lN{if(zM){zM=false;var j=OM+UM;var i=RM+UM;if(j==0.0&&i==0.0){wM.oC(IM,0.0,0.0,KM,zL-DM*IM,BM-FM*KM);}else{var g,l,k,h;var m=eB.cos(j);var n=eB.sin(j);if(j==i){g=IM*m;l=IM*n;k=-KM*n;h=KM*m;}else{g=IM*eB.cos(i);l=IM*eB.sin(i);k=-KM*n;h=KM*m;}var p=zL-(DM*g+FM*k);var o=BM-(DM*l+FM*h);wM.oC(g,l,k,h,p,o);}}return wM;} GC( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new EB.hJ();returnRectangle.x=g.cB;returnRectangle.y=g.dB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} KC( g, h){if(GC(sM).contains(g,h))return this;return null;} QC( h){pM.TI();for(AB g=this;g!=null;g=g.nM)pM.concat(g.lN);pM.UF();return pM.lI(h);} dispatchEvent( h){var g=null;if(h.BE||h.bubbles)for(AB j=nM;j!=null;j=j.nM)if(j.SI(h.type)){if(g==null)g=hE.bI() as List<AB>;g.add(j);}if(h.BE&&g!=null)for(int i=g.length-1;i>=0;i-- )if(h.LD==false)g[i].ZN(h,this,g[i],LC.gE);if(h.LD==false)ZN(h,this,this,LC.xC);if(h.bubbles&&g!=null)for(int i=0;i<g.length;i++ )if(h.LD==false)g[i].ZN(h,this,g[i],LC.QG);if(g!=null){g.clear();hE.cI(g);}} nN( h){for(var g=h;g!=null;g=g.nM)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");nM=h;} QB( g);}class pE{static var tE=false;static var aD=false;static var bD=0;static var lG=dE.DF;static var pG=new SB.StreamController<String>();static var uG=pG.stream.asBroadcastStream();static wG(){if(tE==false){tE=true;var g=VB.window.navigator.userAgent;if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod")){aD=true;bD=10;}if(g.contains("Android")){aD=true;bD=10;}if(g.contains("IEMobile")){aD=true;bD=10;}}}static  get RH{wG();return lG;}}class zB{static const  cG="B";static const  fG="BL";static const  jG="BR";static const  HG="L";static const  vE="R";static const  nG="T";static const  oG="TL";static const  sG="TR";static const  DF="";} cD( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class s{static var dD;static  iC( g){return g;}static  FF( g){return 0.5-0.5*eB.cos(g*2.0*eB.PI);}static  CH( g){return 0.5+0.5*eB.cos(g*2.0*eB.PI);}static  FH( g){if(dD==null)dD=new eB.Random();if(g==0.0||g==1.0)return g;return dD.nextDouble();}static  eD( g){return g*g;}static  fD( g){g=1.0-g;return 1.0-g*g;}static  HH( g){g=g*2.0;return (g<1.0)?0.5*eD(g):0.5*fD(g-1.0)+0.5;}static  KH( g){g=g*2.0;return (g<1.0)?0.5*fD(g):0.5*eD(g-1.0)+0.5;}static  gD( g){return g*g*g;}static  hD( g){g=1.0-g;return 1.0-g*g*g;}static  LF( g){g=g*2.0;return (g<1.0)?0.5*gD(g):0.5*hD(g-1.0)+0.5;}static  QH( g){g=g*2.0;return (g<1.0)?0.5*hD(g):0.5*gD(g-1.0)+0.5;}static  iD( g){return g*g*g*g;}static  jD( g){g=1.0-g;return 1.0-g*g*g*g;}static  UH( g){g=g*2.0;return (g<1.0)?0.5*iD(g):0.5*jD(g-1.0)+0.5;}static  VH( g){g=g*2.0;return (g<1.0)?0.5*jD(g):0.5*iD(g-1.0)+0.5;}static  lD( g){return g*g*g*g*g;}static  mD( g){g=1.0-g;return 1.0-g*g*g*g*g;}static  XH( g){g=g*2.0;return (g<1.0)?0.5*lD(g):0.5*mD(g-1.0)+0.5;}static  YH( g){g=g*2.0;return (g<1.0)?0.5*mD(g):0.5*lD(g-1.0)+0.5;}static  nD( g){return 1.0-eB.sqrt(1.0-g*g);}static  oD( g){g=1.0-g;return eB.sqrt(1.0-g*g);}static  ZH( g){g=g*2.0;return (g<1.0)?0.5*nD(g):0.5*oD(g-1.0)+0.5;}static  aH( g){g=g*2.0;return (g<1.0)?0.5*oD(g):0.5*nD(g-1.0)+0.5;}static  pD( g){return 1.0-eB.cos(g*(eB.PI/2.0));}static  qD( g){return eB.sin(g*(eB.PI/2.0));}static  cH( g){g=g*2.0;return (g<1.0)?0.5*pD(g):0.5*qD(g-1.0)+0.5;}static  gH( g){g=g*2.0;return (g<1.0)?0.5*qD(g):0.5*pD(g-1.0)+0.5;}static  rD( g){if(g==0.0)return 0.0;return eB.pow(2.0,10.0*(g-1.0));}static  sD( g){if(g==1.0)return 1.0;return 1.0-eB.pow(2.0,-10.0*g);}static  hH( g){g=g*2.0;return (g<1.0)?0.5*rD(g):0.5*sD(g-1.0)+0.5;}static  iH( g){g=g*2.0;return (g<1.0)?0.5*sD(g):0.5*rD(g-1.0)+0.5;}static  tD( g){var h=1.70158;return g*g*((h+1.0)*g-h);}static  uD( g){var h=1.70158;g=g-1.0;return g*g*((h+1.0)*g+h)+1.0;}static  OF( g){g=g*2.0;return (g<1.0)?0.5*tD(g):0.5*uD(g-1.0)+0.5;}static  lH( g){g=g*2.0;return (g<1.0)?0.5*uD(g):0.5*tD(g-1.0)+0.5;}static  vD( g){if(g==0.0||g==1.0)return g;g=g-1.0;return -eB.pow(2.0,10.0*g)*eB.sin((g-0.3/4.0)*(2.0*eB.PI)/0.3);}static  BD( g){if(g==0.0||g==1.0)return g;return eB.pow(2.0,-10.0*g)*eB.sin((g-0.3/4.0)*(2.0*eB.PI)/0.3)+1;}static  mH( g){g=g*2.0;return (g<1.0)?0.5*vD(g):0.5*BD(g-1.0)+0.5;}static  oH( g){g=g*2.0;return (g<1.0)?0.5*BD(g):0.5*vD(g-1.0)+0.5;}static  wD( g){return 1.0-CD(1.0-g);}static  CD( g){if(g<1/2.75){return 7.5625*g*g;}else if(g<2/2.75){g=g-1.5/2.75;return 7.5625*g*g+0.75;}else if(g<2.5/2.75){g=g-2.25/2.75;return 7.5625*g*g+0.9375;}else{g=g-2.625/2.75;return 7.5625*g*g+0.984375;}}static  pH( g){g=g*2.0;return (g<1.0)?0.5*wD(g):0.5*CD(g-1.0)+0.5;}static  qH( g){g=g*2.0;return (g<1.0)?0.5*CD(g):0.5*wD(g-1.0)+0.5;}}class jC{static const  UD="auto";static const  xG="stop";static const  GF="once";}class zG implements gB{final  xM;final  BN;final  GN=new List<zF>();var KN;var LN;var ON;var JL;var xK;var SN;var TN;var WN;zG( g, h,[ transitionFunction( ratio)]):xM=g,BN=(transitionFunction!=null)?transitionFunction:s.iC{xK=0.0;JL=eB.max(0.0001,h);SN=0.0;TN=false;WN=false;} mB( g, h){var i=['x','y','pivotX','pivotY','scaleX','scaleY','skewX','skewY','rotation','alpha'];if(i.indexOf(g)==-1)throw new ArgumentError("Error #9003: The supplied property ('${g}') is not supported at this time.");if(xM!=null&&WN==false)GN.add(new zF(g,0.0,h));} moveTo( h, g){mB('x',h);mB('y',g);} AC( l){if(xK<JL||WN==false){xK=xK+l;if(xK>JL)xK=JL;if(xK>=0.0){if(WN==false){WN=true;for(int i=0;i<GN.length;i++ ){var g=GN[i];switch (g.name){case 'x':g.bB=xM.x;break;case 'y':g.bB=xM.y;break;case 'pivotX':g.bB=xM.jB;break;case 'pivotY':g.bB=xM.nB;break;case 'scaleX':g.bB=xM.oB;break;case 'scaleY':g.bB=xM.pB;break;case 'skewX':g.bB=xM.skewX;break;case 'skewY':g.bB=xM.skewY;break;case 'rotation':g.bB=xM.nC;break;case 'alpha':g.bB=xM.alpha;break;}}if(KN!=null)KN();}var j=xK/JL;var k=BN(j);for(int i=0;i<GN.length;i++ ){var g=GN[i];var h=g.bB+k*(g.kF-g.bB);h=TN?h.round():h;switch (g.name){case 'x':xM.x=h;break;case 'y':xM.y=h;break;case 'pivotX':xM.jB=h;break;case 'pivotY':xM.nB=h;break;case 'scaleX':xM.oB=h;break;case 'scaleY':xM.pB=h;break;case 'skewX':xM.skewX=h;break;case 'skewY':xM.skewY=h;break;case 'rotation':xM.nC=h;break;case 'alpha':xM.alpha=h;break;}}if(LN!=null)LN();if(ON!=null&&xK==JL)ON();}}return xK<JL;} get BI=>xM; get currentTime=>xK;set QF( g){if(WN==false)xK=xK+SN-g;SN=g;} set onComplete( g()){ON=g;}} AH( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);}class HF{var target=null;var FC=false;var CE=0;var lC=0;var YF,aF;var WF,XF;HF(this.YF,this.aF,this.WF,this.XF);} JF( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";}class IH{static var JH=0;var MD=JH++ ;var target=null;var ID=false;IH(this.target,this.ID);} LH(){var g=new VB.CanvasElement(width:1,height:1);g.context2d.fillStyle="#000000";g.context2d.fillRect(0,0,1,1);var i=g.context2d.getImageData(0,0,1,1).data;var h=(i[0]==0);return h;}class kC extends UB{var tM;var eK;var iN,kN;var oM,qM;var mN,oN;var pN;var qN;var rN;var tN;var uN;var wN;var xN;var yN;var zN;var AO;var BO;var CO;var DO;var EO;var FO;kC( h, g){RK=h;tM=g;tM.focus();eK=g.context2d;oM=iN=g.width;qM=kN=g.height;mN=g.getBoundingClientRect().width.toInt();oN=g.getBoundingClientRect().height.toInt();pN=new LB.lJ();qN=new LB.lJ();tN=new YB.jJ(eK);uN=jC.UD;wN=fC.rE;xN=zB.DF;yN=hB.XD;QD.ZG.listen(ZG);BO=[new HF(w.nE,w.uE,w.iE,w.OG),new HF(w.qG,w.tG,w.CF,w.CF),new HF(w.yG,w.DH,w.EF,w.EF)];AO=null;zN=new GB(0,0);DO=new w(w.iE,true);tM.onMouseDown.listen(MO);tM.onMouseUp.listen(MO);tM.onMouseMove.listen(MO);tM.onMouseOut.listen(MO);tM.onMouseWheel.listen(NO);CO=new Map<int,IH>();FO=new PB(PB.jE,true);pE.uG.listen(OO);OO(null);EO=new vB(vB.WD,true);tM.onKeyDown.listen(QO);tM.onKeyUp.listen(QO);tM.onKeyPress.listen(RO);} get iF=>mN; get hF=>oN; get focus=>rN; get align=>xN;TO(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){TO();}set y( g){TO();}set jB( g){TO();}set nB( g){TO();}set oB( g){TO();}set pB( g){TO();}set skewX( g){TO();}set skewY( g){TO();}set nC( g){TO();}set alpha( g){TO();}set width( g){TO();}set height( g){TO();}VF(){if(uN==jC.UD||uN==jC.GF){VO();tN.reset(qN);QB(tN);if(uN==jC.GF)uN=jC.xG;}}VO(){var m=tM.getBoundingClientRect();var k=m.width.toInt();var l=m.height.toInt();if(k==0||l==0)return;var g=iN;var h=kN;var i=0;var j=0;switch (wN){case fC.DG:g=iN;h=kN;break;case fC.NG:if(iF*kN>hF*iN){h=(iN*l)~/k;}else{g=(kN*k)~/l;}break;case fC.UG:g=k;h=l;break;case fC.rE:if(iF*kN>hF*iN){g=(kN*k)~/l;}else{h=(iN*l)~/k;}break;}switch (xN){case zB.cG:i=(iN-g+1)~/2;j=(kN-h);break;case zB.fG:i=0;j=(kN-h);break;case zB.jG:i=(iN-g);j=(kN-h);break;case zB.HG:i=0;j=(kN-h+1)~/2;break;case zB.vE:i=(iN-g);j=(kN-h+1)~/2;break;case zB.nG:i=(iN-g+1)~/2;j=0;break;case zB.oG:i=0;j=0;break;case zB.sG:i=(iN-g+1);j=0;break;case zB.DF:i=(iN-g+1)~/2;j=(kN-h+1)~/2;break;}qN.oC(1.0,0.0,0.0,1.0,0-i,0-j);pN.oC(g/k,0.0,0.0,h/l,i-m.left,j-m.top);if(oM!=g||qM!=h){tM.width=oM=g;tM.height=qM=h;}if(mN!=k||oN!=l){mN=k;oN=l;dispatchEvent(new IB(IB.hG));}}ZG( g){tM.style.cursor=QD.KF(yN);}MO( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var p=j.button;var h=null;var i=pN.gN(j.client);var m=null;if(p<0||p>2)return;if(j.type=="mousemove"&&zN.equals(i))return;var g=BO[p];zN=i;if(j.type!="mouseout")h=KC(i.x,i.y) as HB;var l=hB.XD;if(h is bE)if(h.KE)l=hB.YD;if(h is yF)if(h.KE)l=hB.YD;if(yN!=l){yN=l;tM.style.cursor=QD.KF(l);}if(AO!=null&&AO!=h){AO.dispatchEvent(DO..rM(w.yE,true)..fN=(AO.KD!=null)?AO.QC(i):new GB.hJ()..jN=i..aN=g.FC);AO=null;}if(h!=null&&h!=AO){h.dispatchEvent(DO..rM(w.zE,true)..fN=h.QC(i)..jN=i..aN=g.FC);AO=h;}var k=null;var o=false;var q=false;if(j.type=="mousedown"){k=g.YF;if(h!=g.target||n>g.CE+500)g.lC=0;g.FC=true;g.target=h;g.CE=n;g.lC++ ;}if(j.type=="mouseup"){k=g.aF;g.FC=false;o=(g.target==h);q=o&&g.lC.isEven&&(n<g.CE+500);}if(j.type=="mousemove"){k=w.xE;}if(k!=null&&h!=null){m=h.QC(i);h.dispatchEvent(DO..rM(k,true)..fN=m..jN=i..aN=g.FC..cN=g.lC);if(o){if(q&&h.CI){h.dispatchEvent(DO..rM(g.XF,true)..fN=m..jN=i..aN=g.FC);}else{h.dispatchEvent(DO..rM(g.WF,true)..fN=m..jN=i..aN=g.FC);}}}}NO( h){var g=pN.gN(h.client);var i=KC(g.x,g.y) as HB;if(i!=null){i.dispatchEvent(DO..rM(w.AF,true)..fN=i.QC(g)..jN=g..dN=h.deltaX..eN=h.deltaY);if(DO.LD)h.preventDefault();}}var ZO=[] ;OO( h){ZO.forEach((g)=>g.cancel());if(pE.RH==dE.SG){ZO=[tM.onTouchStart.listen(aO),tM.onTouchEnd.listen(aO),tM.onTouchMove.listen(aO),tM.onTouchEnter.listen(aO),tM.onTouchLeave.listen(aO),tM.onTouchCancel.listen(aO)];}}aO( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=pN.gN(m.client);var h=KC(i.x,i.y) as HB;var g=CO.containsKey(l)?CO[l]:new IH(h,CO.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(FO..rM(PB.gG,true)..fN=(g.target.KD!=null)?g.target.QC(i):new GB.hJ()..jN=i..yM=g.MD..AN=g.ID);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(FO..rM(PB.eG,true)..fN=h.QC(i)..jN=i..yM=g.MD..AN=g.ID);g.target=h;}var k=null;if(j.type=="touchstart"){CO[l]=g;k=PB.jE;}if(j.type=="touchend"){CO.remove(l);k=PB.mE;}if(j.type=="touchcancel"){CO.remove(l);k=PB.oE;}if(j.type=="touchmove"){k=PB.wE;}if(k!=null&&h!=null){h.dispatchEvent(FO..rM(k,true)..fN=h.QC(i)..jN=i..yM=g.MD..AN=g.ID);}}}QO( g){g.preventDefault();var h=null;if(g.type=="keyup")h=vB.lE;if(g.type=="keydown")h=vB.WD;EO..rM(h,true)..MM=g.altKey..PM=g.ctrlKey..TM=g.shiftKey..fM=g.charCode..iM=g.keyCode..jM=UC.BG;if(g.keyLocation==VB.KeyLocation.LEFT)EO.jM=UC.HG;if(g.keyLocation==VB.KeyLocation.RIGHT)EO.jM=UC.vE;if(g.keyLocation==VB.KeyLocation.NUMPAD)EO.jM=UC.TG;if(g.keyLocation==VB.KeyLocation.JOYSTICK)EO.jM=UC.qE;if(g.keyLocation==VB.KeyLocation.MOBILE)EO.jM=UC.qE;if(rN!=null)rN.dispatchEvent(EO);}RO( g){var i=(g.charCode!=0)?g.charCode:g.keyCode;var h=new aE(aE.MG,true);h.iK=new String.fromCharCodes([i]);if(rN!=null)rN.dispatchEvent(h);}} PH( h){if(OC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];h[g+0]=(h[g+0]*i)~/255;h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;h[g+3]=(h[g+3]*i)~/255;}}} WH( h){if(OC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];if(i>0){h[g+0]=(h[g+0]*255)~/i;h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;}}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];if(i>0){h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;h[g+3]=(h[g+3]*255)~/i;}}}}class MJ extends AB implements gB{final  GO;final  HO;final  IO=new List<eH>();var JO=0.0;var KO=0.0;var LO=0;var QL=0;MJ( g, j):GO=g,HO=g.hN(j){for(var h in HO.FE){var i=new eH(GO,h);IO.add(i);}QL=HO.GE;KO=QL/GO.kL;} AC( h){JO+= h;var i=JO%KO;LO=eB.min((QL*i/KO).toInt(),QL-1);for(var g in IO){g.AC(h);g.fF(LO);}return true;} QB( h){for(var g in IO){if(g.visible){h.eF(g);}}}} MF( g, m, n, j){m=m.toDouble();n=n.toDouble();var DB=0.0;var CB=0.0;var q=m*g.a;var v=m*g.b;var t=m*g.a+n*g.c;var p=m*g.b+n*g.d;var u=n*g.c;var o=n*g.d;var h=DB;if(h>q)h=q;if(h>t)h=t;if(h>u)h=u;var i=CB;if(i>v)i=v;if(i>p)i=p;if(i>o)i=o;var l=DB;if(l<q)l=q;if(l<t)l=t;if(l<u)l=u;var k=CB;if(k<v)k=v;if(k<p)k=p;if(k<o)k=o;if(j==null)j=new EB.hJ();j.x=g.cB+h;j.y=g.dB+i;j.width=l-h;j.height=k-i;return j;}var OC=LH();class eH extends AB implements gB{final  YC;final  EE;final  JE=new Map<String,WC>();var pC;eH( i, h):this.YC=i,this.EE=h{for(var g in h.BC){if(g.RC!=null&&JE.containsKey(g.RC)==false){JE[g.RC]=i.sN(g.RC);}}fF(0);} AC( g){if(pC is gB){var h=pC as gB;h.AC(g);}} fF( t){var g=EE.OI(t);var o=g.x,p=g.y;var n=g.oB,k=g.pB;var m=g.skewX,l=g.skewY;var v=g.jB,NB=g.nB;var q=g.alpha;if(g.index!=t&&g.lF){var i=EE.NI(g);if(i!=null){var h=(t-g.index)/g.duration;var j=g.RF;if(j!=0){var u=0.0;if(j<0){var DB=1-h;u=1-DB*DB;j=0-j;}else{u=h*h;}h=j*u+(1-j)*h;}o=o+(i.x-o)*h;p=p+(i.y-p)*h;n=n+(i.oB-n)*h;k=k+(i.pB-k)*h;m=m+(i.skewX-m)*h;l=l+(i.skewY-l)*h;q=q+(i.alpha-q)*h;}}var CB=n*eB.cos(l);var RB=n*eB.sin(l);var JB=-k*eB.sin(m);var KB=k*eB.cos(m);var XB=o-(v*CB+NB*JB);var WB=p-(v*RB+NB*KB);zM=false;wM.oC(CB,RB,JB,KB,XB,WB);XM=q;cM=g.visible;pC=(g.RC!=null)?JE[g.RC]:null;} QB( g){if(pC!=null){pC.QB(g);}}}class xD{final  id;final  YC;final  FE=new List<yD>();xD( g, j):YC=j,id=g["id"]{for(var h in g["layers"]){var i=new yD(h);this.FE.add(i);}} get GE{var g=0;for(var h in FE)g=eB.max(g,h.GE);return g;}}class yD{final  name;final  FI;final  BC=new List<DD>();yD( g):this.name=g["name"],this.FI=g.containsKey("flipbook")?g["flipbook"]:false{for(var i in g["keyframes"]){var h=new DD(i);this.BC.add(h);}} get GE{var g=BC[BC.length-1];return g.index+g.duration;} OI( h){var g=1;while (g<BC.length&&BC[g].index<=h)g++ ;return BC[g-1];} NI( h){for(int g=0;g<BC.length-1;g++ )if(identical(BC[g],h))return BC[g+1];return null;}}class DD{var index;var duration;var RC;var label;var x,y;var oB,pB;var skewX,skewY;var jB,nB;var visible;var alpha;var lF;var RF;DD( g){this.index=g["index"];this.duration=g["duration"];this.RC=g.containsKey("ref")?g["ref"]:null;this.label=g.containsKey("label")?g["label"]:null;this.x=g.containsKey("loc")?g["loc"][0]:0.0;this.y=g.containsKey("loc")?g["loc"][1]:0.0;this.oB=g.containsKey("scale")?g["scale"][0]:1.0;this.pB=g.containsKey("scale")?g["scale"][1]:1.0;this.skewX=g.containsKey("skew")?g["skew"][0]:0.0;this.skewY=g.containsKey("skew")?g["skew"][1]:0.0;this.jB=g.containsKey("pivot")?g["pivot"][0]:0.0;this.nB=g.containsKey("pivot")?g["pivot"][1]:0.0;this.visible=g.containsKey("visible")?g["visible"]:true;this.alpha=g.containsKey("alpha")?g["alpha"]:1.0;this.lF=g.containsKey("tweened")?g["tweened"]:true;this.RF=g.containsKey("ease")?g["ease"]:0.0;}}class rH{var YC;var GD;var ED;rH( p,this.YC){this.GD=new Map<String,sH>();this.ED=new SB.Completer();var k=0;for(var j in p["atlases"] as List){var n=j["file"] as String;var q=JF(YC.tK,n);k++ ;var g=new VB.ImageElement();g.onLoad.listen((o){if( --k==0)this.ED.complete(this);});g.onError.listen((o){this.ED.completeError(new StateError("Failed to load image."));});g.src=q;for(var i in j["textures"] as List){var m=i["symbol"] as String;var h=i["rect"] as List;var l=i["origin"] as List;var t=new sH(h[0],h[1],h[2],h[3],l[0],l[1],g);this.GD[m]=t;}}}}class sH implements WC{var x,y,width,height;var WI,XI;var HD;var XO;var YO;sH(this.x,this.y,this.width,this.height,this.WI,this.XI,this.HD); QB( g){g.context.drawImageScaledFromSource(HD,x,y,width,height,0,0,width,height);}}//@ sourceMappingURL=stagexl_web.dart.map
