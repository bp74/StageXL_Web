import "dart:web_audio" as XE;import "dart:json" as rF;import "dart:html" as VB;import "dart:math" as gB;import "dart:async" as TB;class tI{static const  uI="Chrome";static const  vI="Firefox";static const  wI="Internet Explorer";static const  xI="Safari";final  FI;final  minimumVersion;const tI(this.FI,[this.minimumVersion]);}class yI{final  name;const yI(this.name);}class HJ extends UB{var BK;HJ(){BK=QB.IE('levelUp');DK();FB.lD('images/LevelupTextureAtlas.png').then((h){var g=new xC(h);g.x=70;g.y=40;BB(g);});}DK(){var l=330;for(int j=0;j<7;j++ ){var h=BK.LC('LevelUp${j}');var g=new xC(h);g.kB=h.width/2;g.qB=h.height/2;g.x=l+h.width/2;g.y=150;g.lB=0.0;g.mB=0.0;BB(g);var k=new FH(g,2.0,s.CD);k.jB('scaleX',1.0);k.jB('scaleY',1.0);k.TF=j*0.05;var i=new FH(g,0.4,s.ZC);i.jB('scaleX',0.0);i.jB('scaleY',0.0);i.TF=2.0;i.onComplete=()=>g.KE();NB.add(k);NB.add(i);l=l+5+h.width;}NB.UF(()=>DK(),3.0);}}class zI extends UB{final  zJ=[{'name':'DropShadowFilter (black)','filter':new NJ(10,gB.PI/4,yB.AD,0.8,8,8)},{'name':'GlowFilter (red)','filter':new MJ(yB.QF,1.0,20,20)},{'name':'ColorMatrixFilter (grayscale)','filter':new QJ.tJ()},{'name':'ColorMatrixFilter (invert)','filter':new QJ.uJ()},{'name':'BlurFilter (radius 1)','filter':new RJ(1,1)},{'name':'BlurFilter (radius 5)','filter':new RJ(5,5)},{'name':'BlurFilter (radius 10)','filter':new RJ(10,10)},{'name':'BlurFilter (radius 20)','filter':new RJ(20,20)}];zI(){var m=new FB(940,500,true,0x000000);var k=QB.LC('king');var o=new FB(230,245,true,0xFFF0F0F0);var p=new xC(m);BB(p);for(int h=0;h<zJ.length;h++ ){var i=235*(h%4);var j=250*(h~/4);var q=zJ[h]['filter'] as WC;var t=zJ[h]['name'] as String;var u=new EB(0,0,k.width,k.height);var n=new JB(i+40,j+45);m.DI(k,u,n,q);var l=new xC(o);l.x=i;l.y=j;BE(l,0);var g=new KJ();g.RC=new cE('Helvetica Neue, Helvetica, Arial',14,yB.AD);g.x=i+5;g.y=j+5;g.width=200;g.text=t;BB(g);}}}class AJ extends UB{final  yJ=new gB.Random();AJ(){var g=new aE();g.kB=470;g.qB=250;g.x=470;g.y=250;BB(g);for(int h=0;h<150;h++ ){var v=1+yJ.nextInt(3);var p=QB.LC('flower${v}');var i=new xC(p);i.kB=64;i.qB=64;i.x=64+yJ.nextInt(940-128);i.y=64+yJ.nextInt(500-128);g.BB(i);var o=new FH(i,600,s.ZC);o.jB('rotation',gB.PI*60.0);NB.add(o);}var k=new List<JB>();for(int h=0;h<6;h++ ){var n=(h*60)*gB.PI/180;var m=(h*60+30)*gB.PI/180;k.add(new JB(470+200*gB.cos(n),250+200*gB.sin(n)));k.add(new JB(470+100*gB.cos(m),250+100*gB.sin(m)));}var t=new ZE.oJ(100,100,740,300);var u=new ZE.qJ(470,250,200);var q=new ZE.sJ(k);VB.query('#mask-none').onClick.listen((j)=>g.mask=null);VB.query('#mask-rectangle').onClick.listen((j)=>g.mask=t);VB.query('#mask-circle').onClick.listen((j)=>g.mask=u);VB.query('#mask-custom').onClick.listen((j)=>g.mask=q);VB.query('#mask-spin').onClick.listen((j){var l=new FH(g,2.0,s.RF);l.jB('rotation',gB.PI*4.0);l.onComplete=()=>g.pC=0.0;NB.add(l);});}}class BJ extends UB{var yJ=new gB.Random();var BK;var CK;BJ(){BK=QB.IE('walkTextureAtlas');CK=BK.TI('walk');FK();}FK(){var h=yJ.nextDouble();var g=new wF(CK,30);g.x=-128;g.y=20.0+180.0*h;g.lB=g.mB=0.5+0.5*h;g.play();BB(g);pI((k,j)=>(k.y-j.y).toInt());var i=new FH(g,5.0+(1.0-h)*5.0,s.ZC);i.jB('x',940.0);i.onComplete=(){NB.remove(g);hF(g);};NB.add(g);NB.add(i);NB.UF(FK,0.2);}}class CJ extends xC implements bB{var OD,PD;CJ( g,this.OD,this.PD):super(g){this.kB=g.width/2;this.qB=g.height/2;} pB( i){var g=x+OD*i;var h=y+PD*i;if(g>910||g<30)OD=-OD;else x=g;if(h>470||h<30)PD=-PD;else y=h;return true;}}class DJ extends UB{final  AK=['C4','A3','A3','C4','D4','G3','G3','A3','A3#','F4','F4','E4','C4','D4','C4','A3#','A3','C4','D4','D4','D4','G4','F4','E4','F4','D4','C4','F3','G3','A3','D4','C4','C4','A3#','A3','E3','F3'];final  EK=['Hey ','Jude, ',"don't ",'make ','it ','bad.<br>','Take ','a ','sad ','song ','and ','make ','it ','better.<br>','','','','Remember ','','','to ','let ','her ','into ','','your ','heart.<br>','Than ','you ','can ','start ','','to ','make ','things ','better.','',' '];DJ(){var h=new xC(QB.LC('Background'));BB(h);var g=new sF(AK,EK);g.x=120;g.y=30;BB(g);VB.query('#startOver').onClick.listen((i)=>g.nI());}}class EJ extends UB{final  text='Filet mignon leberkas pig pork chop biltong, short loin strip steak turkey brisket ' 'venison. Pastrami venison pancetta, leberkas pork chop chicken prosciutto beef ribs ' 'bresaola kielbasa swine biltong capicola. Hamburger beef ribs ball tip drumstick salami ' 'pig. Capicola pork loin shank, salami chicken hamburger tail. Sirloin spare ribs ' 'ground round cow strip steak prosciutto swine bacon corned beef.';EJ(){var j=new KJ();j.RC=new cE('Helvetica,Arial',14,yB.bH,bold:true,italic:true);j.text=text;j.x=10;j.y=10;j.width=920;j.height=20;BB(j);var h=new KJ();h.RC=new cE('Helvetica,Arial',16,yB.QF);h.text=text;h.x=10;h.y=50;h.width=200;h.height=300;h.wordWrap=true;BB(h);var g=new KJ();g.RC=new cE('Helvetica,Arial',16,yB.sG,align:NC.yE);g.text=text;g.x=300;g.y=50;g.width=200;g.height=300;g.wordWrap=true;BB(g);var i=new KJ();i.RC=new cE('Caesar Dressing',30,yB.AD,align:NC.WD);i.text=text;i.x=590;i.y=50;i.width=340;i.height=300;i.wordWrap=true;BB(i);}}class GJ extends UB{GJ(){var g=new KJ();g.RC=new cE('Helvetica,Arial',14,yB.OH,bold:true);g.text='ToDo: show a cool demo ...';g.x=10;g.y=10;g.width=920;g.height=20;BB(g);}}class FJ extends UB{FJ(){var k=QB.VI('flump');var i=new SJ(k,'idle');i.x=500;i.y=200;BB(i);var j=new SJ(k,'walk');j.x=150;j.y=460;BB(j);var g=new SJ(k,'attack');g.x=450;g.y=460;BB(g);var h=new SJ(k,'defeat');h.x=720;h.y=460;BB(h);NB.add(i);NB.add(j);NB.add(g);NB.add(h);FB.lD('images/flumpLibraryAtlas0.png').then((m){var l=new xC(m);l.x=40;l.y=40;BB(l);});}}class IJ{final  xJ=[{"name":"linear","transition":s.ZC},{"name":"sine","transition":s.IF},{"name":"cosine","transition":s.JH},{"name":"random","transition":s.MH},{"name":"easeInQuadratic","transition":s.fD},{"name":"easeOutQuadratic","transition":s.gD},{"name":"easeInOutQuadratic","transition":s.PH},{"name":"easeOutInQuadratic","transition":s.SH},{"name":"easeInCubic","transition":s.hD},{"name":"easeOutCubic","transition":s.iD},{"name":"easeInOutCubic","transition":s.PF},{"name":"easeOutInCubic","transition":s.YH},{"name":"easeInQuartic","transition":s.jD},{"name":"easeOutQuartic","transition":s.kD},{"name":"easeInOutQuartic","transition":s.cH},{"name":"easeOutInQuartic","transition":s.dH},{"name":"easeInQuintic","transition":s.mD},{"name":"easeOutQuintic","transition":s.nD},{"name":"easeInOutQuintic","transition":s.fH},{"name":"easeOutInQuintic","transition":s.gH},{"name":"easeInCircular","transition":s.oD},{"name":"easeOutCircular","transition":s.qD},{"name":"easeInOutCircular","transition":s.hH},{"name":"easeOutInCircular","transition":s.iH},{"name":"easeInSine","transition":s.rD},{"name":"easeOutSine","transition":s.sD},{"name":"easeInOutSine","transition":s.kH},{"name":"easeOutInSine","transition":s.oH},{"name":"easeInExponential","transition":s.tD},{"name":"easeOutExponential","transition":s.uD},{"name":"easeInOutExponential","transition":s.pH},{"name":"easeOutInExponential","transition":s.qH},{"name":"easeInBack","transition":s.vD},{"name":"easeOutBack","transition":s.wD},{"name":"easeInOutBack","transition":s.RF},{"name":"easeOutInBack","transition":s.tH},{"name":"easeInElastic","transition":s.xD},{"name":"easeOutElastic","transition":s.CD},{"name":"easeInOutElastic","transition":s.uH},{"name":"easeOutInElastic","transition":s.wH},{"name":"easeInBounce","transition":s.yD},{"name":"easeOutBounce","transition":s.DD},{"name":"easeInOutBounce","transition":s.xH},{"name":"easeOutInBounce","transition":s.yH}]; YI(){var j=new VB.DivElement();for(int h=0;h<xJ.length/4;h++ ){var i=new VB.DivElement();i.classes.add("row");j.children.add(i);for(int g=0;g<4;g++ ){var m=xJ[h*4+g]["name"];var l=xJ[h*4+g]["transition"];var k=QK(m,l);k.id="cell";i.children.add(k);}}return j;} QK( o, q( ratio)){var h=new VB.DivElement();h.classes.add("span3");h.style.height="130px";var j=new VB.CanvasElement(width:200,height:140);j.style.position="absolute";j.style.zIndex="1";h.children.add(j);var i=new VB.DivElement();i.text=o;i.style.position="relative";i.style.zIndex="2";i.style.top="6px";h.children.add(i);var l=new mC("stage",j);var n=new LJ();var g=n.ZI;g.beginPath();g.moveTo(0.5,30.5);g.lineTo(199.5,30.5);g.lineTo(199.5,109.5);g.lineTo(0.5,109.5);g.closePath();g.oF(0xFF000000);g.LI(0xFFDFDFDF);g.beginPath();g.moveTo(0.5,109.5);for(int k=0;k<=199;k++ ){var m=k/199.0;var p=0.5+m*199.0;var t=109.5-79.0*q(m);g.lineTo(p,t);}g.oF(0xFF0000FF,2);l.BB(n);l.YF();return h;}}var nB;var QD;var NB;var QB;class JJ extends UB{JJ(){GK(250);VB.query('#minus10').onClick.listen((g)=>HK(10));VB.query('#minus50').onClick.listen((g)=>HK(50));VB.query('#plus50').onClick.listen((g)=>GK(50));VB.query('#plus10').onClick.listen((g)=>GK(10));this.dI.listen(IK);}var JK=null;IK( g){if(JK==null){JK=1.00/g.eF;}else{JK=0.05/g.eF+0.95*JK;}VB.query('#fpsMeter').innerHtml='fps: ${JK.round()}';}GK( l){var g=new gB.Random();var i=QB.IE('flags');var j=i.OI;while ( --l>=0){var k=j[g.nextInt(j.length)];var m=i.LC(k);var h=new CJ(m,g.nextInt(200)-100,g.nextInt(200)-100);h.x=30+g.nextInt(940-60);h.y=30+g.nextInt(500-60);BB(h);NB.add(h);}VB.query('#flagCounter').innerHtml='Flags: ${JE}';}HK( h){while ( --h>=0&&JE>0){var g=UI(0);g.KE();NB.remove(g);}VB.query('#flagCounter').innerHtml='Flags: ${JE}';}} main(){var l=VB.window.location.pathname;var m=new RegExp(r"([A-Za-z0-9-]+)\.html",multiLine:false,caseSensitive:false);var g=m.firstMatch(l);if(g!=null&&g.groupCount==1){var h=g.group(1);print("current page: ${h}");var i=VB.query("#stage");if(i!=null){nB=new mC('stage',i);QD=new CG();QD.CI(nB);NB=QD.cI;QB=new nE();}switch (h){case "filter":QB..oB('king','images/king.png')..load().then((LK)=>nB.BB(new zI()));break;case "masking":QB..oB('flower1','images/Flower1.png')..oB('flower2','images/Flower2.png')..oB('flower3','images/Flower3.png')..load().then((LK)=>nB.BB(new AJ()));break;case "flipbook":QB..CE('walkTextureAtlas','images/walk.json',fC.zC)..load().then((LK)=>nB.BB(new BJ()));break;case "performance":QB..CE('flags','images/flags.json',fC.zC)..load().then((LK)=>nB.BB(new JJ()));break;case "sound":QB..oB('KeyBlack','images/piano/KeyBlack.png')..oB('KeyWhite0','images/piano/KeyWhite0.png')..oB('KeyWhite1','images/piano/KeyWhite1.png')..oB('KeyWhite2','images/piano/KeyWhite2.png')..oB('KeyWhite3','images/piano/KeyWhite3.png')..oB('Finger','images/piano/Finger.png')..oB('Background','images/piano/Background.jpg')..HB('Cheer','sounds/Cheer.mp3')..HB('Note1','sounds/piano/Note1.mp3')..HB('Note2','sounds/piano/Note2.mp3')..HB('Note3','sounds/piano/Note3.mp3')..HB('Note4','sounds/piano/Note4.mp3')..HB('Note5','sounds/piano/Note5.mp3')..HB('Note6','sounds/piano/Note6.mp3')..HB('Note7','sounds/piano/Note7.mp3')..HB('Note8','sounds/piano/Note8.mp3')..HB('Note9','sounds/piano/Note9.mp3')..HB('Note10','sounds/piano/Note10.mp3')..HB('Note11','sounds/piano/Note11.mp3')..HB('Note12','sounds/piano/Note12.mp3')..HB('Note13','sounds/piano/Note13.mp3')..HB('Note14','sounds/piano/Note14.mp3')..HB('Note15','sounds/piano/Note15.mp3')..HB('Note16','sounds/piano/Note16.mp3')..HB('Note17','sounds/piano/Note17.mp3')..HB('Note18','sounds/piano/Note18.mp3')..HB('Note19','sounds/piano/Note19.mp3')..HB('Note20','sounds/piano/Note20.mp3')..HB('Note21','sounds/piano/Note21.mp3')..HB('Note22','sounds/piano/Note22.mp3')..HB('Note23','sounds/piano/Note23.mp3')..HB('Note24','sounds/piano/Note24.mp3')..HB('Note25','sounds/piano/Note25.mp3')..load().then((LK)=>nB.BB(new DJ()));break;case "text":nB.BB(new EJ());break;case "tweener":nB.BB(new GJ());break;case "flump":QB..BI('flump','images/flumpLibrary.json')..load().then((LK)=>nB.BB(new FJ()));break;case "texturepacker":QB..CE('levelUp','images/LevelupTextureAtlas.json',fC.zC)..load().then((LK)=>nB.BB(new HJ()));break;case "transitions":var k=new IJ();var j=k.YI();VB.query("#transitions").children.add(j);break;}}}class sF extends UB{final  dC;final  cC;final  KK=['C3','C3#','D3','D3#','E3','F3','F3#','G3','G3#','A3','A3#','B3','C4','C4#','D4','D4#','E4','F4','F4#','G4','G4#','A4','A4#','B4','C5'];var MK=new Map<String,tF>();var NK;var OK=0;sF(this.dC,this.cC){for(int h=0,i=0;h<KK.length;h++ ){var k=QB.WF('Note${h+1}');var j=KK[h];var g=MK[j]=new tF(this,j,k);if(j.endsWith('#')){g.x=i-16;g.y=35;BB(g);}else{g.x=i;g.y=35;BE(g,0);i=i+47;}}NK=new xC(QB.LC('Finger'));NK.kB=20;BB(NK);PK();}GI( g){if(OK<dC.length&&dC[OK]==g){if(OK==dC.length-1)QB.WF('Cheer').play();OK++ ;PK();}}nI(){OK=0;NK.alpha=1;PK();}PK(){var h=VB.query('#lyrics');var m=-1;h.innerHtml='';for(int g=0,j=0;g<cC.length;g++ ){if(cC[g]!='')j=g;if(g==this.OK)m=j;}for(int g=0;g<cC.length;g++ ){if(g==m){h.appendHtml('<span id="word">${cC[g]}</span>');}else{h.appendHtml(cC[g]);}}if(OK<dC.length){var k=dC[OK];if(MK.containsKey(k)){var i=MK[k];NB.mI(NK);NK.y=0;var n=new FH(this.NK,0.4,s.PF);var l=new FH(this.NK,0.4,s.IF);n.jB('x',i.x+i.width/2);l.jB('y',-10);NB.add(n);NB.add(l);}}else{var o=new FH(NK,0.4,s.ZC);o.jB('alpha',0);NB.add(o);}}}class tF extends aE{final  fF;final  cB;final  lF;tF(this.fF,this.cB,this.lF){var h;if(cB.endsWith('#')){h='KeyBlack';}else if(cB.startsWith('C5')){h='KeyWhite0';}else if(cB.startsWith('C')||cB.startsWith('F')){h='KeyWhite1';}else if(cB.startsWith('D')||cB.startsWith('G')||cB.startsWith('A')){h='KeyWhite2';}else if(cB.startsWith('E')||cB.startsWith('B')){h='KeyWhite3';}var i=QB.LC(h);var l=new xC(i);this.BB(l);var j=cB.endsWith('#')?yB.vH:yB.AD;var k=new cE('Helvetica,Arial',10,j,align:NC.WD);var g=new KJ();g.RC=k;g.text=cB;g.width=i.width;g.height=20;g.cF=false;g.y=i.height-20;BB(g);this.NE=true;this.onMouseDown.listen(RK);this.onMouseOver.listen(RK);this.onMouseUp.listen(SK);this.onMouseOut.listen(SK);}RK( g){if(g.HC){this.lF.play();this.alpha=0.7;this.fF.GI(this.cB);}}SK( g){this.alpha=1.0;}}class DB{static const  MG="added";static const  VG="addedToStage";static const  aD="enterFrame";static const  eG="removed";static const  jG="removedFromStage";static const  nG="resize";static const  IH="complete";static const  KF="progress";var TK;var hN;var WN;var HL;var kN;var ZN;var dN;DB( g,[ bubbles=false]){EN(g,bubbles);} EN( g,[ bubbles=false]){TK=g;hN=bubbles;WN=wB.OC;HL=null;kN=null;ZN=false;dN=false;} get MD=>ZN; get type=>TK; get bubbles=>hN; get DE=>true; get target=>HL;}class yC{var cK;var YK;var AL;var NL;var WL;var gL;yC( g, h, i){cK=g;YK=h;AL=i;WL=null;gL=null;} get kind=>cK; get name=>YK; get oC=>gL; get error=>WL;IN( i){NL=i.then((g){gL=g;WL=null;},onError:( h){gL=null;WL=h.error;});}}class zB{final  fK=new VB.ImageElement();final  ZL=new List<dE>();static  lD( m, u){var l=new TB.Completer<zB>();var j=new zB();switch (u){case fC.KG:case fC.zC: n( k, g){var q=GH(k);var h=new dE(q,j);h.GL=g["frame"]["x"].toInt();h.PL=g["frame"]["y"].toInt();h.VL=g["frame"]["w"].toInt();h.fL=g["frame"]["h"].toInt();h.pL=g["spriteSourceSize"]["x"].toInt();h.tL=g["spriteSourceSize"]["y"].toInt();h.xL=g["sourceSize"]["w"].toInt();h.GM=g["sourceSize"]["h"].toInt();h.NM=g["rotated"] as bool;j.ZL.add(h);}VB.HttpRequest.getString(m).then((t){var o=rF.parse(t);var i=o["frames"];var p=o["meta"];if(i is List)for(var g in i)n(g["filename"],g);if(i is Map)for(String k in i.keys)n(k,i[k]);j.fK..onLoad.listen((v)=>l.complete(j))..onError.listen((v)=>l.completeError(new StateError("Failed to load image.")))..src=NF(m,p["image"]);}).catchError((CB){l.completeError(new StateError("Failed to load json file."));});break;}return l.future;} get ID=>fK; LC( i){var h;for(int g=0;g<ZL.length&&h==null;g++ )if(ZL[g].name==i)h=new FB.wJ(ZL[g]);if(h==null)throw new ArgumentError("TextureAtlasFrame not found: '${i}'");return h;} TI( i){var h=new List<FB>();for(int g=0;g<ZL.length;g++ )if(ZL[g].name.indexOf(i)==0)h.add(new FB.wJ(ZL[g]));return h;} get OI{return ZL.map((g)=>g.name).toList();}}class fC{static const  KG="json";static const  zC="jsonarray";}class dE{var YK;var qK;var GL;var PL;var VL;var fL;var pL;var tL;var xL;var GM;var NM;dE( g, h){YK=g;qK=h;} get qI=>qK; get name=>YK; get RI=>GL; get SI=>PL; get QI=>VL; get NI=>fL; get offsetX=>pL; get offsetY=>tL; get hI=>xL; get gI=>GM; get oI=>NM;}class uF<jC>{final  bK=new List<jC>();final  IL;var TL=0;uF( g()):IL=g; jI(){if(TL==0){return IL();}else{TL-- ;return bK[TL];}}kI( g){if(TL==bK.length){bK.add(g);}else{bK[TL]=g;}TL++ ;}reset(){bK.clear();TL=0;}}class hC{static const  JG="exactFit";static const  SG="noBorder";static const  aG="noScale";static const  uE="showAll";}class RD{static var iE=iB.VD;static var PG=false;static var bG=new TB.StreamController<String>();static var fG=bG.stream.asBroadcastStream();static  OF( i){var h=i;var g="auto";if(iE!=iB.VD)h=iE;switch (h){case iB.VD:g="auto";break;case iB.YD:g="default";break;case iB.ZD:g="pointer";break;case iB.cG:g="move";break;case iB.dG:g="text";break;case iB.gG:g="wait";break;}if(PG)g="none";return g;}}class TD extends hB{var mK;TD(){if(gC.BD==null)throw new UnsupportedError("This browser does not support Web Audio API.");}static  lD( n){var h=new TD();var k=hB.MF(n);var g=new TB.Completer<hB>();VB.HttpRequest.request(k,responseType:'arraybuffer').then((i){var j=i.response;var m=gC.BD;m.decodeAudioData(j,( l){h.mK=l;g.complete(h);},(o){g.completeError(new StateError("Failed to decode audio."));});}).catchError((o){g.completeError(new StateError("Failed to load audio."));});return g.future;} get length{return mK.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new ZB();return new PJ(this,loop,soundTransform);}}class PJ extends MC{var zK;var FL;var lK;var qL;var AM;PJ( j, h, i){zK=j;lK=h;FL=i;var g=gC.BD;qL=g.createGain();qL.connect(g.destination,0,0);qL.gain.value=(FL!=null)?gB.pow(FL.volume,2):1;AM=g.createBufferSource();AM.buffer=zK.mK;AM.loop=h;AM.connect(qL,0,0);AM.start(0);} set KD( g){FL=g;qL.gain.value=(FL!=null)?gB.pow(FL.volume,2):1;} stop(){AM.stop(0);}}class fE extends hB{fE(){}static  lD( g){return new TB.Future<hB>.of(()=>new fE());} get length{return double.NAN;} play([ loop=false, soundTransform]){if(soundTransform==null){soundTransform=new ZB();}return new OJ(this,loop,soundTransform);}}class OJ extends MC{var lK;var FL;OJ( i, h, g){lK=h;FL=g;}set KD( g){FL=g;} stop(){}}class AG{static const  QG="pixel";}class KJ extends IB{var oK="";var DL=0x000000;var XL=null;var nL=vF.GF;var CM=AG.QG;var TK=BG.IG;var RM=false;var WM=false;var YM=0x000000;var fM=false;var jM=0x000000;var nM=0;var qM=0;var tM;var xM;var zM=true;var BN=100;var DN=100;var HN=null;var kK=null;KJ(){XL=new cE("Arial",12,0x000000);tM=new List<String>();xM=new List<gE>();} get text=>oK; get type=>TK; get width=>BN; get height=>DN; set text( g){oK=g;zM=true;} set RC( g){XL=g;DL=XL.color;zM=true;} set wordWrap( g){RM=g;zM=true;} set width( g){BN=g;zM=true;} set height( g){DN=g;zM=true;} DC( g,[ returnRectangle]){return pD(g,BN,DN,returnRectangle);} IC( g, h){if(g>=0&&h>=0&&g<BN&&h<DN)return this;return null;} OB( g){cO();g.kK.drawImage(HN,0.0,0.0);} fO(){tM.clear();xM.clear();if(RM==false){tM.add(oK);}else{for(String n in oK.replaceAll('\r','').split('\n')){var h=new StringBuffer();var i=0;var g="";for(String j in n.split(' ')){i=h.length;h.write((i>0)?" ${j}":j);g=h.toString();if(kK.measureText(g).width>BN){if(i>0){g=g.substring(0,i);}else{j="";}tM.add(g);h=new StringBuffer();h.write(j);}}if(h.isEmpty==false){tM.add(h.toString());}}}nM=0;qM=0;for(String g in tM){var l=kK.measureText(g);var m=0;if(XL.align==NC.WD||XL.align==NC.XG)m=(BN-l.width)/2;if(XL.align==NC.yE||XL.align==NC.RG)m=BN-l.width;var k=new gE(m,l.width,XL.size,0,0,0);xM.add(k);nM=gB.max(nM,k.width);qM=qM+k.height;}} cO(){if(zM){zM=false;var j=BN.ceil().toInt();var i=DN.ceil().toInt();if(HN==null){HN=new VB.CanvasElement(width:j,height:i);kK=HN.context2d;}if(HN.width!=j)HN.width=j;if(HN.height!=i)HN.height=i;var g=new StringBuffer();g.write(XL.italic?"italic ":"normal ");g.write("normal ");g.write(XL.bold?"bold ":"normal ");g.write("${XL.size}px ");g.write("${XL.font},sans-serif");kK.font=g.toString();kK.textAlign="start";kK.textBaseline="top";kK.fillStyle=kC(DL);fO();if(WM){kK.fillStyle=kC(YM);kK.fillRect(0,0,BN,DN);}else{kK.clearRect(0,0,BN,DN);}var k=0;for(int h=0;h<tM.length;h++ ){var l=xM[h];kK.fillStyle=kC(DL);kK.fillText(tM[h],l.x,k);k+= l.height;}if(fM){kK.strokeStyle=kC(jM);kK.lineWidth=1;kK.strokeRect(0,0,BN,DN);}}}}class ZB{var volume;var pan;var hJ=1;var iJ=0;var lJ=1;var kJ=0;ZB([this.volume=1,this.pan=0]);}class BG{static const  IG="dynamic";}class cE{var font;var size;var color;var bold;var italic;var underline;var align;var leftMargin;var rightMargin;var indent;var leading;var letterSpacing=0;var UJ=0;var VJ=false;var gJ=false;cE(this.font,this.size,this.color,{this.bold: false,this.italic: false,this.underline: false,this.align: "left",this.leftMargin: 0,this.rightMargin: 0,this.indent: 0,this.leading: 0});}class vF{static const  GF="none";}class gE{var EI;var HI;var height;var leading;var width;var x;gE(this.x,this.width,this.height,this.EI,this.HI,this.leading);}class UD extends hB{var nK;var LL;var hL;UD(){hL=new List<vC>();nK=new VB.AudioElement();nK.onEnded.listen(TM);LL=new List<VB.AudioElement>();LL.add(nK);VB.document.body.children.add(nK);}static  lD( o){var k=new UD();var g=k.nK;var i=new TB.Completer<hB>();var h;var j;n(m){h.cancel();j.cancel();i.complete(k);}l(m){h.cancel();j.cancel();i.completeError(new StateError("Failed to load audio."));}h=g.onCanPlayThrough.listen(n);j=g.onError.listen(l);g.src=hB.MF(o);g.load();return i.future;} get length{return nK.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new ZB();return new vC(this,loop,soundTransform);} lM( h){var g;if(LL.length==0){g=nK.clone(true);g.onEnded.listen(TM);}else{g=LL.removeAt(0);}hL.add(h);return g;} oN( g){var h=g.nK;var i=hL.indexOf(g);hL.removeAt(i);LL.add(h);if(nK.currentTime>0&&nK.ended==false)nK.currentTime=0;} TM(j){var i=j.target;var g=null;for(int h=0;h<hL.length&&g==null;h++ )if(hL[h].nK==i)g=hL[h];if(g!=null)g.stop();}}class YC{static const  HG=0;static const  NG=1;static const  yE=2;static const  ZG=3;static const  tE=4;}class wF extends IB implements bB{var KL;var SL;var cL;var oL;var uL;var lK;var DM;var JM;var QC;wF( g,[ frameRate=30, loop=true]){KL=g;SL=frameRate;cL=0;oL=null;uL=false;lK=loop;DM=new DB(DB.KF);JM=new DB(DB.IH);QC=null;}static const  NH=const aB<DB>(DB.KF); get onProgress=>wF.NH.forTarget(this); get ME=>KL.length; set loop( g){lK=g;} play(){uL=true;oL=null;} stop(){uL=false;oL=null;} pB( j){if(uL==false)return true;if(oL==null){oL=0.0;mN(DM,this,this,wB.OC);}else{oL+= j;var i=1.0/SL;while (uL&&oL>=i){var h=cL;var g=lK?(h+1)%ME:gB.min(h+1,ME-1);cL=g;oL-= i;if(h!=g){mN(DM,this,this,wB.OC);if(cL!=g)return true;}if(h!=g&&g==ME-1&&lK==false){mN(JM,this,this,wB.OC);if(cL!=g)return true;}}}return true;} DC( h,[ returnRectangle]){var g=KL[cL];return pD(h,g.width,g.height,returnRectangle);} IC( g, h){var i=KL[cL];if(g>=0&&h>=0&&g<i.width&&h<i.height)return this;return null;} OB( g){var h=KL[cL];if(QC==null)h.OB(g);else h.iF(g,QC);}}class gC{static var oG=HH();static var BD=UH();static var EF=VH();static  HH(){var h=(BD!=null)?"WebAudioApi":"AudioElement";var g=VB.window.navigator.userAgent;if(g.contains("IEMobile"))if(g.contains("9.0")||g.contains("10.0"))h="Mock";if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod"))if(g.contains("OS 3")||g.contains("OS 4")||g.contains("OS 5"))h="Mock";if(EF.length==0)h="Mock";print("StageXL: supported audio engine is: ${h}");return h;}static  UH(){if(XE.AudioContext.supported)return new XE.AudioContext();return null;}static  VH(){var g=new List<String>();var h=new VB.AudioElement();var i=["maybe","probably"];if(i.indexOf(h.canPlayType("audio/ogg",""))!=-1)g.add("ogg");if(i.indexOf(h.canPlayType("audio/mpeg",""))!=-1)g.add("mp3");if(i.indexOf(h.canPlayType("audio/wav",""))!=-1)g.add("wav");print("StageXL: supported audio types are: ${g}");return g;}}class FG{static const  OG="round";}class NC{static const  WD="center";static const  RG="end";static const  XG="justify";static const  yE="right";}final  kE=new uF<List<AB>>(()=>new List<AB>());class eE implements bB{final  tK;var EL=0.0;var RL=0.0;var dL=1;eE( g, h):tK=g{RL=gB.max(h,0.0001);} pB( h){var g=EL+h;while (g>=RL&&dL>0){EL=RL;dL-- ;tK();g-= RL;}EL=g;return (dL>0);} get currentTime=>EL;}abstract class bB{ pB( g);}class SD implements bB{final  xK=new List<bB>();var YL=0;var jL=0.0; add( g){if(g==null)return;if(this.contains(g))return;if(YL==xK.length){xK.add(g);}else{xK[YL]=g;}YL++ ;} remove( h){if(h==null)return;for(int g=0;g<YL;g++ ){if(xK[g]==h){xK[g]=null;break;}}} contains( h){if(h==null)return false;for(int g=0;g<YL;g++ ){if(xK[g]==h){return true;}}return false;} mI( i){if(i==null)return;for(int g=0;g<YL;g++ ){var h=xK[g];if(h!=null&&h is FH){if(h.II==i){xK[g]=null;}}}} UF( h, i){var g=new eE(h,i);add(g);return g;} pB( k){jL+= k;var j=YL;var h=0;for(int g=0;g<j;g++ ){var i=xK[g];if(i==null)continue;if(i.pB(k)==false){xK[g]=null;continue;}if(h!=g){xK[h]=i;xK[g]=null;}h++ ;}if(h!=j){for(int g=j;g<YL;g++ ){xK[h++ ]=xK[g];xK[g]=null;}YL=h;}return true;}}class EG{var name;var arguments;EG(this.name,[this.arguments]);}class xF{var name;var dB;var pF;xF(this.name,this.dB,this.pF);}class bE{final  hK=new List<EG>();clear()=>hK.clear();beginPath()=>hK.add(new EG("beginPath"));closePath()=>hK.add(new EG("closePath"));moveTo( h, g)=>hK.add(new EG("moveTo",[h,g]));lineTo( h, g)=>hK.add(new EG("lineTo",[h,g]));arcTo( k, i, g, h, j)=>hK.add(new EG("arcTo",[k,i,g,h,j]));quadraticCurveTo( j, i, g, h)=>hK.add(new EG("quadraticCurveTo",[j,i,g,h]));bezierCurveTo( h, k, l, i, g, j)=>hK.add(new EG("bezierCurveTo",[h,k,l,i,g,j]));arc( l, g, j, i, h, k)=>hK.add(new EG("arc",[l,g,j,i,h,k]));rect( i, g, h, j)=>hK.add(new EG("rect",[i,g,h,j]));oF( g,[ width=1, joints=DG.OG, caps=FG.OG])=>hK.add(new EG("strokeColor",[dD(g),width,joints,caps]));LI( g)=>hK.add(new EG("fillColor",[dD(g)])); OB( k){var h=k.context;h.save();for(var j in hK){var g=j.arguments;switch (j.name){case "beginPath":h.beginPath();break;case "closePath":h.closePath();break;case "moveTo":h.moveTo(g[0],g[1]);break;case "lineTo":h.lineTo(g[0],g[1]);break;case "arcTo":h.arcTo(g[0],g[1],g[2],g[3],g[4]);break;case "quadraticCurveTo":h.quadraticCurveTo(g[0],g[1],g[2],g[3]);break;case "bezierCurveTo":h.bezierCurveTo(g[0],g[1],g[2],g[3],g[4],g[5]);break;case "arc":h.arc(g[0],g[1],g[2],g[3],g[4],g[5]);break;case "rect":h.rect(g[0],g[1],g[2],g[3]);break;case "strokeColor":h.strokeStyle=g[0];h.lineWidth=g[1];h.lineJoin=g[2];h.lineCap=g[3];h.stroke();break;case "strokeGradient":h.strokeStyle=g[0].hO(h);h.lineWidth=g[1];h.lineJoin=g[2];h.lineCap=g[3];h.stroke();break;case "strokePattern":h.strokeStyle=g[0].jO(h);h.lineWidth=g[1];h.lineJoin=g[2];h.lineCap=g[3];KB i=g[0].wK;if(i!=null){h.save();h.transform(i.a,i.b,i.c,i.d,i.eB,i.fB);h.stroke();h.restore();}else{h.stroke();}break;case "fillColor":h.fillStyle=g[0];h.fill();break;case "fillGradient":h.fillStyle=g[0].dJ(h);h.fill();break;case "fillPattern":h.fillStyle=g[0].eJ(h);KB i=g[0].wK;if(i!=null){h.save();h.transform(i.a,i.b,i.c,i.d,i.eB,i.fB);h.fill();h.restore();}else{h.fill();}break;}}h.restore();}}class JB{var x;var y;JB(this.x,this.y);JB.nJ():this(0,0); get length=>gB.sqrt(this.x*this.x+this.y*this.y); add( g)=>new JB(this.x+g.x,this.y+g.y); GD( g){this.x=g.x;this.y=g.y;} equals( g)=>this.x==g.x&&this.y==g.y;}class EB{var x;var y;var width;var height;EB(this.x,this.y,this.width,this.height);EB.nJ():this(0,0,0,0); get left=>this.x; get top=>this.y; get right=>this.x+this.width; get bottom=>this.y+this.height; get size=>new JB(this.width,this.height); set top( g){this.y=g;} contains( g, h)=>(this.x<=g&&this.y<=h&&this.right>=g&&this.bottom>=h); equals( g)=>(this.x==g.x&&this.y==g.y&&this.width==g.width&&this.height==g.height); get isEmpty=>(this.width==0&&this.height==0); GD( g){this.x=g.x;this.y=g.y;this.width=g.width;this.height=g.height;} union( g){var i=gB.min(this.left,g.left);var j=gB.min(this.top,g.top);var h=gB.max(this.right,g.right);var k=gB.max(this.bottom,g.bottom);return new EB(i,h,h-i,k-j);}}class yF{var x;var y;var gF;yF(this.x,this.y,this.gF);}class KB{var UK,VK,XK,ZK,dK,iK;var vK;KB.rJ():UK=1.0,VK=0.0,XK=0.0,ZK=1.0,dK=0.0,iK=0.0,vK=1.0; get a=>UK; get b=>VK; get c=>XK; get d=>ZK; get eB=>dK; get fB=>iK; get aC=>vK; rI( h){var i=h.x.toDouble();var g=h.y.toDouble();return new JB(i*UK+g*XK+dK,i*VK+g*ZK+iK);} tN( h){var i=h.x.toDouble();var g=h.y.toDouble();return new JB(i*UK+g*XK+dK,i*VK+g*ZK+iK);} concat( g){var m=UK;var p=VK;var q=XK;var o=ZK;var l=dK;var n=iK;var u=vK;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var v=g.eB;var t=g.fB;var CB=g.aC;UK=(m*j+p*i).toDouble();VK=(m*k+p*h).toDouble();XK=(q*j+o*i).toDouble();ZK=(q*k+o*h).toDouble();dK=(l*j+n*i+v).toDouble();iK=(l*k+n*h+t).toDouble();vK=(u*CB).toDouble();} bI(){UK=1.0;VK=0.0;XK=0.0;ZK=1.0;dK=0.0;iK=0.0;vK=1.0;} XF(){var j=UK;var m=VK;var l=XK;var k=ZK;var h=dK;var i=iK;var g=vK;UK=(k/g).toDouble();VK=-(m/g).toDouble();XK=-(l/g).toDouble();ZK=(j/g).toDouble();dK=-(UK*h+XK*i).toDouble();iK=-(VK*h+ZK*i).toDouble();vK=(1.0/g).toDouble();} qC( h, i, g, k, j, l){UK=h.toDouble();VK=i.toDouble();XK=g.toDouble();ZK=k.toDouble();dK=j.toDouble();iK=l.toDouble();vK=(UK*ZK-VK*XK).toDouble();} GD( g){UK=g.a.toDouble();VK=g.b.toDouble();XK=g.c.toDouble();ZK=g.d.toDouble();dK=g.eB.toDouble();iK=g.fB.toDouble();vK=g.aC.toDouble();} SF( h, g){var n=h.a;var q=h.b;var t=h.c;var p=h.d;var m=h.eB;var o=h.fB;var v=h.aC;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var CB=g.eB;var u=g.fB;var GB=g.aC;UK=(n*k+q*j).toDouble();VK=(n*l+q*i).toDouble();XK=(t*k+p*j).toDouble();ZK=(t*l+p*i).toDouble();dK=(m*k+o*j+CB).toDouble();iK=(m*l+o*i+u).toDouble();vK=(v*GB).toDouble();}}class CG{var WK;var pK;var yK;var UL;var lL;CG(){WK=new SD();pK=new List<mC>();yK=double.NAN;UL=wC.vE;lL=new iC(0);VB.window.requestAnimationFrame(mM);} get cI=>WK; mM( g){VB.window.requestAnimationFrame(mM);if(yK.isNaN)yK=g;if(yK>g)yK=g;var j=g-yK;var i=j/1000.0;if(j>=1){yK=g;lL.eK=i;UL.TN(lL);WK.pB(i);for(int h=0;h<pK.length;h++ ){var k=pK[h];k.YF();}}} CI( g){pK.add(g);}}class WB{final  kK;final  ML=new List<KB>(100);final  kL=new List<double>(100);var wL=0;WB.pJ( j,[ matrix]):kK=j{for(int h=0;h<100;h++ ){ML[h]=new KB.rJ();kL[h]=1.0;}if(matrix!=null)ML[0].GD(matrix);var g=ML[0];var i=kL[0];kK.setTransform(g.a,g.b,g.c,g.d,g.eB,g.fB);kK.globalAlpha=i;} get context=>kK; reset([ matrix]){if(matrix!=null)ML[0].GD(matrix);wL=0;var g=ML[0];var h=kL[0];kK.setTransform(g.a,g.b,g.c,g.d,g.eB,g.fB);kK.globalAlpha=h;kK.clearRect(0,0,kK.canvas.width,kK.canvas.height);} jF( h){var i=wL;var j=wL+1;var n=ML[i];var g=ML[j];var o=kL[i];var m=kL[j]=h.kM*o;g.SF(h.yN,n);kK.setTransform(g.a,g.b,g.c,g.d,g.eB,g.fB);kK.globalAlpha=m;wL=j;var k=h.rM;var l=h.uM;if(k!=null){kK.save();k.OB(this);}if(l!=null){l.OB(this);}else{h.OB(this);}if(k!=null){kK.restore();}wL=i;}}abstract class UB extends IB{final  QL=new List<AB>();var mL=true;var vL=true; get JE=>QL.length; BB( g){if(g.parent==this){var h=QL.indexOf(g);QL.removeAt(h);QL.add(g);}else{BE(g,QL.length);}} BE( g, h){if(h<0||h>QL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){QL.removeAt(QL.indexOf(g));if(h>QL.length)h-- ;QL.insert(h,g);}else{g.KE();g.AO(this);QL.insert(h,g);g.dispatchEvent(new DB(DB.MG,true));if(this.LD!=null)IO(g,new DB(DB.VG));}} hF( h){var g=QL.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");lI(g);} lI( g){if(g<0||g>=QL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=QL[g];h.dispatchEvent(new DB(DB.eG,true));if(this.LD!=null)IO(h,new DB(DB.jG));h.AO(null);QL.removeAt(g);} UI( g){if(g<0||g>=QL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");return QL[g];} pI( g){QL.sort(g);} contains( g){for(;g!=null;g=g.AN)if(g==this)return true;return false;} DC( n,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new EB.nJ();if(QL.length==0)return super.DC(n,returnRectangle);var h=double.INFINITY;var i=double.INFINITY;var k=double.NEGATIVE_INFINITY;var j=double.NEGATIVE_INFINITY;var o=QL.length;for(int l=0;l<QL.length;l++ ){var m=QL[l];CN.SF(m.yN,n);var g=m.DC(CN,returnRectangle);if(g.left<h)h=g.left;if(g.top<i)i=g.top;if(g.right>k)k=g.right;if(g.bottom>j)j=g.bottom;}returnRectangle.x=h;returnRectangle.y=i;returnRectangle.width=k-h;returnRectangle.height=j-i;return returnRectangle;} IC( o, p){var l=null;for(int j=QL.length-1;j>=0;j-- ){var i=QL[j];if(i.visible){var g=i.yN;var m=o-g.eB;var k=p-g.fB;var q=(g.d*m-g.c*k)/g.aC;var n=(g.a*k-g.b*m)/g.aC;var h=i.IC(q,n);if(h!=null){if(h is IB)if(h.cF)return mL?h:this;l=this;}}}return l;} OB( i){for(int g=0;g<QL.length;g++ ){var h=QL[g];if(h.visible)i.jF(h);}} IO( g, j){g.dispatchEvent(j);if(g is UB){var i=new List<AB>.from(g.QL,growable:false);for(int h=0;h<i.length;h++ )IO(i[h],j);}}}class wB{static const  jE=1;static const  OC=2;static const  WG=3;}class GC{var jK; aI( g){if(jK!=null)return jK.containsKey(g)||jK.containsKey("${g}_CAPTURE");else return false;} dispatchEvent( g){mN(g,this,this,wB.OC);} mN( g, k, l, i){if(jK!=null){var j=(i==wB.jE)?"${g.type}_CAPTURE":g.type;var h=jK[j];if(h!=null){g.HL=k;g.kN=l;g.WN=i;g.ZN=false;g.dN=false;h.TN(g);}}} HM( g, j){if(jK==null)jK=new Map<String,eC>();var i=j?"${g}_CAPTURE":g;var h=jK[i];if(h==null)h=jK[i]=new eC(this,g,j);return h;}}class wC<jC extends DB>{final  jK=new List<eC>();var aL=0;static var vE=new wC<iC>(); dM( g){for(int h=0;h<aL;h++ )if(jK[h]==g)return;if(aL==jK.length)jK.add(g);else jK[aL]=g;aL++ ;} TN( j){j.WN=wB.OC;j.ZN=false;j.dN=false;var k=aL;var i=0;for(int g=0;g<k;g++ ){var h=jK[g];if(h==null)continue;if(h.PM==0){jK[g]=null;continue;}j.HL=h.HL;j.kN=h.HL;h.TN(j);if(i!=g){jK[i]=h;jK[g]=null;}i++ ;}if(i!=k){for(int g=k;g<aL;g++ ){jK[i++ ]=jK[g];jK[g]=null;}aL=i;}}}class eC<jC extends DB> extends TB.Stream<jC>{final  HL;final  uK;final  iL;final  yL=new List<LG>();var PM=0;eC(this.HL,this.uK,this.iL); get isBroadcast=>true; asBroadcastStream()=>this; listen( h( event),{ onError( error), onDone(), unsubscribeOnError}){var g=new LG<jC>(this,h);if(PM==yL.length)yL.add(g);else yL[PM]=g;PM++ ;if(uK==DB.aD&&iL==false)wC.vE.dM(this);return g;} yM( h){for(int g=0;g<PM;g++ ){if(yL[g]==h){yL[g]=null;break;}}} TN( k){var j=PM;var h=0;for(int g=0;g<j;g++ ){var i=yL[g];if(i==null)continue;i.BM(k);if(h!=g){yL[h]=i;yL[g]=null;}h++ ;}if(h!=j){for(int g=j;g<PM;g++ ){yL[h++ ]=yL[g];yL[g]=null;}PM=h;}}}class aB<jC extends DB>{final  uK;const aB(this.uK); forTarget( g,{ useCapture: false}){return g.HM(uK,useCapture);}}class zF extends IB{zF();}class iC extends DB{var eK;iC( g):super(DB.aD,false){eK=g;} get eF=>eK; get DE=>false;}class w extends DB{static const  mE="click";static const  UG="doubleClick";static const  qE="mouseDown";static const  xE="mouseUp";static const  AF="mouseMove";static const  BF="mouseOut";static const  CF="mouseOver";static const  DF="mouseWheel";static const  FF="middleClick";static const  wG="middleMouseDown";static const  zG="middleMouseUp";static const  HF="rightClick";static const  EH="rightMouseDown";static const  KH="rightMouseUp";var QN,RN;var UN,VN;var nN;var ZM;var oM;var cM;var gM;var pN;var qN;var rN;w( g,[ bubbles=false]):super(g,bubbles){EN(g,bubbles);} EN( g,[ bubbles=false]){super.EN(g,bubbles);QN=RN=0;UN=VN=0;nN=false;ZM=false;oM=false;cM=false;gM=false;pN=0;qN=0;rN=0;}set sN( g){QN=g.x;RN=g.y;}set wN( g){UN=g.x;VN=g.y;} get HC=>nN; get altKey=>ZM; get ctrlKey=>cM; get shiftKey=>gM; get nC=>pN; get deltaX=>qN; get deltaY=>rN;}class xB extends DB{static const  XD="keyDown";static const  oE="keyUp";var ZM;var cM;var gM;var iM;var oM;var sM;var vM;var wM;xB( g,[ bubbles=false]):super(g,bubbles){EN(g,bubbles);} EN( g,[ bubbles=false]){super.EN(g,bubbles);ZM=false;cM=false;gM=false;iM=false;oM=false;sM=0;vM=0;wM=0;} get altKey=>ZM; get ctrlKey=>cM; get shiftKey=>gM; get charCode=>sM; get keyCode=>vM; get keyLocation=>wM;}class hE extends DB{static const  TG="textInput";var oK="";hE( g,[ bubbles=false]):super(g,bubbles){} get text=>oK;}class RB extends DB{static const  lE="touchBegin";static const  pE="touchEnd";static const  rE="touchCancel";static const  zE="touchMove";static const  kG="touchOver";static const  mG="touchOut";var MN;var ON;var QN,RN;var UN,VN;var ZM;var oM;var cM;var gM;var aN;var cN;var eN;RB( g,[ bubbles=false]):super(g,bubbles){EN(g,bubbles);} EN( g,[ bubbles=false]){super.EN(g,bubbles);MN=0;ON=false;QN=RN=0;UN=VN=0;ZM=false;oM=false;cM=false;gM=false;aN=1.00;cN=0;eN=0;}set sN( g){QN=g.x;RN=g.y;}set wN( g){UN=g.x;VN=g.y;} get ND=>MN; get altKey=>ZM; get ctrlKey=>cM; get shiftKey=>gM;}abstract class WC{ apply( h, i, j, g);}class RJ extends WC{var blurX;var blurY;RJ([this.blurX=4,this.blurY=4]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} apply( UC, q, JC, rB){var KC=UC.lN();var LB=KC.getImageData(q.x,q.y,q.width,q.height);var sB=LB.data;var v=LB.width;var XB=LB.height;var YB=blurX*blurX;var tB=blurY*blurY;var EC=(1<<22)~/YB;var VC=(1<<22)~/tB;var l=blurX;var uB=blurX*2;var u=blurY;var vB=blurY*2;var MB=v+uB;var CB=XB+vB;var FC=v*4;var GB=MB*4;var SB=JC.lN();var PB=SB.createImageData(MB,CB);var t=PB.data;var j=new List<int>(1024);XH(sB);for(int i=0;i<4;i++ ){for(int h=0;h<v;h++ ){var k=0,m=tB>>1;var n=h*4+i;var o=(h+l)*4+i;for(int g=0;g<CB;g++ ){t[o]=(m*VC)>>22;o+= GB;if(g>=vB){k-= 2*j[g&1023]-j[(g-u)&1023];}else if(g>=u){k-= 2*j[g&1023];}var p=(g<XB)?sB[n]:0;j[(g+u)&1023]=p;m+= k+= p;n+= FC;}}}for(int i=0;i<4;i++ ){for(int g=0;g<CB;g++ ){var k=0,m=YB>>1;var n=g*GB+l*4+i;var o=g*GB+i;for(int h=0;h<MB;h++ ){t[o]=(m*EC)>>22;o+= 4;if(h>=uB){k-= 2*j[h&1023]-j[(h-l)&1023];}else if(h>=l){k-= 2*j[h&1023];}var p=(h<v)?t[n]:0;j[(h+l)&1023]=p;m+= k+= p;n+= 4;}}}eH(t);SB.putImageData(PB,rB.x-l,rB.y-u);}}class QJ extends WC{final  wK;QJ.tJ():wK=[0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0,0,0,1,0];QJ.uJ():wK=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]; apply( JC, m, KC, EC){var q=JC.lN().getImageData(m.x,m.y,m.width,m.height);var h=q.data;var rB=(wK[00]*65536).toInt();var PB=(wK[01]*65536).toInt();var FC=(wK[02]*65536).toInt();var p=(wK[03]*65536).toInt();var sB=(wK[04]*65536).toInt();var uB=(wK[05]*65536).toInt();var SB=(wK[06]*65536).toInt();var vB=(wK[07]*65536).toInt();var v=(wK[08]*65536).toInt();var n=(wK[09]*65536).toInt();var t=(wK[10]*65536).toInt();var u=(wK[11]*65536).toInt();var XB=(wK[12]*65536).toInt();var tB=(wK[13]*65536).toInt();var GB=(wK[14]*65536).toInt();var CB=(wK[15]*65536).toInt();var YB=(wK[16]*65536).toInt();var LB=(wK[17]*65536).toInt();var o=(wK[18]*65536).toInt();var MB=(wK[19]*65536).toInt();if(PC){for(int g=0;g<=h.length-4;g+= 4){var k=h[g+0];var l=h[g+1];var j=h[g+2];var i=h[g+3];h[g+0]=((rB*k)+(PB*l)+(FC*j)+(p*i)+sB)>>16;h[g+1]=((uB*k)+(SB*l)+(vB*j)+(v*i)+n)>>16;h[g+2]=((t*k)+(u*l)+(XB*j)+(tB*i)+GB)>>16;h[g+3]=((CB*k)+(YB*l)+(LB*j)+(o*i)+MB)>>16;}}else{for(int g=0;g<=h.length-4;g+= 4){var i=h[g+0];var j=h[g+1];var l=h[g+2];var k=h[g+3];h[g+0]=((CB*k)+(YB*l)+(LB*j)+(o*i)+MB)>>16;h[g+1]=((t*k)+(u*l)+(XB*j)+(tB*i)+GB)>>16;h[g+2]=((uB*k)+(SB*l)+(vB*j)+(v*i)+n)>>16;h[g+3]=((rB*k)+(PB*l)+(FC*j)+(p*i)+sB)>>16;}}KC.lN().putImageData(q,EC.x,EC.y);}}class NJ extends WC{var distance;var angle;var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;NJ([this.distance=4.0,this.angle=gB.PI/4,this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=1.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} apply( OE, m, PE, CB){var rB=OE.lN();var QE=rB.getImageData(m.x,m.y,m.width,m.height);var RE=QE.data;var p=m.width;var XB=m.height;var VC=blurX*blurX;var FC=blurY*blurY;var SE=(1<<22)~/VC;var TE=(1<<22)~/FC;var n=blurX;var UC=blurX*2;var GB=blurY;var EC=blurY*2;var MB=p+UC;var SB=XB+EC;var UE=p*4;var YB=MB*4;var PB=PC?3:0;var v=PE.lN();var sB=v.createImageData(MB,SB);var h=sB.data;var k=new List<int>(1024);for(int i=0;i<p;i++ ){var l=0,t=FC>>1;var u=i*4+PB;var o=(i+n)*4+PB;for(int j=0;j<SB;j++ ){h[o]=(t*TE)>>22;o+= YB;if(j>=EC){l-= 2*k[j&1023]-k[(j-GB)&1023];}else if(j>=GB){l-= 2*k[j&1023];}var q=(j<XB)?RE[u]:0;k[(j+GB)&1023]=q;t+= l+= q;u+= UE;}}for(int j=0;j<SB;j++ ){var l=0,t=VC>>1;var u=j*YB+n*4+PB;var o=j*YB+PB;for(int i=0;i<MB;i++ ){h[o]=(t*SE)>>22;o+= 4;if(i>=UC){l-= 2*k[i&1023]-k[(i-n)&1023];}else if(i>=n){l-= 2*k[i&1023];}var q=(i<p)?h[u]:0;k[(i+n)&1023]=q;t+= l+= q;u+= 4;}}var uB=(alpha*256).toInt();var sC=(color>>16)&0xFF;var tC=(color>>8)&0xFF;var tB=(color>>0)&0xFF;if(PC){for(var g=0;g<=h.length-4;g+= 4){h[g+0]=sC;h[g+1]=tC;h[g+2]=tB;h[g+3]=(h[g+3]*uB)>>8;}}else{for(var g=0;g<=h.length-4;g+= 4){h[g+0]=(h[g+0]*uB)>>8;h[g+1]=tB;h[g+2]=tC;h[g+3]=sC;}}var JC=CB.x;var vB=CB.y;var KC=CB.x-n+(this.distance*gB.cos(this.angle)).round().toInt();var uC=CB.y-GB+(this.distance*gB.sin(this.angle)).round().toInt();var VE=new EB(JC,vB,p,XB);var WE=new EB(KC,uC,MB,SB);var LB=VE.union(WE);v.setTransform(1,0,0,1,0,0);v.clearRect(LB.x,LB.y,LB.width,LB.height);v.putImageData(sB,KC,uC);if(this.hideObject==false)v.drawImage(rB.canvas,JC,vB);}}class MJ extends WC{var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;MJ([this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=2.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} apply( OE, m, PE, CB){var rB=OE.lN();var QE=rB.getImageData(m.x,m.y,m.width,m.height);var RE=QE.data;var p=m.width;var XB=m.height;var VC=blurX*blurX;var FC=blurY*blurY;var SE=(1<<22)~/VC;var TE=(1<<22)~/FC;var n=blurX;var UC=blurX*2;var GB=blurY;var EC=blurY*2;var MB=p+UC;var SB=XB+EC;var UE=p*4;var YB=MB*4;var PB=PC?3:0;var v=PE.lN();var sB=v.createImageData(MB,SB);var h=sB.data;var k=new List<int>(1024);for(int i=0;i<p;i++ ){var l=0,t=FC>>1;var u=i*4+PB;var o=(i+n)*4+PB;for(int j=0;j<SB;j++ ){h[o]=(t*TE)>>22;o+= YB;if(j>=EC){l-= 2*k[j&1023]-k[(j-GB)&1023];}else if(j>=GB){l-= 2*k[j&1023];}var q=(j<XB)?RE[u]:0;k[(j+GB)&1023]=q;t+= l+= q;u+= UE;}}for(int j=0;j<SB;j++ ){var l=0,t=VC>>1;var u=j*YB+n*4+PB;var o=j*YB+PB;for(int i=0;i<MB;i++ ){h[o]=(t*SE)>>22;o+= 4;if(i>=UC){l-= 2*k[i&1023]-k[(i-n)&1023];}else if(i>=n){l-= 2*k[i&1023];}var q=(i<p)?h[u]:0;k[(i+n)&1023]=q;t+= l+= q;u+= 4;}}var uB=(alpha*256).toInt();var sC=(color>>16)&0xFF;var tC=(color>>8)&0xFF;var tB=(color>>0)&0xFF;if(PC){for(var g=0;g<=h.length-4;g+= 4){h[g+0]=sC;h[g+1]=tC;h[g+2]=tB;h[g+3]=(h[g+3]*uB)>>8;}}else{for(var g=0;g<=h.length-4;g+= 4){h[g+0]=(h[g+0]*uB)>>8;h[g+1]=tB;h[g+2]=tC;h[g+3]=sC;}}var JC=CB.x;var vB=CB.y;var KC=CB.x-n;var uC=CB.y-GB;var VE=new EB(JC,vB,p,XB);var WE=new EB(KC,uC,MB,SB);var LB=VE.union(WE);v.setTransform(1,0,0,1,0,0);v.clearRect(LB.x,LB.y,LB.width,LB.height);v.putImageData(sB,KC,uC);if(this.hideObject==false)v.drawImage(rB.canvas,JC,vB);}}abstract class MC extends GC{ set KD( g); stop();}abstract class IB extends AB{var JI=false;var cF=true;var mJ=true;var tabIndex=0;static const  hG=const aB<w>(w.BF);static const  qG=const aB<w>(w.CF);static const  xG=const aB<w>(w.AF);static const  BH=const aB<w>(w.qE);static const  LH=const aB<w>(w.xE);static const  aH=const aB<w>(w.DF); get onMouseOut=>IB.hG.forTarget(this); get onMouseOver=>IB.qG.forTarget(this); get onMouseMove=>IB.xG.forTarget(this); get onMouseDown=>IB.BH.forTarget(this); get onMouseUp=>IB.LH.forTarget(this); get onMouseWheel=>IB.aH.forTarget(this);static const  jH=const aB<RB>(RB.zE);static const  lH=const aB<RB>(RB.pE);static const  nH=const aB<RB>(RB.rE); get onTouchMove=>IB.jH.forTarget(this); get onTouchEnd=>IB.lH.forTarget(this); get onTouchCancel=>IB.nH.forTarget(this);static const  rH=const aB<xB>(xB.oE);static const  sH=const aB<xB>(xB.XD); get onKeyUp=>IB.rH.forTarget(this); get onKeyDown=>IB.sH.forTarget(this);}class DG{static const  OG="round";}class yB{static const  AD=0xFF000000;static const  sG=0xFF0000FF;static const  OH=0xFFA9A9A9;static const  bH=0xFF008000;static const  QF=0xFFFF0000;static const  vH=0xFFFFFFFF;}class YE{static const  GF="none";static const  YG="touchPoint";}class iB{static const  VD="auto";static const  YD="arrow";static const  ZD="button";static const  cG="hand";static const  dG="ibeam";static const  gG="wait";}class LJ extends AB{var gK;LJ(){gK=new bE();} get ZI=>gK; DC( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new EB.nJ();returnRectangle.x=g.eB;returnRectangle.y=g.fB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} IC( g, h){return null;} OB( g){gK.OB(g);}}class vC extends MC{var CL;var nK;var lK;var FL;vC( g, i, h){CL=g;lK=i;FL=h;nK=g.lM(this);nK.loop=lK;this.KD=h;nK.play();} set KD( g){FL=g;if(nK!=null)nK.volume=(FL!=null)?FL.volume:1;} stop(){if(nK!=null){if(nK.ended==false)nK.pause();CL.oN(this);nK=null;}}}abstract class XC{ OB( g);}class aE extends UB{var WJ=false;var NE=false;}class xC extends AB{var bitmapData;var pixelSnapping;var QC;xC([this.bitmapData=null,this.pixelSnapping="auto"]){QC=null;} DC( h,[ returnRectangle]){var g=(bitmapData!=null)?bitmapData.width:0;var i=(bitmapData!=null)?bitmapData.height:0;return pD(h,g,i,returnRectangle);} IC( g, h){if(bitmapData!=null&&g>=0.0&&h>=0.0&&g<bitmapData.width&&h<bitmapData.height)return this;return null;} OB( g){if(bitmapData!=null){if(QC==null)bitmapData.OB(g);else bitmapData.iF(g,QC);}}}abstract class hB{static  lD( g){var h=gC.oG;if(h=="WebAudioApi")return TD.lD(g);if(h=="AudioElement")return UD.lD(g);return fE.lD(g);} get length; play([ loop=false, soundTransform]);static  MF( g){var m=new RegExp(r"\.(ogg|mp3|wav)$",multiLine:false,caseSensitive:false);var i=m.firstMatch(g);var h=gC.EF;if(i==null)throw new ArgumentError("Unsupported file extension.");if(h.length==0)throw new UnsupportedError("This browser supports no known audio codec.");var j=i.group(1).toLowerCase();if(h.indexOf(j)==-1){var l=g.substring(0,g.length-j.length);var k=h[0];g="${l}${k}";}return g;}}class ZE{var TK;var aK;var sK;var JL;ZE.oJ( i, g, h, j){TK=0;aK=new EB(i,g,h,j);}ZE.qJ( i, g, h){TK=1;sK=new yF(i,g,h);}ZE.sJ( g){TK=2;JL=g;if(JL.length<3)throw new ArgumentError("A custom mask needs at least 3 points.");} OB( i){var g=i.context;g.beginPath();switch (TK){case 0:g.rect(aK.x,aK.y,aK.width,aK.height);break;case 1:g.arc(sK.x,sK.y,sK.gF,0,gB.PI*2.0,false);break;case 2:g.moveTo(JL[0].x,JL[0].y);for(int h=1;h<JL.length;h++ )g.lineTo(JL[h].x,JL[h].y);break;}g.clip();}}class FB implements XC{var rK;var BL;var OL;var eL;var kK;var zL;var FM;var LM;var GL;var PL;var VL;var fL;FB( g, h,[ transparent=true, fillColor=0xFFFFFFFF]){rK=g;BL=h;OL=transparent;var i=new VB.CanvasElement(width:rK,height:BL);kK=i.context2d;kK.fillStyle=OL?dD(fillColor):kC(fillColor);kK.fillRect(0,0,g,h);eL=i;zL=0;FM=0;LM=0;}FB.vJ( g){if(g==null)throw new ArgumentError();rK=g.naturalWidth;BL=g.naturalHeight;OL=true;eL=g;zL=0;FM=0;LM=0;}FB.wJ( g){rK=g.hI;BL=g.gI;OL=true;eL=g.qI.ID;zL=g.oI?2:1;FM=g.offsetX;LM=g.offsetY;GL=g.RI;PL=g.SI;VL=g.QI;fL=g.NI;}static  lD( i){var h=new TB.Completer<FB>();var g=new VB.ImageElement();g.onLoad.listen((j)=>h.complete(new FB.vJ(g)));g.onError.listen((j)=>h.completeError(new StateError("Error loading image.")));g.src=i;return h.future;} get width=>rK; get height=>BL; DI( i, j, g, h){h.apply(i,j,this,g);} clear(){var g=lN();g.clearRect(0,0,rK,BL);} OB( h){var g=h.context;switch (zL){case 0:g.drawImage(eL,FM,LM);break;case 1:g.drawImageScaledFromSource(eL,GL,PL,VL,fL,FM,LM,VL,fL);break;case 2:g.transform(0.0,-1.0,1.0,0.0,FM,LM+fL);g.drawImageScaledFromSource(eL,GL,PL,fL,VL,0,0,fL,VL);break;}} iF( PB, g){var v=PB.context;if(g.width<=0.0||g.height<=0.0)return;switch (zL){case 0:v.drawImageScaledFromSource(eL,g.x-FM,g.y-LM,g.width,g.height,g.x+FM,g.y+LM,g.width,g.height);break;case 1:var j=GL;var h=PL;var p=j+VL;var q=h+fL;var l=GL-FM+g.x;var m=PL-LM+g.y;var u=l+g.width;var t=m+g.height;var o=(j>l)?j:l;var n=(h>m)?h:m;var CB=(p<u)?p:u;var MB=(q<t)?q:t;var LB=FM-j+o;var GB=LM-h+n;var k=CB-o;var i=MB-n;if(k>0.0&&i>0.0){v.drawImageScaledFromSource(eL,o,n,k,i,LB,GB,k,i);}break;case 2:var j=GL;var h=PL;var p=j+fL;var q=h+VL;var l=GL+LM-g.y+fL-g.height;var m=PL-FM+g.x;var u=l+g.height;var t=m+g.width;var o=(j>l)?j:l;var n=(h>m)?h:m;var CB=(p<u)?p:u;var MB=(q<t)?q:t;var LB=FM-h+n;var GB=LM+p-CB;var k=MB-n;var i=CB-o;if(k>0.0&&i>0.0){v.transform(0.0,-1.0,1.0,0.0,LB,GB+i);v.drawImageScaledFromSource(eL,o,n,i,k,0,0,i,k);}break;}} lN(){if(kK==null){var g=new VB.CanvasElement(width:rK,height:BL);kK=g.context2d;switch (zL){case 0:kK.drawImage(eL,FM,LM);break;case 1:kK.drawImageScaledFromSource(eL,GL,PL,VL,fL,FM,LM,VL,fL);break;case 2:kK.setTransform(0.0,-1.0,1.0,0.0,FM,LM+fL);kK.drawImageScaledFromSource(eL,GL,PL,fL,VL,0,0,fL,VL);kK.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);break;}eL=g;zL=0;FM=0;LM=0;}return kK;}}typedef  GG<jC extends DB>( event);class LG<jC extends DB> extends TB.StreamSubscription<jC>{var rL;var BM;var EM;var KM;LG(this.rL,this.BM){EM=0;KM=false;} cancel(){if(KM==false){rL.yM(this);KM=true;BM=null;}} onError( g( error)){} get iN=>EM>0; pause([ resumeSignal]){EM++ ;if(resumeSignal!=null)resumeSignal.whenComplete(resume);} resume(){if(iN==false)throw new StateError("Subscription is not paused.");EM-- ;}}class nE{var bL;nE(){bL=new Map<String,yC>();} aM( g){var j=g.kind;var h=g.name;var i="${j}.${h}";if(bL.containsKey(i))throw new StateError("ResourceManager already contains a resource called '${h}'");bL[i]=g;} JN( i, g){var h="${i}.${g}";if(bL.containsKey(h)==false)throw new StateError("ResourceManager does not contains a resource called '${g}'");return bL[h];} oB( i, h){var g=new yC("BitmapData",i,h);g.IN(FB.lD(h));aM(g);} HB( i, h){var g=new yC("Sound",i,h);g.IN(hB.lD(h));aM(g);} CE( j, h, i){var g=new yC("TextureAtlas",j,h);g.IN(zB.lD(h,i));aM(g);} BI( i, h){var g=new yC("FlumpLibrary",i,h);g.IN(AC.lD(h));aM(g);} load(){var h=this.iI.map((i)=>i.NL);return TB.Future.wait(h).then((j){var g=this.KI;if(g.length>0)throw new StateError("Failed to load ${g.length} resource(s).");return this;});} get iI{return bL.values.where((g)=>g.oC==null).toList();} get KI{return bL.values.where((g)=>g.error!=null).toList();} LC( g){return JN("BitmapData",g).oC;} WF( g){return JN("Sound",g).oC;} IE( g){return JN("TextureAtlas",g).oC;} VI( g){return JN("FlumpLibrary",g).oC;}} kC( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";}class AC{var AL;var sL;var SL;final  IM=new List<zD>();final  UM=new List<zH>();static  lD( l){var i=new TB.Completer<AC>();VB.HttpRequest.getString(l).then((p){var h=rF.parse(p) as Map;var j=new List();var g=new AC();g.AL=l;g.sL=h["md5"];g.SL=h["frameRate"].toInt();for(var m in h["movies"] as List){var n=new zD(m,g);g.IM.add(n);}for(var o in h["textureGroups"] as List){var k=new zH(o,g);g.UM.add(k);j.add(k.FD.future);}TB.Future.wait(j).then((t){i.complete(g);}).catchError((q){i.completeError(new StateError("Failed to load image."));});}).catchError((q){i.completeError(new StateError("Failed to load json file."));});return i.future;} uN( h){for(var g in IM)if(g.id==h)return g;throw new ArgumentError("The movie '${h}' is not available.");} FO( g){for(var h in UM){if(h.HD.containsKey(g)){return h.HD[g];}}for(var i in IM){if(i.id==g){return new SJ(this,g);}}throw new ArgumentError("The symbol '${g}' is not available.");}}abstract class AB extends GC implements XC{var MM=0.0;var OM=0.0;var QM=0.0;var SM=0.0;var VM=1.0;var XM=1.0;var bM=0.0;var eM=0.0;var hM=0.0;var kM=1.0;var pM=true;var rM=null;var uM=null;var YK="";var AN=null;final  CN=new KB.rJ();final  GN=new KB.rJ();final  KN=new KB.rJ();var NN=true;static const  WH=const aB<iC>(DB.aD); get dI=>AB.WH.forTarget(this); get x=>MM; get y=>OM; get kB=>QM; get qB=>SM; get lB=>VM; get mB=>XM; get skewX=>bM; get skewY=>eM; get pC=>hM; get alpha=>kM; get visible=>pM; get name=>YK; get parent=>AN; get root{var g=this;while (g.AN!=null)g=g.AN;return g;} get LD{var g=this.root;if(g is mC)return g;return null;}set x( g){MM=g.toDouble();NN=true;}set y( g){OM=g.toDouble();NN=true;}set kB( g){QM=g.toDouble();NN=true;}set qB( g){SM=g.toDouble();NN=true;}set lB( g){VM=g.toDouble();NN=true;}set mB( g){XM=g.toDouble();NN=true;}set skewX( g){bM=g.toDouble();NN=true;}set skewY( g){eM=g.toDouble();NN=true;}set pC( g){hM=g.toDouble();NN=true;}set alpha( g){kM=g.toDouble();NN=true;}set visible( g){pM=g;NN=true;}set mask( g){rM=g;} get width=>DC(yN).width; get height=>DC(yN).height; set width( h){this.lB=1;var g=this.width;this.lB=(g!=0.0)?h/g:1.0;} set height( h){this.mB=1;var g=this.height;this.mB=(g!=0.0)?h/g:1.0;} KE(){if(AN!=null)AN.hF(this);} get yN{if(NN){NN=false;var j=bM+hM;var i=eM+hM;if(j==0.0&&i==0.0){KN.qC(VM,0.0,0.0,XM,MM-QM*VM,OM-SM*XM);}else{var g,l,k,h;var m=gB.cos(j);var n=gB.sin(j);if(j==i){g=VM*m;l=VM*n;k=-XM*n;h=XM*m;}else{g=VM*gB.cos(i);l=VM*gB.sin(i);k=-XM*n;h=XM*m;}var p=MM-(QM*g+SM*k);var o=OM-(QM*l+SM*h);KN.qC(g,l,k,h,p,o);}}return KN;} DC( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new EB.nJ();returnRectangle.x=g.eB;returnRectangle.y=g.fB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} IC( g, h){if(DC(GN).contains(g,h))return this;return null;} SC( h){CN.bI();for(AB g=this;g!=null;g=g.AN)CN.concat(g.yN);CN.XF();return CN.rI(h);} dispatchEvent( h){var g=null;if(h.DE||h.bubbles)for(AB j=AN;j!=null;j=j.AN)if(j.aI(h.type)){if(g==null)g=kE.jI() as List<AB>;g.add(j);}if(h.DE&&g!=null)for(int i=g.length-1;i>=0;i-- )if(h.MD==false)g[i].mN(h,this,g[i],wB.jE);if(h.MD==false)mN(h,this,this,wB.OC);if(h.bubbles&&g!=null)for(int i=0;i<g.length;i++ )if(h.MD==false)g[i].mN(h,this,g[i],wB.WG);if(g!=null){g.clear();kE.kI(g);}} AO( h){for(var g=h;g!=null;g=g.AN)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");AN=h;} OB( g);}class sE{static var wE=false;static var bD=false;static var cD=0;static var rG=YE.GF;static var vG=new TB.StreamController<String>();static var AH=vG.stream.asBroadcastStream();static CH(){if(wE==false){wE=true;var g=VB.window.navigator.userAgent;if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod")){bD=true;cD=10;}if(g.contains("Android")){bD=true;cD=10;}if(g.contains("IEMobile")){bD=true;cD=10;}}}static  get ZH{CH();return rG;}}class BC{static const  iG="B";static const  lG="BL";static const  pG="BR";static const  NG="L";static const  yE="R";static const  tG="T";static const  uG="TL";static const  yG="TR";static const  GF="";} dD( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class s{static var eD;static  ZC( g){return g;}static  IF( g){return 0.5-0.5*gB.cos(g*2.0*gB.PI);}static  JH( g){return 0.5+0.5*gB.cos(g*2.0*gB.PI);}static  MH( g){if(eD==null)eD=new gB.Random();if(g==0.0||g==1.0)return g;return eD.nextDouble();}static  fD( g){return g*g;}static  gD( g){g=1.0-g;return 1.0-g*g;}static  PH( g){g=g*2.0;return (g<1.0)?0.5*fD(g):0.5*gD(g-1.0)+0.5;}static  SH( g){g=g*2.0;return (g<1.0)?0.5*gD(g):0.5*fD(g-1.0)+0.5;}static  hD( g){return g*g*g;}static  iD( g){g=1.0-g;return 1.0-g*g*g;}static  PF( g){g=g*2.0;return (g<1.0)?0.5*hD(g):0.5*iD(g-1.0)+0.5;}static  YH( g){g=g*2.0;return (g<1.0)?0.5*iD(g):0.5*hD(g-1.0)+0.5;}static  jD( g){return g*g*g*g;}static  kD( g){g=1.0-g;return 1.0-g*g*g*g;}static  cH( g){g=g*2.0;return (g<1.0)?0.5*jD(g):0.5*kD(g-1.0)+0.5;}static  dH( g){g=g*2.0;return (g<1.0)?0.5*kD(g):0.5*jD(g-1.0)+0.5;}static  mD( g){return g*g*g*g*g;}static  nD( g){g=1.0-g;return 1.0-g*g*g*g*g;}static  fH( g){g=g*2.0;return (g<1.0)?0.5*mD(g):0.5*nD(g-1.0)+0.5;}static  gH( g){g=g*2.0;return (g<1.0)?0.5*nD(g):0.5*mD(g-1.0)+0.5;}static  oD( g){return 1.0-gB.sqrt(1.0-g*g);}static  qD( g){g=1.0-g;return gB.sqrt(1.0-g*g);}static  hH( g){g=g*2.0;return (g<1.0)?0.5*oD(g):0.5*qD(g-1.0)+0.5;}static  iH( g){g=g*2.0;return (g<1.0)?0.5*qD(g):0.5*oD(g-1.0)+0.5;}static  rD( g){return 1.0-gB.cos(g*(gB.PI/2.0));}static  sD( g){return gB.sin(g*(gB.PI/2.0));}static  kH( g){g=g*2.0;return (g<1.0)?0.5*rD(g):0.5*sD(g-1.0)+0.5;}static  oH( g){g=g*2.0;return (g<1.0)?0.5*sD(g):0.5*rD(g-1.0)+0.5;}static  tD( g){if(g==0.0)return 0.0;return gB.pow(2.0,10.0*(g-1.0));}static  uD( g){if(g==1.0)return 1.0;return 1.0-gB.pow(2.0,-10.0*g);}static  pH( g){g=g*2.0;return (g<1.0)?0.5*tD(g):0.5*uD(g-1.0)+0.5;}static  qH( g){g=g*2.0;return (g<1.0)?0.5*uD(g):0.5*tD(g-1.0)+0.5;}static  vD( g){var h=1.70158;return g*g*((h+1.0)*g-h);}static  wD( g){var h=1.70158;g=g-1.0;return g*g*((h+1.0)*g+h)+1.0;}static  RF( g){g=g*2.0;return (g<1.0)?0.5*vD(g):0.5*wD(g-1.0)+0.5;}static  tH( g){g=g*2.0;return (g<1.0)?0.5*wD(g):0.5*vD(g-1.0)+0.5;}static  xD( g){if(g==0.0||g==1.0)return g;g=g-1.0;return -gB.pow(2.0,10.0*g)*gB.sin((g-0.3/4.0)*(2.0*gB.PI)/0.3);}static  CD( g){if(g==0.0||g==1.0)return g;return gB.pow(2.0,-10.0*g)*gB.sin((g-0.3/4.0)*(2.0*gB.PI)/0.3)+1;}static  uH( g){g=g*2.0;return (g<1.0)?0.5*xD(g):0.5*CD(g-1.0)+0.5;}static  wH( g){g=g*2.0;return (g<1.0)?0.5*CD(g):0.5*xD(g-1.0)+0.5;}static  yD( g){return 1.0-DD(1.0-g);}static  DD( g){if(g<1/2.75){return 7.5625*g*g;}else if(g<2/2.75){g=g-1.5/2.75;return 7.5625*g*g+0.75;}else if(g<2.5/2.75){g=g-2.25/2.75;return 7.5625*g*g+0.9375;}else{g=g-2.625/2.75;return 7.5625*g*g+0.984375;}}static  xH( g){g=g*2.0;return (g<1.0)?0.5*yD(g):0.5*DD(g-1.0)+0.5;}static  yH( g){g=g*2.0;return (g<1.0)?0.5*DD(g):0.5*yD(g-1.0)+0.5;}}class lC{static const  VD="auto";static const  DH="stop";static const  JF="once";}class FH implements bB{final  LN;final  PN;final  SN=new List<xF>();var XN;var YN;var bN;var RL;var EL;var fN;var gN;var jN;FH( g, h,[ transitionFunction( ratio)]):LN=g,PN=(transitionFunction!=null)?transitionFunction:s.ZC{EL=0.0;RL=gB.max(0.0001,h);fN=0.0;gN=false;jN=false;} jB( g, h){var i=['x','y','pivotX','pivotY','scaleX','scaleY','skewX','skewY','rotation','alpha'];if(i.indexOf(g)==-1)throw new ArgumentError("Error #9003: The supplied property ('${g}') is not supported at this time.");if(LN!=null&&jN==false)SN.add(new xF(g,0.0,h));} moveTo( h, g){jB('x',h);jB('y',g);} pB( l){if(EL<RL||jN==false){EL=EL+l;if(EL>RL)EL=RL;if(EL>=0.0){if(jN==false){jN=true;for(int i=0;i<SN.length;i++ ){var g=SN[i];switch (g.name){case 'x':g.dB=LN.x;break;case 'y':g.dB=LN.y;break;case 'pivotX':g.dB=LN.kB;break;case 'pivotY':g.dB=LN.qB;break;case 'scaleX':g.dB=LN.lB;break;case 'scaleY':g.dB=LN.mB;break;case 'skewX':g.dB=LN.skewX;break;case 'skewY':g.dB=LN.skewY;break;case 'rotation':g.dB=LN.pC;break;case 'alpha':g.dB=LN.alpha;break;}}if(XN!=null)XN();}var j=EL/RL;var k=PN(j);for(int i=0;i<SN.length;i++ ){var g=SN[i];var h=g.dB+k*(g.pF-g.dB);h=gN?h.round():h;switch (g.name){case 'x':LN.x=h;break;case 'y':LN.y=h;break;case 'pivotX':LN.kB=h;break;case 'pivotY':LN.qB=h;break;case 'scaleX':LN.lB=h;break;case 'scaleY':LN.mB=h;break;case 'skewX':LN.skewX=h;break;case 'skewY':LN.skewY=h;break;case 'rotation':LN.pC=h;break;case 'alpha':LN.alpha=h;break;}}if(YN!=null)YN();if(bN!=null&&EL==RL)bN();}}return EL<RL;} get II=>LN; get currentTime=>EL;set TF( g){if(jN==false)EL=EL+fN-g;fN=g;} set onComplete( g()){bN=g;}} GH( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);}class LF{var target=null;var HC=false;var EE=0;var nC=0;var bF,dF;var ZF,aF;LF(this.bF,this.dF,this.ZF,this.aF);} NF( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";}class QH{static var RH=0;var ND=RH++ ;var target=null;var JD=false;QH(this.target,this.JD);} TH(){var g=new VB.CanvasElement(width:1,height:1);g.context2d.fillStyle="#000000";g.context2d.fillRect(0,0,1,1);var i=g.context2d.getImageData(0,0,1,1).data;var h=(i[0]==0);return h;}class mC extends UB{var HN;var kK;var vN,xN;var BN,DN;var zN,BO;var CO;var DO;var EO;var GO;var HO;var JO;var KO;var LO;var MO;var NO;var OO;var PO;var QO;var RO;var SO;mC( h, g){YK=h;HN=g;HN.focus();kK=g.context2d;BN=vN=g.width;DN=xN=g.height;zN=g.getBoundingClientRect().width.toInt();BO=g.getBoundingClientRect().height.toInt();CO=new KB.rJ();DO=new KB.rJ();GO=new WB.pJ(kK);HO=lC.VD;JO=hC.uE;KO=BC.GF;LO=iB.YD;RD.fG.listen(fG);OO=[new LF(w.qE,w.xE,w.mE,w.UG),new LF(w.wG,w.zG,w.FF,w.FF),new LF(w.EH,w.KH,w.HF,w.HF)];NO=null;MO=new JB(0,0);QO=new w(w.mE,true);HN.onMouseDown.listen(ZO);HN.onMouseUp.listen(ZO);HN.onMouseMove.listen(ZO);HN.onMouseOut.listen(ZO);HN.onMouseWheel.listen(aO);PO=new Map<int,QH>();SO=new RB(RB.lE,true);sE.AH.listen(bO);bO(null);RO=new xB(xB.XD,true);HN.onKeyDown.listen(dO);HN.onKeyUp.listen(dO);HN.onKeyPress.listen(eO);} get nF=>zN; get mF=>BO; get focus=>EO; get align=>KO;gO(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){gO();}set y( g){gO();}set kB( g){gO();}set qB( g){gO();}set lB( g){gO();}set mB( g){gO();}set skewX( g){gO();}set skewY( g){gO();}set pC( g){gO();}set alpha( g){gO();}set width( g){gO();}set height( g){gO();}YF(){if(HO==lC.VD||HO==lC.JF){iO();GO.reset(DO);OB(GO);if(HO==lC.JF)HO=lC.DH;}}iO(){var m=HN.getBoundingClientRect();var k=m.width.toInt();var l=m.height.toInt();if(k==0||l==0)return;var g=vN;var h=xN;var i=0;var j=0;switch (JO){case hC.JG:g=vN;h=xN;break;case hC.SG:if(nF*xN>mF*vN){h=(vN*l)~/k;}else{g=(xN*k)~/l;}break;case hC.aG:g=k;h=l;break;case hC.uE:if(nF*xN>mF*vN){g=(xN*k)~/l;}else{h=(vN*l)~/k;}break;}switch (KO){case BC.iG:i=(vN-g+1)~/2;j=(xN-h);break;case BC.lG:i=0;j=(xN-h);break;case BC.pG:i=(vN-g);j=(xN-h);break;case BC.NG:i=0;j=(xN-h+1)~/2;break;case BC.yE:i=(vN-g);j=(xN-h+1)~/2;break;case BC.tG:i=(vN-g+1)~/2;j=0;break;case BC.uG:i=0;j=0;break;case BC.yG:i=(vN-g+1);j=0;break;case BC.GF:i=(vN-g+1)~/2;j=(xN-h+1)~/2;break;}DO.qC(1.0,0.0,0.0,1.0,0-i,0-j);CO.qC(g/k,0.0,0.0,h/l,i-m.left,j-m.top);if(BN!=g||DN!=h){HN.width=BN=g;HN.height=DN=h;}if(zN!=k||BO!=l){zN=k;BO=l;dispatchEvent(new DB(DB.nG));}}fG( g){HN.style.cursor=RD.OF(LO);}ZO( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var p=j.button;var h=null;var i=CO.tN(j.client);var m=null;if(p<0||p>2)return;if(j.type=="mousemove"&&MO.equals(i))return;var g=OO[p];MO=i;if(j.type!="mouseout")h=IC(i.x,i.y) as IB;var l=iB.YD;if(h is aE)if(h.NE)l=iB.ZD;if(h is zF)if(h.NE)l=iB.ZD;if(LO!=l){LO=l;HN.style.cursor=RD.OF(l);}if(NO!=null&&NO!=h){NO.dispatchEvent(QO..EN(w.BF,true)..sN=(NO.LD!=null)?NO.SC(i):new JB.nJ()..wN=i..nN=g.HC);NO=null;}if(h!=null&&h!=NO){h.dispatchEvent(QO..EN(w.CF,true)..sN=h.SC(i)..wN=i..nN=g.HC);NO=h;}var k=null;var o=false;var q=false;if(j.type=="mousedown"){k=g.bF;if(h!=g.target||n>g.EE+500)g.nC=0;g.HC=true;g.target=h;g.EE=n;g.nC++ ;}if(j.type=="mouseup"){k=g.dF;g.HC=false;o=(g.target==h);q=o&&g.nC.isEven&&(n<g.EE+500);}if(j.type=="mousemove"){k=w.AF;}if(k!=null&&h!=null){m=h.SC(i);h.dispatchEvent(QO..EN(k,true)..sN=m..wN=i..nN=g.HC..pN=g.nC);if(o){if(q&&h.JI){h.dispatchEvent(QO..EN(g.aF,true)..sN=m..wN=i..nN=g.HC);}else{h.dispatchEvent(QO..EN(g.ZF,true)..sN=m..wN=i..nN=g.HC);}}}}aO( h){var g=CO.tN(h.client);var i=IC(g.x,g.y) as IB;if(i!=null){i.dispatchEvent(QO..EN(w.DF,true)..sN=i.SC(g)..wN=g..qN=h.deltaX..rN=h.deltaY);if(QO.MD)h.preventDefault();}}var mO=[] ;bO( h){mO.forEach((g)=>g.cancel());if(sE.ZH==YE.YG){mO=[HN.onTouchStart.listen(nO),HN.onTouchEnd.listen(nO),HN.onTouchMove.listen(nO),HN.onTouchEnter.listen(nO),HN.onTouchLeave.listen(nO),HN.onTouchCancel.listen(nO)];}}nO( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=CO.tN(m.client);var h=IC(i.x,i.y) as IB;var g=PO.containsKey(l)?PO[l]:new QH(h,PO.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(SO..EN(RB.mG,true)..sN=(g.target.LD!=null)?g.target.SC(i):new JB.nJ()..wN=i..MN=g.ND..ON=g.JD);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(SO..EN(RB.kG,true)..sN=h.SC(i)..wN=i..MN=g.ND..ON=g.JD);g.target=h;}var k=null;if(j.type=="touchstart"){PO[l]=g;k=RB.lE;}if(j.type=="touchend"){PO.remove(l);k=RB.pE;}if(j.type=="touchcancel"){PO.remove(l);k=RB.rE;}if(j.type=="touchmove"){k=RB.zE;}if(k!=null&&h!=null){h.dispatchEvent(SO..EN(k,true)..sN=h.SC(i)..wN=i..MN=g.ND..ON=g.JD);}}}dO( g){g.preventDefault();var h=null;if(g.type=="keyup")h=xB.oE;if(g.type=="keydown")h=xB.XD;RO..EN(h,true)..ZM=g.altKey..cM=g.ctrlKey..gM=g.shiftKey..sM=g.charCode..vM=g.keyCode..wM=YC.HG;if(g.keyLocation==VB.KeyLocation.LEFT)RO.wM=YC.NG;if(g.keyLocation==VB.KeyLocation.RIGHT)RO.wM=YC.yE;if(g.keyLocation==VB.KeyLocation.NUMPAD)RO.wM=YC.ZG;if(g.keyLocation==VB.KeyLocation.JOYSTICK)RO.wM=YC.tE;if(g.keyLocation==VB.KeyLocation.MOBILE)RO.wM=YC.tE;if(EO!=null)EO.dispatchEvent(RO);}eO( g){var i=(g.charCode!=0)?g.charCode:g.keyCode;var h=new hE(hE.TG,true);h.oK=new String.fromCharCodes([i]);if(EO!=null)EO.dispatchEvent(h);}} XH( h){if(PC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];h[g+0]=(h[g+0]*i)~/255;h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;h[g+3]=(h[g+3]*i)~/255;}}} eH( h){if(PC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];if(i>0){h[g+0]=(h[g+0]*255)~/i;h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;}}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];if(i>0){h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;h[g+3]=(h[g+3]*255)~/i;}}}}class SJ extends AB implements bB{final  TO;final  UO;final  VO=new List<mH>();var WO=0.0;var XO=0.0;var YO=0;var ZL=0;SJ( g, j):TO=g,UO=g.uN(j){for(var h in UO.GE){var i=new mH(TO,h);VO.add(i);}ZL=UO.HE;XO=ZL/TO.SL;} pB( h){WO+= h;var i=WO%XO;YO=gB.min((ZL*i/XO).toInt(),ZL-1);for(var g in VO){g.pB(h);g.kF(YO);}return true;} OB( h){for(var g in VO){if(g.visible){h.jF(g);}}}} pD( g, m, n, j){m=m.toDouble();n=n.toDouble();var GB=0.0;var CB=0.0;var q=m*g.a;var v=m*g.b;var t=m*g.a+n*g.c;var p=m*g.b+n*g.d;var u=n*g.c;var o=n*g.d;var h=GB;if(h>q)h=q;if(h>t)h=t;if(h>u)h=u;var i=CB;if(i>v)i=v;if(i>p)i=p;if(i>o)i=o;var l=GB;if(l<q)l=q;if(l<t)l=t;if(l<u)l=u;var k=CB;if(k<v)k=v;if(k<p)k=p;if(k<o)k=o;if(j==null)j=new EB.nJ();j.x=g.eB+h;j.y=g.fB+i;j.width=l-h;j.height=k-i;return j;}var PC=TH();class mH extends AB implements bB{final  bC;final  FE;final  LE=new Map<String,XC>();var rC;mH( i, h):this.bC=i,this.FE=h{for(var g in h.CC){if(g.TC!=null&&LE.containsKey(g.TC)==false){LE[g.TC]=i.FO(g.TC);}}kF(0);} pB( g){if(rC is bB){var h=rC as bB;h.pB(g);}} kF( t){var g=FE.XI(t);var o=g.x,p=g.y;var n=g.lB,k=g.mB;var m=g.skewX,l=g.skewY;var v=g.kB,PB=g.qB;var q=g.alpha;if(g.index!=t&&g.qF){var i=FE.WI(g);if(i!=null){var h=(t-g.index)/g.duration;var j=g.VF;if(j!=0){var u=0.0;if(j<0){var GB=1-h;u=1-GB*GB;j=0-j;}else{u=h*h;}h=j*u+(1-j)*h;}o=o+(i.x-o)*h;p=p+(i.y-p)*h;n=n+(i.lB-n)*h;k=k+(i.mB-k)*h;m=m+(i.skewX-m)*h;l=l+(i.skewY-l)*h;q=q+(i.alpha-q)*h;}}var CB=n*gB.cos(l);var SB=n*gB.sin(l);var LB=-k*gB.sin(m);var MB=k*gB.cos(m);var YB=o-(v*CB+PB*LB);var XB=p-(v*SB+PB*MB);NN=false;KN.qC(CB,SB,LB,MB,YB,XB);kM=q;pM=g.visible;rC=(g.TC!=null)?LE[g.TC]:null;} OB( g){if(rC!=null){rC.OB(g);}}}class zD{final  id;final  bC;final  GE=new List<AE>();zD( g, j):bC=j,id=g["id"]{for(var h in g["layers"]){var i=new AE(h);this.GE.add(i);}} get HE{var g=0;for(var h in GE)g=gB.max(g,h.HE);return g;}}class AE{final  name;final  MI;final  CC=new List<ED>();AE( g):this.name=g["name"],this.MI=g.containsKey("flipbook")?g["flipbook"]:false{for(var i in g["keyframes"]){var h=new ED(i);this.CC.add(h);}} get HE{var g=CC[CC.length-1];return g.index+g.duration;} XI( h){var g=1;while (g<CC.length&&CC[g].index<=h)g++ ;return CC[g-1];} WI( h){for(int g=0;g<CC.length-1;g++ )if(identical(CC[g],h))return CC[g+1];return null;}}class ED{var index;var duration;var TC;var label;var x,y;var lB,mB;var skewX,skewY;var kB,qB;var visible;var alpha;var qF;var VF;ED( g){this.index=g["index"];this.duration=g["duration"];this.TC=g.containsKey("ref")?g["ref"]:null;this.label=g.containsKey("label")?g["label"]:null;this.x=g.containsKey("loc")?g["loc"][0]:0.0;this.y=g.containsKey("loc")?g["loc"][1]:0.0;this.lB=g.containsKey("scale")?g["scale"][0]:1.0;this.mB=g.containsKey("scale")?g["scale"][1]:1.0;this.skewX=g.containsKey("skew")?g["skew"][0]:0.0;this.skewY=g.containsKey("skew")?g["skew"][1]:0.0;this.kB=g.containsKey("pivot")?g["pivot"][0]:0.0;this.qB=g.containsKey("pivot")?g["pivot"][1]:0.0;this.visible=g.containsKey("visible")?g["visible"]:true;this.alpha=g.containsKey("alpha")?g["alpha"]:1.0;this.qF=g.containsKey("tweened")?g["tweened"]:true;this.VF=g.containsKey("ease")?g["ease"]:0.0;}}class zH{var bC;var HD;var FD;zH( p,this.bC){this.HD=new Map<String,AI>();this.FD=new TB.Completer();var k=0;for(var j in p["atlases"] as List){var n=j["file"] as String;var q=NF(bC.AL,n);k++ ;var g=new VB.ImageElement();g.onLoad.listen((o){if( --k==0)this.FD.complete(this);});g.onError.listen((o){this.FD.completeError(new StateError("Failed to load image."));});g.src=q;for(var i in j["textures"] as List){var m=i["symbol"] as String;var h=i["rect"] as List;var l=i["origin"] as List;var t=new AI(h[0],h[1],h[2],h[3],l[0],l[1],g);this.HD[m]=t;}}}}class AI implements XC{var x,y,width,height;var eI,fI;var ID;var kO;var lO;AI(this.x,this.y,this.width,this.height,this.eI,this.fI,this.ID); OB( g){g.context.drawImageScaledFromSource(ID,x,y,width,height,0,0,width,height);}}//@ sourceMappingURL=stagexl_web.dart.map
