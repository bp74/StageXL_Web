import "dart:web_audio" as XE;import "dart:math" as gB;import "dart:html" as VB;import "dart:async" as TB;import "dart:json" as sF;class uI{static const  vI="Chrome";static const  wI="Firefox";static const  xI="Internet Explorer";static const  yI="Safari";final  FI;final  minimumVersion;const uI(this.FI,[this.minimumVersion]);}class zI{final  name;const zI(this.name);}class HJ extends UB{final  DK=[{'name':'DropShadowFilter (black)','filter':new RJ(10,gB.PI/4,yB.AD,0.8,8,8)},{'name':'GlowFilter (red)','filter':new PJ(yB.RF,1.0,20,20)},{'name':'ColorMatrixFilter (grayscale)','filter':new LJ.xJ()},{'name':'ColorMatrixFilter (invert)','filter':new LJ.yJ()},{'name':'BlurFilter (radius 1)','filter':new OJ(1,1)},{'name':'BlurFilter (radius 5)','filter':new OJ(5,5)},{'name':'BlurFilter (radius 10)','filter':new OJ(10,10)},{'name':'BlurFilter (radius 20)','filter':new OJ(20,20)}];HJ(){var m=new FB(940,500,true,0x000000);var k=QB.LC('king');var o=new FB(230,245,true,0xFFF0F0F0);var p=new wC(m);BB(p);for(int h=0;h<DK.length;h++ ){var i=235*(h%4);var j=250*(h~/4);var q=DK[h]['filter'] as YC;var t=DK[h]['name'] as String;var u=new EB(0,0,k.width,k.height);var n=new IB(i+40,j+45);m.DI(k,u,n,q);var l=new wC(o);l.x=i;l.y=j;BE(l,0);var g=new QJ();g.RC=new ZE('Helvetica Neue, Helvetica, Arial',14,yB.AD);g.x=i+5;g.y=j+5;g.width=200;g.text=t;BB(g);}}}class FJ extends UB{final  CK=new gB.Random();FJ(){var g=new fE();g.kB=470;g.qB=250;g.x=470;g.y=250;BB(g);for(int h=0;h<150;h++ ){var v=1+CK.nextInt(3);var p=QB.LC('flower${v}');var i=new wC(p);i.kB=64;i.qB=64;i.x=64+CK.nextInt(940-128);i.y=64+CK.nextInt(500-128);g.BB(i);var o=new FH(i,600,s.ZC);o.jB('rotation',gB.PI*60.0);NB.add(o);}var k=new List<IB>();for(int h=0;h<6;h++ ){var n=(h*60)*gB.PI/180;var m=(h*60+30)*gB.PI/180;k.add(new IB(470+200*gB.cos(n),250+200*gB.sin(n)));k.add(new IB(470+100*gB.cos(m),250+100*gB.sin(m)));}var t=new iE.sJ(100,100,740,300);var u=new iE.uJ(470,250,200);var q=new iE.wJ(k);VB.query('#mask-none').onClick.listen((j)=>g.mask=null);VB.query('#mask-rectangle').onClick.listen((j)=>g.mask=t);VB.query('#mask-circle').onClick.listen((j)=>g.mask=u);VB.query('#mask-custom').onClick.listen((j)=>g.mask=q);VB.query('#mask-spin').onClick.listen((j){var l=new FH(g,2.0,s.SF);l.jB('rotation',gB.PI*4.0);l.onComplete=()=>g.pC=0.0;NB.add(l);});}}class JJ extends UB{var CK=new gB.Random();var FK;var GK;JJ(){FK=QB.IE('walkTextureAtlas');GK=FK.TI('walk');JK();}JK(){var h=CK.nextDouble();var g=new TJ(GK,30);g.x=-128;g.y=20.0+180.0*h;g.lB=g.mB=0.5+0.5*h;g.play();BB(g);qI((k,j)=>(k.y-j.y).toInt());var i=new FH(g,5.0+(1.0-h)*5.0,s.ZC);i.jB('x',940.0);i.onComplete=(){NB.remove(g);iF(g);};NB.add(g);NB.add(i);NB.VF(JK,0.2);}}class GJ extends wC implements aB{var OD,PD;GJ( g,this.OD,this.PD):super(g){this.kB=g.width/2;this.qB=g.height/2;} pB( i){var g=x+OD*i;var h=y+PD*i;if(g>910||g<30)OD=-OD;else x=g;if(h>470||h<30)PD=-PD;else y=h;return true;}}class BJ extends UB{final  EK=['C4','A3','A3','C4','D4','G3','G3','A3','A3#','F4','F4','E4','C4','D4','C4','A3#','A3','C4','D4','D4','D4','G4','F4','E4','F4','D4','C4','F3','G3','A3','D4','C4','C4','A3#','A3','E3','F3'];final  IK=['Hey ','Jude, ',"don't ",'make ','it ','bad.<br>','Take ','a ','sad ','song ','and ','make ','it ','better.<br>','','','','Remember ','','','to ','let ','her ','into ','','your ','heart.<br>','Than ','you ','can ','start ','','to ','make ','things ','better.','',' '];BJ(){var h=new wC(QB.LC('Background'));BB(h);var g=new tF(EK,IK);g.x=120;g.y=30;BB(g);VB.query('#startOver').onClick.listen((i)=>g.nI());}}class IJ extends UB{final  pI='''
Filet mignon leberkas pig pork chop biltong, short loin strip steak turkey brisket 
venison. Pastrami venison pancetta, leberkas pork chop chicken prosciutto beef ribs 
bresaola kielbasa swine biltong capicola. Hamburger beef ribs ball tip drumstick salami 
pig. Capicola pork loin shank, salami chicken hamburger tail. Sirloin spare ribs
ground round cow strip steak prosciutto swine bacon corned beef.''';IJ(){var k=pI.replaceAll('\r','').replaceAll('\n','');var j=new QJ();j.RC=new ZE('Helvetica,Arial',14,yB.bH,bold:true,italic:true);j.text=k;j.x=10;j.y=10;j.width=920;j.height=20;BB(j);var h=new QJ();h.RC=new ZE('Helvetica,Arial',16,yB.RF);h.text=k;h.x=10;h.y=50;h.width=200;h.height=300;h.wordWrap=true;BB(h);var g=new QJ();g.RC=new ZE('Helvetica,Arial',16,yB.sG,align:NC.zE);g.text=k;g.x=300;g.y=50;g.width=200;g.height=300;g.wordWrap=true;BB(g);var i=new QJ();i.RC=new ZE('Caesar Dressing',30,yB.AD,align:NC.WD);i.text=k;i.x=590;i.y=50;i.width=340;i.height=300;i.wordWrap=true;BB(i);}}class CJ extends UB{CJ(){var g=new QJ();g.RC=new ZE('Helvetica,Arial',14,yB.OH,bold:true);g.text='ToDo: show a cool demo ...';g.x=10;g.y=10;g.width=920;g.height=20;BB(g);}}class DJ extends UB{DJ(){var k=QB.VI('flump');var i=new UJ(k,'idle');i.x=500;i.y=200;BB(i);var j=new UJ(k,'walk');j.x=150;j.y=460;BB(j);var g=new UJ(k,'attack');g.x=450;g.y=460;BB(g);var h=new UJ(k,'defeat');h.x=720;h.y=460;BB(h);NB.add(i);NB.add(j);NB.add(g);NB.add(h);FB.lD('images/flumpLibraryAtlas0.png').then((m){var l=new wC(m);l.x=40;l.y=40;BB(l);});}}class AJ extends UB{var FK;AJ(){FK=QB.IE('levelUp');HK();FB.lD('images/LevelupTextureAtlas.png').then((h){var g=new wC(h);g.x=70;g.y=40;BB(g);});}HK(){var l=330;for(int j=0;j<7;j++ ){var h=FK.LC('LevelUp${j}');var g=new wC(h);g.kB=h.width/2;g.qB=h.height/2;g.x=l+h.width/2;g.y=150;g.lB=0.0;g.mB=0.0;BB(g);var k=new FH(g,2.0,s.CD);k.jB('scaleX',1.0);k.jB('scaleY',1.0);k.UF=j*0.05;var i=new FH(g,0.4,s.ZC);i.jB('scaleX',0.0);i.jB('scaleY',0.0);i.UF=2.0;i.onComplete=()=>g.KE();NB.add(k);NB.add(i);l=l+5+h.width;}NB.VF(()=>HK(),3.0);}}class EJ{final  BK=[{"name":"linear","transition":s.ZC},{"name":"sine","transition":s.JF},{"name":"cosine","transition":s.JH},{"name":"random","transition":s.MH},{"name":"easeInQuadratic","transition":s.fD},{"name":"easeOutQuadratic","transition":s.gD},{"name":"easeInOutQuadratic","transition":s.QH},{"name":"easeOutInQuadratic","transition":s.SH},{"name":"easeInCubic","transition":s.hD},{"name":"easeOutCubic","transition":s.iD},{"name":"easeInOutCubic","transition":s.QF},{"name":"easeOutInCubic","transition":s.YH},{"name":"easeInQuartic","transition":s.jD},{"name":"easeOutQuartic","transition":s.kD},{"name":"easeInOutQuartic","transition":s.cH},{"name":"easeOutInQuartic","transition":s.dH},{"name":"easeInQuintic","transition":s.mD},{"name":"easeOutQuintic","transition":s.nD},{"name":"easeInOutQuintic","transition":s.fH},{"name":"easeOutInQuintic","transition":s.gH},{"name":"easeInCircular","transition":s.oD},{"name":"easeOutCircular","transition":s.qD},{"name":"easeInOutCircular","transition":s.hH},{"name":"easeOutInCircular","transition":s.iH},{"name":"easeInSine","transition":s.rD},{"name":"easeOutSine","transition":s.sD},{"name":"easeInOutSine","transition":s.kH},{"name":"easeOutInSine","transition":s.oH},{"name":"easeInExponential","transition":s.tD},{"name":"easeOutExponential","transition":s.uD},{"name":"easeInOutExponential","transition":s.pH},{"name":"easeOutInExponential","transition":s.qH},{"name":"easeInBack","transition":s.vD},{"name":"easeOutBack","transition":s.wD},{"name":"easeInOutBack","transition":s.SF},{"name":"easeOutInBack","transition":s.tH},{"name":"easeInElastic","transition":s.xD},{"name":"easeOutElastic","transition":s.CD},{"name":"easeInOutElastic","transition":s.uH},{"name":"easeOutInElastic","transition":s.wH},{"name":"easeInBounce","transition":s.yD},{"name":"easeOutBounce","transition":s.DD},{"name":"easeInOutBounce","transition":s.xH},{"name":"easeOutInBounce","transition":s.yH}]; YI(){var j=new VB.DivElement();for(int h=0;h<BK.length/4;h++ ){var i=new VB.DivElement();i.classes.add("row");j.children.add(i);for(int g=0;g<4;g++ ){var m=BK[h*4+g]["name"];var l=BK[h*4+g]["transition"];var k=UK(m,l);k.id="cell";i.children.add(k);}}return j;} UK( o, q( ratio)){var h=new VB.DivElement();h.classes.add("span3");h.style.height="130px";var j=new VB.CanvasElement(width:200,height:140);j.style.position="absolute";j.style.zIndex="1";h.children.add(j);var i=new VB.DivElement();i.text=o;i.style.position="relative";i.style.zIndex="2";i.style.top="6px";h.children.add(i);var l=new mC("stage",j);var n=new NJ();var g=n.ZI;g.beginPath();g.moveTo(0.5,30.5);g.lineTo(199.5,30.5);g.lineTo(199.5,109.5);g.lineTo(0.5,109.5);g.closePath();g.pF(0xFF000000);g.LI(0xFFDFDFDF);g.beginPath();g.moveTo(0.5,109.5);for(int k=0;k<=199;k++ ){var m=k/199.0;var p=0.5+m*199.0;var t=109.5-79.0*q(m);g.lineTo(p,t);}g.pF(0xFF0000FF,2);l.BB(n);l.ZF();return h;}}var nB;var QD;var NB;var QB;class KJ extends UB{KJ(){KK(250);VB.query('#minus10').onClick.listen((g)=>LK(10));VB.query('#minus50').onClick.listen((g)=>LK(50));VB.query('#plus50').onClick.listen((g)=>KK(50));VB.query('#plus10').onClick.listen((g)=>KK(10));this.dI.listen(MK);}var NK=null;MK( g){if(NK==null){NK=1.00/g.fF;}else{NK=0.05/g.fF+0.95*NK;}VB.query('#fpsMeter').innerHtml='fps: ${NK.round()}';}KK( l){var g=new gB.Random();var i=QB.IE('flags');var j=i.OI;while ( --l>=0){var k=j[g.nextInt(j.length)];var m=i.LC(k);var h=new GJ(m,g.nextInt(200)-100,g.nextInt(200)-100);h.x=30+g.nextInt(940-60);h.y=30+g.nextInt(500-60);BB(h);NB.add(h);}VB.query('#flagCounter').innerHtml='Flags: ${JE}';}LK( h){while ( --h>=0&&JE>0){var g=UI(0);g.KE();NB.remove(g);}VB.query('#flagCounter').innerHtml='Flags: ${JE}';}} main(){var l=VB.window.location.pathname;var m=new RegExp(r"([A-Za-z0-9-]+)\.html",multiLine:false,caseSensitive:false);var g=m.firstMatch(l);if(g!=null&&g.groupCount==1){var h=g.group(1);print("current page: ${h}");var i=VB.query("#stage");if(i!=null){nB=new mC('stage',i);QD=new yF();QD.CI(nB);NB=QD.cI;QB=new oE();}switch (h){case "filter":QB..oB('king','images/king.png')..load().then((PK)=>nB.BB(new HJ()));break;case "masking":QB..oB('flower1','images/Flower1.png')..oB('flower2','images/Flower2.png')..oB('flower3','images/Flower3.png')..load().then((PK)=>nB.BB(new FJ()));break;case "movieclip":QB..CE('walkTextureAtlas','images/walk.json',eC.zC)..load().then((PK)=>nB.BB(new JJ()));break;case "performance":QB..CE('flags','images/flags.json',eC.zC)..load().then((PK)=>nB.BB(new KJ()));break;case "sound":QB..oB('KeyBlack','images/piano/KeyBlack.png')..oB('KeyWhite0','images/piano/KeyWhite0.png')..oB('KeyWhite1','images/piano/KeyWhite1.png')..oB('KeyWhite2','images/piano/KeyWhite2.png')..oB('KeyWhite3','images/piano/KeyWhite3.png')..oB('Finger','images/piano/Finger.png')..oB('Background','images/piano/Background.jpg')..HB('Cheer','sounds/Cheer.mp3')..HB('Note1','sounds/piano/Note1.mp3')..HB('Note2','sounds/piano/Note2.mp3')..HB('Note3','sounds/piano/Note3.mp3')..HB('Note4','sounds/piano/Note4.mp3')..HB('Note5','sounds/piano/Note5.mp3')..HB('Note6','sounds/piano/Note6.mp3')..HB('Note7','sounds/piano/Note7.mp3')..HB('Note8','sounds/piano/Note8.mp3')..HB('Note9','sounds/piano/Note9.mp3')..HB('Note10','sounds/piano/Note10.mp3')..HB('Note11','sounds/piano/Note11.mp3')..HB('Note12','sounds/piano/Note12.mp3')..HB('Note13','sounds/piano/Note13.mp3')..HB('Note14','sounds/piano/Note14.mp3')..HB('Note15','sounds/piano/Note15.mp3')..HB('Note16','sounds/piano/Note16.mp3')..HB('Note17','sounds/piano/Note17.mp3')..HB('Note18','sounds/piano/Note18.mp3')..HB('Note19','sounds/piano/Note19.mp3')..HB('Note20','sounds/piano/Note20.mp3')..HB('Note21','sounds/piano/Note21.mp3')..HB('Note22','sounds/piano/Note22.mp3')..HB('Note23','sounds/piano/Note23.mp3')..HB('Note24','sounds/piano/Note24.mp3')..HB('Note25','sounds/piano/Note25.mp3')..load().then((PK)=>nB.BB(new BJ()));break;case "text":nB.BB(new IJ());break;case "tweener":nB.BB(new CJ());break;case "flump":QB..BI('flump','images/flumpLibrary.json')..load().then((PK)=>nB.BB(new DJ()));break;case "texturepacker":QB..CE('levelUp','images/LevelupTextureAtlas.json',eC.zC)..load().then((PK)=>nB.BB(new AJ()));break;case "transitions":var k=new EJ();var j=k.YI();VB.query("#transitions").children.add(j);break;}}}class tF extends UB{final  dC;final  cC;final  OK=['C3','C3#','D3','D3#','E3','F3','F3#','G3','G3#','A3','A3#','B3','C4','C4#','D4','D4#','E4','F4','F4#','G4','G4#','A4','A4#','B4','C5'];var QK=new Map<String,uF>();var RK;var SK=0;tF(this.dC,this.cC){for(int h=0,i=0;h<OK.length;h++ ){var k=QB.XF('Note${h+1}');var j=OK[h];var g=QK[j]=new uF(this,j,k);if(j.endsWith('#')){g.x=i-16;g.y=35;BB(g);}else{g.x=i;g.y=35;BE(g,0);i=i+47;}}RK=new wC(QB.LC('Finger'));RK.kB=20;BB(RK);TK();}GI( g){if(SK<dC.length&&dC[SK]==g){if(SK==dC.length-1)QB.XF('Cheer').play();SK++ ;TK();}}nI(){SK=0;RK.alpha=1;TK();}TK(){var h=VB.query('#lyrics');var m=-1;h.innerHtml='';for(int g=0,j=0;g<cC.length;g++ ){if(cC[g]!='')j=g;if(g==this.SK)m=j;}for(int g=0;g<cC.length;g++ ){if(g==m){h.appendHtml('<span id="word">${cC[g]}</span>');}else{h.appendHtml(cC[g]);}}if(SK<dC.length){var k=dC[SK];if(QK.containsKey(k)){var i=QK[k];NB.mI(RK);RK.y=0;var n=new FH(this.RK,0.4,s.QF);var l=new FH(this.RK,0.4,s.JF);n.jB('x',i.x+i.width/2);l.jB('y',-10);NB.add(n);NB.add(l);}}else{var o=new FH(RK,0.4,s.ZC);o.jB('alpha',0);NB.add(o);}}}class uF extends fE{final  gF;final  cB;final  mF;uF(this.gF,this.cB,this.mF){var h;if(cB.endsWith('#')){h='KeyBlack';}else if(cB.startsWith('C5')){h='KeyWhite0';}else if(cB.startsWith('C')||cB.startsWith('F')){h='KeyWhite1';}else if(cB.startsWith('D')||cB.startsWith('G')||cB.startsWith('A')){h='KeyWhite2';}else if(cB.startsWith('E')||cB.startsWith('B')){h='KeyWhite3';}var i=QB.LC(h);var l=new wC(i);this.BB(l);var j=cB.endsWith('#')?yB.vH:yB.AD;var k=new ZE('Helvetica,Arial',10,j,align:NC.WD);var g=new QJ();g.RC=k;g.text=cB;g.width=i.width;g.height=20;g.dF=false;g.y=i.height-20;BB(g);this.NE=true;this.onMouseDown.listen(VK);this.onMouseOver.listen(VK);this.onMouseUp.listen(WK);this.onMouseOut.listen(WK);}VK( g){if(g.HC){this.mF.play();this.alpha=0.7;this.gF.GI(this.cB);}}WK( g){this.alpha=1.0;}}class GC{var nK; aI( g){if(nK!=null)return nK.containsKey(g)||nK.containsKey("${g}_CAPTURE");else return false;} dispatchEvent( g){qN(g,this,this,wB.OC);} qN( g, k, l, i){if(nK!=null){var j=(i==wB.kE)?"${g.type}_CAPTURE":g.type;var h=nK[j];if(h!=null){g.ML=k;g.oN=l;g.aN=i;g.dN=false;g.hN=false;h.XN(g);}}} LM( g, j){if(nK==null)nK=new Map<String,iC>();var i=j?"${g}_CAPTURE":g;var h=nK[i];if(h==null)h=nK[i]=new iC(this,g,j);return h;}}abstract class aB{ pB( g);}class gE{var cK;var uK;var KL;var TL;var ZL;var jL;var tL;var xL;var BM;var KM;var RM;gE( g, h){cK=g;uK=h;} get rI=>uK; get name=>cK; get RI=>KL; get SI=>TL; get QI=>ZL; get NI=>jL; get offsetX=>tL; get offsetY=>xL; get hI=>BM; get gI=>KM; get oI=>RM;}class AG<jC>{final  fK=new List<jC>();final  LL;var WL=0;AG( g()):LL=g; jI(){if(WL==0){return LL();}else{WL-- ;return fK[WL];}}kI( g){if(WL==fK.length){fK.add(g);}else{fK[WL]=g;}WL++ ;}reset(){fK.clear();WL=0;}}class ZB{var volume;var pan;var lJ=1;var mJ=0;var pJ=1;var oJ=0;ZB([this.volume=1,this.pan=0]);}abstract class MC extends GC{ set KD( g); stop();}class TD{static var jE=hB.VD;static var PG=false;static var bG=new TB.StreamController<String>();static var fG=bG.stream.asBroadcastStream();static  PF( i){var h=i;var g="auto";if(jE!=hB.VD)h=jE;switch (h){case hB.VD:g="auto";break;case hB.YD:g="default";break;case hB.ZD:g="pointer";break;case hB.cG:g="move";break;case hB.dG:g="text";break;case hB.gG:g="wait";break;}if(PG)g="none";return g;}}class aE extends iB{aE(){}static  lD( g){return new TB.Future<iB>.of(()=>new aE());} get length{return double.NAN;} play([ loop=false, soundTransform]){if(soundTransform==null){soundTransform=new ZB();}return new MJ(this,loop,soundTransform);}}class MJ extends MC{var oK;var JL;MJ( i, h, g){oK=h;JL=g;}set KD( g){JL=g;} stop(){}}class BG{static const  QG="pixel";}class QJ extends JB{var tK="";var GL=0x000000;var aL=null;var sL=wF.HF;var GM=BG.QG;var XK=zF.IG;var VM=false;var aM=false;var cM=0x000000;var jM=false;var nM=0x000000;var rM=0;var uM=0;var xM;var BN;var DN=true;var GN=100;var IN=100;var LN=null;var pK=null;QJ(){aL=new ZE("Arial",12,0x000000);xM=new List<String>();BN=new List<dE>();} get type=>XK; get width=>GN; get height=>IN; set text( g){tK=g;DN=true;} set RC( g){aL=g;GL=aL.color;DN=true;} set wordWrap( g){VM=g;DN=true;} set width( g){GN=g;DN=true;} set height( g){IN=g;DN=true;} DC( g,[ returnRectangle]){return pD(g,GN,IN,returnRectangle);} IC( g, h){if(g>=0&&h>=0&&g<GN&&h<IN)return this;return null;} OB( g){gO();g.pK.drawImage(LN,0.0,0.0);} jO(){xM.clear();BN.clear();if(VM==false){xM.add(tK);}else{for(String n in tK.replaceAll('\r','').split('\n')){var h=new StringBuffer();var i=0;var g="";for(String j in n.split(' ')){i=h.length;h.write((i>0)?" ${j}":j);g=h.toString();if(pK.measureText(g).width>GN){if(i>0){g=g.substring(0,i);}else{j="";}xM.add(g);h=new StringBuffer();h.write(j);}}if(h.isEmpty==false){xM.add(h.toString());}}}rM=0;uM=0;for(String g in xM){var l=pK.measureText(g);var m=0;if(aL.align==NC.WD||aL.align==NC.XG)m=(GN-l.width)/2;if(aL.align==NC.zE||aL.align==NC.RG)m=GN-l.width;var k=new dE(m,l.width,aL.size,0,0,0);BN.add(k);rM=gB.max(rM,k.width);uM=uM+k.height;}} gO(){if(DN){DN=false;var j=GN.ceil().toInt();var i=IN.ceil().toInt();if(LN==null){LN=new VB.CanvasElement(width:j,height:i);pK=LN.context2d;}if(LN.width!=j)LN.width=j;if(LN.height!=i)LN.height=i;var g=new StringBuffer();g.write(aL.italic?"italic ":"normal ");g.write("normal ");g.write(aL.bold?"bold ":"normal ");g.write("${aL.size}px ");g.write("${aL.font},sans-serif");pK.font=g.toString();pK.textAlign="start";pK.textBaseline="top";pK.fillStyle=kC(GL);jO();if(aM){pK.fillStyle=kC(cM);pK.fillRect(0,0,GN,IN);}else{pK.clearRect(0,0,GN,IN);}var k=0;for(int h=0;h<xM.length;h++ ){var l=BN[h];pK.fillStyle=kC(GL);pK.fillText(xM[h],l.x,k);k+= l.height;}if(jM){pK.strokeStyle=kC(nM);pK.lineWidth=1;pK.strokeRect(0,0,GN,IN);}}}}class wF{static const  HF="none";}class zF{static const  IG="dynamic";}class ZE{var font;var size;var color;var bold;var italic;var underline;var align;var leftMargin;var rightMargin;var indent;var leading;var letterSpacing=0;var YJ=0;var ZJ=false;var kJ=false;ZE(this.font,this.size,this.color,{this.bold: false,this.italic: false,this.underline: false,this.align: "left",this.leftMargin: 0,this.rightMargin: 0,this.indent: 0,this.leading: 0});}class SD extends iB{var rK;var OL;var lL;SD(){lL=new List<xC>();rK=new VB.AudioElement();rK.onEnded.listen(XM);OL=new List<VB.AudioElement>();OL.add(rK);VB.document.body.children.add(rK);}static  lD( o){var k=new SD();var g=k.rK;var i=new TB.Completer<iB>();var h;var j;n(m){h.cancel();j.cancel();i.complete(k);}l(m){h.cancel();j.cancel();i.completeError(new StateError("Failed to load audio."));}h=g.onCanPlayThrough.listen(n);j=g.onError.listen(l);g.src=iB.NF(o);g.load();return i.future;} get length{return rK.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new ZB();return new xC(this,loop,soundTransform);} pM( h){var g;if(OL.length==0){g=rK.clone(true);g.onEnded.listen(XM);}else{g=OL.removeAt(0);}lL.add(h);return g;} sN( g){var h=g.rK;var i=lL.indexOf(g);lL.removeAt(i);OL.add(h);if(rK.currentTime>0&&rK.ended==false)rK.currentTime=0;} XM(j){var i=j.target;var g=null;for(int h=0;h<lL.length&&g==null;h++ )if(lL[h].rK==i)g=lL[h];if(g!=null)g.stop();}}class dE{var EI;var HI;var height;var leading;var width;var x;dE(this.x,this.width,this.height,this.EI,this.HI,this.leading);}class WC{static const  HG=0;static const  NG=1;static const  zE=2;static const  ZG=3;static const  uE=4;}class NC{static const  WD="center";static const  RG="end";static const  XG="justify";static const  zE="right";}class CG{var name;var arguments;CG(this.name,[this.arguments]);}class yB{static const  AD=0xFF000000;static const  sG=0xFF0000FF;static const  OH=0xFFA9A9A9;static const  bH=0xFF008000;static const  RF=0xFFFF0000;static const  vH=0xFFFFFFFF;}class UD extends iB{var qK;UD(){if(fC.BD==null)throw new UnsupportedError("This browser does not support Web Audio API.");}static  lD( n){var h=new UD();var k=iB.NF(n);var g=new TB.Completer<iB>();VB.HttpRequest.request(k,responseType:'arraybuffer').then((i){var j=i.response;var m=fC.BD;m.decodeAudioData(j,( l){h.qK=l;g.complete(h);},(o){g.completeError(new StateError("Failed to decode audio."));});}).catchError((o){g.completeError(new StateError("Failed to load audio."));});return g.future;} get length{return qK.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new ZB();return new SJ(this,loop,soundTransform);}}class fC{static var oG=HH();static var BD=UH();static var FF=VH();static  HH(){var h=(BD!=null)?"WebAudioApi":"AudioElement";var g=VB.window.navigator.userAgent;if(g.contains("IEMobile"))if(g.contains("9.0")||g.contains("10.0"))h="Mock";if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod"))if(g.contains("OS 3")||g.contains("OS 4")||g.contains("OS 5"))h="Mock";if(FF.length==0)h="Mock";print("dartflash: supported audio engine is: ${h}");return h;}static  UH(){if(XE.AudioContext.supported)return new XE.AudioContext();return null;}static  VH(){var g=new List<String>();var h=new VB.AudioElement();var i=["maybe","probably"];if(i.indexOf(h.canPlayType("audio/ogg",""))!=-1)g.add("ogg");if(i.indexOf(h.canPlayType("audio/mpeg",""))!=-1)g.add("mp3");if(i.indexOf(h.canPlayType("audio/wav",""))!=-1)g.add("wav");print("dartflash: supported audio types are: ${g}");return g;}}class DG{static const  OG="round";}class EG{static const  OG="round";}class FG extends JB{FG();}final  lE=new AG<List<AB>>(()=>new List<AB>());class cE implements aB{final  xK;var IL=0.0;var VL=0.0;var hL=1;cE( g, h):xK=g{VL=gB.max(h,0.0001);} pB( h){var g=IL+h;while (g>=VL&&hL>0){IL=VL;hL-- ;xK();g-= VL;}IL=g;return (hL>0);} get currentTime=>IL;}class eC{static const  KG="json";static const  zC="jsonarray";}class RD implements aB{final  BL=new List<aB>();var cL=0;var oL=0.0; add( g){if(g==null)return;if(this.contains(g))return;if(cL==BL.length){BL.add(g);}else{BL[cL]=g;}cL++ ;} remove( h){if(h==null)return;for(int g=0;g<cL;g++ ){if(BL[g]==h){BL[g]=null;break;}}} contains( h){if(h==null)return false;for(int g=0;g<cL;g++ ){if(BL[g]==h){return true;}}return false;} mI( i){if(i==null)return;for(int g=0;g<cL;g++ ){var h=BL[g];if(h!=null&&h is FH){if(h.II==i){BL[g]=null;}}}} VF( h, i){var g=new cE(h,i);add(g);return g;} pB( k){oL+= k;var j=cL;var h=0;for(int g=0;g<j;g++ ){var i=BL[g];if(i==null)continue;if(i.pB(k)==false){BL[g]=null;continue;}if(h!=g){BL[h]=i;BL[g]=null;}h++ ;}if(h!=j){for(int g=j;g<cL;g++ ){BL[h++ ]=BL[g];BL[g]=null;}cL=h;}return true;}}abstract class iB{static  lD( g){var h=fC.oG;if(h=="WebAudioApi")return UD.lD(g);if(h=="AudioElement")return SD.lD(g);return aE.lD(g);} get length; play([ loop=false, soundTransform]);static  NF( g){var m=new RegExp(r"\.(ogg|mp3|wav)$",multiLine:false,caseSensitive:false);var i=m.firstMatch(g);var h=fC.FF;if(i==null)throw new ArgumentError("Unsupported file extension.");if(h.length==0)throw new UnsupportedError("This browser supports no known audio codec.");var j=i.group(1).toLowerCase();if(h.indexOf(j)==-1){var l=g.substring(0,g.length-j.length);var k=h[0];g="${l}${k}";}return g;}}class xF{var name;var dB;var qF;xF(this.name,this.dB,this.qF);}class hC{static const  JG="exactFit";static const  SG="noBorder";static const  aG="noScale";static const  vE="showAll";}class IB{var x;var y;IB(this.x,this.y);IB.rJ():this(0,0); get length=>gB.sqrt(this.x*this.x+this.y*this.y); add( g)=>new IB(this.x+g.x,this.y+g.y); GD( g){this.x=g.x;this.y=g.y;} equals( g)=>this.x==g.x&&this.y==g.y;}class EB{var x;var y;var width;var height;EB(this.x,this.y,this.width,this.height);EB.rJ():this(0,0,0,0); get left=>this.x; get top=>this.y; get right=>this.x+this.width; get bottom=>this.y+this.height; get size=>new IB(this.width,this.height); set top( g){this.y=g;} contains( g, h)=>(this.x<=g&&this.y<=h&&this.right>=g&&this.bottom>=h); equals( g)=>(this.x==g.x&&this.y==g.y&&this.width==g.width&&this.height==g.height); get isEmpty=>(this.width==0&&this.height==0); GD( g){this.x=g.x;this.y=g.y;this.width=g.width;this.height=g.height;} union( g){var i=gB.min(this.left,g.left);var j=gB.min(this.top,g.top);var h=gB.max(this.right,g.right);var k=gB.max(this.bottom,g.bottom);return new EB(i,h,h-i,k-j);}}class vF{var x;var y;var hF;vF(this.x,this.y,this.hF);}class KB{var YK,ZK,bK,dK,hK,lK;var zK;KB.vJ():YK=1.0,ZK=0.0,bK=0.0,dK=1.0,hK=0.0,lK=0.0,zK=1.0; get a=>YK; get b=>ZK; get c=>bK; get d=>dK; get eB=>hK; get fB=>lK; get aC=>zK; sI( h){var i=h.x.toDouble();var g=h.y.toDouble();return new IB(i*YK+g*bK+hK,i*ZK+g*dK+lK);} xN( h){var i=h.x.toDouble();var g=h.y.toDouble();return new IB(i*YK+g*bK+hK,i*ZK+g*dK+lK);} concat( g){var m=YK;var p=ZK;var q=bK;var o=dK;var l=hK;var n=lK;var u=zK;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var v=g.eB;var t=g.fB;var CB=g.aC;YK=(m*j+p*i).toDouble();ZK=(m*k+p*h).toDouble();bK=(q*j+o*i).toDouble();dK=(q*k+o*h).toDouble();hK=(l*j+n*i+v).toDouble();lK=(l*k+n*h+t).toDouble();zK=(u*CB).toDouble();} bI(){YK=1.0;ZK=0.0;bK=0.0;dK=1.0;hK=0.0;lK=0.0;zK=1.0;} YF(){var j=YK;var m=ZK;var l=bK;var k=dK;var h=hK;var i=lK;var g=zK;YK=(k/g).toDouble();ZK=-(m/g).toDouble();bK=-(l/g).toDouble();dK=(j/g).toDouble();hK=-(YK*h+bK*i).toDouble();lK=-(ZK*h+dK*i).toDouble();zK=(1.0/g).toDouble();} qC( h, i, g, k, j, l){YK=h.toDouble();ZK=i.toDouble();bK=g.toDouble();dK=k.toDouble();hK=j.toDouble();lK=l.toDouble();zK=(YK*dK-ZK*bK).toDouble();} GD( g){YK=g.a.toDouble();ZK=g.b.toDouble();bK=g.c.toDouble();dK=g.d.toDouble();hK=g.eB.toDouble();lK=g.fB.toDouble();zK=g.aC.toDouble();} TF( h, g){var n=h.a;var q=h.b;var t=h.c;var p=h.d;var m=h.eB;var o=h.fB;var v=h.aC;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var CB=g.eB;var u=g.fB;var GB=g.aC;YK=(n*k+q*j).toDouble();ZK=(n*l+q*i).toDouble();bK=(t*k+p*j).toDouble();dK=(t*l+p*i).toDouble();hK=(m*k+o*j+CB).toDouble();lK=(m*l+o*i+u).toDouble();zK=(v*GB).toDouble();}}class yF{var aK;var sK;var CL;var YL;var pL;yF(){aK=new RD();sK=new List<mC>();CL=double.NAN;YL=yC.wE;pL=new gC(0);VB.window.requestAnimationFrame(qM);} get cI=>aK; qM( g){VB.window.requestAnimationFrame(qM);if(CL.isNaN)CL=g;if(CL>g)CL=g;var j=g-CL;var i=j/1000.0;if(j>=1){CL=g;pL.iK=i;YL.XN(pL);aK.pB(i);for(int h=0;h<sK.length;h++ ){var k=sK[h];k.ZF();}}} CI( g){sK.add(g);}}class WB{final  pK;final  QL=new List<KB>(100);final  nL=new List<double>(100);var AM=0;WB.tJ( j,[ matrix]):pK=j{for(int h=0;h<100;h++ ){QL[h]=new KB.vJ();nL[h]=1.0;}if(matrix!=null)QL[0].GD(matrix);var g=QL[0];var i=nL[0];pK.setTransform(g.a,g.b,g.c,g.d,g.eB,g.fB);pK.globalAlpha=i;} get context=>pK; reset([ matrix]){if(matrix!=null)QL[0].GD(matrix);AM=0;var g=QL[0];var h=nL[0];pK.setTransform(g.a,g.b,g.c,g.d,g.eB,g.fB);pK.globalAlpha=h;pK.clearRect(0,0,pK.canvas.width,pK.canvas.height);} kF( h){var i=AM;var j=AM+1;var n=QL[i];var g=QL[j];var o=nL[i];var m=nL[j]=h.oM*o;g.TF(h.CO,n);pK.setTransform(g.a,g.b,g.c,g.d,g.eB,g.fB);pK.globalAlpha=m;AM=j;var k=h.vM;var l=h.yM;if(k!=null){pK.save();k.OB(this);}if(l!=null){l.OB(this);}else{h.OB(this);}if(k!=null){pK.restore();}AM=i;}}class DB{static const  MG="added";static const  VG="addedToStage";static const  aD="enterFrame";static const  eG="removed";static const  jG="removedFromStage";static const  nG="resize";static const  IH="complete";static const  LF="progress";var XK;var lN;var aN;var ML;var oN;var dN;var hN;DB( g,[ bubbles=false]){JN(g,bubbles);} JN( g,[ bubbles=false]){XK=g;lN=bubbles;aN=wB.OC;ML=null;oN=null;dN=false;hN=false;} get MD=>dN; get type=>XK; get bubbles=>lN; get DE=>true; get target=>ML;}class wB{static const  kE=1;static const  OC=2;static const  WG=3;}class xB{final  jK=new VB.ImageElement();final  dL=new List<gE>();static  lD( m, u){var l=new TB.Completer<xB>();var j=new xB();switch (u){case eC.KG:case eC.zC: n( k, g){var q=GH(k);var h=new gE(q,j);h.KL=g["frame"]["x"].toInt();h.TL=g["frame"]["y"].toInt();h.ZL=g["frame"]["w"].toInt();h.jL=g["frame"]["h"].toInt();h.tL=g["spriteSourceSize"]["x"].toInt();h.xL=g["spriteSourceSize"]["y"].toInt();h.BM=g["sourceSize"]["w"].toInt();h.KM=g["sourceSize"]["h"].toInt();h.RM=g["rotated"] as bool;j.dL.add(h);}VB.HttpRequest.getString(m).then((t){var o=sF.parse(t);var i=o["frames"];var p=o["meta"];if(i is List)for(var g in i)n(g["filename"],g);if(i is Map)for(String k in i.keys)n(k,i[k]);j.jK..onLoad.listen((v)=>l.complete(j))..onError.listen((v)=>l.completeError(new StateError("Failed to load image.")))..src=OF(m,p["image"]);}).catchError((CB){l.completeError(new StateError("Failed to load json file."));});break;}return l.future;} get ID=>jK; LC( i){var h;for(int g=0;g<dL.length&&h==null;g++ )if(dL[g].name==i)h=new FB.AK(dL[g]);if(h==null)throw new ArgumentError("TextureAtlasFrame not found: '${i}'");return h;} TI( i){var h=new List<FB>();for(int g=0;g<dL.length;g++ )if(dL[g].name.indexOf(i)==0)h.add(new FB.AK(dL[g]));return h;} get OI{return dL.map((g)=>g.name).toList();}}class yC<jC extends DB>{final  nK=new List<iC>();var eL=0;static var wE=new yC<gC>(); hM( g){for(int h=0;h<eL;h++ )if(nK[h]==g)return;if(eL==nK.length)nK.add(g);else nK[eL]=g;eL++ ;} XN( j){j.aN=wB.OC;j.dN=false;j.hN=false;var k=eL;var i=0;for(int g=0;g<k;g++ ){var h=nK[g];if(h==null)continue;if(h.TM==0){nK[g]=null;continue;}j.ML=h.ML;j.oN=h.ML;h.XN(j);if(i!=g){nK[i]=h;nK[g]=null;}i++ ;}if(i!=k){for(int g=k;g<eL;g++ ){nK[i++ ]=nK[g];nK[g]=null;}eL=i;}}}class iC<jC extends DB> extends TB.Stream<jC>{final  ML;final  yK;final  mL;final  CM=new List<LG>();var TM=0;iC(this.ML,this.yK,this.mL); get isBroadcast=>true; asBroadcastStream()=>this; listen( h( event),{ onError( error), onDone(), unsubscribeOnError}){var g=new LG<jC>(this,h);if(TM==CM.length)CM.add(g);else CM[TM]=g;TM++ ;if(yK==DB.aD&&mL==false)yC.wE.hM(this);return g;} CN( h){for(int g=0;g<TM;g++ ){if(CM[g]==h){CM[g]=null;break;}}} XN( k){var j=TM;var h=0;for(int g=0;g<j;g++ ){var i=CM[g];if(i==null)continue;i.EM(k);if(h!=g){CM[h]=i;CM[g]=null;}h++ ;}if(h!=j){for(int g=j;g<TM;g++ ){CM[h++ ]=CM[g];CM[g]=null;}TM=h;}}}class bB<jC extends DB>{final  yK;const bB(this.yK); forTarget( g,{ useCapture: false}){return g.LM(yK,useCapture);}}class hE{final  mK=new List<CG>();clear()=>mK.clear();beginPath()=>mK.add(new CG("beginPath"));closePath()=>mK.add(new CG("closePath"));moveTo( h, g)=>mK.add(new CG("moveTo",[h,g]));lineTo( h, g)=>mK.add(new CG("lineTo",[h,g]));arcTo( k, i, g, h, j)=>mK.add(new CG("arcTo",[k,i,g,h,j]));quadraticCurveTo( j, i, g, h)=>mK.add(new CG("quadraticCurveTo",[j,i,g,h]));bezierCurveTo( h, k, l, i, g, j)=>mK.add(new CG("bezierCurveTo",[h,k,l,i,g,j]));arc( l, g, j, i, h, k)=>mK.add(new CG("arc",[l,g,j,i,h,k]));rect( i, g, h, j)=>mK.add(new CG("rect",[i,g,h,j]));pF( g,[ width=1, joints=EG.OG, caps=DG.OG])=>mK.add(new CG("strokeColor",[dD(g),width,joints,caps]));LI( g)=>mK.add(new CG("fillColor",[dD(g)])); OB( k){var h=k.context;h.save();for(var j in mK){var g=j.arguments;switch (j.name){case "beginPath":h.beginPath();break;case "closePath":h.closePath();break;case "moveTo":h.moveTo(g[0],g[1]);break;case "lineTo":h.lineTo(g[0],g[1]);break;case "arcTo":h.arcTo(g[0],g[1],g[2],g[3],g[4]);break;case "quadraticCurveTo":h.quadraticCurveTo(g[0],g[1],g[2],g[3]);break;case "bezierCurveTo":h.bezierCurveTo(g[0],g[1],g[2],g[3],g[4],g[5]);break;case "arc":h.arc(g[0],g[1],g[2],g[3],g[4],g[5]);break;case "rect":h.rect(g[0],g[1],g[2],g[3]);break;case "strokeColor":h.strokeStyle=g[0];h.lineWidth=g[1];h.lineJoin=g[2];h.lineCap=g[3];h.stroke();break;case "strokeGradient":h.strokeStyle=g[0].lO(h);h.lineWidth=g[1];h.lineJoin=g[2];h.lineCap=g[3];h.stroke();break;case "strokePattern":h.strokeStyle=g[0].nO(h);h.lineWidth=g[1];h.lineJoin=g[2];h.lineCap=g[3];KB i=g[0].AL;if(i!=null){h.save();h.transform(i.a,i.b,i.c,i.d,i.eB,i.fB);h.stroke();h.restore();}else{h.stroke();}break;case "fillColor":h.fillStyle=g[0];h.fill();break;case "fillGradient":h.fillStyle=g[0].hJ(h);h.fill();break;case "fillPattern":h.fillStyle=g[0].iJ(h);KB i=g[0].AL;if(i!=null){h.save();h.transform(i.a,i.b,i.c,i.d,i.eB,i.fB);h.fill();h.restore();}else{h.fill();}break;}}h.restore();}}class gC extends DB{var iK;gC( g):super(DB.aD,false){iK=g;} get fF=>iK; get DE=>false;}class w extends DB{static const  mE="click";static const  UG="doubleClick";static const  rE="mouseDown";static const  yE="mouseUp";static const  BF="mouseMove";static const  CF="mouseOut";static const  DF="mouseOver";static const  EF="mouseWheel";static const  GF="middleClick";static const  wG="middleMouseDown";static const  zG="middleMouseUp";static const  IF="rightClick";static const  EH="rightMouseDown";static const  KH="rightMouseUp";var UN,VN;var YN,ZN;var rN;var dM;var sM;var gM;var kM;var tN;var uN;var vN;w( g,[ bubbles=false]):super(g,bubbles){JN(g,bubbles);} JN( g,[ bubbles=false]){super.JN(g,bubbles);UN=VN=0;YN=ZN=0;rN=false;dM=false;sM=false;gM=false;kM=false;tN=0;uN=0;vN=0;}set wN( g){UN=g.x;VN=g.y;}set AO( g){YN=g.x;ZN=g.y;} get HC=>rN; get altKey=>dM; get ctrlKey=>gM; get shiftKey=>kM; get nC=>tN; get deltaX=>uN; get deltaY=>vN;}class zB extends DB{static const  XD="keyDown";static const  pE="keyUp";var dM;var gM;var kM;var mM;var sM;var wM;var zM;var AN;zB( g,[ bubbles=false]):super(g,bubbles){JN(g,bubbles);} JN( g,[ bubbles=false]){super.JN(g,bubbles);dM=false;gM=false;kM=false;mM=false;sM=false;wM=0;zM=0;AN=0;} get altKey=>dM; get ctrlKey=>gM; get shiftKey=>kM; get charCode=>wM; get keyCode=>zM; get keyLocation=>AN;}class bE extends DB{static const  TG="textInput";var tK="";bE( g,[ bubbles=false]):super(g,bubbles){}}class RB extends DB{static const  nE="touchBegin";static const  qE="touchEnd";static const  sE="touchCancel";static const  AF="touchMove";static const  kG="touchOver";static const  mG="touchOut";var QN;var TN;var UN,VN;var YN,ZN;var dM;var sM;var gM;var kM;var eN;var gN;var iN;RB( g,[ bubbles=false]):super(g,bubbles){JN(g,bubbles);} JN( g,[ bubbles=false]){super.JN(g,bubbles);QN=0;TN=false;UN=VN=0;YN=ZN=0;dM=false;sM=false;gM=false;kM=false;eN=1.00;gN=0;iN=0;}set wN( g){UN=g.x;VN=g.y;}set AO( g){YN=g.x;ZN=g.y;} get ND=>QN; get altKey=>dM; get ctrlKey=>gM; get shiftKey=>kM;}abstract class YC{ apply( h, i, j, g);}class SJ extends MC{var DL;var JL;var oK;var uL;var FM;SJ( j, h, i){DL=j;oK=h;JL=i;var g=fC.BD;uL=g.createGain();uL.connect(g.destination,0,0);uL.gain.value=(JL!=null)?gB.pow(JL.volume,2):1;FM=g.createBufferSource();FM.buffer=DL.qK;FM.loop=h;FM.connect(uL,0,0);FM.start(0);} set KD( g){JL=g;uL.gain.value=(JL!=null)?gB.pow(JL.volume,2):1;} stop(){FM.stop(0);}}class LJ extends YC{final  AL;LJ.xJ():AL=[0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0.212671,0.715160,0.072169,0,0,0,0,0,1,0];LJ.yJ():AL=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]; apply( JC, m, KC, EC){var q=JC.pN().getImageData(m.x,m.y,m.width,m.height);var h=q.data;var rB=(AL[00]*65536).toInt();var PB=(AL[01]*65536).toInt();var FC=(AL[02]*65536).toInt();var p=(AL[03]*65536).toInt();var sB=(AL[04]*65536).toInt();var uB=(AL[05]*65536).toInt();var SB=(AL[06]*65536).toInt();var vB=(AL[07]*65536).toInt();var v=(AL[08]*65536).toInt();var n=(AL[09]*65536).toInt();var t=(AL[10]*65536).toInt();var u=(AL[11]*65536).toInt();var XB=(AL[12]*65536).toInt();var tB=(AL[13]*65536).toInt();var GB=(AL[14]*65536).toInt();var CB=(AL[15]*65536).toInt();var YB=(AL[16]*65536).toInt();var LB=(AL[17]*65536).toInt();var o=(AL[18]*65536).toInt();var MB=(AL[19]*65536).toInt();if(PC){for(int g=0;g<=h.length-4;g+= 4){var k=h[g+0];var l=h[g+1];var j=h[g+2];var i=h[g+3];h[g+0]=((rB*k)+(PB*l)+(FC*j)+(p*i)+sB)>>16;h[g+1]=((uB*k)+(SB*l)+(vB*j)+(v*i)+n)>>16;h[g+2]=((t*k)+(u*l)+(XB*j)+(tB*i)+GB)>>16;h[g+3]=((CB*k)+(YB*l)+(LB*j)+(o*i)+MB)>>16;}}else{for(int g=0;g<=h.length-4;g+= 4){var i=h[g+0];var j=h[g+1];var l=h[g+2];var k=h[g+3];h[g+0]=((CB*k)+(YB*l)+(LB*j)+(o*i)+MB)>>16;h[g+1]=((t*k)+(u*l)+(XB*j)+(tB*i)+GB)>>16;h[g+2]=((uB*k)+(SB*l)+(vB*j)+(v*i)+n)>>16;h[g+3]=((rB*k)+(PB*l)+(FC*j)+(p*i)+sB)>>16;}}KC.pN().putImageData(q,EC.x,EC.y);}}class RJ extends YC{var distance;var angle;var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;RJ([this.distance=4.0,this.angle=gB.PI/4,this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=1.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} apply( OE, m, PE, CB){var rB=OE.pN();var QE=rB.getImageData(m.x,m.y,m.width,m.height);var RE=QE.data;var p=m.width;var XB=m.height;var VC=blurX*blurX;var FC=blurY*blurY;var SE=(1<<22)~/VC;var TE=(1<<22)~/FC;var n=blurX;var UC=blurX*2;var GB=blurY;var EC=blurY*2;var MB=p+UC;var SB=XB+EC;var UE=p*4;var YB=MB*4;var PB=PC?3:0;var v=PE.pN();var sB=v.createImageData(MB,SB);var h=sB.data;var k=new List<int>(1024);for(int i=0;i<p;i++ ){var l=0,t=FC>>1;var u=i*4+PB;var o=(i+n)*4+PB;for(int j=0;j<SB;j++ ){h[o]=(t*TE)>>22;o+= YB;if(j>=EC){l-= 2*k[j&1023]-k[(j-GB)&1023];}else if(j>=GB){l-= 2*k[j&1023];}var q=(j<XB)?RE[u]:0;k[(j+GB)&1023]=q;t+= l+= q;u+= UE;}}for(int j=0;j<SB;j++ ){var l=0,t=VC>>1;var u=j*YB+n*4+PB;var o=j*YB+PB;for(int i=0;i<MB;i++ ){h[o]=(t*SE)>>22;o+= 4;if(i>=UC){l-= 2*k[i&1023]-k[(i-n)&1023];}else if(i>=n){l-= 2*k[i&1023];}var q=(i<p)?h[u]:0;k[(i+n)&1023]=q;t+= l+= q;u+= 4;}}var uB=(alpha*256).toInt();var sC=(color>>16)&0xFF;var tC=(color>>8)&0xFF;var tB=(color>>0)&0xFF;if(PC){for(var g=0;g<=h.length-4;g+= 4){h[g+0]=sC;h[g+1]=tC;h[g+2]=tB;h[g+3]=(h[g+3]*uB)>>8;}}else{for(var g=0;g<=h.length-4;g+= 4){h[g+0]=(h[g+0]*uB)>>8;h[g+1]=tB;h[g+2]=tC;h[g+3]=sC;}}var JC=CB.x;var vB=CB.y;var KC=CB.x-n+(this.distance*gB.cos(this.angle)).round().toInt();var uC=CB.y-GB+(this.distance*gB.sin(this.angle)).round().toInt();var VE=new EB(JC,vB,p,XB);var WE=new EB(KC,uC,MB,SB);var LB=VE.union(WE);v.setTransform(1,0,0,1,0,0);v.clearRect(LB.x,LB.y,LB.width,LB.height);v.putImageData(sB,KC,uC);if(this.hideObject==false)v.drawImage(rB.canvas,JC,vB);}}class PJ extends YC{var color;var alpha;var blurX;var blurY;var strength;var inner;var knockout;var hideObject;PJ([this.color=0,this.alpha=1.0,this.blurX=4,this.blurY=4,this.strength=2.0,this.inner=false,this.knockout=false,this.hideObject=false]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} apply( OE, m, PE, CB){var rB=OE.pN();var QE=rB.getImageData(m.x,m.y,m.width,m.height);var RE=QE.data;var p=m.width;var XB=m.height;var VC=blurX*blurX;var FC=blurY*blurY;var SE=(1<<22)~/VC;var TE=(1<<22)~/FC;var n=blurX;var UC=blurX*2;var GB=blurY;var EC=blurY*2;var MB=p+UC;var SB=XB+EC;var UE=p*4;var YB=MB*4;var PB=PC?3:0;var v=PE.pN();var sB=v.createImageData(MB,SB);var h=sB.data;var k=new List<int>(1024);for(int i=0;i<p;i++ ){var l=0,t=FC>>1;var u=i*4+PB;var o=(i+n)*4+PB;for(int j=0;j<SB;j++ ){h[o]=(t*TE)>>22;o+= YB;if(j>=EC){l-= 2*k[j&1023]-k[(j-GB)&1023];}else if(j>=GB){l-= 2*k[j&1023];}var q=(j<XB)?RE[u]:0;k[(j+GB)&1023]=q;t+= l+= q;u+= UE;}}for(int j=0;j<SB;j++ ){var l=0,t=VC>>1;var u=j*YB+n*4+PB;var o=j*YB+PB;for(int i=0;i<MB;i++ ){h[o]=(t*SE)>>22;o+= 4;if(i>=UC){l-= 2*k[i&1023]-k[(i-n)&1023];}else if(i>=n){l-= 2*k[i&1023];}var q=(i<p)?h[u]:0;k[(i+n)&1023]=q;t+= l+= q;u+= 4;}}var uB=(alpha*256).toInt();var sC=(color>>16)&0xFF;var tC=(color>>8)&0xFF;var tB=(color>>0)&0xFF;if(PC){for(var g=0;g<=h.length-4;g+= 4){h[g+0]=sC;h[g+1]=tC;h[g+2]=tB;h[g+3]=(h[g+3]*uB)>>8;}}else{for(var g=0;g<=h.length-4;g+= 4){h[g+0]=(h[g+0]*uB)>>8;h[g+1]=tB;h[g+2]=tC;h[g+3]=sC;}}var JC=CB.x;var vB=CB.y;var KC=CB.x-n;var uC=CB.y-GB;var VE=new EB(JC,vB,p,XB);var WE=new EB(KC,uC,MB,SB);var LB=VE.union(WE);v.setTransform(1,0,0,1,0,0);v.clearRect(LB.x,LB.y,LB.width,LB.height);v.putImageData(sB,KC,uC);if(this.hideObject==false)v.drawImage(rB.canvas,JC,vB);}}class vC{var gK;var cK;var FL;var RL;var bL;var kL;vC( g, h, i){gK=g;cK=h;FL=i;bL=null;kL=null;} get kind=>gK; get name=>cK; get oC=>kL; get error=>bL;MN( i){RL=i.then((g){kL=g;bL=null;},onError:( h){kL=null;bL=h.error;});}}abstract class JB extends AB{var JI=false;var dF=true;var qJ=true;var tabIndex=0;static const  hG=const bB<w>(w.CF);static const  qG=const bB<w>(w.DF);static const  xG=const bB<w>(w.BF);static const  BH=const bB<w>(w.rE);static const  LH=const bB<w>(w.yE);static const  aH=const bB<w>(w.EF); get onMouseOut=>JB.hG.forTarget(this); get onMouseOver=>JB.qG.forTarget(this); get onMouseMove=>JB.xG.forTarget(this); get onMouseDown=>JB.BH.forTarget(this); get onMouseUp=>JB.LH.forTarget(this); get onMouseWheel=>JB.aH.forTarget(this);static const  jH=const bB<RB>(RB.AF);static const  lH=const bB<RB>(RB.qE);static const  nH=const bB<RB>(RB.sE); get onTouchMove=>JB.jH.forTarget(this); get onTouchEnd=>JB.lH.forTarget(this); get onTouchCancel=>JB.nH.forTarget(this);static const  rH=const bB<zB>(zB.pE);static const  sH=const bB<zB>(zB.XD); get onKeyUp=>JB.rH.forTarget(this); get onKeyDown=>JB.sH.forTarget(this);}abstract class UB extends JB{final  UL=new List<AB>();var qL=true;var zL=true; get JE=>UL.length; BB( g){if(g.parent==this){var h=UL.indexOf(g);UL.removeAt(h);UL.add(g);}else{BE(g,UL.length);}} BE( g, h){if(h<0||h>UL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){UL.removeAt(UL.indexOf(g));if(h>UL.length)h-- ;UL.insert(h,g);}else{g.KE();g.EO(this);UL.insert(h,g);g.dispatchEvent(new DB(DB.MG,true));if(this.LD!=null)MO(g,new DB(DB.VG));}} iF( h){var g=UL.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");lI(g);} lI( g){if(g<0||g>=UL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=UL[g];h.dispatchEvent(new DB(DB.eG,true));if(this.LD!=null)MO(h,new DB(DB.jG));h.EO(null);UL.removeAt(g);} UI( g){if(g<0||g>=UL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");return UL[g];} qI( g){UL.sort(g);} contains( g){for(;g!=null;g=g.EN)if(g==this)return true;return false;} DC( n,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new EB.rJ();if(UL.length==0)return super.DC(n,returnRectangle);var h=double.INFINITY;var i=double.INFINITY;var k=double.NEGATIVE_INFINITY;var j=double.NEGATIVE_INFINITY;var o=UL.length;for(int l=0;l<UL.length;l++ ){var m=UL[l];HN.TF(m.CO,n);var g=m.DC(HN,returnRectangle);if(g.left<h)h=g.left;if(g.top<i)i=g.top;if(g.right>k)k=g.right;if(g.bottom>j)j=g.bottom;}returnRectangle.x=h;returnRectangle.y=i;returnRectangle.width=k-h;returnRectangle.height=j-i;return returnRectangle;} IC( o, p){var l=null;for(int j=UL.length-1;j>=0;j-- ){var i=UL[j];if(i.visible){var g=i.CO;var m=o-g.eB;var k=p-g.fB;var q=(g.d*m-g.c*k)/g.aC;var n=(g.a*k-g.b*m)/g.aC;var h=i.IC(q,n);if(h!=null){if(h is JB)if(h.dF)return qL?h:this;l=this;}}}return l;} OB( i){for(int g=0;g<UL.length;g++ ){var h=UL[g];if(h.visible)i.kF(h);}} MO( g, j){g.dispatchEvent(j);if(g is UB){var i=new List<AB>.from(g.UL,growable:false);for(int h=0;h<i.length;h++ )MO(i[h],j);}}}class eE{static const  HF="none";static const  YG="touchPoint";}class hB{static const  VD="auto";static const  YD="arrow";static const  ZD="button";static const  cG="hand";static const  dG="ibeam";static const  gG="wait";}class xC extends MC{var HL;var rK;var oK;var JL;xC( g, i, h){HL=g;oK=i;JL=h;rK=g.pM(this);rK.loop=oK;this.KD=h;rK.play();} set KD( g){JL=g;if(rK!=null)rK.volume=(JL!=null)?JL.volume:1;} stop(){if(rK!=null){if(rK.ended==false)rK.pause();HL.sN(this);rK=null;}}}class NJ extends AB{var kK;NJ(){kK=new hE();} get ZI=>kK; DC( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new EB.rJ();returnRectangle.x=g.eB;returnRectangle.y=g.fB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} IC( g, h){return null;} OB( g){kK.OB(g);}}class YE extends JB implements aB{var PL;var XL;var gL;var rL;var yL;var oK;var HM;var NM;var QC;YE( g,[ frameRate=30, loop=true]){PL=g;XL=frameRate;gL=0;rL=null;yL=false;oK=loop;HM=new DB(DB.LF);NM=new DB(DB.IH);QC=null;}static const  NH=const bB<DB>(DB.LF); get onProgress=>YE.NH.forTarget(this); get ME=>PL.length; set loop( g){oK=g;} play(){yL=true;rL=null;} stop(){yL=false;rL=null;} pB( j){if(yL==false)return true;if(rL==null){rL=0.0;qN(HM,this,this,wB.OC);}else{rL+= j;var i=1.0/XL;while (yL&&rL>=i){var h=gL;var g=oK?(h+1)%ME:gB.min(h+1,ME-1);gL=g;rL-= i;if(h!=g){qN(HM,this,this,wB.OC);if(gL!=g)return true;}if(h!=g&&g==ME-1&&oK==false){qN(NM,this,this,wB.OC);if(gL!=g)return true;}}}return true;} DC( h,[ returnRectangle]){var g=PL[gL];return pD(h,g.width,g.height,returnRectangle);} IC( g, h){var i=PL[gL];if(g>=0&&h>=0&&g<i.width&&h<i.height)return this;return null;} OB( g){var h=PL[gL];if(QC==null)h.OB(g);else h.jF(g,QC);}}class iE{var XK;var eK;var wK;var NL;iE.sJ( i, g, h, j){XK=0;eK=new EB(i,g,h,j);}iE.uJ( i, g, h){XK=1;wK=new vF(i,g,h);}iE.wJ( g){XK=2;NL=g;if(NL.length<3)throw new ArgumentError("A custom mask needs at least 3 points.");} OB( i){var g=i.context;g.beginPath();switch (XK){case 0:g.rect(eK.x,eK.y,eK.width,eK.height);break;case 1:g.arc(wK.x,wK.y,wK.hF,0,gB.PI*2.0,false);break;case 2:g.moveTo(NL[0].x,NL[0].y);for(int h=1;h<NL.length;h++ )g.lineTo(NL[h].x,NL[h].y);break;}g.clip();}}class fE extends UB{var aJ=false;var NE=false;}class wC extends AB{var bitmapData;var pixelSnapping;var QC;wC([this.bitmapData=null,this.pixelSnapping="auto"]){QC=null;} DC( h,[ returnRectangle]){var g=(bitmapData!=null)?bitmapData.width:0;var i=(bitmapData!=null)?bitmapData.height:0;return pD(h,g,i,returnRectangle);} IC( g, h){if(bitmapData!=null&&g>=0.0&&h>=0.0&&g<bitmapData.width&&h<bitmapData.height)return this;return null;} OB( g){if(bitmapData!=null){if(QC==null)bitmapData.OB(g);else bitmapData.jF(g,QC);}}}abstract class XC{ OB( g);}class OJ extends YC{var blurX;var blurY;OJ([this.blurX=4,this.blurY=4]){if(blurX<1||blurY<1)throw new ArgumentError("Error #9004: The minimum blur size is 1.");if(blurX>128||blurY>128)throw new ArgumentError("Error #9004: The maximum blur size is 128.");} apply( UC, q, JC, rB){var KC=UC.pN();var LB=KC.getImageData(q.x,q.y,q.width,q.height);var sB=LB.data;var v=LB.width;var XB=LB.height;var YB=blurX*blurX;var tB=blurY*blurY;var EC=(1<<22)~/YB;var VC=(1<<22)~/tB;var l=blurX;var uB=blurX*2;var u=blurY;var vB=blurY*2;var MB=v+uB;var CB=XB+vB;var FC=v*4;var GB=MB*4;var SB=JC.pN();var PB=SB.createImageData(MB,CB);var t=PB.data;var j=new List<int>(1024);XH(sB);for(int i=0;i<4;i++ ){for(int h=0;h<v;h++ ){var k=0,m=tB>>1;var n=h*4+i;var o=(h+l)*4+i;for(int g=0;g<CB;g++ ){t[o]=(m*VC)>>22;o+= GB;if(g>=vB){k-= 2*j[g&1023]-j[(g-u)&1023];}else if(g>=u){k-= 2*j[g&1023];}var p=(g<XB)?sB[n]:0;j[(g+u)&1023]=p;m+= k+= p;n+= FC;}}}for(int i=0;i<4;i++ ){for(int g=0;g<CB;g++ ){var k=0,m=YB>>1;var n=g*GB+l*4+i;var o=g*GB+i;for(int h=0;h<MB;h++ ){t[o]=(m*EC)>>22;o+= 4;if(h>=uB){k-= 2*j[h&1023]-j[(h-l)&1023];}else if(h>=l){k-= 2*j[h&1023];}var p=(h<v)?t[n]:0;j[(h+l)&1023]=p;m+= k+= p;n+= 4;}}}eH(t);SB.putImageData(PB,rB.x-l,rB.y-u);}}class FB implements XC{var vK;var EL;var SL;var iL;var pK;var DM;var JM;var PM;var KL;var TL;var ZL;var jL;FB( g, h,[ transparent=true, fillColor=0xFFFFFFFF]){vK=g;EL=h;SL=transparent;var i=new VB.CanvasElement(width:vK,height:EL);pK=i.context2d;pK.fillStyle=SL?dD(fillColor):kC(fillColor);pK.fillRect(0,0,g,h);iL=i;DM=0;JM=0;PM=0;}FB.zJ( g){if(g==null)throw new ArgumentError();vK=g.naturalWidth;EL=g.naturalHeight;SL=true;iL=g;DM=0;JM=0;PM=0;}FB.AK( g){vK=g.hI;EL=g.gI;SL=true;iL=g.rI.ID;DM=g.oI?2:1;JM=g.offsetX;PM=g.offsetY;KL=g.RI;TL=g.SI;ZL=g.QI;jL=g.NI;}static  lD( i){var h=new TB.Completer<FB>();var g=new VB.ImageElement();g.onLoad.listen((j)=>h.complete(new FB.zJ(g)));g.onError.listen((j)=>h.completeError(new StateError("Error loading image.")));g.src=i;return h.future;} get width=>vK; get height=>EL; DI( i, j, g, h){h.apply(i,j,this,g);} clear(){var g=pN();g.clearRect(0,0,vK,EL);} OB( h){var g=h.context;switch (DM){case 0:g.drawImage(iL,JM,PM);break;case 1:g.drawImageScaledFromSource(iL,KL,TL,ZL,jL,JM,PM,ZL,jL);break;case 2:g.transform(0.0,-1.0,1.0,0.0,JM,PM+jL);g.drawImageScaledFromSource(iL,KL,TL,jL,ZL,0,0,jL,ZL);break;}} jF( PB, g){var v=PB.context;if(g.width<=0.0||g.height<=0.0)return;switch (DM){case 0:v.drawImageScaledFromSource(iL,g.x-JM,g.y-PM,g.width,g.height,g.x+JM,g.y+PM,g.width,g.height);break;case 1:var j=KL;var h=TL;var p=j+ZL;var q=h+jL;var l=KL-JM+g.x;var m=TL-PM+g.y;var u=l+g.width;var t=m+g.height;var o=(j>l)?j:l;var n=(h>m)?h:m;var CB=(p<u)?p:u;var MB=(q<t)?q:t;var LB=JM-j+o;var GB=PM-h+n;var k=CB-o;var i=MB-n;if(k>0.0&&i>0.0){v.drawImageScaledFromSource(iL,o,n,k,i,LB,GB,k,i);}break;case 2:var j=KL;var h=TL;var p=j+jL;var q=h+ZL;var l=KL+PM-g.y+jL-g.height;var m=TL-JM+g.x;var u=l+g.height;var t=m+g.width;var o=(j>l)?j:l;var n=(h>m)?h:m;var CB=(p<u)?p:u;var MB=(q<t)?q:t;var LB=JM-h+n;var GB=PM+p-CB;var k=MB-n;var i=CB-o;if(k>0.0&&i>0.0){v.transform(0.0,-1.0,1.0,0.0,LB,GB+i);v.drawImageScaledFromSource(iL,o,n,i,k,0,0,i,k);}break;}} pN(){if(pK==null){var g=new VB.CanvasElement(width:vK,height:EL);pK=g.context2d;switch (DM){case 0:pK.drawImage(iL,JM,PM);break;case 1:pK.drawImageScaledFromSource(iL,KL,TL,ZL,jL,JM,PM,ZL,jL);break;case 2:pK.setTransform(0.0,-1.0,1.0,0.0,JM,PM+jL);pK.drawImageScaledFromSource(iL,KL,TL,jL,ZL,0,0,jL,ZL);pK.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);break;}iL=g;DM=0;JM=0;PM=0;}return pK;}}typedef  GG<jC extends DB>( event);class LG<jC extends DB> extends TB.StreamSubscription<jC>{var vL;var EM;var IM;var OM;LG(this.vL,this.EM){IM=0;OM=false;} cancel(){if(OM==false){vL.CN(this);OM=true;EM=null;}} onError( g( error)){} get mN=>IM>0; pause([ resumeSignal]){IM++ ;if(resumeSignal!=null)resumeSignal.whenComplete(resume);} resume(){if(mN==false)throw new StateError("Subscription is not paused.");IM-- ;}}class oE{var fL;oE(){fL=new Map<String,vC>();} eM( g){var j=g.kind;var h=g.name;var i="${j}.${h}";if(fL.containsKey(i))throw new StateError("ResourceManager already contains a resource called '${h}'");fL[i]=g;} NN( i, g){var h="${i}.${g}";if(fL.containsKey(h)==false)throw new StateError("ResourceManager does not contains a resource called '${g}'");return fL[h];} oB( i, h){var g=new vC("BitmapData",i,h);g.MN(FB.lD(h));eM(g);} HB( i, h){var g=new vC("Sound",i,h);g.MN(iB.lD(h));eM(g);} CE( j, h, i){var g=new vC("TextureAtlas",j,h);g.MN(xB.lD(h,i));eM(g);} BI( i, h){var g=new vC("FlumpLibrary",i,h);g.MN(AC.lD(h));eM(g);} load(){var h=this.iI.map((i)=>i.RL);return TB.Future.wait(h).then((j){var g=this.KI;if(g.length>0)throw new StateError("Failed to load ${g.length} resource(s).");return this;});} get iI{return fL.values.where((g)=>g.oC==null).toList();} get KI{return fL.values.where((g)=>g.error!=null).toList();} LC( g){return NN("BitmapData",g).oC;} XF( g){return NN("Sound",g).oC;} IE( g){return NN("TextureAtlas",g).oC;} VI( g){return NN("FlumpLibrary",g).oC;}}class TJ extends YE{TJ( g,[ frameRate=30, loop=true]):super(g,frameRate,loop);} kC( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";}class AC{var FL;var wL;var XL;final  MM=new List<zD>();final  YM=new List<zH>();static  lD( l){var i=new TB.Completer<AC>();VB.HttpRequest.getString(l).then((p){var h=sF.parse(p) as Map;var j=new List();var g=new AC();g.FL=l;g.wL=h["md5"];g.XL=h["frameRate"].toInt();for(var m in h["movies"] as List){var n=new zD(m,g);g.MM.add(n);}for(var o in h["textureGroups"] as List){var k=new zH(o,g);g.YM.add(k);j.add(k.FD.future);}TB.Future.wait(j).then((t){i.complete(g);}).catchError((q){i.completeError(new StateError("Failed to load image."));});}).catchError((q){i.completeError(new StateError("Failed to load json file."));});return i.future;} yN( h){for(var g in MM)if(g.id==h)return g;throw new ArgumentError("The movie '${h}' is not available.");} JO( g){for(var h in YM){if(h.HD.containsKey(g)){return h.HD[g];}}for(var i in MM){if(i.id==g){return new UJ(this,g);}}throw new ArgumentError("The symbol '${g}' is not available.");}}abstract class AB extends GC implements XC{var QM=0.0;var SM=0.0;var UM=0.0;var WM=0.0;var ZM=1.0;var bM=1.0;var fM=0.0;var iM=0.0;var lM=0.0;var oM=1.0;var tM=true;var vM=null;var yM=null;var cK="";var EN=null;final  HN=new KB.vJ();final  KN=new KB.vJ();final  ON=new KB.vJ();var RN=true;static const  WH=const bB<gC>(DB.aD); get dI=>AB.WH.forTarget(this); get x=>QM; get y=>SM; get kB=>UM; get qB=>WM; get lB=>ZM; get mB=>bM; get skewX=>fM; get skewY=>iM; get pC=>lM; get alpha=>oM; get visible=>tM; get name=>cK; get parent=>EN; get root{var g=this;while (g.EN!=null)g=g.EN;return g;} get LD{var g=this.root;if(g is mC)return g;return null;}set x( g){QM=g.toDouble();RN=true;}set y( g){SM=g.toDouble();RN=true;}set kB( g){UM=g.toDouble();RN=true;}set qB( g){WM=g.toDouble();RN=true;}set lB( g){ZM=g.toDouble();RN=true;}set mB( g){bM=g.toDouble();RN=true;}set skewX( g){fM=g.toDouble();RN=true;}set skewY( g){iM=g.toDouble();RN=true;}set pC( g){lM=g.toDouble();RN=true;}set alpha( g){oM=g.toDouble();RN=true;}set visible( g){tM=g;RN=true;}set mask( g){vM=g;} get width=>DC(CO).width; get height=>DC(CO).height; set width( h){this.lB=1;var g=this.width;this.lB=(g!=0.0)?h/g:1.0;} set height( h){this.mB=1;var g=this.height;this.mB=(g!=0.0)?h/g:1.0;} KE(){if(EN!=null)EN.iF(this);} get CO{if(RN){RN=false;var j=fM+lM;var i=iM+lM;if(j==0.0&&i==0.0){ON.qC(ZM,0.0,0.0,bM,QM-UM*ZM,SM-WM*bM);}else{var g,l,k,h;var m=gB.cos(j);var n=gB.sin(j);if(j==i){g=ZM*m;l=ZM*n;k=-bM*n;h=bM*m;}else{g=ZM*gB.cos(i);l=ZM*gB.sin(i);k=-bM*n;h=bM*m;}var p=QM-(UM*g+WM*k);var o=SM-(UM*l+WM*h);ON.qC(g,l,k,h,p,o);}}return ON;} DC( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new EB.rJ();returnRectangle.x=g.eB;returnRectangle.y=g.fB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} IC( g, h){if(DC(KN).contains(g,h))return this;return null;} SC( h){HN.bI();for(AB g=this;g!=null;g=g.EN)HN.concat(g.CO);HN.YF();return HN.sI(h);} dispatchEvent( h){var g=null;if(h.DE||h.bubbles)for(AB j=EN;j!=null;j=j.EN)if(j.aI(h.type)){if(g==null)g=lE.jI() as List<AB>;g.add(j);}if(h.DE&&g!=null)for(int i=g.length-1;i>=0;i-- )if(h.MD==false)g[i].qN(h,this,g[i],wB.kE);if(h.MD==false)qN(h,this,this,wB.OC);if(h.bubbles&&g!=null)for(int i=0;i<g.length;i++ )if(h.MD==false)g[i].qN(h,this,g[i],wB.WG);if(g!=null){g.clear();lE.kI(g);}} EO( h){for(var g=h;g!=null;g=g.EN)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");EN=h;} OB( g);}class tE{static var xE=false;static var bD=false;static var cD=0;static var rG=eE.HF;static var vG=new TB.StreamController<String>();static var AH=vG.stream.asBroadcastStream();static CH(){if(xE==false){xE=true;var g=VB.window.navigator.userAgent;if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod")){bD=true;cD=10;}if(g.contains("Android")){bD=true;cD=10;}if(g.contains("IEMobile")){bD=true;cD=10;}}}static  get ZH{CH();return rG;}}class BC{static const  iG="B";static const  lG="BL";static const  pG="BR";static const  NG="L";static const  zE="R";static const  tG="T";static const  uG="TL";static const  yG="TR";static const  HF="";} dD( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class s{static var eD;static  ZC( g){return g;}static  JF( g){return 0.5-0.5*gB.cos(g*2.0*gB.PI);}static  JH( g){return 0.5+0.5*gB.cos(g*2.0*gB.PI);}static  MH( g){if(eD==null)eD=new gB.Random();if(g==0.0||g==1.0)return g;return eD.nextDouble();}static  fD( g){return g*g;}static  gD( g){g=1.0-g;return 1.0-g*g;}static  QH( g){g=g*2.0;return (g<1.0)?0.5*fD(g):0.5*gD(g-1.0)+0.5;}static  SH( g){g=g*2.0;return (g<1.0)?0.5*gD(g):0.5*fD(g-1.0)+0.5;}static  hD( g){return g*g*g;}static  iD( g){g=1.0-g;return 1.0-g*g*g;}static  QF( g){g=g*2.0;return (g<1.0)?0.5*hD(g):0.5*iD(g-1.0)+0.5;}static  YH( g){g=g*2.0;return (g<1.0)?0.5*iD(g):0.5*hD(g-1.0)+0.5;}static  jD( g){return g*g*g*g;}static  kD( g){g=1.0-g;return 1.0-g*g*g*g;}static  cH( g){g=g*2.0;return (g<1.0)?0.5*jD(g):0.5*kD(g-1.0)+0.5;}static  dH( g){g=g*2.0;return (g<1.0)?0.5*kD(g):0.5*jD(g-1.0)+0.5;}static  mD( g){return g*g*g*g*g;}static  nD( g){g=1.0-g;return 1.0-g*g*g*g*g;}static  fH( g){g=g*2.0;return (g<1.0)?0.5*mD(g):0.5*nD(g-1.0)+0.5;}static  gH( g){g=g*2.0;return (g<1.0)?0.5*nD(g):0.5*mD(g-1.0)+0.5;}static  oD( g){return 1.0-gB.sqrt(1.0-g*g);}static  qD( g){g=1.0-g;return gB.sqrt(1.0-g*g);}static  hH( g){g=g*2.0;return (g<1.0)?0.5*oD(g):0.5*qD(g-1.0)+0.5;}static  iH( g){g=g*2.0;return (g<1.0)?0.5*qD(g):0.5*oD(g-1.0)+0.5;}static  rD( g){return 1.0-gB.cos(g*(gB.PI/2.0));}static  sD( g){return gB.sin(g*(gB.PI/2.0));}static  kH( g){g=g*2.0;return (g<1.0)?0.5*rD(g):0.5*sD(g-1.0)+0.5;}static  oH( g){g=g*2.0;return (g<1.0)?0.5*sD(g):0.5*rD(g-1.0)+0.5;}static  tD( g){if(g==0.0)return 0.0;return gB.pow(2.0,10.0*(g-1.0));}static  uD( g){if(g==1.0)return 1.0;return 1.0-gB.pow(2.0,-10.0*g);}static  pH( g){g=g*2.0;return (g<1.0)?0.5*tD(g):0.5*uD(g-1.0)+0.5;}static  qH( g){g=g*2.0;return (g<1.0)?0.5*uD(g):0.5*tD(g-1.0)+0.5;}static  vD( g){var h=1.70158;return g*g*((h+1.0)*g-h);}static  wD( g){var h=1.70158;g=g-1.0;return g*g*((h+1.0)*g+h)+1.0;}static  SF( g){g=g*2.0;return (g<1.0)?0.5*vD(g):0.5*wD(g-1.0)+0.5;}static  tH( g){g=g*2.0;return (g<1.0)?0.5*wD(g):0.5*vD(g-1.0)+0.5;}static  xD( g){if(g==0.0||g==1.0)return g;g=g-1.0;return -gB.pow(2.0,10.0*g)*gB.sin((g-0.3/4.0)*(2.0*gB.PI)/0.3);}static  CD( g){if(g==0.0||g==1.0)return g;return gB.pow(2.0,-10.0*g)*gB.sin((g-0.3/4.0)*(2.0*gB.PI)/0.3)+1;}static  uH( g){g=g*2.0;return (g<1.0)?0.5*xD(g):0.5*CD(g-1.0)+0.5;}static  wH( g){g=g*2.0;return (g<1.0)?0.5*CD(g):0.5*xD(g-1.0)+0.5;}static  yD( g){return 1.0-DD(1.0-g);}static  DD( g){if(g<1/2.75){return 7.5625*g*g;}else if(g<2/2.75){g=g-1.5/2.75;return 7.5625*g*g+0.75;}else if(g<2.5/2.75){g=g-2.25/2.75;return 7.5625*g*g+0.9375;}else{g=g-2.625/2.75;return 7.5625*g*g+0.984375;}}static  xH( g){g=g*2.0;return (g<1.0)?0.5*yD(g):0.5*DD(g-1.0)+0.5;}static  yH( g){g=g*2.0;return (g<1.0)?0.5*DD(g):0.5*yD(g-1.0)+0.5;}}class lC{static const  VD="auto";static const  DH="stop";static const  KF="once";}class FH implements aB{final  PN;final  SN;final  WN=new List<xF>();var bN;var cN;var fN;var VL;var IL;var jN;var kN;var nN;FH( g, h,[ transitionFunction( ratio)]):PN=g,SN=(transitionFunction!=null)?transitionFunction:s.ZC{IL=0.0;VL=gB.max(0.0001,h);jN=0.0;kN=false;nN=false;} jB( g, h){var i=['x','y','pivotX','pivotY','scaleX','scaleY','skewX','skewY','rotation','alpha'];if(i.indexOf(g)==-1)throw new ArgumentError("Error #9003: The supplied property ('${g}') is not supported at this time.");if(PN!=null&&nN==false)WN.add(new xF(g,0.0,h));} moveTo( h, g){jB('x',h);jB('y',g);} pB( l){if(IL<VL||nN==false){IL=IL+l;if(IL>VL)IL=VL;if(IL>=0.0){if(nN==false){nN=true;for(int i=0;i<WN.length;i++ ){var g=WN[i];switch (g.name){case 'x':g.dB=PN.x;break;case 'y':g.dB=PN.y;break;case 'pivotX':g.dB=PN.kB;break;case 'pivotY':g.dB=PN.qB;break;case 'scaleX':g.dB=PN.lB;break;case 'scaleY':g.dB=PN.mB;break;case 'skewX':g.dB=PN.skewX;break;case 'skewY':g.dB=PN.skewY;break;case 'rotation':g.dB=PN.pC;break;case 'alpha':g.dB=PN.alpha;break;}}if(bN!=null)bN();}var j=IL/VL;var k=SN(j);for(int i=0;i<WN.length;i++ ){var g=WN[i];var h=g.dB+k*(g.qF-g.dB);h=kN?h.round():h;switch (g.name){case 'x':PN.x=h;break;case 'y':PN.y=h;break;case 'pivotX':PN.kB=h;break;case 'pivotY':PN.qB=h;break;case 'scaleX':PN.lB=h;break;case 'scaleY':PN.mB=h;break;case 'skewX':PN.skewX=h;break;case 'skewY':PN.skewY=h;break;case 'rotation':PN.pC=h;break;case 'alpha':PN.alpha=h;break;}}if(cN!=null)cN();if(fN!=null&&IL==VL)fN();}}return IL<VL;} get II=>PN; get currentTime=>IL;set UF( g){if(nN==false)IL=IL+jN-g;jN=g;} set onComplete( g()){fN=g;}} GH( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);}class MF{var target=null;var HC=false;var EE=0;var nC=0;var cF,eF;var aF,bF;MF(this.cF,this.eF,this.aF,this.bF);} OF( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";}class PH{static var RH=0;var ND=RH++ ;var target=null;var JD=false;PH(this.target,this.JD);} TH(){var g=new VB.CanvasElement(width:1,height:1);g.context2d.fillStyle="#000000";g.context2d.fillRect(0,0,1,1);var i=g.context2d.getImageData(0,0,1,1).data;var h=(i[0]==0);return h;}class mC extends UB{var LN;var pK;var zN,BO;var GN,IN;var DO,FO;var GO;var HO;var IO;var KO;var LO;var NO;var OO;var PO;var QO;var RO;var SO;var TO;var UO;var VO;var WO;mC( h, g){cK=h;LN=g;LN.focus();pK=g.context2d;GN=zN=g.width;IN=BO=g.height;DO=g.getBoundingClientRect().width.toInt();FO=g.getBoundingClientRect().height.toInt();GO=new KB.vJ();HO=new KB.vJ();KO=new WB.tJ(pK);LO=lC.VD;NO=hC.vE;OO=BC.HF;PO=hB.YD;TD.fG.listen(fG);SO=[new MF(w.rE,w.yE,w.mE,w.UG),new MF(w.wG,w.zG,w.GF,w.GF),new MF(w.EH,w.KH,w.IF,w.IF)];RO=null;QO=new IB(0,0);UO=new w(w.mE,true);LN.onMouseDown.listen(dO);LN.onMouseUp.listen(dO);LN.onMouseMove.listen(dO);LN.onMouseOut.listen(dO);LN.onMouseWheel.listen(eO);TO=new Map<int,PH>();WO=new RB(RB.nE,true);tE.AH.listen(fO);fO(null);VO=new zB(zB.XD,true);LN.onKeyDown.listen(hO);LN.onKeyUp.listen(hO);LN.onKeyPress.listen(iO);} get oF=>DO; get nF=>FO; get focus=>IO; get align=>OO;kO(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){kO();}set y( g){kO();}set kB( g){kO();}set qB( g){kO();}set lB( g){kO();}set mB( g){kO();}set skewX( g){kO();}set skewY( g){kO();}set pC( g){kO();}set alpha( g){kO();}set width( g){kO();}set height( g){kO();}ZF(){if(LO==lC.VD||LO==lC.KF){mO();KO.reset(HO);OB(KO);if(LO==lC.KF)LO=lC.DH;}}mO(){var m=LN.getBoundingClientRect();var k=m.width.toInt();var l=m.height.toInt();var g=zN;var h=BO;var i=0;var j=0;switch (NO){case hC.JG:g=zN;h=BO;break;case hC.SG:if(oF*BO>nF*zN){h=(zN*l)~/k;}else{g=(BO*k)~/l;}break;case hC.aG:g=k;h=l;break;case hC.vE:if(oF*BO>nF*zN){g=(BO*k)~/l;}else{h=(zN*l)~/k;}break;}switch (OO){case BC.iG:i=(zN-g+1)~/2;j=(BO-h);break;case BC.lG:i=0;j=(BO-h);break;case BC.pG:i=(zN-g);j=(BO-h);break;case BC.NG:i=0;j=(BO-h+1)~/2;break;case BC.zE:i=(zN-g);j=(BO-h+1)~/2;break;case BC.tG:i=(zN-g+1)~/2;j=0;break;case BC.uG:i=0;j=0;break;case BC.yG:i=(zN-g+1);j=0;break;case BC.HF:i=(zN-g+1)~/2;j=(BO-h+1)~/2;break;}HO.qC(1.0,0.0,0.0,1.0,0-i,0-j);GO.qC(g/k,0.0,0.0,h/l,i-m.left,j-m.top);if(GN!=g||IN!=h){LN.width=GN=g;LN.height=IN=h;}if(DO!=k||FO!=l){DO=k;FO=l;dispatchEvent(new DB(DB.nG));}}fG( g){LN.style.cursor=TD.PF(PO);}dO( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var p=j.button;var h=null;var i=GO.xN(j.client);var m=null;if(p<0||p>2)return;if(j.type=="mousemove"&&QO.equals(i))return;var g=SO[p];QO=i;if(j.type!="mouseout")h=IC(i.x,i.y) as JB;var l=hB.YD;if(h is fE)if(h.NE)l=hB.ZD;if(h is FG)if(h.NE)l=hB.ZD;if(PO!=l){PO=l;LN.style.cursor=TD.PF(l);}if(RO!=null&&RO!=h){RO.dispatchEvent(UO..JN(w.CF,true)..wN=(RO.LD!=null)?RO.SC(i):new IB.rJ()..AO=i..rN=g.HC);RO=null;}if(h!=null&&h!=RO){h.dispatchEvent(UO..JN(w.DF,true)..wN=h.SC(i)..AO=i..rN=g.HC);RO=h;}var k=null;var o=false;var q=false;if(j.type=="mousedown"){k=g.cF;if(h!=g.target||n>g.EE+500)g.nC=0;g.HC=true;g.target=h;g.EE=n;g.nC++ ;}if(j.type=="mouseup"){k=g.eF;g.HC=false;o=(g.target==h);q=o&&g.nC.isEven&&(n<g.EE+500);}if(j.type=="mousemove"){k=w.BF;}if(k!=null&&h!=null){m=h.SC(i);h.dispatchEvent(UO..JN(k,true)..wN=m..AO=i..rN=g.HC..tN=g.nC);if(o){if(q&&h.JI){h.dispatchEvent(UO..JN(g.bF,true)..wN=m..AO=i..rN=g.HC);}else{h.dispatchEvent(UO..JN(g.aF,true)..wN=m..AO=i..rN=g.HC);}}}}eO( h){var g=GO.xN(h.client);var i=IC(g.x,g.y) as JB;if(i!=null){i.dispatchEvent(UO..JN(w.EF,true)..wN=i.SC(g)..AO=g..uN=h.deltaX..vN=h.deltaY);if(UO.MD)h.preventDefault();}}var qO=[] ;fO( h){qO.forEach((g)=>g.cancel());if(tE.ZH==eE.YG){qO=[LN.onTouchStart.listen(rO),LN.onTouchEnd.listen(rO),LN.onTouchMove.listen(rO),LN.onTouchEnter.listen(rO),LN.onTouchLeave.listen(rO),LN.onTouchCancel.listen(rO)];}}rO( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=GO.xN(m.client);var h=IC(i.x,i.y) as JB;var g=TO.containsKey(l)?TO[l]:new PH(h,TO.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(WO..JN(RB.mG,true)..wN=(g.target.LD!=null)?g.target.SC(i):new IB.rJ()..AO=i..QN=g.ND..TN=g.JD);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(WO..JN(RB.kG,true)..wN=h.SC(i)..AO=i..QN=g.ND..TN=g.JD);g.target=h;}var k=null;if(j.type=="touchstart"){TO[l]=g;k=RB.nE;}if(j.type=="touchend"){TO.remove(l);k=RB.qE;}if(j.type=="touchcancel"){TO.remove(l);k=RB.sE;}if(j.type=="touchmove"){k=RB.AF;}if(k!=null&&h!=null){h.dispatchEvent(WO..JN(k,true)..wN=h.SC(i)..AO=i..QN=g.ND..TN=g.JD);}}}hO( g){g.preventDefault();var h=null;if(g.type=="keyup")h=zB.pE;if(g.type=="keydown")h=zB.XD;VO..JN(h,true)..dM=g.altKey..gM=g.ctrlKey..kM=g.shiftKey..wM=g.charCode..zM=g.keyCode..AN=WC.HG;if(g.keyLocation==VB.KeyLocation.LEFT)VO.AN=WC.NG;if(g.keyLocation==VB.KeyLocation.RIGHT)VO.AN=WC.zE;if(g.keyLocation==VB.KeyLocation.NUMPAD)VO.AN=WC.ZG;if(g.keyLocation==VB.KeyLocation.JOYSTICK)VO.AN=WC.uE;if(g.keyLocation==VB.KeyLocation.MOBILE)VO.AN=WC.uE;if(IO!=null)IO.dispatchEvent(VO);}iO( g){var i=(g.charCode!=0)?g.charCode:g.keyCode;var h=new bE(bE.TG,true);h.tK=new String.fromCharCodes([i]);if(IO!=null)IO.dispatchEvent(h);}} XH( h){if(PC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];h[g+0]=(h[g+0]*i)~/255;h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];h[g+1]=(h[g+1]*i)~/255;h[g+2]=(h[g+2]*i)~/255;h[g+3]=(h[g+3]*i)~/255;}}} eH( h){if(PC){for(var g=0;g<=h.length-4;g+= 4){var i=h[g+3];if(i>0){h[g+0]=(h[g+0]*255)~/i;h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;}}}else{for(var g=0;g<=h.length-4;g+= 4){var i=h[g+0];if(i>0){h[g+1]=(h[g+1]*255)~/i;h[g+2]=(h[g+2]*255)~/i;h[g+3]=(h[g+3]*255)~/i;}}}}class UJ extends AB implements aB{final  XO;final  YO;final  ZO=new List<mH>();var aO=0.0;var bO=0.0;var cO=0;var dL=0;UJ( g, j):XO=g,YO=g.yN(j){for(var h in YO.GE){var i=new mH(XO,h);ZO.add(i);}dL=YO.HE;bO=dL/XO.XL;} pB( h){aO+= h;var i=aO%bO;cO=gB.min((dL*i/bO).toInt(),dL-1);for(var g in ZO){g.pB(h);g.lF(cO);}return true;} OB( h){for(var g in ZO){if(g.visible){h.kF(g);}}}} pD( g, m, n, j){m=m.toDouble();n=n.toDouble();var GB=0.0;var CB=0.0;var q=m*g.a;var v=m*g.b;var t=m*g.a+n*g.c;var p=m*g.b+n*g.d;var u=n*g.c;var o=n*g.d;var h=GB;if(h>q)h=q;if(h>t)h=t;if(h>u)h=u;var i=CB;if(i>v)i=v;if(i>p)i=p;if(i>o)i=o;var l=GB;if(l<q)l=q;if(l<t)l=t;if(l<u)l=u;var k=CB;if(k<v)k=v;if(k<p)k=p;if(k<o)k=o;if(j==null)j=new EB.rJ();j.x=g.eB+h;j.y=g.fB+i;j.width=l-h;j.height=k-i;return j;}var PC=TH();class mH extends AB implements aB{final  bC;final  FE;final  LE=new Map<String,XC>();var rC;mH( i, h):this.bC=i,this.FE=h{for(var g in h.CC){if(g.TC!=null&&LE.containsKey(g.TC)==false){LE[g.TC]=i.JO(g.TC);}}lF(0);} pB( g){if(rC is aB){var h=rC as aB;h.pB(g);}} lF( t){var g=FE.XI(t);var o=g.x,p=g.y;var n=g.lB,k=g.mB;var m=g.skewX,l=g.skewY;var v=g.kB,PB=g.qB;var q=g.alpha;if(g.index!=t&&g.rF){var i=FE.WI(g);if(i!=null){var h=(t-g.index)/g.duration;var j=g.WF;if(j!=0){var u=0.0;if(j<0){var GB=1-h;u=1-GB*GB;j=0-j;}else{u=h*h;}h=j*u+(1-j)*h;}o=o+(i.x-o)*h;p=p+(i.y-p)*h;n=n+(i.lB-n)*h;k=k+(i.mB-k)*h;m=m+(i.skewX-m)*h;l=l+(i.skewY-l)*h;q=q+(i.alpha-q)*h;}}var CB=n*gB.cos(l);var SB=n*gB.sin(l);var LB=-k*gB.sin(m);var MB=k*gB.cos(m);var YB=o-(v*CB+PB*LB);var XB=p-(v*SB+PB*MB);RN=false;ON.qC(CB,SB,LB,MB,YB,XB);oM=q;tM=g.visible;rC=(g.TC!=null)?LE[g.TC]:null;} OB( g){if(rC!=null){rC.OB(g);}}}class zD{final  id;final  bC;final  GE=new List<AE>();zD( g, j):bC=j,id=g["id"]{for(var h in g["layers"]){var i=new AE(h);this.GE.add(i);}} get HE{var g=0;for(var h in GE)g=gB.max(g,h.HE);return g;}}class AE{final  name;final  MI;final  CC=new List<ED>();AE( g):this.name=g["name"],this.MI=g.containsKey("flipbook")?g["flipbook"]:false{for(var i in g["keyframes"]){var h=new ED(i);this.CC.add(h);}} get HE{var g=CC[CC.length-1];return g.index+g.duration;} XI( h){var g=1;while (g<CC.length&&CC[g].index<=h)g++ ;return CC[g-1];} WI( h){for(int g=0;g<CC.length-1;g++ )if(identical(CC[g],h))return CC[g+1];return null;}}class ED{var index;var duration;var TC;var label;var x,y;var lB,mB;var skewX,skewY;var kB,qB;var visible;var alpha;var rF;var WF;ED( g){this.index=g["index"];this.duration=g["duration"];this.TC=g.containsKey("ref")?g["ref"]:null;this.label=g.containsKey("label")?g["label"]:null;this.x=g.containsKey("loc")?g["loc"][0]:0.0;this.y=g.containsKey("loc")?g["loc"][1]:0.0;this.lB=g.containsKey("scale")?g["scale"][0]:1.0;this.mB=g.containsKey("scale")?g["scale"][1]:1.0;this.skewX=g.containsKey("skew")?g["skew"][0]:0.0;this.skewY=g.containsKey("skew")?g["skew"][1]:0.0;this.kB=g.containsKey("pivot")?g["pivot"][0]:0.0;this.qB=g.containsKey("pivot")?g["pivot"][1]:0.0;this.visible=g.containsKey("visible")?g["visible"]:true;this.alpha=g.containsKey("alpha")?g["alpha"]:1.0;this.rF=g.containsKey("tweened")?g["tweened"]:true;this.WF=g.containsKey("ease")?g["ease"]:0.0;}}class zH{var bC;var HD;var FD;zH( p,this.bC){this.HD=new Map<String,AI>();this.FD=new TB.Completer();var k=0;for(var j in p["atlases"] as List){var n=j["file"] as String;var q=OF(bC.FL,n);k++ ;var g=new VB.ImageElement();g.onLoad.listen((o){if( --k==0)this.FD.complete(this);});g.onError.listen((o){this.FD.completeError(new StateError("Failed to load image."));});g.src=q;for(var i in j["textures"] as List){var m=i["symbol"] as String;var h=i["rect"] as List;var l=i["origin"] as List;var t=new AI(h[0],h[1],h[2],h[3],l[0],l[1],g);this.HD[m]=t;}}}}class AI implements XC{var x,y,width,height;var eI,fI;var ID;var oO;var pO;AI(this.x,this.y,this.width,this.height,this.eI,this.fI,this.ID); OB( g){g.context.drawImageScaledFromSource(ID,x,y,width,height,0,0,width,height);}}const VJ=const WJ();class WJ{const WJ();}//@ sourceMappingURL=stagexl_web.dart.map
