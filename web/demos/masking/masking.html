<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>dartflash library - Masking Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />
	<link href="../../assets/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="../../assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../../assets/css/prettify.css" type="text/css" rel="stylesheet" />
    <link href="../../assets/css/dartflash.css" rel="stylesheet" />

    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-33055781-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>
<body onload="prettyPrint()">
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="brand" href="../../index.html"><strong>dartflash</strong></a>
                <ul class="nav">
                    <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Showcase<b
                        class="caret"></b> </a>
                        <ul class="dropdown-menu">
                            <li class="nav-header">Games</li>
                            <li><a href="../../games/escape/escape.html">&nbsp;Escape</a></li>
                            <li><a href="../../games/supersonic/supersonic.html">&nbsp;Supersonic</a></li>
                            <li class="divider"></li>
                            <li class="nav-header">Demos</li>
                            <li><a href="../../demos/performance/performance.html">&nbsp;Performance</a></li>
                            <li><a href="../../demos/masking/masking.html">&nbsp;Masking</a></li>
                            <li><a href="../../demos/movieclip/movieclip.html">&nbsp;MovieClip</a></li>
                            <li><a href="../../demos/text/text.html">&nbsp;Text</a></li>
                            <li><a href="../../demos/filter/filter.html">&nbsp;Filter</a></li>
                            <li><a href="../../demos/sound/sound.html">&nbsp;Sound</a></li>
                            <li><a href="../../demos/tweener/tweener.html">&nbsp;Tweener</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            Runtimes<b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="../../runtimes/texturepacker/texturepacker.html">Texture Packer</a></li>
                            <li><a href="../../runtimes/flump/flump.html">Flump</a></li>
                        </ul>
                    </li>
                    <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Documents<b
                        class="caret"></b> </a>
                        <ul class="dropdown-menu">
                            <li><a href="../../docs/api/dartflash.html" target="_blank">API Reference</a></li>
                            <li><a href="../../docs/actionscript-dart.html">ActionScript&nbsp;<i class="icon-hand-right"></i>&nbsp;Dart</a></li>
                            <li><a href="../../docs/wiki-articles.html">Wiki Articles</a></li>
                            <li><a href="../../docs/faq.html">FAQ</a></li>
                        </ul>
                    </li>
                    <li><a href="../../info.html">Info</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container">
        <h1>
            Masking</h1>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
            incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
            exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute
            irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
            pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia
            deserunt mollit anim id est laborum.</p>
        <br />
        <div class="tabbable">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#demoShow" data-toggle="tab">Demo</a></li>
                <li><a href="#demoHTML" data-toggle="tab">HTML</a></li>
                <li><a href="#demoDart" data-toggle="tab">Dart</a></li>
            </ul>

            <div class="tab-content">
                <div class="tab-pane active" id="demoShow">
                    <div class="row">
                        <div class="span2">
                            <button id="mask-none" class="btn btn-large btn-block btn-primary">No Mask</button>
                        </div>
                        <div class="span2">
                            <button id="mask-rectangle" class="btn btn-large btn-block btn-primary">Rectangle Mask</button>
                        </div>
                        <div class="span2">
                            <button id="mask-circle" class="btn btn-large btn-block btn-primary">Circle Mask</button>
                        </div>
                        <div class="span2">
                            <button id="mask-custom" class="btn btn-large btn-block btn-primary">Custom Mask</button>
                        </div>
                        <div class="offset2 span2">
                            <button id="mask-spin" class="btn btn-large btn-block btn-warning">Spin</button>
                        </div>
                    </div>
                    <br />
                    <canvas id="stage" width="940" height="500">
                    </canvas>
                </div>
                <div class="tab-pane" id="demoHTML">
                    <pre class="prettyprint lang-html">
&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;span2&quot;&gt;&lt;button id=&quot;mask-none&quot; class=&quot;btn btn-large btn-block btn-primary&quot;&gt;No Mask&lt;/button&gt;&lt;/div&gt;
  &lt;div class=&quot;span2&quot;&gt;&lt;button id=&quot;mask-rectangle&quot; class=&quot;btn btn-large btn-block btn-primary&quot;&gt;Rectangle Mask&lt;/button&gt;&lt;/div&gt;
  &lt;div class=&quot;span2&quot;&gt;&lt;button id=&quot;mask-circle&quot; class=&quot;btn btn-large btn-block btn-primary&quot;&gt;Circle Mask&lt;/button&gt;&lt;/div&gt;
  &lt;div class=&quot;span2&quot;&gt;&lt;button id=&quot;mask-custom&quot; class=&quot;btn btn-large btn-block btn-primary&quot;&gt;Custom Mask&lt;/button&gt;&lt;/div&gt;
  &lt;div class=&quot;span2 offset2&quot;&gt;&lt;button id=&quot;mask-spin&quot; class=&quot;btn btn-large btn-block btn-warning&quot;&gt;Spin&lt;/button&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;br /&gt;

&lt;canvas id=&quot;stage&quot; width=&quot;940&quot; height=&quot;500&quot;&gt;
&lt;/canvas&gt;</pre>
                </div>
                <div class="tab-pane" id="demoDart">
                     <pre class="prettyprint lang-java">
import &apos;dart:math&apos;;
import &apos;dart:html&apos; as html;
import &apos;package:dartflash/dartflash.dart&apos;;

Stage stage;
Resource resource;
RenderLoop renderLoop;
Random random = new Random();

class FlowerField extends DisplayObjectContainer
{
  FlowerField()
  {
    for(int i = 0; i &lt; 150; i++)
    {
      int f = 1 + random.nextInt(3);

      BitmapData bitmapData = resource.getBitmapData(&apos;flower$f&apos;);
      Bitmap bitmap = new Bitmap(bitmapData);
      bitmap.pivotX = 64;
      bitmap.pivotY = 64;
      bitmap.x = 64 + random.nextInt(940 - 128);
      bitmap.y = 64 + random.nextInt(500 - 128);
      addChild(bitmap);

      Tween tween = new Tween(bitmap, 600, TransitionFunction.linear);
      tween.animate(&apos;rotation&apos;, PI * 60.0);
      renderLoop.juggler.add(tween);
    }
  }
}

//-----------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------

void main()
{
  // initialize the Display List

  stage = new Stage(&apos;myStage&apos;, html.document.query(&apos;#stage&apos;));
  renderLoop = new RenderLoop();
  renderLoop.addStage(stage);

  // define three Masks for later use

  List&lt;Point&gt; starPath = new List&lt;Point&gt;();

  for(int i = 0; i &lt; 6; i++) {
    num a1 = (i * 60) * PI / 180;
    num a2 = (i * 60 + 30) * PI / 180;
    starPath.add(new Point(470 + 200 * cos(a1), 250 + 200 * sin(a1)));
    starPath.add(new Point(470 + 100 * cos(a2), 250 + 100 * sin(a2)));
  }

  Mask rectangleMask = new Mask.rectangle(100, 100, 740, 300);
  Mask circleMask = new Mask.circle(470, 250, 200);
  Mask customMask = new Mask.custom(starPath);

  // use the Resource class to load some Bitmaps

  resource = new Resource();
  resource.addImage(&apos;flower1&apos;, &apos;../common/images/Flower1.png&apos;);
  resource.addImage(&apos;flower2&apos;, &apos;../common/images/Flower2.png&apos;);
  resource.addImage(&apos;flower3&apos;, &apos;../common/images/Flower3.png&apos;);

  resource.load().then((result)
  {
    // draw a nice looking field of flowers

    FlowerField flowerField = new FlowerField();
    flowerField.pivotX = 470;
    flowerField.pivotY = 250;
    flowerField.x = 470;
    flowerField.y = 250;
    stage.addChild(flowerField);

    // add html-button event listeners

    html.query(&apos;#mask-none&apos;).onClick.listen((e) =&gt; flowerField.mask = null);
    html.query(&apos;#mask-rectangle&apos;).onClick.listen((e) =&gt; flowerField.mask = rectangleMask);
    html.query(&apos;#mask-circle&apos;).onClick.listen((e) =&gt; flowerField.mask = circleMask);
    html.query(&apos;#mask-custom&apos;).onClick.listen((e) =&gt; flowerField.mask = customMask);
    html.query(&apos;#mask-spin&apos;).onClick.listen((e) {
      Tween rotate = new Tween(flowerField, 2.0, TransitionFunction.easeInOutBack);
      rotate.animate(&apos;rotation&apos;, PI * 4.0);
      rotate.onComplete = () =&gt; flowerField.rotation = 0.0;
      renderLoop.juggler.add(rotate);
    });
  });
}</pre>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../assets/js/prettify.js"></script>

    <script type="application/dart" src="masking.dart"></script>
    <script type="text/javascript" src="../../assets/js/dart.js"></script>
</body>
</html>
