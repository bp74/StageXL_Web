        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>BitmapData class / stagexl Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="stagexl" data-type="BitmapData">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../stagexl.html">stagexl</a> &rsaquo; <a href="../stagexl/BitmapData.html">BitmapData</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
<h2><div class="icon-library"></div><a href="../meta.html">meta</a></h2><h2><div class="icon-library"></div><a href="../metadata.html">metadata</a></h2><h2><div class="icon-library"></div><a href="../stagexl.html">stagexl</a></h2><ul class="icon">
<li><a href="../stagexl/Animatable.html"><div class="icon-class"></div>Animatable</a></li>
<li><a href="../stagexl/AudioElementSound.html"><div class="icon-class"></div>AudioElementSound</a></li>
<li><a href="../stagexl/AudioElementSoundChannel.html"><div class="icon-class"></div>AudioElementSoundChannel</a></li>
<li><a href="../stagexl/Bitmap.html"><div class="icon-class"></div>Bitmap</a></li>
<li><div class="icon-class"></div><strong>BitmapData</strong></li>
<li><a href="../stagexl/BitmapDrawable.html"><div class="icon-class"></div>BitmapDrawable</a></li>
<li><a href="../stagexl/BitmapFilter.html"><div class="icon-class"></div>BitmapFilter</a></li>
<li><a href="../stagexl/BlurFilter.html"><div class="icon-class"></div>BlurFilter</a></li>
<li><a href="../stagexl/CapsStyle.html"><div class="icon-class"></div>CapsStyle</a></li>
<li><a href="../stagexl/Circle.html"><div class="icon-class"></div>Circle</a></li>
<li><a href="../stagexl/Color.html"><div class="icon-class"></div>Color</a></li>
<li><a href="../stagexl/ColorMatrixFilter.html"><div class="icon-class"></div>ColorMatrixFilter</a></li>
<li><a href="../stagexl/ColorTransform.html"><div class="icon-class"></div>ColorTransform</a></li>
<li><a href="../stagexl/DelayedCall.html"><div class="icon-class"></div>DelayedCall</a></li>
<li><a href="../stagexl/DisplayObject.html"><div class="icon-class"></div>DisplayObject</a></li>
<li><a href="../stagexl/DisplayObjectContainer.html"><div class="icon-class"></div>DisplayObjectContainer</a></li>
<li><a href="../stagexl/DropShadowFilter.html"><div class="icon-class"></div>DropShadowFilter</a></li>
<li><a href="../stagexl/EnterFrameEvent.html"><div class="icon-class"></div>EnterFrameEvent</a></li>
<li><a href="../stagexl/Event.html"><div class="icon-class"></div>Event</a></li>
<li><a href="../stagexl/EventDispatcher.html"><div class="icon-class"></div>EventDispatcher</a></li>
<li><a href="../stagexl/EventPhase.html"><div class="icon-class"></div>EventPhase</a></li>
<li><a href="../stagexl/EventStreamProvider.html"><div class="icon-class"></div>EventStreamProvider&lt;T&gt;</a></li>
<li><a href="../stagexl/FlipBook.html"><div class="icon-class"></div>FlipBook</a></li>
<li><a href="../stagexl/FlumpLibrary.html"><div class="icon-class"></div>FlumpLibrary</a></li>
<li><a href="../stagexl/FlumpMovie.html"><div class="icon-class"></div>FlumpMovie</a></li>
<li><a href="../stagexl/Gauge.html"><div class="icon-class"></div>Gauge</a></li>
<li><a href="../stagexl/GlassPlate.html"><div class="icon-class"></div>GlassPlate</a></li>
<li><a href="../stagexl/GlowFilter.html"><div class="icon-class"></div>GlowFilter</a></li>
<li><a href="../stagexl/Graphics.html"><div class="icon-class"></div>Graphics</a></li>
<li><a href="../stagexl/GraphicsGradient.html"><div class="icon-class"></div>GraphicsGradient</a></li>
<li><a href="../stagexl/GraphicsPattern.html"><div class="icon-class"></div>GraphicsPattern</a></li>
<li><a href="../stagexl/GridFitType.html"><div class="icon-class"></div>GridFitType</a></li>
<li><a href="../stagexl/InteractiveObject.html"><div class="icon-class"></div>InteractiveObject</a></li>
<li><a href="../stagexl/JointStyle.html"><div class="icon-class"></div>JointStyle</a></li>
<li><a href="../stagexl/Juggler.html"><div class="icon-class"></div>Juggler</a></li>
<li><a href="../stagexl/KeyboardEvent.html"><div class="icon-class"></div>KeyboardEvent</a></li>
<li><a href="../stagexl/KeyLocation.html"><div class="icon-class"></div>KeyLocation</a></li>
<li><a href="../stagexl/Mask.html"><div class="icon-class"></div>Mask</a></li>
<li><a href="../stagexl/Matrix.html"><div class="icon-class"></div>Matrix</a></li>
<li><a href="../stagexl/MockSound.html"><div class="icon-class"></div>MockSound</a></li>
<li><a href="../stagexl/MockSoundChannel.html"><div class="icon-class"></div>MockSoundChannel</a></li>
<li><a href="../stagexl/Mouse.html"><div class="icon-class"></div>Mouse</a></li>
<li><a href="../stagexl/MouseCursor.html"><div class="icon-class"></div>MouseCursor</a></li>
<li><a href="../stagexl/MouseEvent.html"><div class="icon-class"></div>MouseEvent</a></li>
<li><a href="../stagexl/MovieClip.html"><div class="icon-class"></div>MovieClip</a></li>
<li><a href="../stagexl/Multitouch.html"><div class="icon-class"></div>Multitouch</a></li>
<li><a href="../stagexl/MultitouchInputMode.html"><div class="icon-class"></div>MultitouchInputMode</a></li>
<li><a href="../stagexl/ObjectPool.html"><div class="icon-class"></div>ObjectPool&lt;T&gt;</a></li>
<li><a href="../stagexl/ParticleSystem.html"><div class="icon-class"></div>ParticleSystem</a></li>
<li><a href="../stagexl/PixelSnapping.html"><div class="icon-class"></div>PixelSnapping</a></li>
<li><a href="../stagexl/Point.html"><div class="icon-class"></div>Point</a></li>
<li><a href="../stagexl/Rectangle.html"><div class="icon-class"></div>Rectangle</a></li>
<li><a href="../stagexl/RenderLoop.html"><div class="icon-class"></div>RenderLoop</a></li>
<li><a href="../stagexl/RenderState.html"><div class="icon-class"></div>RenderState</a></li>
<li><a href="../stagexl/Resource.html"><div class="icon-class"></div>Resource</a></li>
<li><a href="../stagexl/ResourceManager.html"><div class="icon-class"></div>ResourceManager</a></li>
<li><a href="../stagexl/ResourceManagerResource.html"><div class="icon-class"></div>ResourceManagerResource</a></li>
<li><a href="../stagexl/Shape.html"><div class="icon-class"></div>Shape</a></li>
<li><a href="../stagexl/SimpleButton.html"><div class="icon-class"></div>SimpleButton</a></li>
<li><a href="../stagexl/Sound.html"><div class="icon-class"></div>Sound</a></li>
<li><a href="../stagexl/SoundChannel.html"><div class="icon-class"></div>SoundChannel</a></li>
<li><a href="../stagexl/SoundMixer.html"><div class="icon-class"></div>SoundMixer</a></li>
<li><a href="../stagexl/SoundTransform.html"><div class="icon-class"></div>SoundTransform</a></li>
<li><a href="../stagexl/Sprite.html"><div class="icon-class"></div>Sprite</a></li>
<li><a href="../stagexl/Stage.html"><div class="icon-class"></div>Stage</a></li>
<li><a href="../stagexl/StageAlign.html"><div class="icon-class"></div>StageAlign</a></li>
<li><a href="../stagexl/StageRenderMode.html"><div class="icon-class"></div>StageRenderMode</a></li>
<li><a href="../stagexl/StageScaleMode.html"><div class="icon-class"></div>StageScaleMode</a></li>
<li><a href="../stagexl/TextEvent.html"><div class="icon-class"></div>TextEvent</a></li>
<li><a href="../stagexl/TextField.html"><div class="icon-class"></div>TextField</a></li>
<li><a href="../stagexl/TextFieldAutoSize.html"><div class="icon-class"></div>TextFieldAutoSize</a></li>
<li><a href="../stagexl/TextFieldType.html"><div class="icon-class"></div>TextFieldType</a></li>
<li><a href="../stagexl/TextFormat.html"><div class="icon-class"></div>TextFormat</a></li>
<li><a href="../stagexl/TextFormatAlign.html"><div class="icon-class"></div>TextFormatAlign</a></li>
<li><a href="../stagexl/TextLineMetrics.html"><div class="icon-class"></div>TextLineMetrics</a></li>
<li><a href="../stagexl/TextureAtlas.html"><div class="icon-class"></div>TextureAtlas</a></li>
<li><a href="../stagexl/TextureAtlasFormat.html"><div class="icon-class"></div>TextureAtlasFormat</a></li>
<li><a href="../stagexl/TextureAtlasFrame.html"><div class="icon-class"></div>TextureAtlasFrame</a></li>
<li><a href="../stagexl/TimeGauge.html"><div class="icon-class"></div>TimeGauge</a></li>
<li><a href="../stagexl/TouchEvent.html"><div class="icon-class"></div>TouchEvent</a></li>
<li><a href="../stagexl/Transition.html"><div class="icon-class"></div>Transition</a></li>
<li><a href="../stagexl/TransitionFunction.html"><div class="icon-class"></div>TransitionFunction</a></li>
<li><a href="../stagexl/Tween.html"><div class="icon-class"></div>Tween</a></li>
<li><a href="../stagexl/Warp.html"><div class="icon-class"></div>Warp</a></li>
<li><a href="../stagexl/WebAudioApiSound.html"><div class="icon-class"></div>WebAudioApiSound</a></li>
<li><a href="../stagexl/WebAudioApiSoundChannel.html"><div class="icon-class"></div>WebAudioApiSoundChannel</a></li>
</ul>
</div>
<div class="content">
        <h2><strong>BitmapData</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<pre class="source">
class BitmapData implements BitmapDrawable {
 
 int _width;
 int _height;
 bool _transparent;

 CanvasImageSource _source;
 CanvasRenderingContext2D _context;

 int _frameMode;
 int _frameOffsetX;
 int _frameOffsetY;
 int _frameX;
 int _frameY;
 int _frameWidth;
 int _frameHeight;

 //-------------------------------------------------------------------------------------------------
 //-------------------------------------------------------------------------------------------------

 BitmapData(int width, int height, [bool transparent = true, int fillColor = 0xFFFFFFFF]) {
   
   _width = width;
   _height = height;
   _transparent = transparent;
   
   var canvas = new CanvasElement(width: _width, height: _height);

   _context = canvas.context2d;
   _context.fillStyle = _transparent ? _color2rgba(fillColor) : _color2rgb(fillColor);
   _context.fillRect(0, 0, width, height);

   _source = canvas;
   _frameMode = 0;
   _frameOffsetX = 0;
   _frameOffsetY = 0;
 }

 //-------------------------------------------------------------------------------------------------

 BitmapData.fromImageElement(ImageElement imageElement) {
   
   if (imageElement == null)
     throw new ArgumentError();
   
   _width = imageElement.naturalWidth;
   _height = imageElement.naturalHeight;
   _transparent = true;

   _source = imageElement;
   _frameMode = 0;
   _frameOffsetX = 0;
   _frameOffsetY = 0;
 }

 //-------------------------------------------------------------------------------------------------

 BitmapData.fromTextureAtlasFrame(TextureAtlasFrame textureAtlasFrame) {
   
   _width = textureAtlasFrame.originalWidth;
   _height = textureAtlasFrame.originalHeight;
   _transparent = true;

   _source = textureAtlasFrame.textureAtlas.imageElement;

   _frameMode = textureAtlasFrame.rotated ? 2 : 1;
   _frameOffsetX = textureAtlasFrame.offsetX;
   _frameOffsetY = textureAtlasFrame.offsetY;
   _frameX = textureAtlasFrame.frameX;
   _frameY = textureAtlasFrame.frameY;
   _frameWidth = textureAtlasFrame.frameWidth;
   _frameHeight = textureAtlasFrame.frameHeight;
 }

 //-------------------------------------------------------------------------------------------------
 //-------------------------------------------------------------------------------------------------

 static Future&lt;BitmapData&gt; load(String url) {
   
   Completer&lt;BitmapData&gt; completer = new Completer&lt;BitmapData&gt;();

   var image = new ImageElement();
   image.onLoad.listen((event) =&gt; completer.complete(new BitmapData.fromImageElement(image)));
   image.onError.listen((event) =&gt; completer.completeError(new StateError("Error loading image.")));
   image.src = url;

   return completer.future;
 }

 @deprecated
 static Future&lt;BitmapData&gt; loadImage(String url) {
   return BitmapData.load(url);
 }
   
 //-------------------------------------------------------------------------------------------------
 //-------------------------------------------------------------------------------------------------

 int get width =&gt; _width;
 int get height =&gt; _height;

 //-------------------------------------------------------------------------------------------------

 BitmapData clone() {
   
   BitmapData bitmapData = new BitmapData(_width, _height, true, 0);
   bitmapData.draw(this);

   return bitmapData;
 }

 //-------------------------------------------------------------------------------------------------

 void applyFilter(BitmapData sourceBitmapData, Rectangle sourceRect, Point destPoint, BitmapFilter filter) {
   
   filter.apply(sourceBitmapData, sourceRect, this, destPoint);
 }

 //-------------------------------------------------------------------------------------------------

 void colorTransform(Rectangle rect, ColorTransform transform) {
   
   var context = _getContext();
   var image = context.getImageData(rect.x, rect.y, rect.width, rect.height);
   var data = image.data;
   var length = data.length;

   int r = transform.redOffset;
   int g = transform.greenOffset;
   int b = transform.blueOffset;
   int a = transform.alphaOffset;

   num rm = transform.redMultiplier;
   num gm = transform.greenMultiplier;
   num bm = transform.blueMultiplier;
   num am = transform.alphaMultiplier;

   if (_isLittleEndianSystem) {
     for (int i = 0; i &lt;= length - 4; i += 4) {
       data[i + 0] = data[i + 0] * (1 - rm) + (r * rm);
       data[i + 1] = data[i + 1] * (1 - gm) + (g * gm);
       data[i + 2] = data[i + 2] * (1 - bm) + (b * bm);
       data[i + 3] = data[i + 3] * (1 - am) + (a * am);
     }
   } else {
     for (int i = 0; i &lt;= length - 4; i += 4) {
       data[i + 0] = data[i + 0] * (1 - am) + (a * am);
       data[i + 1] = data[i + 1] * (1 - bm) + (b * bm);
       data[i + 2] = data[i + 2] * (1 - gm) + (g * gm);
       data[i + 3] = data[i + 3] * (1 - rm) + (r * rm);
     }
   }

   context.putImageData(image, rect.x, rect.y);
 }

 //-------------------------------------------------------------------------------------------------

 void copyPixels(BitmapData sourceBitmapData, Rectangle sourceRect, Point destPoint, [BitmapData alphaBitmapData = null, Point alphaPoint = null, bool mergeAlpha = false]) {
   
   var imageData = sourceBitmapData._getContext().getImageData(sourceRect.x, sourceRect.y, sourceRect.width, sourceRect.height);
   _getContext().putImageData(imageData, destPoint.x, destPoint.y);
 }

 //-------------------------------------------------------------------------------------------------

 void draw(BitmapDrawable source, [Matrix matrix = null]) {
   
   var context = _getContext();
   var renderState = new RenderState.fromCanvasRenderingContext2D(context, matrix);
   
   source.render(renderState);
   context.setTransform(1.0, 0.0, 0.0, 1.0, 0.0, 0.0);
 }

 //-------------------------------------------------------------------------------------------------

 void fillRect(Rectangle rect, int color) {
   
   var context = _getContext();

   context.setTransform(1.0, 0.0, 0.0, 1.0, 0.0, 0.0);
   context.fillStyle = _color2rgba(color);
   context.fillRect(rect.x, rect.y, rect.width, rect.height);
 }
 
 //-------------------------------------------------------------------------------------------------

 void clear() {
   
   var context = _getContext();
   
   context.clearRect(0, 0, _width, _height);
 }

 //-------------------------------------------------------------------------------------------------

 int getPixel(int x, int y) {
   
   var context = _getContext();
   var imageData = context.getImageData(x, y, 1, 1);
   var data = imageData.data;

   if (_isLittleEndianSystem) {
     return (data[0] &lt;&lt; 16) + (data[1] &lt;&lt; 8) + (data[2] &lt;&lt; 0);
   } else {
     return (data[3] &lt;&lt; 16) + (data[2] &lt;&lt; 8) + (data[1] &lt;&lt; 0);
   }

 }

 //-------------------------------------------------------------------------------------------------

 int getPixel32(int x, int y) {
   
   var context = _getContext();
   var imageData = context.getImageData(x, y, 1, 1);
   var data = imageData.data;

   if (_isLittleEndianSystem) {
     return (data[0] &lt;&lt; 16) + (data[1] &lt;&lt; 8) + (data[2] &lt;&lt; 0) + (data[3] &lt;&lt; 24);
   } else {
     return (data[3] &lt;&lt; 16) + (data[2] &lt;&lt; 8) + (data[1] &lt;&lt; 0) + (data[0] &lt;&lt; 24);
   }
 }

 //-------------------------------------------------------------------------------------------------

 void setPixel(int x, int y, int color) {
   
   var context = _getContext();
   var imageData = context.getImageData(x, y, 1, 1);
   var data = imageData.data;

   if (_isLittleEndianSystem) {
     data[0] = (color &gt;&gt; 16) &amp; 0xFF;
     data[1] = (color &gt;&gt;  8) &amp; 0xFF;
     data[2] = (color &gt;&gt;  0) &amp; 0xFF;
   } else {
     data[1] = (color &gt;&gt;  0) &amp; 0xFF;
     data[2] = (color &gt;&gt;  8) &amp; 0xFF;
     data[3] = (color &gt;&gt; 16) &amp; 0xFF;
   }

   context.putImageData(imageData, x, y);
 }

 //-------------------------------------------------------------------------------------------------

 void setPixel32(int x, int y, int color) {
   
   var context = _getContext();
   var imageData = context.getImageData(x, y, 1, 1);
   var data = imageData.data;

   if (_isLittleEndianSystem) {
     data[0] = (color &gt;&gt; 16) &amp; 0xFF;
     data[1] = (color &gt;&gt;  8) &amp; 0xFF;
     data[2] = (color &gt;&gt;  0) &amp; 0xFF;
     data[3] = (color &gt;&gt; 24) &amp; 0xFF;
   } else {
     data[0] = (color &gt;&gt; 24) &amp; 0xFF;
     data[1] = (color &gt;&gt;  0) &amp; 0xFF;
     data[2] = (color &gt;&gt;  8) &amp; 0xFF;
     data[3] = (color &gt;&gt; 16) &amp; 0xFF;
   }

   context.putImageData(imageData, x, y);
 }

 //-------------------------------------------------------------------------------------------------
 //-------------------------------------------------------------------------------------------------

 void render(RenderState renderState) {
   
   var renderStateContext = renderState.context;

   switch(_frameMode) {
     
     case 0:
       renderStateContext.drawImage(_source, _frameOffsetX, _frameOffsetY);
       break;

     case 1:
       renderStateContext.drawImageScaledFromSource(_source,
         _frameX, _frameY, _frameWidth, _frameHeight,
         _frameOffsetX, _frameOffsetY, _frameWidth, _frameHeight);
       break;

     case 2:
       renderStateContext.transform(0.0, -1.0, 1.0, 0.0, _frameOffsetX, _frameOffsetY + _frameHeight);
       renderStateContext.drawImageScaledFromSource(_source, 
         _frameX, _frameY, _frameHeight, _frameWidth, 0, 0, _frameHeight, _frameWidth);
       break;
   }
 }

 //-------------------------------------------------------------------------------------------------

 void renderClipped(RenderState renderState, Rectangle clipRectangle) {
   
   var renderStateContext = renderState.context;
   
   if (clipRectangle.width &lt;= 0.0 || clipRectangle.height &lt;= 0.0)
     return;
   
   switch(_frameMode) {
     
     case 0:

       renderStateContext.drawImageScaledFromSource(_source, 
         clipRectangle.x - _frameOffsetX, clipRectangle.y - _frameOffsetY, clipRectangle.width, clipRectangle.height,
         clipRectangle.x + _frameOffsetX, clipRectangle.y + _frameOffsetY, clipRectangle.width, clipRectangle.height);
       
       break;

     case 1:

       var fLeft = _frameX;
       var fTop =  _frameY;
       var fRight = fLeft + _frameWidth;
       var fBottom = fTop + _frameHeight;

       var cLeft = _frameX - _frameOffsetX + clipRectangle.x;
       var cTop =  _frameY - _frameOffsetY + clipRectangle.y;
       var cRight = cLeft + clipRectangle.width;
       var cBottom = cTop + clipRectangle.height;

       var iLeft = (fLeft &gt; cLeft) ? fLeft : cLeft;
       var iTop =  (fTop &gt; cTop) ? fTop : cTop;
       var iRight = (fRight &lt; cRight) ? fRight : cRight;
       var iBottom = (fBottom &lt; cBottom) ? fBottom : cBottom;
       var iOffsetX = _frameOffsetX - fLeft + iLeft;
       var iOffsetY = _frameOffsetY - fTop + iTop;
       var iWidth = iRight - iLeft;
       var iHeight = iBottom - iTop;

       if (iWidth &gt; 0.0 &amp;&amp; iHeight &gt; 0.0) {
         renderStateContext.drawImageScaledFromSource(_source, 
           iLeft, iTop, iWidth, iHeight, iOffsetX, iOffsetY, iWidth, iHeight);
       }

       break;

     case 2:

       var fLeft = _frameX;
       var fTop =  _frameY;
       var fRight = fLeft + _frameHeight;
       var fBottom = fTop + _frameWidth;

       var cLeft = _frameX + _frameOffsetY - clipRectangle.y + _frameHeight - clipRectangle.height;
       var cTop =  _frameY - _frameOffsetX + clipRectangle.x;
       var cRight = cLeft + clipRectangle.height;
       var cBottom = cTop + clipRectangle.width;

       var iLeft = (fLeft &gt; cLeft) ? fLeft : cLeft;
       var iTop =  (fTop &gt; cTop) ? fTop : cTop;
       var iRight = (fRight &lt; cRight) ? fRight : cRight;
       var iBottom = (fBottom &lt; cBottom) ? fBottom : cBottom;
       var iOffsetX = _frameOffsetX - fTop + iTop;
       var iOffsetY = _frameOffsetY + fRight - iRight;
       var iWidth = iBottom - iTop;
       var iHeight = iRight - iLeft;
       
       if (iWidth &gt; 0.0 &amp;&amp; iHeight &gt; 0.0) {
         renderStateContext.transform(0.0, -1.0, 1.0, 0.0, iOffsetX, iOffsetY + iHeight);
         renderStateContext.drawImageScaledFromSource(_source, 
           iLeft, iTop, iHeight, iWidth, 0, 0, iHeight, iWidth);
       }

       break;
   }
 }

 //-------------------------------------------------------------------------------------------------
 //-------------------------------------------------------------------------------------------------

 CanvasRenderingContext2D _getContext() {
   
   if (_context == null) {
     
     var canvas = new CanvasElement(width: _width, height: _height);

     _context = canvas.context2d;

     switch(_frameMode) {
       
       case 0:
         _context.drawImage(_source, _frameOffsetX, _frameOffsetY);
         break;

       case 1:
         _context.drawImageScaledFromSource(_source, 
           _frameX, _frameY, _frameWidth, _frameHeight, 
           _frameOffsetX, _frameOffsetY, _frameWidth, _frameHeight);
         break;

       case 2:
         _context.setTransform(0.0, -1.0, 1.0, 0.0, _frameOffsetX, _frameOffsetY + _frameHeight);
         _context.drawImageScaledFromSource(_source, 
           _frameX, _frameY, _frameHeight, 
           _frameWidth, 0, 0, _frameHeight, _frameWidth);
         
         _context.setTransform(1.0, 0.0, 0.0, 1.0, 0.0, 0.0);
         break;
     }

     _source = canvas;
     _frameMode = 0;
     _frameOffsetX = 0;
     _frameOffsetY = 0;
   }

   return _context;
 }

}
</pre>
</div>
<h3>Implements</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../stagexl/BitmapDrawable.html">BitmapDrawable</a></span></p>
<div>
<h3>Static Methods</h3>
<div class="method"><h4 id="load">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_async/Future.html">Future</a>&lt;<a href="../stagexl/BitmapData.html">BitmapData</a>&gt; <strong>load</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> url) <a class="anchor-link" href="#load"
              title="Permalink to BitmapData.load">#</a></h4>
<div class="doc">
<pre class="source">
static Future&lt;BitmapData&gt; load(String url) {
 
 Completer&lt;BitmapData&gt; completer = new Completer&lt;BitmapData&gt;();

 var image = new ImageElement();
 image.onLoad.listen((event) =&gt; completer.complete(new BitmapData.fromImageElement(image)));
 image.onError.listen((event) =&gt; completer.completeError(new StateError("Error loading image.")));
 image.src = url;

 return completer.future;
}
</pre>
</div>
</div>
<div class="method"><h4 id="loadImage">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_async/Future.html">Future</a>&lt;<a href="../stagexl/BitmapData.html">BitmapData</a>&gt; <strong>loadImage</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> url) <a class="anchor-link" href="#loadImage"
              title="Permalink to BitmapData.loadImage">#</a></h4>
<div class="doc">
<pre class="source">
@deprecated
static Future&lt;BitmapData&gt; loadImage(String url) {
 return BitmapData.load(url);
}
</pre>
</div>
</div>
</div>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="BitmapData">
<button class="show-code">Code</button>
new <strong>BitmapData</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> width, <a href="http://api.dartlang.org/dart_core/int.html">int</a> height, [<a href="http://api.dartlang.org/dart_core/bool.html">bool</a> transparent = true, <a href="http://api.dartlang.org/dart_core/int.html">int</a> fillColor = 0xFFFFFFFF]) <a class="anchor-link" href="#BitmapData"
              title="Permalink to BitmapData.BitmapData">#</a></h4>
<div class="doc">
<pre class="source">
BitmapData(int width, int height, [bool transparent = true, int fillColor = 0xFFFFFFFF]) {
 
 _width = width;
 _height = height;
 _transparent = transparent;
 
 var canvas = new CanvasElement(width: _width, height: _height);

 _context = canvas.context2d;
 _context.fillStyle = _transparent ? _color2rgba(fillColor) : _color2rgb(fillColor);
 _context.fillRect(0, 0, width, height);

 _source = canvas;
 _frameMode = 0;
 _frameOffsetX = 0;
 _frameOffsetY = 0;
}
</pre>
</div>
</div>
<div class="method"><h4 id="BitmapData.fromImageElement">
<button class="show-code">Code</button>
new <strong>BitmapData.fromImageElement</strong>(<a href="http://api.dartlang.org/dart_html/ImageElement.html">ImageElement</a> imageElement) <a class="anchor-link" href="#BitmapData.fromImageElement"
              title="Permalink to BitmapData.BitmapData.fromImageElement">#</a></h4>
<div class="doc">
<pre class="source">
BitmapData.fromImageElement(ImageElement imageElement) {
 
 if (imageElement == null)
   throw new ArgumentError();
 
 _width = imageElement.naturalWidth;
 _height = imageElement.naturalHeight;
 _transparent = true;

 _source = imageElement;
 _frameMode = 0;
 _frameOffsetX = 0;
 _frameOffsetY = 0;
}
</pre>
</div>
</div>
<div class="method"><h4 id="BitmapData.fromTextureAtlasFrame">
<button class="show-code">Code</button>
new <strong>BitmapData.fromTextureAtlasFrame</strong>(<a href="../stagexl/TextureAtlasFrame.html">TextureAtlasFrame</a> textureAtlasFrame) <a class="anchor-link" href="#BitmapData.fromTextureAtlasFrame"
              title="Permalink to BitmapData.BitmapData.fromTextureAtlasFrame">#</a></h4>
<div class="doc">
<pre class="source">
BitmapData.fromTextureAtlasFrame(TextureAtlasFrame textureAtlasFrame) {
 
 _width = textureAtlasFrame.originalWidth;
 _height = textureAtlasFrame.originalHeight;
 _transparent = true;

 _source = textureAtlasFrame.textureAtlas.imageElement;

 _frameMode = textureAtlasFrame.rotated ? 2 : 1;
 _frameOffsetX = textureAtlasFrame.offsetX;
 _frameOffsetY = textureAtlasFrame.offsetY;
 _frameX = textureAtlasFrame.frameX;
 _frameY = textureAtlasFrame.frameY;
 _frameWidth = textureAtlasFrame.frameWidth;
 _frameHeight = textureAtlasFrame.frameHeight;
}
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="height">
<button class="show-code">Code</button>
final <a href="http://api.dartlang.org/dart_core/int.html">int</a>         <strong>height</strong> <a class="anchor-link"
            href="#height"
            title="Permalink to BitmapData.height">#</a>
        </h4>
        <div class="doc">
<pre class="source">
int get height =&gt; _height;
</pre>
</div>
</div>
<div class="field"><h4 id="width">
<button class="show-code">Code</button>
final <a href="http://api.dartlang.org/dart_core/int.html">int</a>         <strong>width</strong> <a class="anchor-link"
            href="#width"
            title="Permalink to BitmapData.width">#</a>
        </h4>
        <div class="doc">
<pre class="source">
int get width =&gt; _width;
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="applyFilter">
<button class="show-code">Code</button>
void <strong>applyFilter</strong>(<a href="../stagexl/BitmapData.html">BitmapData</a> sourceBitmapData, <a href="../stagexl/Rectangle.html">Rectangle</a> sourceRect, <a href="../stagexl/Point.html">Point</a> destPoint, <a href="../stagexl/BitmapFilter.html">BitmapFilter</a> filter) <a class="anchor-link" href="#applyFilter"
              title="Permalink to BitmapData.applyFilter">#</a></h4>
<div class="doc">
<pre class="source">
void applyFilter(BitmapData sourceBitmapData, Rectangle sourceRect, Point destPoint, BitmapFilter filter) {
 
 filter.apply(sourceBitmapData, sourceRect, this, destPoint);
}
</pre>
</div>
</div>
<div class="method"><h4 id="clear">
<button class="show-code">Code</button>
void <strong>clear</strong>() <a class="anchor-link" href="#clear"
              title="Permalink to BitmapData.clear">#</a></h4>
<div class="doc">
<pre class="source">
void clear() {
 
 var context = _getContext();
 
 context.clearRect(0, 0, _width, _height);
}
</pre>
</div>
</div>
<div class="method"><h4 id="clone">
<button class="show-code">Code</button>
<a href="../stagexl/BitmapData.html">BitmapData</a> <strong>clone</strong>() <a class="anchor-link" href="#clone"
              title="Permalink to BitmapData.clone">#</a></h4>
<div class="doc">
<pre class="source">
BitmapData clone() {
 
 BitmapData bitmapData = new BitmapData(_width, _height, true, 0);
 bitmapData.draw(this);

 return bitmapData;
}
</pre>
</div>
</div>
<div class="method"><h4 id="colorTransform">
<button class="show-code">Code</button>
void <strong>colorTransform</strong>(<a href="../stagexl/Rectangle.html">Rectangle</a> rect, <a href="../stagexl/ColorTransform.html">ColorTransform</a> transform) <a class="anchor-link" href="#colorTransform"
              title="Permalink to BitmapData.colorTransform">#</a></h4>
<div class="doc">
<pre class="source">
void colorTransform(Rectangle rect, ColorTransform transform) {
 
 var context = _getContext();
 var image = context.getImageData(rect.x, rect.y, rect.width, rect.height);
 var data = image.data;
 var length = data.length;

 int r = transform.redOffset;
 int g = transform.greenOffset;
 int b = transform.blueOffset;
 int a = transform.alphaOffset;

 num rm = transform.redMultiplier;
 num gm = transform.greenMultiplier;
 num bm = transform.blueMultiplier;
 num am = transform.alphaMultiplier;

 if (_isLittleEndianSystem) {
   for (int i = 0; i &lt;= length - 4; i += 4) {
     data[i + 0] = data[i + 0] * (1 - rm) + (r * rm);
     data[i + 1] = data[i + 1] * (1 - gm) + (g * gm);
     data[i + 2] = data[i + 2] * (1 - bm) + (b * bm);
     data[i + 3] = data[i + 3] * (1 - am) + (a * am);
   }
 } else {
   for (int i = 0; i &lt;= length - 4; i += 4) {
     data[i + 0] = data[i + 0] * (1 - am) + (a * am);
     data[i + 1] = data[i + 1] * (1 - bm) + (b * bm);
     data[i + 2] = data[i + 2] * (1 - gm) + (g * gm);
     data[i + 3] = data[i + 3] * (1 - rm) + (r * rm);
   }
 }

 context.putImageData(image, rect.x, rect.y);
}
</pre>
</div>
</div>
<div class="method"><h4 id="copyPixels">
<button class="show-code">Code</button>
void <strong>copyPixels</strong>(<a href="../stagexl/BitmapData.html">BitmapData</a> sourceBitmapData, <a href="../stagexl/Rectangle.html">Rectangle</a> sourceRect, <a href="../stagexl/Point.html">Point</a> destPoint, [<a href="../stagexl/BitmapData.html">BitmapData</a> alphaBitmapData = null, <a href="../stagexl/Point.html">Point</a> alphaPoint = null, <a href="http://api.dartlang.org/dart_core/bool.html">bool</a> mergeAlpha = false]) <a class="anchor-link" href="#copyPixels"
              title="Permalink to BitmapData.copyPixels">#</a></h4>
<div class="doc">
<pre class="source">
void copyPixels(BitmapData sourceBitmapData, Rectangle sourceRect, Point destPoint, [BitmapData alphaBitmapData = null, Point alphaPoint = null, bool mergeAlpha = false]) {
 
 var imageData = sourceBitmapData._getContext().getImageData(sourceRect.x, sourceRect.y, sourceRect.width, sourceRect.height);
 _getContext().putImageData(imageData, destPoint.x, destPoint.y);
}
</pre>
</div>
</div>
<div class="method"><h4 id="draw">
<button class="show-code">Code</button>
void <strong>draw</strong>(<a href="../stagexl/BitmapDrawable.html">BitmapDrawable</a> source, [<a href="../stagexl/Matrix.html">Matrix</a> matrix = null]) <a class="anchor-link" href="#draw"
              title="Permalink to BitmapData.draw">#</a></h4>
<div class="doc">
<pre class="source">
void draw(BitmapDrawable source, [Matrix matrix = null]) {
 
 var context = _getContext();
 var renderState = new RenderState.fromCanvasRenderingContext2D(context, matrix);
 
 source.render(renderState);
 context.setTransform(1.0, 0.0, 0.0, 1.0, 0.0, 0.0);
}
</pre>
</div>
</div>
<div class="method"><h4 id="fillRect">
<button class="show-code">Code</button>
void <strong>fillRect</strong>(<a href="../stagexl/Rectangle.html">Rectangle</a> rect, <a href="http://api.dartlang.org/dart_core/int.html">int</a> color) <a class="anchor-link" href="#fillRect"
              title="Permalink to BitmapData.fillRect">#</a></h4>
<div class="doc">
<pre class="source">
void fillRect(Rectangle rect, int color) {
 
 var context = _getContext();

 context.setTransform(1.0, 0.0, 0.0, 1.0, 0.0, 0.0);
 context.fillStyle = _color2rgba(color);
 context.fillRect(rect.x, rect.y, rect.width, rect.height);
}
</pre>
</div>
</div>
<div class="method"><h4 id="getPixel">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/int.html">int</a> <strong>getPixel</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> x, <a href="http://api.dartlang.org/dart_core/int.html">int</a> y) <a class="anchor-link" href="#getPixel"
              title="Permalink to BitmapData.getPixel">#</a></h4>
<div class="doc">
<pre class="source">
int getPixel(int x, int y) {
 
 var context = _getContext();
 var imageData = context.getImageData(x, y, 1, 1);
 var data = imageData.data;

 if (_isLittleEndianSystem) {
   return (data[0] &lt;&lt; 16) + (data[1] &lt;&lt; 8) + (data[2] &lt;&lt; 0);
 } else {
   return (data[3] &lt;&lt; 16) + (data[2] &lt;&lt; 8) + (data[1] &lt;&lt; 0);
 }

}
</pre>
</div>
</div>
<div class="method"><h4 id="getPixel32">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/int.html">int</a> <strong>getPixel32</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> x, <a href="http://api.dartlang.org/dart_core/int.html">int</a> y) <a class="anchor-link" href="#getPixel32"
              title="Permalink to BitmapData.getPixel32">#</a></h4>
<div class="doc">
<pre class="source">
int getPixel32(int x, int y) {
 
 var context = _getContext();
 var imageData = context.getImageData(x, y, 1, 1);
 var data = imageData.data;

 if (_isLittleEndianSystem) {
   return (data[0] &lt;&lt; 16) + (data[1] &lt;&lt; 8) + (data[2] &lt;&lt; 0) + (data[3] &lt;&lt; 24);
 } else {
   return (data[3] &lt;&lt; 16) + (data[2] &lt;&lt; 8) + (data[1] &lt;&lt; 0) + (data[0] &lt;&lt; 24);
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="render">
<button class="show-code">Code</button>
void <strong>render</strong>(<a href="../stagexl/RenderState.html">RenderState</a> renderState) <a class="anchor-link" href="#render"
              title="Permalink to BitmapData.render">#</a></h4>
<div class="doc">
<pre class="source">
void render(RenderState renderState) {
 
 var renderStateContext = renderState.context;

 switch(_frameMode) {
   
   case 0:
     renderStateContext.drawImage(_source, _frameOffsetX, _frameOffsetY);
     break;

   case 1:
     renderStateContext.drawImageScaledFromSource(_source,
       _frameX, _frameY, _frameWidth, _frameHeight,
       _frameOffsetX, _frameOffsetY, _frameWidth, _frameHeight);
     break;

   case 2:
     renderStateContext.transform(0.0, -1.0, 1.0, 0.0, _frameOffsetX, _frameOffsetY + _frameHeight);
     renderStateContext.drawImageScaledFromSource(_source, 
       _frameX, _frameY, _frameHeight, _frameWidth, 0, 0, _frameHeight, _frameWidth);
     break;
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="renderClipped">
<button class="show-code">Code</button>
void <strong>renderClipped</strong>(<a href="../stagexl/RenderState.html">RenderState</a> renderState, <a href="../stagexl/Rectangle.html">Rectangle</a> clipRectangle) <a class="anchor-link" href="#renderClipped"
              title="Permalink to BitmapData.renderClipped">#</a></h4>
<div class="doc">
<pre class="source">
void renderClipped(RenderState renderState, Rectangle clipRectangle) {
 
 var renderStateContext = renderState.context;
 
 if (clipRectangle.width &lt;= 0.0 || clipRectangle.height &lt;= 0.0)
   return;
 
 switch(_frameMode) {
   
   case 0:

     renderStateContext.drawImageScaledFromSource(_source, 
       clipRectangle.x - _frameOffsetX, clipRectangle.y - _frameOffsetY, clipRectangle.width, clipRectangle.height,
       clipRectangle.x + _frameOffsetX, clipRectangle.y + _frameOffsetY, clipRectangle.width, clipRectangle.height);
     
     break;

   case 1:

     var fLeft = _frameX;
     var fTop =  _frameY;
     var fRight = fLeft + _frameWidth;
     var fBottom = fTop + _frameHeight;

     var cLeft = _frameX - _frameOffsetX + clipRectangle.x;
     var cTop =  _frameY - _frameOffsetY + clipRectangle.y;
     var cRight = cLeft + clipRectangle.width;
     var cBottom = cTop + clipRectangle.height;

     var iLeft = (fLeft &gt; cLeft) ? fLeft : cLeft;
     var iTop =  (fTop &gt; cTop) ? fTop : cTop;
     var iRight = (fRight &lt; cRight) ? fRight : cRight;
     var iBottom = (fBottom &lt; cBottom) ? fBottom : cBottom;
     var iOffsetX = _frameOffsetX - fLeft + iLeft;
     var iOffsetY = _frameOffsetY - fTop + iTop;
     var iWidth = iRight - iLeft;
     var iHeight = iBottom - iTop;

     if (iWidth &gt; 0.0 &amp;&amp; iHeight &gt; 0.0) {
       renderStateContext.drawImageScaledFromSource(_source, 
         iLeft, iTop, iWidth, iHeight, iOffsetX, iOffsetY, iWidth, iHeight);
     }

     break;

   case 2:

     var fLeft = _frameX;
     var fTop =  _frameY;
     var fRight = fLeft + _frameHeight;
     var fBottom = fTop + _frameWidth;

     var cLeft = _frameX + _frameOffsetY - clipRectangle.y + _frameHeight - clipRectangle.height;
     var cTop =  _frameY - _frameOffsetX + clipRectangle.x;
     var cRight = cLeft + clipRectangle.height;
     var cBottom = cTop + clipRectangle.width;

     var iLeft = (fLeft &gt; cLeft) ? fLeft : cLeft;
     var iTop =  (fTop &gt; cTop) ? fTop : cTop;
     var iRight = (fRight &lt; cRight) ? fRight : cRight;
     var iBottom = (fBottom &lt; cBottom) ? fBottom : cBottom;
     var iOffsetX = _frameOffsetX - fTop + iTop;
     var iOffsetY = _frameOffsetY + fRight - iRight;
     var iWidth = iBottom - iTop;
     var iHeight = iRight - iLeft;
     
     if (iWidth &gt; 0.0 &amp;&amp; iHeight &gt; 0.0) {
       renderStateContext.transform(0.0, -1.0, 1.0, 0.0, iOffsetX, iOffsetY + iHeight);
       renderStateContext.drawImageScaledFromSource(_source, 
         iLeft, iTop, iHeight, iWidth, 0, 0, iHeight, iWidth);
     }

     break;
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="setPixel">
<button class="show-code">Code</button>
void <strong>setPixel</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> x, <a href="http://api.dartlang.org/dart_core/int.html">int</a> y, <a href="http://api.dartlang.org/dart_core/int.html">int</a> color) <a class="anchor-link" href="#setPixel"
              title="Permalink to BitmapData.setPixel">#</a></h4>
<div class="doc">
<pre class="source">
void setPixel(int x, int y, int color) {
 
 var context = _getContext();
 var imageData = context.getImageData(x, y, 1, 1);
 var data = imageData.data;

 if (_isLittleEndianSystem) {
   data[0] = (color &gt;&gt; 16) &amp; 0xFF;
   data[1] = (color &gt;&gt;  8) &amp; 0xFF;
   data[2] = (color &gt;&gt;  0) &amp; 0xFF;
 } else {
   data[1] = (color &gt;&gt;  0) &amp; 0xFF;
   data[2] = (color &gt;&gt;  8) &amp; 0xFF;
   data[3] = (color &gt;&gt; 16) &amp; 0xFF;
 }

 context.putImageData(imageData, x, y);
}
</pre>
</div>
</div>
<div class="method"><h4 id="setPixel32">
<button class="show-code">Code</button>
void <strong>setPixel32</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> x, <a href="http://api.dartlang.org/dart_core/int.html">int</a> y, <a href="http://api.dartlang.org/dart_core/int.html">int</a> color) <a class="anchor-link" href="#setPixel32"
              title="Permalink to BitmapData.setPixel32">#</a></h4>
<div class="doc">
<pre class="source">
void setPixel32(int x, int y, int color) {
 
 var context = _getContext();
 var imageData = context.getImageData(x, y, 1, 1);
 var data = imageData.data;

 if (_isLittleEndianSystem) {
   data[0] = (color &gt;&gt; 16) &amp; 0xFF;
   data[1] = (color &gt;&gt;  8) &amp; 0xFF;
   data[2] = (color &gt;&gt;  0) &amp; 0xFF;
   data[3] = (color &gt;&gt; 24) &amp; 0xFF;
 } else {
   data[0] = (color &gt;&gt; 24) &amp; 0xFF;
   data[1] = (color &gt;&gt;  0) &amp; 0xFF;
   data[2] = (color &gt;&gt;  8) &amp; 0xFF;
   data[3] = (color &gt;&gt; 16) &amp; 0xFF;
 }

 context.putImageData(imageData, x, y);
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-03-26 16:22:15.288</div>
        </div>
        <script async src="../client-static.js"></script>
        </body></html>
        
