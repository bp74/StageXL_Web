import "dart:web_audio" as mE;import "dart:math" as WB;import "dart:html" as rC;import "dart:json" as bI;import "dart:async" as jB;class cI{static const  dI="Chrome";static const  eI="Firefox";static const  fI="Internet Explorer";static const  gI="Safari";final  wH;final  minimumVersion;const cI(this.wH,[this.minimumVersion]);}class hI{final  name;const hI(this.name);}class xD extends BB{var VJ;var cJ;xD( h){var i=new EB(HB.NB.u("MessageBox"));o(i);var g=new SC();g.KC=new HE("Arial",24,0xFFFFFF,bold:true,align:zB.TC);g.width=240;g.height=200;g.wordWrap=true;g.text=h;g.x=47;g.y=130-g.gE/2;g.UB=false;o(g);VJ=null;LB(s.aC,ZK);}void show( h){this.parent.o(this);this.x=-this.width;this.y=150;cJ=h;var g=new cB(this,0.3,PB.AC);g.dB.x.aB(110);g.onComplete=()=>VJ=q.gB(nK,10);q.add(g);} nK(){if(VJ!=null){q.remove(VJ);VJ=null;cJ();var g=new cB(this,0.4,PB.XF);g.dB.x.aB(800);g.onComplete=()=>this.parent.CC(this);q.add(g);}} ZK( g){nK();}}class bB extends DB{static const  oE="Explosion";static const  RD="Unlocked";static const  pE="Finalized";static const  BE="Timeouted";var HK;bB( h, g,[ bubbles=false]):super(h,bubbles){HK=g;} get info{return HK;}}class IG extends BB{var TJ;var bJ;var mJ;var cJ;IG(){var m=new EB(HB.NB.u("ExitBox"));o(m);var g=new SC();g.KC=new HE("Arial",24,0xFFFFFF,bold:true,align:zB.TC);g.width=240;g.height=100;g.wordWrap=true;g.text=gC.NB.zC("GENexitquery");g.x=47;g.y=150-g.gE/2;g.UB=false;o(g);TJ=new LE(7,HB.NB.u("ExitGauge"),VD.VE);TJ.x=268;TJ.y=25;TJ.LB("TimeOver",mK);o(TJ);TJ.gD("TimeOver",0);TJ.start();var i=new EB(HB.NB.u("ExitYesButtonNormal"));var j=new EB(HB.NB.u("ExitYesButtonPressed"));bJ=new tC(i,i,j,j);bJ.x=68;bJ.y=239;bJ.LB(s.aC,pK);o(bJ);var h=new EB(HB.NB.u("ExitNoButtonNormal"));var k=new EB(HB.NB.u("ExitNoButtonPressed"));mJ=new tC(h,h,k,k);mJ.x=173;mJ.y=232;mJ.LB(s.aC,rK);o(mJ);this.LB(DB.HD,(l)=>q.add(TJ));this.LB(DB.JD,(l)=>q.remove(TJ));} sK( g){if(cJ!=null){cJ(g);cJ=null;}} pK( g){sK(true);} rK( g){sK(false);} mK( g){sK(false);}show( g){cJ=g;}}class wD{var aF;var CG;var DG;var angle;var FG;var TB;}class KG extends BB{var WJ;var fJ;var pJ;var vJ;var yJ;KG(){pJ=fB.NB.nB("Warning");vJ=null;WJ=HB.TG();fJ=new EB(WJ[0]);o(fJ);} start(){vJ=pJ.play();q.remove(yJ);yJ=new UC(0,80,9.0,PB.VC);yJ.MC=(h){var g=h.toInt()%8;fJ.bitmapData=WJ[(g<=4)?g+1:8-g];};q.add(yJ);} stop(){if(vJ!=null){vJ.stop();vJ=null;}q.remove(yJ);fJ.bitmapData=WJ[0];}}class KB{var OJ;var PJ;var YJ;var eJ;var jJ;var lJ;var sJ;var wJ;var zJ;var DK;var GK;KB( h, g){OJ=h;PJ=g;YJ=w.QD;eJ=-1000;jJ=-1000;lJ=false;sJ=false;wJ=false;zJ=null;DK=null;GK=null;} get color=>OJ; set color( g){OJ=g;} get direction=>PJ; set direction( g){PJ=g;} get GB=>YJ; set GB( g){YJ=g;} get eB=>lJ; set eB( g){lJ=g;} get LC=>sJ; set LC( g){sJ=g;} get empty=>wJ; set empty( g){wJ=g;} lD( g){var h=g!=null&&(g.color==OJ||g.GB==w.SB||YJ==w.SB)&&g.GB!=w.EC&&YJ!=w.EC;return h;} cC( g){var h=g!=null&&(g.color==OJ||g.GB==w.SB||YJ==w.SB)&&g.direction==0&&PJ==0&&g.GB!=w.EC&&YJ!=w.EC;return h;} pC( g){var h=g!=null&&(g.color==OJ||g.GB==w.SB||YJ==w.SB)&&g.direction==1&&PJ==1&&g.GB!=w.EC&&YJ!=w.EC;return h;} get x=>eJ; set x( g){eJ=g;if(zJ!=null)zJ.x=g;if(DK!=null)DK.x=g;if(GK!=null)GK.x=g;} get y=>jJ; set y( g){jJ=g;if(zJ!=null)zJ.y=g;if(DK!=null)DK.y=g;if(GK!=null)GK.y=g;} set BG( h){if(zJ!=null){var g=1+0.3*WB.sin(h*WB.PI);zJ.hB=g;zJ.pB=g;}} sB( g, h, i){if(zJ!=null){zJ.parent.CC(zJ);zJ=null;}if(DK!=null){DK.parent.CC(DK);DK=null;}if(GK!=null){GK.parent.CC(GK);GK=null;}if(empty==false){switch (YJ){case w.SB:zJ=new jI(PJ);zJ.x=eJ;zJ.y=jJ;g.o(zJ);break;case w.EC:zJ=HB.CE(w.EC);zJ.x=eJ;zJ.y=jJ;g.o(zJ);break;default:zJ=HB.AE(OJ,PJ);zJ.x=eJ;zJ.y=jJ;g.o(zJ);break;}if(lJ){DK=sJ?new iI(PJ):HB.MG(OJ,PJ);DK.x=eJ+((PJ==0)?25:0);DK.y=jJ+((PJ==1)?25:0);h.o(DK);}switch (YJ){case w.QD:break;case w.EC:break;case w.SB:break;default:GK=new kI(YJ);GK.x=eJ;GK.y=jJ;i.o(GK);break;}}}}class LG extends BB{var RJ;var aJ;var kJ;var tJ;var TJ;var xJ;var AK;var CK;var FK;var QJ;var JK;var KK;var LK;var MK;var OK;var PK;var QK;var SK;var TK;LG(){var j=new EB(HB.NB.u("ShuffleButtonNormal"));var h=new EB(HB.NB.u("ShuffleButtonPressed"));aJ=new tC(j,j,h,h);aJ.LB(s.aC,hK);aJ.x=530;aJ.y=525;o(aJ);var g=new EB(HB.NB.u("ExitButtonNormal"));var i=new EB(HB.NB.u("ExitButtonPressed"));kJ=new tC(g,g,i,i);kJ.LB(s.aC,oK);kJ.x=700;kJ.y=500;o(kJ);RJ=new GG();RJ.x=540;RJ.y=-1000;o(RJ);TJ=new LE(10,HB.NB.u("TimeGauge"),VD.PE);TJ.x=659;TJ.y=244;TJ.LB("TimeShort",qK);TJ.LB("TimeOver",mK);o(TJ);q.add(TJ);xJ=new HG();xJ.x=640;xJ.y=230;o(xJ);AK=new KG();AK.x=665;AK.y=160;o(AK);CK=new SC();CK.KC=new HE("Arial",30,0xD0D0D0,bold:true,align:zB.TC);CK.width=140;CK.height=36;CK.wordWrap=false;CK.x=646;CK.y=130;CK.UB=false;CK.text="0";CK.hB=0.9;o(CK);FK=new SC();FK.KC=new HE("Arial",20,0xFFFFFF,bold:true,align:zB.TC);FK.width=44;FK.height=30;FK.wordWrap=false;FK.x=610;FK.y=559;FK.UB=false;FK.text="3x";o(FK);OK=new BB();o(OK);PK=new BB();o(PK);QK=new BB();o(QK);SK=fB.NB.nB("Intro");TK=SK.play();} start(){QJ=1;JK=1;MK=0;KK=3;var g=new xD(gC.NB.zC("ESCStartText"));PK.o(g);q.gB(()=>xJ.tF(21),1);g.show(()=>q.gB(()=>vK(),0.5));} vK(){if(tJ!=null&&this.contains(tJ))OK.CC(tJ);var m=QJ;var g=0;var h=0;switch (QJ){case 01:h=50;tJ=new JG(g=40,3,0,0,0,0,[0,1,2]);break;case 02:h=45;tJ=new JG(g=45,3,1,0,0,0,[2,3,4]);break;case 03:h=40;tJ=new JG(g=50,4,2,2,1,0,[5,6,7]);break;case 04:h=35;tJ=new JG(g=55,4,3,3,2,0,[0,2,6]);break;case 05:h=30;tJ=new JG(g=60,5,4,4,2,1,[1,3,5]);break;case 06:h=34;tJ=new JG(g=60,5,5,5,3,2,[1,2,4,7]);break;case 07:h=33;tJ=new JG(g=65,5,5,6,3,2,[0,1,2,3]);break;case 08:h=32;tJ=new JG(g=70,5,5,6,3,2,[0,2,5,6]);break;case 09:h=31;tJ=new JG(g=75,5,5,6,3,2,[1,4,5,7]);break;default:h=30;tJ=new JG(g=80+(QJ-10)*5,5,5,6,3,2,[0,1,2,3]);break;}LK=g;if(KK<3){KK++ ;FK.text="${KK}x";}tJ.LB(bB.oE,wK);tJ.LB(bB.RD,xK);tJ.LB(bB.pE,yK);tJ.LB(bB.BE,zK);tJ.x=20;tJ.y=16;tJ.UB=false;OK.o(tJ);TJ.reset(h);TJ.gD("TimeShort",9);TJ.gD("TimeOver",0);TJ.pause();RJ.GI=m;RJ.bF=g;RJ.y=-210;var k=new cB(RJ,0.4,PB.AC);k.dB.y.aB(-90);q.add(k);var j=new xD(gC.NB.zC("ESCLevelBoxText").replaceAll("{0}","${g}"));PK.o(j);j.show((){tJ.UB=true;TJ.start();if(SK!=null){var i=new UC(1.0,0.0,4.0,PB.VC);i.MC=(l){TK.GC.volume=l;TK.GC=TK.GC;};i.onComplete=(){TK.stop();xJ.KI();};q.add(i);SK=null;}});} qK( g){AK.start();} mK( g){tJ.EG(DC.zD);} xK( j){var g=0;var k=j.info["Position"];var h=j.info["Type"];if(h=="SingleLocked")g=3000;if(h=="SingleUnlocked")g=1000;if(h=="All")g=10000;var i=new nE(g);i.x=k.x;i.y=k.y;OK.o(i);MK=MK+g;CK.text="${MK}";} wK( j){var g=LK;var i=j.info["Length"];var k=j.info["Factor"];g=(g>i)?g-i:0;LK=g;RJ.bF=g;if(g==0)tJ.EG(DC.yD);var h=0;switch (i){case 3:h=1000;break;case 4:h=2000;break;case 5:h=5000;break;default:h=5000;break;}MK=MK+h*k;CK.text="${MK}";} yK( m){TJ.pause();AK.stop();var l=fB.NB.nB("Laugh");var k=fB.NB.nB("LevelUp");l.play();xJ.tF(3);var g=HB.NG();g.x=55;g.y=260;OK.o(g);q.gB((){tJ.hF();k.play();},2.0);q.gB((){var j=(TJ.UI*1000).toInt();var h=new nE(j);h.x=704;h.y=360;OK.o(h);MK=MK+j;CK.text="${MK}";},2.5);var i=new cB(RJ,0.5,PB.AC);i.dB.y.aB(-210);i.XC=3.0;q.add(i);q.gB((){OK.CC(g);},3.5);q.gB((){QJ++ ;vK();},4.0);} zK( j){AK.stop();tJ.hF();var g;var i;if(JK>0){JK-- ;g=new xD(gC.NB.zC("GEN2ndchancetime"));PK.o(g);i=fB.NB.nB("LevelUp");i.play();g.show((){q.gB(()=>vK(),0.5);var h=new cB(RJ,0.5,PB.AC);h.dB.y.aB(-210);q.add(h);});}else{g=new xD(gC.NB.zC("GENtimeup"));PK.o(g);i=fB.NB.nB("GameOver");i.play();g.show((){q.gB(()=>CL(),0.5);var h=new cB(RJ,0.5,PB.AC);h.dB.y.aB(-210);q.add(h);});}} hK( h){if(tJ!=null&&KK>0){var g=tJ.AG();if(g){KK=KK-1;FK.text="${KK}x";}}} oK( j){var h=new BB();h.o(new EB(new CB(800,600,false,0x000000)));h.alpha=0.6;QK.o(h);var g=new IG();g.x=235;g.y=150;QK.o(g);g.show(( i){QK.CC(g);if(i==false)QK.CC(h);else EL(false);});}CL(){var h=new BB();var j=new EB(HB.NB.u("ExitBox"));h.o(j);var g=new SC();g.KC=new HE("Arial",30,0xFFFFFF,bold:true,align:zB.TC);g.width=240;g.height=200;g.wordWrap=true;g.text=gC.NB.zC("GENgameover");g.x=47;g.y=30+(g.height-g.gE)/2;g.UB=false;h.o(g);h.x=110;h.y=-h.height;PK.o(h);var k=fB.NB.nB("Laugh");q.gB(()=>k.play(),0.3);var i=new cB(h,0.3,PB.AC);i.dB.y.aB(150);q.add(i);q.gB(()=>EL(true),5.0);h.LB(s.aC,( l)=>EL(true));}var GL=false; EL( g){TJ.pause();if(GL==false){GL=true;}}}class nE extends BB{var SJ;nE( j){var g=new SC();g.KC=new HE("Arial",30,0xFFFFFF,bold:true,align:zB.TC);g.width=110;g.height=36;g.wordWrap=false;g.x=646;g.y=130;g.UB=false;g.text=j.toString();g.x=-g.width/2;g.y=-g.height/2;SJ=new BB();SJ.o(g);o(SJ);var i=new UC(0.0,1.0,1.5,PB.AC);i.MC=(h){SJ.alpha=1-h;SJ.y=-h*50;SJ.hB=1.0+0.1*WB.sin(h*10);SJ.pB=1.0+0.1*WB.cos(h*10);};i.onComplete=(){this.eE();};q.add(i);}}class GG extends BB{var QJ;var ZJ;var gJ;var oJ;var uJ;GG(){o(new EB(HB.NB.u("InfoBox")));ZJ=new SC();ZJ.KC=new HE("Arial",35,0xFFFFFF,bold:true,align:zB.TC);ZJ.width=220;ZJ.height=40;ZJ.wordWrap=false;ZJ.text="Level 1";ZJ.x=20;ZJ.y=115;ZJ.TB=-2*WB.PI/180;o(ZJ);oJ=new SC();oJ.KC=new HE("Arial",25,0xFFFFFF,bold:true,align:zB.TC);oJ.width=220;oJ.height=30;oJ.wordWrap=false;oJ.text="40";oJ.x=-oJ.width/2;oJ.y=-oJ.height/2;oJ.TB=-2*WB.PI/180;uJ=new BB();uJ.o(oJ);uJ.x=150;uJ.y=172;o(uJ);var g=HB.AE(3,0);g.x=110;g.y=171;g.TB=-2*WB.PI/180;g.hB=g.pB=0.6;o(g);} set GI( g){QJ=g;ZJ.text="Level ${QJ}";} set bF( g){gJ=g;oJ.text="${gJ}";}}class HG extends BB{var UJ;var dJ;var qJ;HG(){UJ=HB.SG();dJ=new EB(UJ[0]);dJ.x=-dJ.width/2;dJ.y=-dJ.height/2;o(dJ);qJ=null;} tF( g){q.remove(qJ);qJ=new UC(0,g,0.5*g,PB.VC);qJ.MC=(h){var i=((h*UJ.length)%UJ.length).toInt();dJ.bitmapData=UJ[i];dJ.y=WB.sin(h*2*WB.PI)*3-dJ.height/2;};q.add(qJ);} KI(){q.remove(qJ);dJ.bitmapData=UJ[0];}}class JG extends BB{var BK;var IK;var NK;var RK;var UK;var VK;var WK;var XK;var YK;var aK;var bK;var cK;var dK;var eK;var fK;var gK;var iK;var jK;var kK;var lK;JG( AB, p, MB, m, n, v, k){XK=new WB.Random();YK=DC.BD;aK=k;BK=AB;IK=p;NK=MB;RK=m;UK=n;VK=v;WK=k.length;eK=new List<JB>();gK=new BB();iK=new BB();jK=new BB();kK=new BB();lK=new BB();o(gK);o(iK);o(jK);o(kK);o(lK);iK.UB=false;jK.UB=false;kK.UB=false;lK.UB=false;DI();EI();CI();fK=true;var l=new AD();this.mask=new FE.HJ(0.0,0.0,500.0,500.0);for(int g=0;g<10;g++ ){for(int h=0;h<10;h++ ){var i=cK[g+h*10];i.x=g*50+25;i.y=h*50+25-550;i.sB(gK,iK,jK);var j=new UC(i.y,h*50+25,0.4,PB.AC);j.XC=g*0.03;j.MC=(RB){i.y=RB;};j.onComplete=(){if(l.nD()==100){tK();fK=false;eK.clear();this.mask=null;}};q.add(j);}}LB(s.cD,uK);} EG( g){if(g==DC.yD)YK=g;if(g==DC.zD&&YK==DC.BD){YK=g;if(fK==false)dispatchEvent(new bB(bB.BE,null));}} hF(){this.mask=new FE.HJ(0.0,0.0,500.0,500.0);for(int h=0;h<10;h++ ){for(int i=0;i<10;i++ ){var g=cK[i+h*10];g.eB=false;g.LC=false;g.GB=w.QD;g.sB(gK,iK,jK);var j=new UC(g.y,500+h*50+25,0.5,PB.AC);j.XC=i*0.1;j.MC=(k){g.y=k;};q.add(j);}}} DI(){dK=new List<PD>();for(int h=0;h<IK;h++ ){var g=new PD(h);g.TB=(XK.nextInt(30)-15)*WB.PI/180;g.x=300-(90*IK)/2+h*90+XK.nextInt(20)-10;g.y=550;dK.add(g);kK.o(g);}} fF( g, h){var i=0;var j=cK[g+h*10];if(j.direction==0){var l=(g>0)?cK[g-1+h*10]:null;var m=(g<9)?cK[g+1+h*10]:null;if(j.cC(l))i++ ;if(j.cC(m))i++ ;}else{var k=(h>0)?cK[g+(h-1)*10]:null;var n=(h<9)?cK[g+(h+1)*10]:null;if(j.pC(k))i++ ;if(j.pC(n))i++ ;}return i;} dF(){for(int h=0;h<10;h++ ){for(int g=0;g<10;g++ ){var k=cK[g+h*10];var i=WK*2;while (fF(g,h)==2&&i>0){if(i%2==0){k.direction=1-k.direction;i-- ;}else{var m=0;for(int j=0;j<aK.length;j++ )if(k.color==aK[j])m=j;k.color=aK[(m+1)%aK.length];i-- ;}}}}var l=false;for(int h=0;h<10;h++ )for(int g=0;g<10;g++ )l=l||(fF(g,h)==2);return l;} vF(){for(int g=0;g<10;g++ )for(int h=1;h<9;h++ )if(cK[(h-1)+g*10].lD(cK[h+g*10])&&cK[h+g*10].lD(cK[(h+1)+g*10]))return true;for(int h=0;h<10;h++ )for(int g=1;g<9;g++ )if(cK[h+(g-1)*10].lD(cK[h+g*10])&&cK[h+g*10].lD(cK[h+(g+1)*10]))return true;return false;} AL( j, l, k){for(int g=0;g<20;g++ ){var h=BK~/k;var i=l*h+XK.nextInt(h);if(bK[i].GB==w.QD){bK[i].GB=j;return;}}} EI(){bK=new List<KB>();for(int g=0;g<BK;g++ ){var i=aK[XK.nextInt(aK.length)];var h=XK.nextInt(2);bK.add(new KB(i,h));}for(int g=0;g<IK*2;g++ )AL("Lock${(g%IK)+1}",g,IK*2);for(int g=0;g<NK;g++ )AL(w.SB,g,NK);for(int g=0;g<RK;g++ )AL(w.EC,g,RK);for(int g=0;g<UK;g++ )AL(w.qE,g,UK);for(int g=0;g<VK;g++ )AL(w.rE,g,VK);} CI(){cK=new List<KB>();var g=true;while (g){cK.clear();for(int h=0;h<100;h++ ){var j=aK[XK.nextInt(aK.length)];var i=XK.nextInt(2);cK.add(new KB(j,i));}g=dF();}} AG(){if(fK||YK!=DC.BD)return false;var l=true;fK=true;while (l){for(int k=0;k<cK.length;k++ ){var g=cK[k];g.eB=false;g.LC=false;g.sB(gK,iK,jK);g.color=aK[XK.nextInt(aK.length)];g.direction=XK.nextInt(2);}l=dF()||(vF()==false);}var p=fB.NB.nB("BonusUniversal");p.play();var m=new AD();for(int i=0;i<10;i++ ){for(int j=0;j<10;j++ ){var g=cK[i+j*10];g.BG=0.0;var h=new UC(0.0,1.0,0.2,PB.VC);h.XC=i*0.06;h.MC=(n){g.BG=n;};h.onStart=(){g.sB(gK,iK,jK);};h.onComplete=(){if(m.nD()==100){tK();BL();eK.clear();}};q.add(h);}}return true;} tK(){for(int i=0;i<10;i++ ){for(int h=0;h<10;h++ ){var g=cK[h+i*10];var l=(h<9)?cK[h+1+i*10]:null;var m=(i<9)?cK[h+(i+1)*10]:null;var j=false;var k=false;if(g.cC(l)){j=true;k=(g.GB==w.SB||l.GB==w.SB);}if(g.pC(m)){j=true;k=(g.GB==w.SB||m.GB==w.SB);}if(g.eB!=j||g.LC!=k){g.eB=j;g.LC=k;g.sB(gK,iK,jK);}}}} DL( v, l, n, k, m, p){fK=true;v.nD(k);var i=1;for(int h=0;h<k;h++ ){var g=cK[l+h*m+(n+h*p)*10];if(g.GB==w.qE)i=i*2;if(g.GB==w.rE)i=i*5;var MB=l+h*m;var RB=n+h*p;q.gB((){g.empty=true;g.sB(gK,iK,jK);var AB=fB.NB.nB("ChainBlast");AB.play();var j=new oE(g.color,g.direction);j.x=MB*50;j.y=RB*50;q.add(j);lK.o(j);QI(g);if(v.gF()==0)FL();},0.1+h*0.1);}dispatchEvent(new bB(bB.oE,{"Length":k,"Factor":i}));} BL(){fK=false;var j=new AD();for(int h=0;h<10;h++ ){for(int i=0;i<10;){var g=1;while (i+g<10&&cK[i+g-1+h*10].cC(cK[i+g+h*10]))g++ ;if(g>=3)DL(j,i,h,g,1,0);i=i+g;}}for(int i=0;i<10;i++ ){for(int h=0;h<10;){var g=1;while (h+g<10&&cK[i+(h+g-1)*10].pC(cK[i+(h+g)*10]))g++ ;if(g>=3)DL(j,i,h,g,0,1);h=h+g;}}if(j.value==0){if(YK==DC.yD)dispatchEvent(new bB(bB.pE,null));if(YK==DC.zD)dispatchEvent(new bB(bB.BE,null));if(YK==DC.BD&&vF()==false)AG();}} QI( h){if(h.GB.indexOf("Lock")==0){var k=int.parse(h.GB.substring(4,5))-1;var j=dK[k];var g=HB.CE(h.GB);g.x=h.x;g.y=h.y;o(g);var i=new cB(g,0.5,PB.AC);i.dB.x.aB(j.x);i.dB.y.aB(j.y-10);i.onComplete=()=>CC(g);q.add(i);q.gB(()=>LI(k),0.5);}} LI( k){var h=dK[k];var i;if(h.ND){i=new bB(bB.RD,{"Type":"SingleLocked","Position":new JB(h.x+20,h.y)});var l=fB.NB.nB("Unlock");l.play();}else{i=new bB(bB.RD,{"Type":"SingleUnlocked","Position":new JB(h.x+20,h.y)});}dispatchEvent(i);h.ND=false;h.zF(false);var j=true;for(int g=0;g<dK.length;g++ )j=j&&(dK[g].ND==false);if(j){var m=fB.NB.nB("BonusAllUnlock");m.play();for(int g=0;g<dK.length;g++ ){dK[g].ND=true;q.gB(()=>dK[(g+k)%dK.length].WI(),g*0.2);}q.gB(()=>dispatchEvent(new bB(bB.RD,{"Type":"All","Position":new JB(280,550)})),0.75);}} FL(){var n=new AD();for(int i=0;i<10;i++ ){var k=9;var j=8;while (k>=0){while (k>=0&&cK[i+k*10].empty==false){k-- ;j-- ;}while (j>=0&&cK[i+j*10].empty==true){j-- ;}if(k>=0){var g,h,l;if(j>=0){h=cK[i+j*10];if(i>0){l=cK[i-1+j*10];if(h.cC(l)){l.eB=false;l.sB(gK,iK,jK);}}h.eB=false;h.empty=true;h.sB(gK,iK,jK);}else{if(bK.length>0){h=bK.removeAt(0);}else{h=new KB(aK[XK.nextInt(aK.length)],XK.nextInt(2));}}g=cK[i+k*10];g.color=h.color;g.direction=h.direction;g.GB=h.GB;g.eB=false;g.empty=false;g.x=50*i+25;g.y=50*j+25;g.sB(gK,iK,jK);n.nD();var m=new UC(g.y,50*k+25,0.1,PB.VC);m.MC=(p){g.y=p;};m.onComplete=(){if(n.gF()==0){tK();BL();HL();}};q.add(m);}}}} uK( g){if(g.target==gK&&this.UB){var j=WB.min(g.nF/50,9).toInt();var h=WB.min(g.oF/50,9).toInt();var i=new JB(j,h);eK.add(i);HL();}} HL(){while (YK==DC.BD&&fK==false&&eK.length>0){var m=eK.removeAt(0);var j=m.x.toInt();var k=m.y.toInt();var g=cK[j+k*10];var i=(j>0)?cK[j-1+k*10]:null;var n=(j<9)?cK[j+1+k*10]:null;var h=(k>0)?cK[j+(k-1)*10]:null;var p=(k<9)?cK[j+(k+1)*10]:null;var l=false;if(g.GB==w.EC){var AB=fB.NB.nB("ChainError");AB.play();continue;}if(g.pC(h)){h.eB=false;h.sB(gK,iK,jK);}if(g.cC(i)){i.eB=false;i.sB(gK,iK,jK);}g.direction=1-g.direction;g.eB=false;g.LC=false;var MB=fB.NB.nB("ChainRotate");MB.play();if(g.cC(n)){g.eB=true;g.LC=(g.GB==w.SB||n.GB==w.SB);}if(g.pC(p)){g.eB=true;g.LC=(g.GB==w.SB||p.GB==w.SB);}g.sB(gK,iK,jK);l=l||g.eB;if(g.pC(h)){h.eB=true;h.LC=(g.GB==w.SB||h.GB==w.SB);h.sB(gK,iK,jK);l=true;}if(g.cC(i)){i.eB=true;i.LC=(g.GB==w.SB||i.GB==w.SB);i.sB(gK,iK,jK);l=true;}if(l){var v=fB.NB.nB("ChainLink");v.play();}BL();}}}class PD extends BB{var OJ;var XJ;var hJ;var rJ;PD( g){OJ=g;hJ=HB.RG(g);rJ=true;XJ=new EB(hJ[0]);XJ.x=-34;XJ.y=-50;o(XJ);} get ND=>rJ; set ND( g){rJ=g;} zF( g){XJ.bitmapData=hJ[g?0:4];} WI(){var i=new UC(0.0,1.0,2.0,PB.AC);i.MC=(j){hB=pB=1.0+0.2*WB.sin(j*4*WB.PI);};var g=new cB(this,0.2,PB.AC);g.dB.alpha.aB(0.0);g.XC=2.0;g.onComplete=()=>zF(rJ);var h=new cB(this,0.2,PB.XF);h.dB.alpha.aB(1);h.XC=2.2;q.add(i);q.add(g);q.add(h);}}class jI extends BB implements tB{var XJ;var nJ;var iJ;jI( g){this.UB=false;iJ=0.0;nJ=HB.PG(g);XJ=new EB(nJ[0]);XJ.x=-25;XJ.y=-25;o(XJ);LB(DB.HD,(h)=>q.add(this));LB(DB.JD,(h)=>q.remove(this));} BC( g){iJ+= g;var h=(iJ*10).toInt()%nJ.length;XJ.bitmapData=nJ[h];return true;}}class iI extends BB implements tB{var XJ;var nJ;var iJ;iI( g){this.UB=false;iJ=0.0;nJ=HB.QG(g);XJ=new EB(nJ[0]);XJ.x=-25;XJ.y=-25;o(XJ);LB(DB.HD,(h)=>q.add(this));LB(DB.JD,(h)=>q.remove(this));} BC( g){iJ+= g;var h=(iJ*10).toInt()%nJ.length;XJ.bitmapData=nJ[h];return true;}}class kI extends BB implements tB{var XJ;var iJ;kI( h){this.UB=false;iJ=0.0;XJ=HB.CE(h);o(XJ);LB(DB.HD,(g)=>q.add(this));LB(DB.JD,(g)=>q.remove(this));} BC( g){iJ+= g;this.TB=WB.sin(iJ*7)*10*WB.PI/180;return true;}}class HB{static var NB;static  AE( i, h){var g=new EB(NB.YC("Elements").u("Chain${i}${h}"));g.NC=25;g.OC=25;return g;}static  MG( i, h){var g=new EB(NB.YC("Elements").u("Link${i}${h}"));g.NC=25;g.OC=25;return g;}static  CE( h){var g=new EB(NB.YC("Elements").u(h));g.NC=25;g.OC=25;return g;}static  NG(){var m=new BB();var l=0;var n=NB.YC("Levelup");for(int k=0;k<7;k++ ){var g=new EB(n.u("LevelUp${k}"));g.x=-g.width/2;g.y=-g.height/2;var h=new BB();h.o(g);h.x=l+g.width/2;h.hB=0;h.pB=0;m.o(h);var i=new cB(h,2.0,PB.uH);i.dB.hB.aB(1.0);i.dB.pB.aB(1.0);i.XC=k*0.05;var j=new cB(h,0.4,PB.VC);j.dB.hB.aB(0.0);j.dB.pB.aB(0.0);j.XC=3.0;q.add(i);q.add(j);l=l+5+g.width;}return m;}static  PG( h){var i=NB.YC("Elements");var g=new List<CB>();g.add(i.u("JokerChain${h}0"));g.add(i.u("JokerChain${h}1"));g.add(i.u("JokerChain${h}2"));g.add(i.u("JokerChain${h}3"));g.add(i.u("JokerChain${h}4"));return g;}static  QG( h){var i=NB.YC("Elements");var g=new List<CB>();g.add(i.u("JokerLink${h}0"));g.add(i.u("JokerLink${h}1"));g.add(i.u("JokerLink${h}2"));g.add(i.u("JokerLink${h}3"));g.add(i.u("JokerLink${h}4"));return g;}static  RG( h){var i=NB.YC("Locks");var g=new List<CB>();g.add(i.u("Lock${h}0"));g.add(i.u("Lock${h}1"));g.add(i.u("Lock${h}2"));g.add(i.u("Lock${h}3"));g.add(i.u("Lock${h}4"));return g;}static  SG(){var h=NB.YC("Head");var g=new List<CB>();g.add(h.u("Head1"));g.add(h.u("Head2"));g.add(h.u("Head3"));g.add(h.u("Head2"));g.add(h.u("Head1"));return g;}static  TG(){var h=NB.YC("Alarm");var g=new List<CB>();g.add(h.u("Alarm0"));g.add(h.u("Alarm1"));g.add(h.u("Alarm2"));g.add(h.u("Alarm3"));g.add(h.u("Alarm4"));g.add(h.u("Alarm5"));return g;}}class AD{var value=0; nD([ inc=1])=>(value+= inc); gF([ dec=1])=>(value-= dec);}class w{static const  QD="None";static const  SB="Joker";static const  EC="Block";static const  qE="Double";static const  rE="Quint";}class gC{static var NB;}class fB{static var NB;}class DC{static const  BD=1;static const  yD=2;static const  zD=3;}class oE extends BB implements tB{var EK;var iJ;oE( p, n){EK=new List<wD>();iJ=0.0;this.UB=false;var v=HB.AE(p,n);var m=new WB.Random();var i;var l;var AB;for(int h=0;h<=1;h++ ){for(int g=0;g<=1;g++ ){if(g==0&&h==0){i=WB.PI*1.15;TB=-WB.PI*2;}if(g==1&&h==0){i=WB.PI*1.85;TB=WB.PI*2;}if(g==1&&h==1){i=WB.PI*0.15;TB=WB.PI*2;}if(g==0&&h==1){i=WB.PI*0.85;TB=-WB.PI*2;}i=i+0.2*WB.PI*m.nextDouble();l=80.0+40.0*m.nextDouble();var j=new EB(v.bitmapData);j.iD=new IB(g*25,h*25,25,25);j.NC=12.5+g*25;j.OC=12.5+h*25;j.x=g*25;j.y=h*25;o(j);var k=new wD();k.aF=j;k.CG=g*25+12.5;k.DG=h*25+12.5;k.angle=i;k.FG=l;k.TB=TB;EK.add(k);}}} BC( m){iJ=WB.min(0.8,iJ+m);var v=981.0;for(int h=0;h<EK.length;h++ ){var g=EK[h];var i=g.aF;var j=g.angle;var k=g.FG;var l=g.TB;var n=g.CG+iJ*(WB.cos(j)*k);var p=g.DG+iJ*(WB.sin(j)*k+iJ*v*0.5);i.x=n;i.y=p;i.TB=iJ*l;}if(iJ>=0.6)this.alpha=(0.8-iJ)/0.2;if(iJ>=0.8)this.eE();return (iJ<0.8);}}var SD;var hC;var TD;var q;var ZC;var UD;var FC; main(){SD=new oC("StageBackground",rC.query('#stageBackground'));hC=new oC("StageForeground",rC.query('#stageForeground'));TD=new KE();TD.ZF(SD);TD.ZF(hC);q=TD.cE;CB.OF.webp=true;var g=CB.xC("images/Loading.png");g.then((h){ZC=new EB(h);ZC.NC=20;ZC.OC=20;ZC.x=400;ZC.y=270;hC.o(ZC);UD=new cB(ZC,100,PB.VC);UD.dB.TB.aB(100.0*2.0*WB.PI);q.add(UD);FC=new SC();FC.KC=new HE("Arial",20,0xA0A0A0,bold:true);FC.width=240;FC.height=40;FC.text="... loading ...";FC.x=400-FC.XI/2;FC.y=320;FC.UB=false;hC.o(FC);OG();});} OG(){var g=new YD();g.lB("Background","images/Background.jpg");g.lB("ExitBox","images/ExitBox.png");g.lB("ExitButtonNormal","images/ExitButtonNormal.png");g.lB("ExitButtonPressed","images/ExitButtonPressed.png");g.lB("ExitGauge","images/ExitGauge.png");g.lB("ExitNoButtonNormal","images/ExitNoButtonNormal.png");g.lB("ExitNoButtonPressed","images/ExitNoButtonPressed.png");g.lB("ExitYesButtonNormal","images/ExitYesButtonNormal.png");g.lB("ExitYesButtonPressed","images/ExitYesButtonPressed.png");g.lB("InfoBox","images/InfoBox.png");g.lB("MessageBox","images/MessageBox.png");g.lB("ShuffleButtonNormal","images/ShuffleButtonNormal.png");g.lB("ShuffleButtonPressed","images/ShuffleButtonPressed.png");g.lB("TimeGauge","images/TimeGauge.png");g.KD("Alarm","images/AlarmTextureAtlas.json",nC.wC);g.KD("Head","images/HeadTextureAtlas.json",nC.wC);g.KD("Elements","images/ElementsTextureAtlas.json",nC.wC);g.KD("Levelup","images/LevelupTextureAtlas.json",nC.wC);g.KD("Locks","images/LocksTextureAtlas.json",nC.wC);g.ZB("BonusAllUnlock","sounds/BonusAllUnlock.mp3");g.ZB("BonusUniversal","sounds/BonusUniversal.mp3");g.ZB("ChainBlast","sounds/ChainBlast.mp3");g.ZB("ChainBlastSpecial","sounds/ChainBlastSpecial.mp3");g.ZB("ChainError","sounds/ChainError.mp3");g.ZB("ChainFall","sounds/ChainFall.mp3");g.ZB("ChainHelp","sounds/ChainHelp.mp3");g.ZB("ChainLink","sounds/ChainLink.mp3");g.ZB("ChainRotate","sounds/ChainRotate.mp3");g.ZB("Click","sounds/Click.mp3");g.ZB("GameOver","sounds/GameOver.mp3");g.ZB("Laugh","sounds/Laugh.mp3");g.ZB("LevelUp","sounds/LevelUp.mp3");g.ZB("PointsCounter","sounds/PointsCounter.mp3");g.ZB("Unlock","sounds/Unlock.mp3");g.ZB("Warning","sounds/Warning.mp3");g.ZB("Intro","sounds/Intro.mp3");g.wB("ESCAPE_INS_AIM_0","Connect at least 3 chain links of the same colour to a horizontal or vertical chain.");g.wB("ESCAPE_INS_DES_0","You can change the direction of a chain link by touching it.");g.wB("ESCAPE_INS_TIP_0","Earn extra points for connecting chain links displaying a key symbol.");g.wB("ESCBlockErrorHint","Sorry but block chains can´t be twisted!");g.wB("ESCLevelBoxText","Connect {0} chain links and help the crook to escape!");g.wB("ESCNoActionHint","Press on the chain links to twist them.");g.wB("ESCNoComboHint","You have to connect at least 3 chain links of the same colour.");g.wB("ESCStartText","Form horizontal or vertical same-colour chains and become an escape agent!");g.wB("ESCtogo","Chain links:");g.wB("GENexitquery","Do you really want to quit the game?");g.wB("GEN2ndchancetime","Time is up. Second chance!");g.wB("GENtimeup","Sorry! Your time is up.");g.wB("GENgameover","Game Over");g.load().then((l){hC.CC(ZC);hC.CC(FC);q.remove(UD);HB.NB=g;fB.NB=g;gC.NB=g;var j=new EB(HB.NB.u("Background"));SD.o(j);SD.TI=yC.XE;var i=new LG();hC.o(i);i.start();}).catchError((k){for(var h in g.jF){print("Loading resouce failed: ${h.kind}.${h.name} - ${h.error}");}});}const lI=const mI();class mI{const mI();}class UG{UG();}class YG<GD>{final  PL=new List<GD>();final  rL;var BM=0;YG( g()):rL=g; uF(){if(BM==0){return rL();}else{BM-- ;return PL[BM];}}wF( g){if(BM==PL.length){PL.add(g);}else{PL[BM]=g;}BM++ ;}reset(){PL.clear();BM=0;}}class GE extends OB{var cL;var tL;var LM;GE(){LM=new List<ZD>();cL=new rC.AudioElement();cL.onEnded.listen(EN);tL=new List<rC.AudioElement>();tL.add(cL);rC.document.body.children.add(cL);}static  xC( k,[ soundLoadOptions=null]){if(soundLoadOptions==null)soundLoadOptions=OB.OF;var m=new GE();var g=m.cL;var h=vC.YF(k,soundLoadOptions);var i=new jB.Completer<OB>();if(h.length==0){return lC.xC(k,soundLoadOptions);}var j;var l;AB(p){j.cancel();l.cancel();i.complete(m);}n(p){if(h.length>0){g.src=h.removeAt(0);g.load();}else{j.cancel();l.cancel();if(soundLoadOptions.ignoreErrors){lC.xC(k,soundLoadOptions).then((v)=>i.complete(v));}else{i.completeError(new StateError("Failed to load audio."));}}}j=g.onCanPlayThrough.listen(AB);l=g.onError.listen(n);g.src=h.removeAt(0);g.load();return i.future;} get length{return cL.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new YB();return new ZD(this,loop,soundTransform);} cN( h){var g;if(tL.length==0){g=cL.clone(true);g.onEnded.listen(EN);}else{g=tL.removeAt(0);}LM.add(h);return g;} pO( g){var h=g.cL;var i=LM.indexOf(g);LM.removeAt(i);tL.add(h);if(cL.currentTime>0&&cL.ended==false)cL.currentTime=0;} EN( j){var i=j.target;var g=null;for(int h=0;h<LM.length&&g==null;h++ )if(LM[h].cL==i)g=LM[h];if(g!=null)g.stop();}}class ZD extends RC{var pL;var cL;var XL;var qL;ZD( g, i, h){pL=g;XL=i;qL=h;cL=g.cN(this);cL.loop=XL;this.GC=h;cL.play();} get GC=>qL; set GC( g){qL=g;if(cL!=null)cL.volume=(qL!=null)?qL.volume:1;} stop(){if(cL!=null){if(cL.ended==false)cL.pause();pL.pO(this);cL=null;}}}class DE extends OB{var bL;DE(){if(vC.fD==null)throw new UnsupportedError("This browser does not support Web Audio API.");}static  xC( h,[ soundLoadOptions=null]){if(soundLoadOptions==null)soundLoadOptions=OB.OF;var l=new DE();var g=new jB.Completer<OB>();var i=vC.YF(h,soundLoadOptions);var v=vC.fD;if(i.length==0){return lC.xC(h,soundLoadOptions);}AB(m){v.decodeAudioData(m.response,( p){l.bL=p;g.complete(l);},(n){if(soundLoadOptions.ignoreErrors){lC.xC(h,soundLoadOptions).then((j)=>g.complete(j));}else{g.completeError(new StateError("Failed to decode audio."));}});}k(n){if(i.length>0){rC.HttpRequest.request(i.removeAt(0),responseType:'arraybuffer').then(AB).catchError(k);}else{if(soundLoadOptions.ignoreErrors){lC.xC(h,soundLoadOptions).then((j)=>g.complete(j));}else{g.completeError(new StateError("Failed to load audio."));}}}k(null);return g.future;} get length{return bL.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new YB();return new nI(this,loop,soundTransform);}}class nI extends RC{var mL;var qL;var XL;var WM;var fM;nI( j, h, i){mL=j;XL=h;qL=i;var g=vC.fD;WM=g.createGain();WM.connect(g.destination,0,0);WM.gain.value=(qL!=null)?WB.pow(qL.volume,2):1;fM=g.createBufferSource();fM.buffer=mL.bL;fM.loop=h;fM.connect(WM,0,0);fM.start(0);} get GC=>qL; set GC( g){qL=g;WM.gain.value=(qL!=null)?WB.pow(qL.volume,2):1;} stop(){fM.stop(0);}}class lC extends OB{lC(){}static  xC( g,[ soundLoadOptions=null]){return new jB.Future<OB>.value(new lC());} get length{return double.NAN;} play([ loop=false, soundTransform]){if(soundTransform==null){soundTransform=new YB();}return new oI(this,loop,soundTransform);}}class oI extends RC{var XL;var qL;oI( i, h, g){XL=h;qL=g;} get GC=>qL;set GC( g){qL=g;} stop(){}}class vE extends DB{static const  pG="textInput";var aL="";vE( g,[ bubbles=false]):super(g,bubbles);}class ZG{static const  lG="pixel";}class SC extends QB{var aL="";var lL=0x000000;var CM=null;var SM=WG.SF;var gM=ZG.lG;var pM=XG.fG;var wM=false;var GN=false;var KN=0x000000;var RN=false;var WN=0x000000;var dN=0;var hN=0;var lN;var sN;var wN=true;var zN=100;var BO=100;var HO=null;var yM=null;SC([ text, textFormat]){if(text!=null)aL=text;if(textFormat!=null)KC=textFormat;else CM=new HE("Arial",12,0x000000);lN=new List<String>();sN=new List<aG>();} get type=>pM; get width=>zN; get height=>BO; set text( g){aL=g;wN=true;} set KC( g){CM=g;lL=CM.color;wN=true;} set wordWrap( g){wM=g;wN=true;} set width( g){zN=g;wN=true;} set height( g){BO=g;wN=true;} get XI{ZP();return dN;} get gE{ZP();return hN;} mB( g,[ returnRectangle]){return YE(g,zN,BO,returnRectangle);} oB( g, h){if(g>=0&&h>=0&&g<zN&&h<BO)return this;return null;} VB( g){ZP();g.yM.drawImage(HO,0.0,0.0);} hP( p){var n=tG(p);lN.clear();sN.clear();if(wM==false){for(String h in aL.replaceAll('\r','').split('\n'))lN.add(h);}else{for(String h in aL.replaceAll('\r','').split('\n')){var g='';for(String j in h.split(' ')){var m=g;g=(g.length==0)?j:g+' '+j;if(yM.measureText(g).width>zN){if(m.length==0){lN.add(g);g='';}else{lN.add(m);g=j;}}}if(g.isEmpty==false){lN.add(g);}}}dN=0;hN=0;for(String g in lN){var k=yM.measureText(g);var l=0.0;if(CM.align==zB.TC||CM.align==zB.uG)l=(zN-k.width)/2;if(CM.align==zB.rG||CM.align==zB.nG)l=zN-k.width;var i=new aG(l,k.width,CM.size,n.LD,n.mD,0);sN.add(i);dN=WB.max(dN,i.width);hN=hN+i.height;}} ZP(){if(wN){wN=false;var h=zN.ceil().toInt();var i=BO.ceil().toInt();if(HO==null){HO=new rC.CanvasElement(width:h,height:i);yM=HO.context2D;}if(HO.width!=h)HO.width=h;if(HO.height!=i)HO.height=i;var m=new StringBuffer()..write(CM.italic?"italic ":"normal ")..write("normal ")..write(CM.bold?"bold ":"normal ")..write("${CM.size}px ")..write("${CM.font},sans-serif");var j=m.toString();yM.font=j;yM.textAlign="start";yM.textBaseline="alphabetic";yM.fillStyle=ID(lL);hP(j);if(GN){yM.fillStyle=ID(KN);yM.fillRect(0,0,zN,BO);}else{yM.clearRect(0,0,zN,BO);}var k=CM.size;for(int g=0;g<lN.length;g++ ){var l=sN[g];yM.fillStyle=ID(lL);yM.fillText(lN[g],l.x,k);k+= l.height;}if(RN){yM.strokeStyle=ID(WN);yM.lineWidth=1;yM.strokeRect(0,0,zN,BO);}}}}class vC{static var MH=dH();static var fD=jH();static var PF=kH();static  dH(){var h=(fD!=null)?"WebAudioApi":"AudioElement";var g=rC.window.navigator.userAgent;if(g.contains("IEMobile"))if(g.contains("9.0")||g.contains("10.0"))h="Mock";if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod"))if(g.contains("OS 3")||g.contains("OS 4")||g.contains("OS 5"))h="Mock";if(PF.length==0)h="Mock";print("StageXL: supported audio engine is: ${h}");return h;}static  jH(){if(mE.AudioContext.supported)return new mE.AudioContext();return null;}static  kH(){var g=new List<String>();var h=new rC.AudioElement();var i=["maybe","probably"];if(i.indexOf(h.canPlayType("audio/mpeg",""))!=-1)g.add("mp3");if(i.indexOf(h.canPlayType("audio/mp4",""))!=-1)g.add("mp4");if(i.indexOf(h.canPlayType("audio/ogg",""))!=-1)g.add("ogg");if(i.indexOf(h.canPlayType("audio/wav",""))!=-1)g.add("wav");print("StageXL: supported audio types are: ${g}");return g;}static  YF( i, h){var l=new RegExp(r"(mp3|mp4|ogg|wav)$",multiLine:false,caseSensitive:true);var g=PF.toList();var k=l.firstMatch(i);var j=new List<String>();if(k==null){throw new ArgumentError("Unsupported file extension.");}if(g.length==0){throw new UnsupportedError("This browser supports no known audio codec.");}if(!h.mp3)g.remove("mp3");if(!h.mp4)g.remove("mp4");if(!h.ogg)g.remove("ogg");if(!h.wav)g.remove("wav");var m=k.group(1);if(g.contains(m)){j.add(i);g.remove(m);}for(var n in g){j.add(i.replaceAll(l,n));}return j;}}class XG{static const  fG="dynamic";}class HE{var font;var size;var color;var bold;var italic;var underline;var align;var leftMargin;var rightMargin;var indent;var leading;var letterSpacing=0;var rI=0;var sI=false;var AJ=false;HE(this.font,this.size,this.color,{this.bold: false,this.italic: false,this.underline: false,this.align: "left",this.leftMargin: 0,this.rightMargin: 0,this.indent: 0,this.leading: 0});}class WG{static const  SF="none";}class aG{var LD;var mD;var height;var leading;var width;var x;aG(this.x,this.width,this.height,this.LD,this.mD,this.leading);}class uC{static const  dG=0;static const  jG=1;static const  rG=2;static const  wG=3;static const  HF=4;}class mC{static var xE=yB.NE;static var kG=false;static var DF=null;static var yG=null;static var BH=null;static var HH=new jB.StreamController<String>();static var OH=HH.stream.asBroadcastStream();static  VF( i){var h=i;var g="auto";if(xE!=yB.NE){h=xE;}switch (h){case yB.NE:g="auto";break;case yB.QE:g="default";break;case yB.SE:g="pointer";break;case yB.zG:g="move";break;case yB.AH:g="text";break;case yB.DH:g="wait";break;}if(kG){g="none";}return g;}}class yB{static const  NE="auto";static const  QE="arrow";static const  SE="button";static const  zG="hand";static const  AH="ibeam";static const  DH="wait";}class sE{static const  SF="none";static const  vG="touchPoint";}abstract class iC extends QB{final  wL=new List<t>();var QM=true;var ZM=true; o( g){if(g.parent==this){var h=wL.indexOf(g);wL.removeAt(h);wL.add(g);}else{vH(g,wL.length);}} vH( g, h){if(h<0||h>wL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){wL.removeAt(wL.indexOf(g));if(h>wL.length)h-- ;wL.insert(h,g);}else{g.eE();g.BP(this);wL.insert(h,g);g.dispatchEvent(new DB(DB.iG,true));if(this.qC!=null)IP(g,new DB(DB.HD));}} CC( h){var g=wL.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");RI(g);} RI( g){if(g<0||g>=wL.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=wL[g];h.dispatchEvent(new DB(DB.CH,true));if(this.qC!=null)IP(h,new DB(DB.JD));h.BP(null);wL.removeAt(g);} contains( g){for(;g!=null;g=g.ZO)if(g==this)return true;return false;} mB( n,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new IB.IJ();if(wL.length==0)return super.mB(n,returnRectangle);var h=double.INFINITY;var i=double.INFINITY;var k=double.NEGATIVE_INFINITY;var j=double.NEGATIVE_INFINITY;var p=wL.length;for(int l=0;l<wL.length;l++ ){var m=wL[l];bO.aE(m.iO,n);var g=m.mB(bO,returnRectangle);if(g.left<h)h=g.left;if(g.top<i)i=g.top;if(g.right>k)k=g.right;if(g.bottom>j)j=g.bottom;}returnRectangle.x=h;returnRectangle.y=i;returnRectangle.width=k-h;returnRectangle.height=j-i;return returnRectangle;} oB( p, v){var l=null;for(int j=wL.length-1;j>=0;j-- ){var i=wL[j];if(i.visible){var g=i.iO;var m=p-g.qB;var k=v-g.rB;var AB=(g.d*m-g.c*k)/g.dC;var n=(g.a*k-g.b*m)/g.dC;var h=i.oB(AB,n);if(h!=null){if(h is QB)if(h.UB)return QM?h:this;l=this;}}}return l;} VB( i){for(int h=0;h<wL.length;h++ ){var g=wL[h];if(!g.yN&&g.visible)i.yF(g);}}lP( g, i){i.add(g);if(g is iC){var k=g as iC;var j=k.wL;for(int h=0;h<j.length;h++ ){lP(j[h],i);}}}IP( i, j){var g=aD.uF() as List<t>;lP(i,g);for(int h=0;h<g.length;h++ ){g[h].dispatchEvent(j);}g.clear();aD.wF(g);}}class YD{var iL;YD(){iL=new Map<String,XD>();} AN( g){var j=g.kind;var h=g.name;var i="${j}.${h}";if(iL.containsKey(i))throw new StateError("ResourceManager already contains a resource called '${h}'");iL[i]=g;} GO( i, g){var h="${i}.${g}";if(iL.containsKey(h)==false)throw new StateError("ResourceManager does not contains a resource called '${g}'");return iL[h];} lB( i, h,[ bitmapDataLoadOptions=null]){var g=new XD("BitmapData",i,h);g.KO(CB.xC(h,bitmapDataLoadOptions));AN(g);} ZB( i, h,[ soundFileSupport=null]){var g=new XD("Sound",i,h);g.KO(OB.xC(h,soundFileSupport));AN(g);} KD( j, h, i){var g=new XD("TextureAtlas",j,h);g.KO(kB.xC(h,i));AN(g);} wB( i, h){var g=new XD("Text",i,"");g.KO(new jB.Future.value(h));AN(g);} load(){var h=this.OI.map((i)=>i.vL);return jB.Future.wait(h).then((j){var g=this.jF;if(g.length>0)throw new StateError("Failed to load ${g.length} resource(s).");return this;});} get OI{return iL.values.where((g)=>g.OD==null).toList();} get jF{return iL.values.where((g)=>g.error!=null).toList();} u( g){return GO("BitmapData",g).OD;} nB( g){return GO("Sound",g).OD;} YC( g){return GO("TextureAtlas",g).OD;} zC( g){return GO("Text",g).OD;}}class XD{var RL;var dL;var oL;var vL;var GM;var KM;XD( g, h, i){RL=g;dL=h;oL=i;GM=null;KM=null;} get kind=>RL; get name=>dL; get OD=>KM; get error=>GM;KO( i){vL=i.then((g){KM=g;GM=null;},onError:(h){KM=null;GM=h;});}}class kB{final  YL=new List<uE>();var DM;static  xC( n, iB){var k=new jB.Completer<kB>();var g=new kB();switch (iB){case nC.gG:case nC.wC:rC.HttpRequest.getString(n).then((MB){var p=bI.parse(MB);var h=p["frames"];var v=p["meta"];var PC=mH(n,v["image"]);if(h is List){for(var AB in h){var j=AB as Map;var i=j["filename"] as String;var l=WF(i);var m=new uE.JJ(g,l,j);g.YL.add(m);}}if(h is Map){for(String i in h.keys){var j=h[i] as Map;var l=WF(i);var m=new uE.JJ(g,l,j);g.YL.add(m);}}CB.xC(PC).then(( xB){g.DM=xB;k.complete(g);}).catchError((RB){k.completeError(new StateError("Failed to load image."));});}).catchError((RB){k.completeError(new StateError("Failed to load json file."));});break;}return k.future;} u( h){for(int g=0;g<YL.length;g++ )if(YL[g].name==h)return new CB.NJ(YL[g]);throw new ArgumentError("TextureAtlasFrame not found: '${h}'");}}class nC{static const  gG="json";static const  wC="jsonarray";}class uE{final  VL;final  dL;final  yL;final  JM;final  UM;final  bM;final  iM;final  mM;final  sM;final  vM;final  DN;uE.JJ( i, h, g):VL=i,dL=h,yL=cH(g["rotated"]),JM=bC(g["sourceSize"]["w"]),UM=bC(g["sourceSize"]["h"]),bM=bC(g["spriteSourceSize"]["x"]),iM=bC(g["spriteSourceSize"]["y"]),mM=bC(g["frame"]["x"]),sM=bC(g["frame"]["y"]),vM=bC(g["frame"]["w"]),DN=bC(g["frame"]["h"]); get YI=>VL; get name=>dL; get VI=>yL; get zH=>mM; get AI=>sM; get lF=>vM; get kF=>DN; get offsetX=>bM; get offsetY=>iM; get NI=>JM; get MI=>UM;}class YB{var volume;var pan;var BJ=1;var CJ=0;var FJ=1;var EJ=0;YB([this.volume=1,this.pan=0]);}class tC extends QB{var upState;var overState;var downState;var hitTestState;var jE=true;var enabled=true;var nM;tC([this.upState,this.overState,this.downState,this.hitTestState]){LB(s.MF,UN);LB(s.eD,UN);LB(s.cD,UN);LB(s.WE,UN);nM=this.upState;} mB( g,[ returnRectangle]){if(nM!=null){bO.aE(nM.iO,g);return nM.mB(bO,returnRectangle);}return super.mB(g,returnRectangle);} oB( k, l){if(this.hitTestState!=null){var g=this.hitTestState.iO;var h=k-g.qB;var i=l-g.rB;var m=(g.d*h-g.c*i)/g.dC;var j=(g.a*i-g.b*h)/g.dC;if(this.hitTestState.oB(m,j)!=null)return this;}return null;} VB( g){if(nM!=null)g.yF(nM);} UN( g){if(g.type==s.eD){nM=upState;}else{nM=g.WC?downState:overState;}}}class zB{static const  TC="center";static const  nG="end";static const  uG="justify";static const  rG="right";}class IC<GD extends DB>{final  hL;const IC(this.hL); forTarget( g,{ useCapture: false}){return g.kM(hL,useCapture);}}final  ME=new Map<String,RF>();class kC{var mp3;var mp4;var ogg;var wav;var ignoreErrors;kC({this.mp3: false,this.mp4: false,this.ogg: false,this.wav: false,this.ignoreErrors: true});}abstract class RC extends QC{ get GC; set GC( g); stop();}class bG{}class FE{var fC=null;FE();factory FE.HJ( i, g, h, j){return new pI(i,g,h,j);} VB( i, g){var h=i.context;h.setTransform(g.a,g.b,g.c,g.d,g.qB,g.rB);}}abstract class IE{ VB( g);}class EE{var png;var jpg;var webp;EE({this.png: true,this.jpg: true,this.webp: false});}class XB extends DB{static const  zE="touchBegin";static const  BF="touchEnd";static const  EF="touchCancel";static const  KF="touchMove";static const  GH="touchOver";static const  KH="touchOut";var OO;var QO;var TO,UO;var VO,XO;var LN;var fN;var NN;var SN;var dO;var eO;var fO;XB( g,[ bubbles=false]):super(g,bubbles){DO(g,bubbles);} DO( g,[ bubbles=false]){super.DO(g,bubbles);OO=0;QO=false;TO=UO=0;VO=XO=0;LN=false;fN=false;NN=false;SN=false;dO=1.00;eO=0;fO=0;}set wO( g){TO=g.x;UO=g.y;}set zO( g){VO=g.x;XO=g.y;} get uD=>OO; get nF=>TO; get oF=>UO; get altKey=>LN; get ctrlKey=>NN; get shiftKey=>SN;}class VD extends t{static const  PE='DIRECTION_UP';static const  CF='DIRECTION_RIGHT';static const  VE='DIRECTION_DOWN';static const  dD='DIRECTION_LEFT';var xM;var CN;var DM;var MN;VD( g,[ direction=dD]){if(direction!=PE&&direction!=VE&&direction!=dD&&direction!=CF){throw new ArgumentError('Invalid Gauge direction!');}xM=direction;CN=1.0;DM=g;MN=new IB.IJ();PO();} get ratio=>CN;set ratio( g){if(g<0.0)g=0.0;if(g>1.0)g=1.0;CN=g;PO();} get bitmapData=>DM;set bitmapData( g){DM=g;PO();}PO(){if(DM==null){MN.left=0;MN.top=0;MN.right=0;MN.bottom=0;}else{var h=DM.width;var g=DM.height;switch (xM){case dD:MN.left=((1.0-CN)*h).toInt();MN.top=0;MN.right=h;MN.bottom=g;break;case PE:MN.left=0;MN.top=((1.0-CN)*g).toInt();MN.right=h;MN.bottom=g;break;case CF:MN.left=0;MN.top=0;MN.right=(CN*h).toInt();MN.bottom=g;break;case VE:MN.left=0;MN.top=0;MN.right=h;MN.bottom=(CN*g).toInt();break;}}} mB( h,[ returnRectangle]){var g=(DM!=null)?DM.width:0;var i=(DM!=null)?DM.height:0;return YE(h,g,i,returnRectangle);} oB( g, h){if(DM!=null&&g>=0.0&&h>=0.0&&g<DM.width&&h<DM.height)return this;return null;} VB( g){if(DM!=null)DM.xF(g,MN);}}class EB extends t{var bitmapData;var pixelSnapping;var iD;EB([this.bitmapData=null,this.pixelSnapping="auto"]){iD=null;} mB( h,[ returnRectangle]){var g=(bitmapData!=null)?bitmapData.width:0;var i=(bitmapData!=null)?bitmapData.height:0;return YE(h,g,i,returnRectangle);} oB( g, h){if(bitmapData!=null&&g>=0.0&&h>=0.0&&g<bitmapData.width&&h<bitmapData.height)return this;return null;} VB( g){if(bitmapData==null)return;if(iD==null){bitmapData.VB(g);}else{bitmapData.xF(g,iD);}}}class HC extends DB{static const  OE="keyDown";static const  AF="keyUp";var LN;var NN;var SN;var VN;var fN;var kN;var oN;var rN;HC( g,[ bubbles=false]):super(g,bubbles){DO(g,bubbles);} DO( g,[ bubbles=false]){super.DO(g,bubbles);LN=false;NN=false;SN=false;VN=false;fN=false;kN=0;oN=0;rN=0;} get altKey=>LN; get ctrlKey=>NN; get shiftKey=>SN; get charCode=>kN; get keyCode=>oN; get keyLocation=>rN;}class BB extends iC{var tI=false;var jE=false;var bE=null;var RM=null;var aM=null;mO(){var i=this.oD;var j=this.qC;var m=this.visible;if(i!=null&&this.qC!=null){var h=mC.BH;if(h!=null){var g=iO.vD(i);if(g.x<h.left)g.x=h.left;if(g.x>h.right)g.x=h.right;if(g.y<h.top)g.y=h.top;if(g.y>h.bottom)g.y=h.bottom;i=iO.eF().vD(g);}var l=new JB(TN,YN).add(i).subtract(mC.yG);var k=iO.vD(l);this.visible=false;aM=j.oB(j.II,j.JI);this.x=k.x;this.y=k.y;this.visible=m;}} mB( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new IB.IJ();super.mB(g,returnRectangle);if(RM!=null){returnRectangle=RM.XP(g).union(returnRectangle);}return returnRectangle;} oB( i, j){var h=null;if(this.bE!=null){var g=this.hE(this.bE);if(g!=null){var k=i*g.a+j*g.c+g.qB;var l=i*g.b+j*g.d+g.rB;if(this.bE.oB(k,l)!=null){h=this;}}}else{h=super.oB(i,j);if(h==null&&RM!=null){if(RM.cP(i,j)){h=this;}}}return h;}VB( g){if(RM!=null)RM.VB(g);super.VB(g);}}class s extends DB{static const  aC="click";static const  qG="doubleClick";static const  cD="mouseDown";static const  WE="mouseUp";static const  LF="mouseMove";static const  eD="mouseOut";static const  MF="mouseOver";static const  NF="mouseWheel";static const  QF="middleClick";static const  TH="middleMouseDown";static const  XH="middleMouseUp";static const  TF="rightClick";static const  bH="rightMouseDown";static const  eH="rightMouseUp";var TO,UO;var VO,XO;var nO;var LN;var fN;var NN;var SN;var rO;var sO;var tO;s( g,[ bubbles=false]):super(g,bubbles){DO(g,bubbles);} DO( g,[ bubbles=false]){super.DO(g,bubbles);TO=UO=0;VO=XO=0;nO=false;LN=false;fN=false;NN=false;SN=false;rO=0;sO=0;tO=0;}set wO( g){TO=g.x;UO=g.y;}set zO( g){VO=g.x;XO=g.y;} get nF=>TO; get oF=>UO; get WC=>nO; get altKey=>LN; get ctrlKey=>NN; get shiftKey=>SN; get MD=>rO; get deltaX=>sO; get deltaY=>tO;}class JE implements tB{final  eL;var nL=0.0;var zL=0.0;var IM=1;JE( g, h):eL=g{zL=WB.max(h,0.0001);} BC( h){var g=nL+h;while (g>=zL&&IM>0){nL=zL;IM-- ;eL();g-= zL;}nL=g;return (IM>0);} get totalTime=>zL; get currentTime=>nL;}abstract class tB{ BC( g);}class ED implements tB{final  jL=new List<tB>();var EM=0;var OM=0.0; add( g){if(g==null)return;if(this.contains(g))return;if(EM==jL.length){jL.add(g);}else{jL[EM]=g;}EM++ ;} remove( h){if(h==null)return;for(int g=0;g<EM;g++ ){if(identical(jL[g],h)){jL[g]=null;break;}}} contains( h){if(h==null)return false;for(int g=0;g<EM;g++ ){if(identical(jL[g],h)){return true;}}return false;} iE( h, i,[ transitionFunction]){var g=new cB(h,i,transitionFunction);add(g);return g;} gB( h, i){var g=new JE(h,i);add(g);return g;} BC( k){OM+= k;var j=EM;var h=0;for(int g=0;g<j;g++ ){var i=jL[g];if(i==null)continue;if(i.BC(k)==false){jL[g]=null;continue;}if(h!=g){jL[h]=i;jL[g]=null;}h++ ;}if(h!=j){for(int g=j;g<EM;g++ ){jL[h++ ]=jL[g];jL[g]=null;}EM=h;}return true;}}class jC{static const  yE=1;static const  bD=2;static const  sG=3;}class wE{final  iE;wE(this.iE);call( h, g){TM(h).aB(g);} get x=>TM("x"); get y=>TM("y"); get hB=>TM("scaleX"); get pB=>TM("scaleY"); get skewX=>TM("skewX"); get skewY=>TM("skewY"); get NC=>TM("pivotX"); get OC=>TM("pivotY"); get TB=>TM("rotation"); get alpha=>TM("alpha"); TM( h){var g=new vB(h);this.iE.TM(g);return g;}}class tE extends DB{var SL;tE( g):super(DB.FF,false){SL=g;} get hD=>false;}class DD{static const  eG="exactFit";static const  oG="noBorder";static const  xG="noScale";static const  IF="showAll";}abstract class QB extends t{var xH=false;var UB=true;var GJ=true;var tabIndex=0;static const  EH=const IC<s>(s.eD);static const  UH=const IC<s>(s.LF);static const  YH=const IC<s>(s.cD);static const  fH=const IC<s>(s.WE);static const  lH=const IC<s>(s.NF); get onMouseOut=>QB.EH.forTarget(this); get onMouseMove=>QB.UH.forTarget(this); get onMouseDown=>QB.YH.forTarget(this); get onMouseUp=>QB.fH.forTarget(this); get onMouseWheel=>QB.lH.forTarget(this);static const  oH=const IC<XB>(XB.KF);static const  pH=const IC<XB>(XB.BF);static const  qH=const IC<XB>(XB.EF); get onTouchMove=>QB.oH.forTarget(this); get onTouchEnd=>QB.pH.forTarget(this); get onTouchCancel=>QB.qH.forTarget(this);static const  sH=const IC<HC>(HC.AF);static const  tH=const IC<HC>(HC.OE); get onKeyUp=>QB.sH.forTarget(this); get onKeyDown=>QB.tH.forTarget(this);}class JB{var IL;var ML;JB( h, g):IL=h,ML=g;JB.IJ():this(0,0); clone()=>new JB(IL,ML); toString()=>"Point [x=${IL}, y=${ML}]"; get x=>IL; get y=>ML; get length=>WB.sqrt(IL*IL+ML*ML);set x( g){IL=g;}set y( g){ML=g;} add( g){return new JB(IL+g.x,ML+g.y);} subtract( g){return new JB(IL-g.x,ML-g.y);}kD( g){IL=g.x;ML=g.y;} iF( g){return IL==g.x&&ML==g.y;}}class IB{var IL;var ML;var TL;var fL;IB( i, g, h, j):IL=i,ML=g,TL=h,fL=j;IB.IJ():this(0,0,0,0); clone()=>new IB(IL,ML,TL,fL); toString()=>"Rectangle [x=${IL}, y=${ML}, width=${TL}, height=${fL}]"; get x=>IL; get y=>ML; get width=>TL; get height=>fL; get left=>IL; get top=>ML; get right=>IL+TL; get bottom=>ML+fL; get size=>new JB(TL,fL);set x( g){IL=g;}set y( g){ML=g;}set width( g){TL=g;}set height( g){fL=g;}set bottom( g){this.height=g-ML;}set left( g){IL=g;}set right( g){TL=g-IL;}set top( g){ML=g;} contains( g, h){return IL<=g&&ML<=h&&IL+TL>=g&&ML+fL>=h;} iF( g){return IL==g.x&&ML==g.y&&TL==g.width&&fL==g.height;} get isEmpty{return TL==0&&fL==0;}kD( g){IL=g.x;ML=g.y;TL=g.width;fL=g.height;} union( g){var i=WB.min(this.left,g.left);var h=WB.min(this.top,g.top);var j=WB.max(this.right,g.right);var k=WB.max(this.bottom,g.bottom);return new IB(i,h,j-i,k-h);} align(){var h=this.left.floor();var g=this.top.floor();var i=this.right.ceil();var j=this.bottom.ceil();return new IB(h,g,i-h,j-g);}}class FB{var JL,KL,NL,OL,QL,UL;var gL;FB( h, i, g, j, k, l):JL=h.toDouble(),KL=i.toDouble(),NL=g.toDouble(),OL=j.toDouble(),QL=k.toDouble(),UL=l.toDouble(),gL=(h*j-i*g).toDouble();FB.KJ():JL=1.0,KL=0.0,NL=0.0,OL=1.0,QL=0.0,UL=0.0,gL=1.0; clone(){return new FB(JL,KL,NL,OL,QL,UL);} eF(){var h=(OL/gL);var i=-(KL/gL);var g=-(NL/gL);var j=(JL/gL);var k=-(h*QL+g*UL);var l=-(i*QL+j*UL);return new FB(h,i,g,j,k,l);} get a=>JL; get b=>KL; get c=>NL; get d=>OL; get qB=>QL; get rB=>UL; get dC=>gL; vD( h){var i=h.x.toDouble();var g=h.y.toDouble();return new JB(i*JL+g*NL+QL,i*KL+g*OL+UL);} EP( h){var i=h.x.toDouble();var g=h.y.toDouble();return new JB(i*JL+g*NL+QL,i*KL+g*OL+UL);} concat( g){var m=JL;var v=KL;var AB=NL;var p=OL;var l=QL;var n=UL;var RB=gL;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var iB=g.qB;var MB=g.rB;var xB=g.dC;JL=(m*j+v*i).toDouble();KL=(m*k+v*h).toDouble();NL=(AB*j+p*i).toDouble();OL=(AB*k+p*h).toDouble();QL=(l*j+n*i+iB).toDouble();UL=(l*k+n*h+MB).toDouble();gL=(RB*xB).toDouble();} BI(){JL=1.0;KL=0.0;NL=0.0;OL=1.0;QL=0.0;UL=0.0;gL=1.0;} mF(){var j=JL;var m=KL;var l=NL;var k=OL;var h=QL;var i=UL;var g=gL;JL=(k/g).toDouble();KL=-(m/g).toDouble();NL=-(l/g).toDouble();OL=(j/g).toDouble();QL=-(JL*h+NL*i).toDouble();UL=-(KL*h+OL*i).toDouble();gL=(1.0/g).toDouble();} qD( h, i, g, k, j, l){JL=h.toDouble();KL=i.toDouble();NL=g.toDouble();OL=k.toDouble();QL=j.toDouble();UL=l.toDouble();gL=(JL*OL-KL*NL).toDouble();} kD( g){JL=g.a.toDouble();KL=g.b.toDouble();NL=g.c.toDouble();OL=g.d.toDouble();QL=g.qB.toDouble();UL=g.rB.toDouble();gL=g.dC.toDouble();} aE( h, g){var n=h.a;var AB=h.b;var MB=h.c;var v=h.d;var m=h.qB;var p=h.rB;var iB=h.dC;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var xB=g.qB;var RB=g.rB;var PC=g.dC;JL=(n*k+AB*j).toDouble();KL=(n*l+AB*i).toDouble();NL=(MB*k+v*j).toDouble();OL=(MB*l+v*i).toDouble();QL=(m*k+p*j+xB).toDouble();UL=(m*l+p*i+RB).toDouble();gL=(iB*PC).toDouble();}}class KE{var LL;var ZL;var kL;var AM;var PM;KE(){LL=new ED();ZL=new List<oC>();kL=double.NAN;AM=WD.JF;PM=new tE(0);rC.window.requestAnimationFrame(bN);} get cE=>LL; bN( g){rC.window.requestAnimationFrame(bN);if(kL.isNaN)kL=g;if(kL>g)kL=g;var k=g-kL;var h=k/1000.0;var l=g/1000.0;if(k>=1){kL=g;PM.SL=h;AM.WO(PM);LL.BC(h);for(int i=0;i<ZL.length;i++ ){var j=ZL[i];j.cE.BC(h);j.HI(l,h);}}} ZF( g){if(g.fE!=null){g.fE.SI(g);}ZL.add(g);g.GP=this;} SI( g){if(g.fE==this){ZL.remove(g);g.GP=null;}}}abstract class VG{}abstract class OB{static  xC( g,[ soundLoadOptions=null]){switch (vC.MH){case "WebAudioApi":return DE.xC(g,soundLoadOptions);case "AudioElement":return GE.xC(g,soundLoadOptions);default:return lC.xC(g,soundLoadOptions);}}static var OF=new kC(mp3:true,mp4:true,ogg:true,wav:true); get length; play([ loop=false, soundTransform]);}class DB{static const  iG="added";static const  HD="addedToStage";static const  FF="enterFrame";static const  CH="removed";static const  JD="removedFromStage";static const  LH="resize";var pM;var jO;var YO;var sL;var lO;var cO;var gO;DB( g,[ bubbles=false]){DO(g,bubbles);} DO( g,[ bubbles=false]){pM=g;jO=bubbles;YO=jC.bD;sL=null;lO=null;cO=false;gO=false;} get sD=>cO; get type=>pM; get bubbles=>jO; get hD=>true; get target=>sL;}class CD{final  matrix=new FB.KJ();final  next;var alpha=1.0;var jD=RE.TE;CD(this.next);}class QC{var WL;var xL; LB( g, h(event),{ useCapture: false}){return kM(g,useCapture).listen(h);}dispatchEvent( g){MO(g,this,this,jC.bD);} oO( h, j, i){if(j&&xL!=null){var g=xL[h];if(g!=null&&g.vO)return true;}if(i&&WL!=null){var g=WL[h];if(g!=null&&g.vO)return true;}return false;} kM( h, g){if(g){if(xL==null)xL=new Map<String,sC>();}else{if(WL==null)WL=new Map<String,sC>();}var i=g?xL:WL;return i.putIfAbsent(h,(){return new sC(this,h,g);});}MO( g, k, l, j){var h=(j==jC.yE)?xL:WL;if(h==null)return;var i=h[g.type];if(i==null)return;g.sL=k;g.lO=l;g.YO=j;g.cO=false;g.gO=false;i.WO(g);}}class WD<GD extends DB>{final  WL=new List<sC>();var HM=0;static var JF=new WD<tE>(); PN( g){for(int h=0;h<HM;h++ ){if(WL[h]==g)return;}if(HM==WL.length){WL.add(g);}else{WL[HM]=g;}HM++ ;} WO( j){j.YO=jC.bD;j.cO=false;j.gO=false;var k=HM;var i=0;for(int g=0;g<k;g++ ){var h=WL[g];if(h==null)continue;if(h.rM==0){WL[g]=null;continue;}j.sL=h.sL;j.lO=h.sL;h.WO(j);if(i!=g){WL[i]=h;WL[g]=null;}i++ ;}if(i!=k){for(int g=k;g<HM;g++ ){WL[i++ ]=WL[g];WL[g]=null;}HM=i;}}}final  aD=new YG<List<t>>(()=>new List<t>());class sC<GD extends DB> extends jB.Stream<GD>{final  sL;final  hL;final  MM;final  cM=new List<hG>();var rM=0;sC(this.sL,this.hL,this.MM); get isBroadcast=>true; asBroadcastStream()=>this; listen( h( event),{ onError(error), onDone(), cancelOnError: false}){var g=new hG<GD>(this,h);if(rM==cM.length){cM.add(g);}else{cM[rM]=g;}rM++ ;if(hL==DB.FF&&MM==false)WD.JF.PN(this);return g;} uN( h){for(int g=0;g<rM;g++ ){if(identical(cM[g],h)){cM[g]=null;break;}}} get vO{for(var g=0;g<rM;g++ )if(cM[g]!=null)return true;return false;} WO( k){var j=rM;var h=0;for(int g=0;g<j;g++ ){var i=cM[g];if(i==null)continue;i.eM(k);if(h!=g){cM[h]=i;cM[g]=null;}h++ ;}if(h!=j){for(int g=j;g<rM;g++ ){cM[h++ ]=cM[g];cM[g]=null;}rM=h;}}}class LE extends VD implements tB{static const  mG='TIME_OUT';var YM=false;var nL=0.0;var zL=0.0;var tM;var zM=true;LE( g, h,[ direction=VD.dD]):super(h,direction){if(g<=0)throw new ArgumentError('Time must be greater than zero');zL=g;cF();} BC( g){if(YM&&ratio>0.0){ratio=ratio-g/totalTime;if(ratio==0.0)pause();}return true;} start(){YM=true;} pause(){YM=false;} reset([ time=0.0]){pause();time=WB.max(time,0.0);if(time!=0.0){zL=time;cF();}ratio=1.0;} gD( g, h){tM[g]=h/totalTime;} cF(){tM=new Map<String,num>();gD(LE.mG,0);} get totalTime=>zL; get UI=>ratio*totalTime; set ratio( i){var h=ratio;super.ratio=i;if(zM){tM.forEach((j,g){if(g<h&&g>=ratio)dispatchEvent(new DB(j));});}}}class CB implements IE{var TL;var fL;var uL;var FM;var NM;var XM;var dM;var jM;var oM;var qM;var uM;var BN;var JN;var yM;static var OF=new EE(png:true,jpg:true,webp:false);CB( h, i,[ transparent=true, fillColor=0xFFFFFFFF]){TL=h.toInt();fL=i.toInt();uL=transparent;FM=0;dM=oM=0;jM=qM=0;NM=uM=TL;XM=BN=fL;var g=new rC.CanvasElement(width:TL,height:fL);yM=g.context2D;yM.fillStyle=uL?PH(fillColor):ID(fillColor);yM.fillRect(0,0,TL,fL);JN=g;}CB.MJ( g){if(g==null)throw new ArgumentError();TL=g.naturalWidth.toInt();fL=g.naturalHeight.toInt();uL=true;FM=0;dM=oM=0;jM=qM=0;NM=uM=TL;XM=BN=fL;JN=g;}CB.NJ( g){TL=g.NI.toInt();fL=g.MI.toInt();uL=true;FM=g.VI?2:1;dM=g.offsetX;jM=g.offsetY;NM=g.lF;XM=g.kF;oM=g.zH;qM=g.AI;uM=g.lF;BN=g.kF;JN=g.YI.DM.JN;}static  xC( h,[ bitmapDataLoadOptions=null]){if(bitmapDataLoadOptions==null)bitmapDataLoadOptions=CB.OF;var i=new jB.Completer<CB>();var g=new rC.ImageElement();var j;var k;j=g.onLoad.listen((m){j.cancel();k.cancel();i.complete(new CB.MJ(g));});k=g.onError.listen((m){j.cancel();k.cancel();i.completeError(new StateError("Error loading image."));});if(bitmapDataLoadOptions.webp==false){g.src=h;return i.future;}rH.then(( p){var n=new RegExp(r"(png|jpg|jpeg)$",multiLine:false,caseSensitive:true);var l=n.firstMatch(h);if(p==false||l==null){g.src=h;}else{g.src=h.substring(0,h.length-l.group(1).length)+"webp";}});return i.future;} get width=>TL; get height=>fL; clone(){var g=new CB(TL,fL,true,0);g.yH(this);return g;} yH( h,[ matrix=null]){var g=kP();var i=new uB.LJ(g,matrix);h.VB(i);g.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);} clear(){var g=kP();g.clearRect(0,0,TL,fL);} VB( h){var g=h.context;switch (FM){case 0:g.drawImage(JN,dM,jM);break;case 1:g.drawImageScaledFromSource(JN,oM,qM,uM,BN,dM,jM,NM,XM);break;case 2:g.transform(0.0,-1.0,1.0,0.0,dM,jM+XM);g.drawImageScaledFromSource(JN,oM,qM,BN,uM,0.0,0.0,XM,NM);break;}} xF( aI, g){var iB=aI.context;if(g.width<=0.0||g.height<=0.0)return;switch (FM){case 0:iB.drawImageScaledFromSource(JN,g.x-dM,g.y-jM,g.width,g.height,g.x+dM,g.y+jM,g.width,g.height);break;case 1:var j=oM;var h=qM;var v=j+uM;var AB=h+BN;var l=oM-dM+g.x;var m=qM-jM+g.y;var RB=l+g.width;var MB=m+g.height;var p=(j>l)?j:l;var n=(h>m)?h:m;var xB=(v<RB)?v:RB;var kE=(AB<MB)?AB:MB;var k=xB-p;var i=kE-n;var lE=dM-j+p;var PC=jM-h+n;if(k>0.0&&i>0.0){iB.drawImageScaledFromSource(JN,p,n,k,i,lE,PC,k,i);}break;case 2:var j=oM;var h=qM;var v=j+BN;var AB=h+uM;var l=oM+jM-g.y+XM-g.height;var m=qM-dM+g.x;var RB=l+g.height;var MB=m+g.width;var p=(j>l)?j:l;var n=(h>m)?h:m;var xB=(v<RB)?v:RB;var kE=(AB<MB)?AB:MB;var k=kE-n;var i=xB-p;var lE=dM-h+n;var PC=jM+v-xB;if(k>0.0&&i>0.0){iB.transform(0.0,-1.0,1.0,0.0,lE,PC+i);iB.drawImageScaledFromSource(JN,p,n,i,k,0,0,i,k);}break;}} kP(){if(yM==null){var g=new rC.CanvasElement(width:TL,height:fL);yM=g.context2D;switch (FM){case 0:yM.drawImage(JN,dM,jM);break;case 1:yM.drawImageScaledFromSource(JN,oM,qM,uM,BN,dM,jM,NM,XM);break;case 2:yM.transform(0.0,-1.0,1.0,0.0,dM,jM+XM);yM.drawImageScaledFromSource(JN,oM,qM,BN,uM,0.0,0.0,XM,NM);yM.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);break;}FM=0;dM=oM=0;jM=qM=0;NM=uM=TL;XM=BN=fL;JN=g;}return yM;}}typedef  FD( ratio);typedef  cG<GD extends DB>( event);class hG<GD extends DB> extends jB.StreamSubscription<GD>{var VM;var eM;var hM;var lM;hG(this.VM,this.eM){hM=0;lM=false;} cancel(){if(lM==false){VM.uN(this);lM=true;eM=null;}} onError( g(error)){} get uO=>hM>0; pause([ resumeSignal]){hM++ ;if(resumeSignal!=null){resumeSignal.whenComplete(resume);}} resume(){if(uO==false){throw new StateError("Subscription is not paused.");}hM-- ;}}class RE{static const  TE="source-over";} ID( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";} tG( g){if(ME.containsKey(g)==false){ME[g]=new RF(g);}return ME[g];}final  UE=new FB.KJ();class GF{static var RH=sE.SF;static var WH=new jB.StreamController<String>();static var ZH=WH.stream.asBroadcastStream();static  get gH=>RH;}abstract class t extends QC implements IE{static var JH=0;var HN=JH++ ;var IL=0.0;var ML=0.0;var TN=0.0;var YN=0.0;var aN=1.0;var gN=1.0;var jN=0.0;var mN=0.0;var pN=0.0;var tN=1.0;var xN=true;var yN=false;var EO=null;var IO=null;var JO=null;var LO=false;var NO=null;var RO=null;var SO=null;var dL="";var ZO=null;final  bO=new FB.KJ();final  hO=new FB.KJ();var kO=true; get x=>IL; get y=>ML; get NC=>TN; get OC=>YN; get hB=>aN; get pB=>gN; get skewX=>jN; get skewY=>mN; get TB=>pN; get visible=>xN; get alpha=>tN; get jD=>SO; get name=>dL; get parent=>ZO; get oD{var g=this.qC;return (g!=null)?this.eC(g.PP):null;} get II{var g=this.oD;return (g!=null)?g.x:0.0;} get JI{var g=this.oD;return (g!=null)?g.y:0.0;} get root{var g=this;while (g.ZO!=null)g=g.ZO;return g;} get qC{var g=this.root;if(g is oC)return g;return null;}set x( g){IL=g.toDouble();kO=true;}set y( g){ML=g.toDouble();kO=true;}set NC( g){TN=g.toDouble();kO=true;}set OC( g){YN=g.toDouble();kO=true;}set hB( g){aN=g.toDouble();kO=true;}set pB( g){gN=g.toDouble();kO=true;}set skewX( g){jN=g.toDouble();kO=true;}set skewY( g){mN=g.toDouble();kO=true;}set TB( g){pN=g.toDouble();kO=true;}set visible( g){xN=g;}set alpha( g){tN=g.toDouble();}set mask( g){EO=g;}set jD( g){SO=g;} setTransform( h, g,[ scaleX, scaleY, rotation, skewX, skewY, pivotX, pivotY]){kO=true;IL=h.toDouble();ML=g.toDouble();if(scaleX!=null){aN=scaleX.toDouble();if(scaleY!=null){gN=scaleY.toDouble();if(rotation!=null){pN=rotation.toDouble();if(skewX!=null){jN=skewX.toDouble();if(skewY!=null){mN=skewY.toDouble();if(pivotX!=null){TN=pivotX.toDouble();if(pivotY!=null)YN=pivotY.toDouble();}}}}}}} get width=>mB(iO).width; get height=>mB(iO).height; set width( h){this.hB=1;var g=this.width;this.hB=(g!=0.0)?h/g:1.0;} set height( h){this.pB=1;var g=this.height;this.pB=(g!=0.0)?h/g:1.0;} eE(){if(ZO!=null)ZO.CC(this);} get iO{if(kO){kO=false;var j=jN+pN;var i=mN+pN;if(j==0.0&&i==0.0){hO.qD(aN,0.0,0.0,gN,IL-TN*aN,ML-YN*gN);}else{var g,l,k,h;var m=WB.cos(j);var n=WB.sin(j);if(j==i){g=aN*m;l=aN*n;k=-gN*n;h=gN*m;}else{g=aN*WB.cos(i);l=aN*WB.sin(i);k=-gN*n;h=gN*m;}var v=IL-(TN*g+YN*k);var p=ML-(TN*l+YN*h);hO.qD(g,l,k,h,v,p);}}return hO;} hE( h){if(h==ZO)return iO.clone();if(h.ZO==this)return h.iO.eF();var j=new FB.KJ();var g=this;while (g!=h&&g.ZO!=null){j.concat(g.iO);g=g.ZO;}if(h==null&&g!=null){j.concat(g.iO);g=null;}if(g==h)return j;var k=new FB.KJ();var i=h;while (i!=this&&i.ZO!=null){k.concat(i.iO);i=i.ZO;}k.mF();if(i==this)return k;if(i!=g)return null;j.concat(k);return j;} mB( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new IB.IJ();returnRectangle.x=g.qB;returnRectangle.y=g.rB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} oB( g, h){if(mB(UE).contains(g,h))return this;return null;} eC( h){bO.BI();for(t g=this;g!=null;g=g.ZO)bO.concat(g.iO);bO.mF();return bO.vD(h);} dispatchEvent( h){var g=null;if(h.hD||h.bubbles){for(t j=ZO;j!=null;j=j.ZO){if(j.oO(h.type,h.hD,h.bubbles)){if(g==null)g=aD.uF() as List<t>;g.add(j);}}}if(h.hD&&g!=null){for(int i=g.length-1;i>=0&&h.sD==false;i-- ){g[i].MO(h,this,g[i],jC.yE);}}if(h.sD==false){MO(h,this,this,jC.bD);}if(h.bubbles&&g!=null){for(int i=0;i<g.length&&h.sD==false;i++ ){g[i].MO(h,this,g[i],jC.sG);}}if(g!=null){g.clear();aD.wF(g);}} BP( h){for(var g=h;g!=null;g=g.ZO)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");ZO=h;} VB( g);}class JC{static const  FH="B";static const  IH="BL";static const  NH="BR";static const  jG="L";static const  rG="R";static const  QH="T";static const  SH="TL";static const  VH="TR";static const  SF="";}class uB{final  yM;var nL=0.0;var IN=0.0;var ON;var ZN;uB.LJ( i,[ matrix]):yM=i{ZN=null;for(int h=0;h<100;h++ ){ZN=new CD(ZN);}ON=ZN;if(matrix!=null){ON.matrix.kD(matrix);}var g=ON.matrix;yM.setTransform(g.a,g.b,g.c,g.d,g.qB,g.rB);yM.globalAlpha=1.0;yM.globalCompositeOperation=RE.TE;} get context=>yM; get currentTime=>nL; reset([ matrix, currentTime, deltaTime]){nL=?currentTime?currentTime:0.0;IN=?deltaTime?deltaTime:0.0;ON=ZN;if(matrix!=null){ON.matrix.kD(matrix);}var g=ON.matrix;yM.setTransform(g.a,g.b,g.c,g.d,g.qB,g.rB);yM.globalAlpha=1.0;yM.globalCompositeOperation=RE.TE;yM.clearRect(0,0,yM.canvas.width,yM.canvas.height);} yF( h){var g=h.iO;var RB=h.tN;var j=h.EO;var k=h.RO;var n=h.SO;var MB=h.IO;var l=ON as CD;var i=ON.next as CD;ON=i;var v=i.matrix;var p=l.alpha*RB;var AB=(n!=null)?n:l.jD;v.aE(g,l.matrix);i.alpha=p;i.jD=AB;if(j!=null||k!=null){yM.save();if(j!=null){if(j.fC==null){g=i.matrix;}else if(identical(j.fC,h)){g=i.matrix;}else if(identical(j.fC,h.parent)){g=l.matrix;}else{g=j.fC.hE(h);if(g==null)g=UE;else g.concat(i.matrix);}j.VB(this,g);}if(k!=null){if(k.fC==null){g=i.matrix;}else if(identical(k.fC,h)){g=i.matrix;}else if(identical(k.fC,h.parent)){g=l.matrix;}else{g=k.fC.hE(h);if(g==null)g=UE;else g.concat(i.matrix);}k.VB(this,g);}}var m=v;yM.setTransform(m.a,m.b,m.c,m.d,m.qB,m.rB);yM.globalCompositeOperation=AB;yM.globalAlpha=p;if(MB!=null){MB.VB(this);}else{h.VB(this);}if(j!=null||k!=null){yM.restore();}ON=l;}}class UC extends tB{final  QN;final  XN;final  eN;var iN;var nN;var qN;var vN;var zL;var nL;var AO;var CO;var FO;UC( g, h, i,[ transitionFunction]):QN=g,XN=h,eN=(transitionFunction!=null)?transitionFunction:PB.VC{iN=g;nL=0.0;zL=WB.max(0.0001,i);AO=0.0;CO=false;FO=false;} BC( i){if(nL<zL||FO==false){nL=nL+i;if(nL>zL)nL=zL;if(nL>=0.0){if(FO==false){FO=true;if(nN!=null)nN();}var g=nL/zL;var h=eN(g);iN=QN+h*(XN-QN);if(qN!=null)qN(CO?iN.round():iN);if(vN!=null&&nL==zL)vN();}}return nL<zL;} get rD=>QN; get tD=>XN; get totalTime=>zL; get currentTime=>nL;set XC( g){if(FO==false)nL=nL+AO-g;AO=g;} set onStart( g()){nN=g;} set MC( g( value)){qN=g;} set onComplete( g()){vN=g;}} PH( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class RF{var fontStyle;var LD=0;var mD=0;var height=0;RF( j){this.fontStyle=j;var h=new rC.Element.tag("span");h.style.font=this.fontStyle;h.text="Hg";var g=new rC.Element.tag("div");g.style.display="inline-block";g.style.width="1px";g.style.height="0px";var i=new rC.Element.tag("div");i.append(g);i.append(h);rC.document.body.append(i);try {g.style.verticalAlign="baseline";this.LD=g.offsetTop-h.offsetTop;g.style.verticalAlign="bottom";this.height=g.offsetTop-h.offsetTop;this.mD=height-LD;}catch (k){}finally {i.remove();}}}class PB{static  VC( g){return g;}static  XF( g){return g*g*g;}static  AC( g){g=1.0-g;return 1.0-g*g*g;}static  uH( g){if(g==0.0||g==1.0)return g;return WB.pow(2.0,-10.0*g)*WB.sin((g-0.3/4.0)*(2.0*WB.PI)/0.3)+1;}}class yC{static const  NE="auto";static const  aH="stop";static const  XE="once";} cH( g){if(g is bool){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a bool.");}}class UF{var target=null;var WC=false;var ZE=0;var MD=0;var rF,sF;var pF,qF;UF(this.rF,this.sF,this.pF,this.qF);}class pI extends FE{final  aO;pI( i, g, h, j):aO=new IB(i,g,h,j); VB( i, g){var h=i.context;h.setTransform(g.a,g.b,g.c,g.d,g.qB,g.rB);h.beginPath();h.rect(aO.x,aO.y,aO.width,aO.height);h.clip();}} bC( g){if(g is int){return g;}else{throw new ArgumentError("The supplied value (${g}) is not an int.");}}class vB{final  dE;var rD=double.NAN;var tD=double.NAN;vB(this.dE); aB( g){this.tD=g.toDouble();} get FI=>!rD.isNaN&&!tD.isNaN; qO( g){switch (dE){case 'x':return g.x;case 'y':return g.y;case 'pivotX':return g.NC;case 'pivotY':return g.OC;case 'scaleX':return g.hB;case 'scaleY':return g.pB;case 'skewX':return g.skewX;case 'skewY':return g.skewY;case 'rotation':return g.TB;case 'alpha':return g.alpha;default:return 0.0;}} HP( g, h){switch (dE){case 'x':g.x=h;break;case 'y':g.y=h;break;case 'pivotX':g.NC=h;break;case 'pivotY':g.OC=h;break;case 'scaleX':g.hB=h;break;case 'scaleY':g.pB=h;break;case 'skewX':g.skewX=h;break;case 'skewY':g.skewY=h;break;case 'rotation':g.TB=h;break;case 'alpha':g.alpha=h;break;}}}class hH{static var iH=0;var uD=iH++ ;var target=null;var pD=false;hH(this.target,this.pD);}class oC extends iC{var HO;var yM;var xO,yO;var zN,BO;var AP,CP;var DP;var FP;var GP;var LL;var uI=30;var JP;var KP;var LP;var MP;var NP;var OP;var PP;var QP;var RP;var SP;var TP;var VP;var WP;oC( h, g){dL=h;HO=g;HO.focus();yM=g.context2D;zN=xO=g.width;BO=yO=g.height;AP=g.clientWidth;CP=g.clientHeight;DP=new FB.KJ();FP=new FB.KJ();GP=null;LL=new ED();KP=new uB.LJ(yM);LP=yC.NE;MP=DD.IF;NP=JC.SF;RP=[new UF(s.cD,s.WE,s.aC,s.qG),new UF(s.TH,s.XH,s.QF,s.QF),new UF(s.bH,s.eH,s.TF,s.TF)];OP=yB.QE;QP=null;PP=new JB(0,0);TP=new s(s.aC,true);mC.OH.listen(OH);HO.onMouseDown.listen(UN);HO.onMouseUp.listen(UN);HO.onMouseMove.listen(UN);HO.onMouseOut.listen(UN);HO.onMouseWheel.listen(dP);SP=new Map<int,hH>();WP=new XB(XB.zE,true);GF.ZH.listen(eP);eP(null);VP=new HC(HC.OE,true);HO.onKeyDown.listen(fP);HO.onKeyUp.listen(fP);HO.onKeyPress.listen(gP);} get fE=>GP; get cE=>LL; get oD=>PP; get focus=>JP;set TI( g){LP=g;} get align=>NP;iP(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){iP();}set y( g){iP();}set NC( g){iP();}set OC( g){iP();}set hB( g){iP();}set pB( g){iP();}set skewX( g){iP();}set skewY( g){iP();}set TB( g){iP();}set alpha( g){iP();}set width( g){iP();}set height( g){iP();}HI( g, h){if(LP==yC.NE||LP==yC.XE){jP();KP.reset(FP,g,h);VB(KP);if(LP==yC.XE)LP=yC.aH;}}jP(){var m=HO.getBoundingClientRect();var n=HO.clientLeft+m.left;var p=HO.clientTop+m.top;var k=HO.clientWidth;var l=HO.clientHeight;if(k==0||l==0)return;var g=xO;var h=yO;var i=0;var j=0;switch (MP){case DD.eG:g=xO;h=yO;break;case DD.oG:if(k*yO>l*xO){h=(xO*l)~/k;}else{g=(yO*k)~/l;}break;case DD.xG:g=k;h=l;break;case DD.IF:if(k*yO>l*xO){g=(yO*k)~/l;}else{h=(xO*l)~/k;}break;}switch (NP){case JC.FH:i=(xO-g+1)~/2;j=(yO-h);break;case JC.IH:i=0;j=(yO-h);break;case JC.NH:i=(xO-g);j=(yO-h);break;case JC.jG:i=0;j=(yO-h+1)~/2;break;case JC.rG:i=(xO-g);j=(yO-h+1)~/2;break;case JC.QH:i=(xO-g+1)~/2;j=0;break;case JC.SH:i=0;j=0;break;case JC.VH:i=(xO-g+1);j=0;break;case JC.SF:i=(xO-g+1)~/2;j=(yO-h+1)~/2;break;}FP.qD(1.0,0.0,0.0,1.0,0-i,0-j);DP.qD(g/k,0.0,0.0,h/l,i-n,j-p);if(zN!=g||BO!=h){HO.width=zN=g;HO.height=BO=h;}if(AP!=k||CP!=l){AP=k;CP=l;dispatchEvent(new DB(DB.LH));}}OH( g){HO.style.cursor=mC.VF(OP);}UN( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var v=j.button;var h=null;var i=DP.EP(j.client);var m=null;if(v<0||v>2)return;if(j.type=="mousemove"&&PP.iF(i))return;var g=RP[v];PP=i;if(mC.DF!=null)mC.DF.mO();if(j.type!="mouseout")h=oB(i.x,i.y) as QB;var l=yB.QE;if(h is BB&&(h as BB).jE){l=yB.SE;}if(h is tC&&(h as tC).jE){l=yB.SE;}if(OP!=l){OP=l;HO.style.cursor=mC.VF(l);}if(QP!=null&&QP!=h){QP.dispatchEvent(TP..DO(s.eD,true)..wO=(QP.qC!=null)?QP.eC(i):new JB.IJ()..zO=i..nO=g.WC);QP=null;}if(h!=null&&h!=QP){h.dispatchEvent(TP..DO(s.MF,true)..wO=h.eC(i)..zO=i..nO=g.WC);QP=h;}var k=null;var p=false;var AB=false;if(j.type=="mousedown"){k=g.rF;if(h!=g.target||n>g.ZE+500)g.MD=0;g.WC=true;g.target=h;g.ZE=n;g.MD++ ;}if(j.type=="mouseup"){k=g.sF;g.WC=false;p=(g.target==h);AB=p&&g.MD.isEven&&(n<g.ZE+500);}if(j.type=="mousemove"){k=s.LF;}if(k!=null&&h!=null){m=h.eC(i);h.dispatchEvent(TP..DO(k,true)..wO=m..zO=i..nO=g.WC..rO=g.MD);if(p){if(AB&&h.xH){h.dispatchEvent(TP..DO(g.qF,true)..wO=m..zO=i..nO=g.WC);}else{h.dispatchEvent(TP..DO(g.pF,true)..wO=m..zO=i..nO=g.WC);}}}}dP( h){var g=DP.EP(h.client);var i=oB(g.x,g.y) as QB;if(i!=null){i.dispatchEvent(TP..DO(s.NF,true)..wO=i.eC(g)..zO=g..sO=h.deltaX..tO=h.deltaY);if(TP.sD)h.preventDefault();}}var mP=[] ;eP( h){mP.forEach((g)=>g.cancel());if(GF.gH==sE.vG){mP=[HO.onTouchStart.listen(nP),HO.onTouchEnd.listen(nP),HO.onTouchMove.listen(nP),HO.onTouchEnter.listen(nP),HO.onTouchLeave.listen(nP),HO.onTouchCancel.listen(nP)];}}nP( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=DP.EP(m.client);var h=oB(i.x,i.y) as QB;var g=SP.containsKey(l)?SP[l]:new hH(h,SP.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(WP..DO(XB.KH,true)..wO=(g.target.qC!=null)?g.target.eC(i):new JB.IJ()..zO=i..OO=g.uD..QO=g.pD);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(WP..DO(XB.GH,true)..wO=h.eC(i)..zO=i..OO=g.uD..QO=g.pD);g.target=h;}var k=null;if(j.type=="touchstart"){SP[l]=g;k=XB.zE;}if(j.type=="touchend"){SP.remove(l);k=XB.BF;}if(j.type=="touchcancel"){SP.remove(l);k=XB.EF;}if(j.type=="touchmove"){k=XB.KF;}if(k!=null&&h!=null){h.dispatchEvent(WP..DO(k,true)..wO=h.eC(i)..zO=i..OO=g.uD..QO=g.pD);}}}fP( g){g.preventDefault();var h=null;if(g.type=="keyup")h=HC.AF;if(g.type=="keydown")h=HC.OE;VP..DO(h,true)..LN=g.altKey..NN=g.ctrlKey..SN=g.shiftKey..kN=g.charCode..oN=g.keyCode..rN=uC.dG;if(g.keyLocation==rC.KeyLocation.LEFT)VP.rN=uC.jG;if(g.keyLocation==rC.KeyLocation.RIGHT)VP.rN=uC.rG;if(g.keyLocation==rC.KeyLocation.NUMPAD)VP.rN=uC.wG;if(g.keyLocation==rC.KeyLocation.JOYSTICK)VP.rN=uC.HF;if(g.keyLocation==rC.KeyLocation.MOBILE)VP.rN=uC.HF;if(JP!=null)JP.dispatchEvent(VP);}gP( g){var i=(g.charCode!=0)?g.charCode:g.keyCode;var h=new vE(vE.pG,true);h.aL=new String.fromCharCodes([i]);if(JP!=null)JP.dispatchEvent(h);}} WF( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);} mH( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";} nH(){var i=new jB.Completer<bool>();var g=new rC.ImageElement(); h(){i.complete(g.width==2&&g.height==2);}g.onLoad.listen((j)=>h());g.onError.listen((j)=>h());g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return i.future;}class cB implements tB{final  YP;final  eN;final  aP=new List<vB>();var nN;var qN;var vN;var bP;var zL;var nL;var AO;var CO;var FO;cB( g, h,[ transitionFunction]):YP=g,eN=(?transitionFunction)?transitionFunction:PB.VC{bP=new wE(this);nL=0.0;zL=WB.max(0.0001,h);AO=0.0;CO=false;FO=false;} get dB=>bP; TM( g){if(YP!=null&&FO==false){aP.add(g);}} BC( m){if(nL<zL||FO==false){nL=nL+m;if(nL>zL){nL=zL;}if(nL>=0.0){if(FO==false){FO=true;for(int h=0;h<aP.length;h++ ){var g=aP[h];g.rD=g.qO(YP);}if(nN!=null){nN();}}var k=nL/zL;var l=eN(k).toDouble();for(int h=0;h<aP.length;h++ ){var g=aP[h];if(g.FI){var i=g.rD.toDouble();var n=g.tD.toDouble();var j=i+l*(n-i);g.HP(YP,CO?j.round():j);}}if(qN!=null){qN();}if(vN!=null&&nL==zL){vN();}}}return nL<zL;} get totalTime=>zL; get currentTime=>nL;set XC( g){if(FO==false)nL=nL+AO-g;AO=g;} set onStart( g()){nN=g;} set MC( g()){qN=g;} set onComplete( g()){vN=g;}}var rH=nH(); YE( g, m, n, j){m=m.toDouble();n=n.toDouble();var PC=0.0;var xB=0.0;var AB=m*g.a;var iB=m*g.b;var MB=m*g.a+n*g.c;var v=m*g.b+n*g.d;var RB=n*g.c;var p=n*g.d;var h=PC;if(h>AB)h=AB;if(h>MB)h=MB;if(h>RB)h=RB;var i=xB;if(i>iB)i=iB;if(i>v)i=v;if(i>p)i=p;var l=PC;if(l<AB)l=AB;if(l<MB)l=MB;if(l<RB)l=RB;var k=xB;if(k<iB)k=iB;if(k<v)k=v;if(k<p)k=p;if(j==null)j=new IB.IJ();j.x=g.qB+h;j.y=g.rB+i;j.width=l-h;j.height=k-i;return j;}//@ sourceMappingURL=escape.dart.map
