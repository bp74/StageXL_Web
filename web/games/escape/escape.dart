import "dart:math" as XB;import "dart:async" as nB;import "dart:html" as jC;import "dart:web_audio" as FF;import "dart:convert" as eJ;class fJ{static const String gJ="Chrome";static const String hJ="Firefox";static const String iJ="Internet Explorer";static const String jJ="Safari";final String kI;final String minimumVersion;const fJ(this.kI,[this.minimumVersion]);}class kJ{const kJ();}class lJ{final String name;const lJ(this.name);}class mJ{const mJ();}class nJ{const nJ();}class oJ extends FB{HB NK;PB RK;AH YK;GD gK;GD oK;BH uK;fE PK;CH zK;DH CL;SC EL;SC HL;int OK;int KL;int LL;int ML;int NL;FB PL;FB QL;FB RL;eB TL;aC UL;oJ(HB k,PB l){NK=k;RK=l;MB g=new MB(NK.BB("ShuffleButtonNormal"));MB h=new MB(NK.BB("ShuffleButtonPressed"));gK=new GD(g,g,h,h);gK.addEventListener(u.mC,mL);gK.x=530;gK.y=525;s(gK);MB i=new MB(NK.BB("ExitButtonNormal"));MB j=new MB(NK.BB("ExitButtonPressed"));oK=new GD(i,i,j,j);oK.addEventListener(u.mC,oL);oK.x=700;oK.y=500;s(oK);YK=new AH(NK,RK);YK.x=540;YK.y=-1000;s(YK);PK=new fE(10,NK.BB("TimeGauge"),nD.iE);PK.x=659;PK.y=244;PK.addEventListener("TimeShort",qL);PK.addEventListener("TimeOver",jL);s(PK);RK.add(PK);zK=new CH(NK,RK);zK.x=640;zK.y=230;s(zK);CL=new DH(NK,RK);CL.x=665;CL.y=160;s(CL);EL=new SC();EL.KC=new PD("Arial",30,0xD0D0D0,bold:true,align:EC.dC);EL.width=140;EL.height=36;EL.wordWrap=false;EL.x=646;EL.y=130;EL.WB=false;EL.text="0";EL.lB=0.9;s(EL);HL=new SC();HL.KC=new PD("Arial",20,0xFFFFFF,bold:true,align:EC.dC);HL.width=44;HL.height=30;HL.wordWrap=false;HL.x=610;HL.y=559;HL.WB=false;HL.text="3x";s(HL);PL=new FB();s(PL);QL=new FB();s(QL);RL=new FB();s(RL);TL=NK.rB("Intro");UL=TL.play();}void start(){OK=1;KL=1;NL=0;LL=3;RE g=new RE(NK,RK,NK.KD("ESCStartText"));QL.s(g);RK.kB(()=>zK.dG(21),1);g.show(()=>RK.kB(()=>vL(),0.5));}void vL(){if(uK!=null&&this.contains(uK))PL.LC(uK);int l=OK;int g=0;num h=0;switch (OK){case 01:h=50;uK=new BH(NK,RK,g=40,3,0,0,0,0,[0,1,2]);break;case 02:h=45;uK=new BH(NK,RK,g=45,3,1,0,0,0,[2,3,4]);break;case 03:h=40;uK=new BH(NK,RK,g=50,4,2,2,1,0,[5,6,7]);break;case 04:h=35;uK=new BH(NK,RK,g=55,4,3,3,2,0,[0,2,6]);break;case 05:h=30;uK=new BH(NK,RK,g=60,5,4,4,2,1,[1,3,5]);break;case 06:h=34;uK=new BH(NK,RK,g=60,5,5,5,3,2,[1,2,4,7]);break;case 07:h=33;uK=new BH(NK,RK,g=65,5,5,6,3,2,[0,1,2,3]);break;case 08:h=32;uK=new BH(NK,RK,g=70,5,5,6,3,2,[0,2,5,6]);break;case 09:h=31;uK=new BH(NK,RK,g=75,5,5,6,3,2,[1,4,5,7]);break;default:h=30;uK=new BH(NK,RK,g=80+(OK-10)*5,5,5,6,3,2,[0,1,2,3]);break;}ML=g;if(LL<3){LL++ ;HL.text="${LL}x";}uK.addEventListener(dB.IF,wL);uK.addEventListener(dB.kD,xL);uK.addEventListener(dB.JF,yL);uK.addEventListener(dB.VE,zL);uK.x=20;uK.y=16;uK.WB=false;PL.s(uK);PK.reset(h);PK.DE("TimeShort",9);PK.DE("TimeOver",0);PK.pause();YK.AJ=l;YK.LG=g;YK.y=-210;fB j=new fB(YK,0.4,RB.IC);j.gB.y.cB(-90);RK.add(j);RE k=new RE(NK,RK,NK.KD("ESCLevelBoxText").replaceAll("{0}","${g}"));QL.s(k);k.show((){uK.WB=true;PK.start();if(TL!=null){eC i=new eC(1.0,0.0,4.0,RB.fC);i.XC=(m){UL.MC.volume=m;UL.MC=UL.MC;};i.onComplete=(){UL.stop();zK.FJ();};RK.add(i);TL=null;}});}void qL(CB g){CL.start();}void jL(CB g){uK.nG(OC.UE);}void xL(dB j){int g=0;NB k=j.info["Position"];String h=j.info["Type"];if(h=="SingleLocked")g=3000;if(h=="SingleUnlocked")g=1000;if(h=="All")g=10000;HF i=new HF(NK,RK,g);i.x=k.x;i.y=k.y;PL.s(i);NL=NL+g;EL.text="${NL}";}void wL(dB j){int g=ML;int i=j.info["Length"];int k=j.info["Factor"];g=(g>i)?g-i:0;ML=g;YK.LG=g;if(g==0)uK.nG(OC.TE);int h=0;switch (i){case 3:h=1000;break;case 4:h=2000;break;case 5:h=5000;break;default:h=5000;break;}NL=NL+h*k;EL.text="${NL}";}void yL(dB m){PK.pause();CL.stop();eB k=NK.rB("Laugh");eB l=NK.rB("LevelUp");k.play();zK.dG(3);FB g=xB.GH(NK,RK);g.x=55;g.y=260;PL.s(g);RK.kB((){uK.RG();l.play();},2.0);RK.kB((){int j=(PK.RJ*1000).toInt();HF h=new HF(NK,RK,j);h.x=704;h.y=360;PL.s(h);NL=NL+j;EL.text="${NL}";},2.5);fB i=new fB(YK,0.5,RB.IC);i.gB.y.cB(-210);i.hC=3.0;RK.add(i);RK.kB((){PL.LC(g);},3.5);RK.kB((){OK++ ;vL();},4.0);}void zL(dB i){CL.stop();uK.RG();RE g;if(KL>0){KL-- ;g=new RE(NK,RK,NK.KD("GEN2ndchancetime"));QL.s(g);NK.rB("LevelUp").play();g.show((){RK.kB(()=>vL(),0.5);fB h=new fB(YK,0.5,RB.IC);h.gB.y.cB(-210);RK.add(h);});}else{g=new RE(NK,RK,NK.KD("GENtimeup"));QL.s(g);NK.rB("GameOver").play();g.show((){RK.kB(()=>DM(),0.5);fB h=new fB(YK,0.5,RB.IC);h.gB.y.cB(-210);RK.add(h);});}}void mL(u h){if(uK!=null&&LL>0){bool g=uK.jG();if(g){LL=LL-1;HL.text="${LL}x";}}}void oL(u j){FB h=new FB();h.s(new MB(new EB(800,600,false,0x000000)));h.alpha=0.6;RL.s(h);EH g=new EH(NK,RK);g.x=235;g.y=150;RL.s(g);g.show((bool i){RL.LC(g);if(i==false)RL.LC(h);else FM(false);});}DM(){FB h=new FB();MB j=new MB(NK.BB("ExitBox"));h.s(j);SC g=new SC();g.KC=new PD("Arial",30,0xFFFFFF,bold:true,align:EC.dC);g.width=240;g.height=200;g.wordWrap=true;g.text=NK.KD("GENgameover");g.x=47;g.y=30+(g.height-g.BF)/2;g.WB=false;h.s(g);h.x=110;h.y=-h.height;QL.s(h);RK.kB(()=>NK.rB("Laugh").play(),0.3);fB i=new fB(h,0.3,RB.IC);i.gB.y.cB(150);RK.add(i);RK.kB(()=>FM(true),5.0);h.addEventListener(u.mC,(u k)=>FM(true));}bool GM=false;void FM(bool g){PK.pause();if(GM==false){GM=true;}}}class RE extends FB{HB NK;PB RK;ZE cK;Function iK;RE(HB h,PB i,String j){NK=h;RK=i;MB k=new MB(NK.BB("MessageBox"));s(k);SC g=new SC();g.KC=new PD("Arial",24,0xFFFFFF,bold:true,align:EC.dC);g.width=240;g.height=200;g.wordWrap=true;g.text=j;g.x=47;g.y=130-g.BF/2;g.WB=false;s(g);cK=null;addEventListener(u.mC,eL);}void show(Function h){this.parent.s(this);this.x=-this.width;this.y=150;iK=h;fB g=new fB(this,0.3,RB.IC);g.gB.x.cB(110);g.onComplete=()=>cK=RK.kB(nL,10);RK.add(g);}void nL(){if(cK!=null){RK.remove(cK);cK=null;iK();fB g=new fB(this,0.4,RB.IG);g.gB.x.cB(800);g.onComplete=()=>this.parent.LC(this);RK.add(g);}}void eL(u g){nL();}}class BH extends FB{int vK;int FL;int JL;int OL;int SL;int VL;int WL;HB NK;PB RK;XB.Random XL;int YL;List<int> ZL;List<OB> aL;List<OB> bL;List<iD> cL;List<NB> dL;bool fL;FB gL;FB hL;FB iL;FB kL;FB lL;BH(HB l,PB m,int n,int o,int q,int t,int AB,int GB,List<int> k){NK=l;RK=m;XL=new XB.Random();YL=OC.OD;ZL=k;vK=n;FL=o;JL=q;OL=t;SL=AB;VL=GB;WL=k.length;dL=new List<NB>();gL=new FB();hL=new FB();iL=new FB();kL=new FB();lL=new FB();s(gL);s(hL);s(iL);s(kL);s(lL);hL.WB=false;iL.WB=false;kL.WB=false;lL.WB=false;vI();wI();uI();fL=true;ND KB=new ND();this.mask=new oD.HK(0.0,0.0,500.0,500.0);for(int g=0;g<10;g++ ){for(int h=0;h<10;h++ ){OB i=bL[g+h*10];i.x=g*50+25;i.y=h*50+25-550;i.wB(gL,hL,iL);eC j=new eC(i.y,h*50+25,0.4,RB.IC);j.hC=g*0.03;j.XC=(SB){i.y=SB;};j.onComplete=(){if(KB.IE()==100){tL();fL=false;dL.clear();this.mask=null;}};RK.add(j);}}addEventListener(u.vD,uL);}void nG(int g){if(g==OC.TE){YL=g;}if(g==OC.UE&&YL==OC.OD){YL=g;if(fL==false)dispatchEvent(new dB(dB.VE,null));}}void RG(){this.mask=new oD.HK(0.0,0.0,500.0,500.0);for(int h=0;h<10;h++ ){for(int i=0;i<10;i++ ){OB g=bL[i+h*10];g.hB=false;g.WC=false;g.LB=DB.jD;g.wB(gL,hL,iL);eC j=new eC(g.y,500+h*50+25,0.5,RB.IC);j.hC=i*0.1;j.XC=(k){g.y=k;};RK.add(j);}}}void vI(){cL=new List<iD>();for(int h=0;h<FL;h++ ){iD g=new iD(NK,RK,h);g.VB=(XL.nextInt(30)-15)*XB.PI/180;g.x=300-(90*FL)/2+h*90+XL.nextInt(20)-10;g.y=550;cL.add(g);kL.s(g);}}int PG(int g,int h){int i=0;OB j=bL[g+h*10];if(j.direction==0){OB k=(g>0)?bL[g-1+h*10]:null;OB l=(g<9)?bL[g+1+h*10]:null;if(j.oC(k))i++ ;if(j.oC(l))i++ ;}else{OB m=(h>0)?bL[g+(h-1)*10]:null;OB n=(h<9)?bL[g+(h+1)*10]:null;if(j.yC(m))i++ ;if(j.yC(n))i++ ;}return i;}bool NG(){for(int g=0;g<10;g++ ){for(int h=0;h<10;h++ ){OB i=bL[h+g*10];int j=WL*2;while (PG(h,g)==2&&j>0){if(j%2==0){i.direction=1-i.direction;j-- ;}else{int m=0;for(int k=0;k<ZL.length;k++ )if(i.color==ZL[k])m=k;i.color=ZL[(m+1)%ZL.length];j-- ;}}}}bool l=false;for(int g=0;g<10;g++ ){for(int h=0;h<10;h++ ){l=l||(PG(h,g)==2);}}return l;}bool fG(){for(int g=0;g<10;g++ )for(int h=1;h<9;h++ )if(bL[(h-1)+g*10].GE(bL[h+g*10])&&bL[h+g*10].GE(bL[(h+1)+g*10]))return true;for(int h=0;h<10;h++ )for(int g=1;g<9;g++ )if(bL[h+(g-1)*10].GE(bL[h+g*10])&&bL[h+g*10].GE(bL[h+(g+1)*10]))return true;return false;}void AM(String j,int k,int l){for(int g=0;g<20;g++ ){int h=vK~/l;int i=k*h+XL.nextInt(h);if(aL[i].LB==DB.jD){aL[i].LB=j;return;}}}void wI(){aL=new List<OB>();for(int g=0;g<vK;g++ ){int h=ZL[XL.nextInt(ZL.length)];int i=XL.nextInt(2);aL.add(new OB(NK,RK,h,i));}for(int g=0;g<FL*2;g++ )AM("Lock${(g%FL)+1}",g,FL*2);for(int g=0;g<JL;g++ )AM(DB.TB,g,JL);for(int g=0;g<OL;g++ )AM(DB.PC,g,OL);for(int g=0;g<SL;g++ )AM(DB.KF,g,SL);for(int g=0;g<VL;g++ )AM(DB.LF,g,VL);}void uI(){bL=new List<OB>();bool g=true;while (g){bL.clear();for(int h=0;h<100;h++ ){int i=ZL[XL.nextInt(ZL.length)];int j=XL.nextInt(2);bL.add(new OB(NK,RK,i,j));}g=NG();}}bool jG(){if(fL||YL!=OC.OD)return false;bool l=true;fL=true;while (l){for(int j=0;j<bL.length;j++ ){OB g=bL[j];g.hB=false;g.WC=false;g.wB(gL,hL,iL);g.color=ZL[XL.nextInt(ZL.length)];g.direction=XL.nextInt(2);}l=NG()||(fG()==false);}NK.rB("BonusUniversal").play();ND m=new ND();for(int i=0;i<10;i++ ){for(int k=0;k<10;k++ ){OB g=bL[i+k*10];g.kG=0.0;eC h=new eC(0.0,1.0,0.2,RB.fC);h.hC=i*0.06;h.XC=(n){g.kG=n;};h.onStart=(){g.wB(gL,hL,iL);};h.onComplete=(){if(m.IE()==100){tL();BM();dL.clear();}};RK.add(h);}}return true;}void tL(){for(int h=0;h<10;h++ ){for(int i=0;i<10;i++ ){OB g=bL[i+h*10];OB l=(i<9)?bL[i+1+h*10]:null;OB m=(h<9)?bL[i+(h+1)*10]:null;bool j=false;bool k=false;if(g.oC(l)){j=true;k=(g.LB==DB.TB||l.LB==DB.TB);}if(g.yC(m)){j=true;k=(g.LB==DB.TB||m.LB==DB.TB);}if(g.hB!=j||g.WC!=k){g.hB=j;g.WC=k;g.wB(gL,hL,iL);}}}}void CM(ND l,int m,int n,int k,int o,int q){fL=true;l.IE(k);int i=1;for(int g=0;g<k;g++ ){OB h=bL[m+g*o+(n+g*q)*10];if(h.LB==DB.KF)i=i*2;if(h.LB==DB.LF)i=i*5;int t=m+g*o;int AB=n+g*q;RK.kB((){h.empty=true;h.wB(gL,hL,iL);NK.rB("ChainBlast").play();IF j=new IF(NK,RK,h.color,h.direction);j.x=t*50;j.y=AB*50;RK.add(j);lL.s(j);OJ(h);if(l.QG()==0)EM();},0.1+g*0.1);}dispatchEvent(new dB(dB.IF,{"Length":k,"Factor":i}));}void BM(){fL=false;ND j=new ND();for(int h=0;h<10;h++ ){for(int i=0;i<10;){int g=1;while (i+g<10&&bL[i+g-1+h*10].oC(bL[i+g+h*10]))g++ ;if(g>=3)CM(j,i,h,g,1,0);i=i+g;}}for(int i=0;i<10;i++ ){for(int h=0;h<10;){int g=1;while (h+g<10&&bL[i+(h+g-1)*10].yC(bL[i+(h+g)*10]))g++ ;if(g>=3)CM(j,i,h,g,0,1);h=h+g;}}if(j.value==0){if(YL==OC.TE)dispatchEvent(new dB(dB.JF,null));if(YL==OC.UE)dispatchEvent(new dB(dB.VE,null));if(YL==OC.OD&&fG()==false)jG();}}void OJ(OB g){if(g.LB.indexOf("Lock")==0){int j=int.parse(g.LB.substring(4,5))-1;iD k=cL[j];MB h=xB.WE(NK,g.LB);h.x=g.x;h.y=g.y;s(h);fB i=new fB(h,0.5,RB.IC);i.gB.x.cB(k.x);i.gB.y.cB(k.y-10);i.onComplete=()=>LC(h);RK.add(i);RK.kB(()=>JJ(j),0.5);}}void JJ(int k){iD h=cL[k];dB i;if(h.eD){i=new dB(dB.kD,{"Type":"SingleLocked","Position":new NB(h.x+20,h.y)});NK.rB("Unlock").play();}else{i=new dB(dB.kD,{"Type":"SingleUnlocked","Position":new NB(h.x+20,h.y)});}dispatchEvent(i);h.eD=false;h.iG(false);bool j=true;for(int g=0;g<cL.length;g++ ){j=j&&(cL[g].eD==false);}if(j){NK.rB("BonusAllUnlock").play();for(int g=0;g<cL.length;g++ ){cL[g].eD=true;RK.kB(()=>cL[(g+k)%cL.length].UJ(),g*0.2);}RK.kB(()=>dispatchEvent(new dB(dB.kD,{"Type":"All","Position":new NB(280,550)})),0.75);}}void EM(){ND n=new ND();for(int i=0;i<10;i++ ){int k=9;int j=8;while (k>=0){while (k>=0&&bL[i+k*10].empty==false){k-- ;j-- ;}while (j>=0&&bL[i+j*10].empty==true){j-- ;}if(k>=0){OB g,h,l;if(j>=0){h=bL[i+j*10];if(i>0){l=bL[i-1+j*10];if(h.oC(l)){l.hB=false;l.wB(gL,hL,iL);}}h.hB=false;h.empty=true;h.wB(gL,hL,iL);}else{if(aL.length>0){h=aL.removeAt(0);}else{var o=ZL[XL.nextInt(ZL.length)];var q=XL.nextInt(2);h=new OB(NK,RK,o,q);}}g=bL[i+k*10];g.color=h.color;g.direction=h.direction;g.LB=h.LB;g.hB=false;g.empty=false;g.x=50*i+25;g.y=50*j+25;g.wB(gL,hL,iL);n.IE();eC m=new eC(g.y,50*k+25,0.1,RB.fC);m.XC=(t){g.y=t;};m.onComplete=(){if(n.QG()==0){tL();BM();HM();}};RK.add(m);}}}}void uL(u g){if(g.target==gL&&this.WB){int h=XB.min(g.wE/50,9).toInt();int i=XB.min(g.xE/50,9).toInt();NB j=new NB(h,i);dL.add(j);HM();}}void HM(){while (YL==OC.OD&&fL==false&&dL.length>0){NB m=dL.removeAt(0);int j=m.x.toInt();int k=m.y.toInt();OB g=bL[j+k*10];OB h=(j>0)?bL[j-1+k*10]:null;OB n=(j<9)?bL[j+1+k*10]:null;OB i=(k>0)?bL[j+(k-1)*10]:null;OB o=(k<9)?bL[j+(k+1)*10]:null;bool l=false;if(g.LB==DB.PC){NK.rB("ChainError").play();continue;}if(g.yC(i)){i.hB=false;i.wB(gL,hL,iL);}if(g.oC(h)){h.hB=false;h.wB(gL,hL,iL);}g.direction=1-g.direction;g.hB=false;g.WC=false;NK.rB("ChainRotate").play();if(g.oC(n)){g.hB=true;g.WC=(g.LB==DB.TB||n.LB==DB.TB);}if(g.yC(o)){g.hB=true;g.WC=(g.LB==DB.TB||o.LB==DB.TB);}g.wB(gL,hL,iL);l=l||g.hB;if(g.yC(i)){i.hB=true;i.WC=(g.LB==DB.TB||i.LB==DB.TB);i.wB(gL,hL,iL);l=true;}if(g.oC(h)){h.hB=true;h.WC=(g.LB==DB.TB||h.LB==DB.TB);h.wB(gL,hL,iL);l=true;}if(l){NK.rB("ChainLink").play();}BM();}}}class HF extends FB{HF(HB m,PB k,int l){SC g=new SC();g.KC=new PD("Arial",30,0xFFFFFF,bold:true,align:EC.dC);g.width=110;g.height=36;g.wordWrap=false;g.x=646;g.y=130;g.WB=false;g.text=l.toString();g.x=-g.width/2;g.y=-g.height/2;var h=new FB();h.s(g);s(h);eC j=new eC(0.0,1.0,1.5,RB.IC);j.XC=(i){h.alpha=1-i;h.y=-i*50;h.lB=1.0+0.1*XB.sin(i*10);h.tB=1.0+0.1*XB.cos(i*10);};j.onComplete=(){this.zE();};k.add(j);}}class dB extends CB{static const String IF="Explosion";static const String kD="Unlocked";static const String JF="Finalized";static const String VE="Timeouted";Map<String,dynamic> DL;dB(String g,Map<String,dynamic> h,[bool i=false]):super(g,i){DL=h;}Map<String,dynamic> get info{return DL;}}class ND{int value=0;int IE([int g=1])=>(value+= g);int QG([int g=1])=>(value-= g);}class OB{HB NK;PB RK;int VK;int XK;String fK;num kK;num nK;bool pK;bool tK;bool xK;v BL;v GL;v IL;OB(HB g,PB h,int i,int j){NK=g;RK=h;VK=i;XK=j;fK=DB.jD;kK=-1000;nK=-1000;pK=false;tK=false;xK=false;BL=null;GL=null;IL=null;}int get color=>VK;void set color(int g){VK=g;}int get direction=>XK;void set direction(int g){XK=g;}String get LB=>fK;void set LB(String g){fK=g;}bool get hB=>pK;void set hB(bool g){pK=g;}bool get WC=>tK;void set WC(bool g){tK=g;}bool get empty=>xK;void set empty(bool g){xK=g;}bool GE(OB g){bool h=g!=null&&(g.color==VK||g.LB==DB.TB||fK==DB.TB)&&g.LB!=DB.PC&&fK!=DB.PC;return h;}bool oC(OB g){bool h=g!=null&&(g.color==VK||g.LB==DB.TB||fK==DB.TB)&&g.direction==0&&XK==0&&g.LB!=DB.PC&&fK!=DB.PC;return h;}bool yC(OB g){bool h=g!=null&&(g.color==VK||g.LB==DB.TB||fK==DB.TB)&&g.direction==1&&XK==1&&g.LB!=DB.PC&&fK!=DB.PC;return h;}num get x=>kK;void set x(num g){kK=g;if(BL!=null)BL.x=g;if(GL!=null)GL.x=g;if(IL!=null)IL.x=g;}num get y=>nK;void set y(num g){nK=g;if(BL!=null)BL.y=g;if(GL!=null)GL.y=g;if(IL!=null)IL.y=g;}void set kG(num g){if(BL!=null){BL.lB=BL.tB=1+0.3*XB.sin(g*XB.PI);}}void wB(FB g,FB h,FB i){if(BL!=null){BL.parent.LC(BL);BL=null;}if(GL!=null){GL.parent.LC(GL);GL=null;}if(IL!=null){IL.parent.LC(IL);IL=null;}if(empty==false){switch (fK){case DB.TB:BL=new rJ(NK,RK,XK);BL.x=kK;BL.y=nK;g.s(BL);break;case DB.PC:BL=xB.WE(NK,DB.PC);BL.x=kK;BL.y=nK;g.s(BL);break;default:BL=xB.SE(NK,VK,XK);BL.x=kK;BL.y=nK;g.s(BL);break;}if(pK){GL=tK?new pJ(NK,RK,XK):xB.FH(NK,VK,XK);GL.x=kK+((XK==0)?25:0);GL.y=nK+((XK==1)?25:0);h.s(GL);}switch (fK){case DB.jD:break;case DB.PC:break;case DB.TB:break;default:IL=new qJ(NK,RK,fK);IL.x=kK;IL.y=nK;i.s(IL);break;}}}}class rJ extends FB implements oB{MB SK;List<EB> aK;num WK;rJ(HB h,PB g,int i){this.WB=false;WK=0.0;aK=xB.IH(h,i);SK=new MB(aK[0]);SK.x=-25;SK.y=-25;s(SK);addEventListener(CB.UD,(j)=>g.add(this));addEventListener(CB.XD,(j)=>g.remove(this));}bool DC(num g){WK+= g;int h=(WK*10).toInt()%aK.length;SK.JC=aK[h];return true;}}class pJ extends FB implements oB{MB SK;List<EB> aK;num WK;pJ(HB h,PB g,int i){this.WB=false;WK=0.0;aK=xB.JH(h,i);SK=new MB(aK[0]);SK.x=-25;SK.y=-25;s(SK);addEventListener(CB.UD,(j)=>g.add(this));addEventListener(CB.XD,(j)=>g.remove(this));}bool DC(num g){WK+= g;int h=(WK*10).toInt()%aK.length;SK.JC=aK[h];return true;}}class qJ extends FB implements oB{MB SK;num WK;qJ(HB h,PB g,String i){this.WB=false;WK=0.0;SK=xB.WE(h,i);s(SK);addEventListener(CB.UD,(j)=>g.add(this));addEventListener(CB.XD,(j)=>g.remove(this));}bool DC(num g){WK+= g;this.VB=XB.sin(WK*7)*10*XB.PI/180;return true;}}class GF{MB KG;num lG;num mG;num angle;num oG;num VB;}class iD extends FB{HB NK;PB RK;int VK;MB SK;List<EB> mK;bool sK;iD(HB h,PB i,int g){NK=h;RK=i;VK=g;mK=xB.KH(NK,g);sK=true;SK=new MB(mK[0]);SK.x=-34;SK.y=-50;s(SK);}bool get eD=>sK;void set eD(bool g){sK=g;}void iG(bool g){SK.JC=mK[g?0:4];}void UJ(){eC i=new eC(0.0,1.0,2.0,RB.IC);i.XC=(j){lB=tB=1.0+0.2*XB.sin(j*4*XB.PI);};fB g=new fB(this,0.2,RB.IC);g.gB.alpha.cB(0.0);g.hC=2.0;g.onComplete=()=>iG(sK);fB h=new fB(this,0.2,RB.IG);h.gB.alpha.cB(1);h.hC=2.2;RK.add(i);RK.add(g);RK.add(h);}}class AH extends FB{int OK;SC QK;int UK;SC bK;FB hK;AH(HB h,PB i){s(new MB(h.BB("InfoBox")));QK=new SC();QK.KC=new PD("Arial",35,0xFFFFFF,bold:true,align:EC.dC);QK.width=220;QK.height=40;QK.wordWrap=false;QK.text="Level 1";QK.x=20;QK.y=115;QK.VB=-2*XB.PI/180;s(QK);bK=new SC();bK.KC=new PD("Arial",25,0xFFFFFF,bold:true,align:EC.dC);bK.width=220;bK.height=30;bK.wordWrap=false;bK.text="40";bK.x=-bK.width/2;bK.y=-bK.height/2;bK.VB=-2*XB.PI/180;hK=new FB();hK.s(bK);hK.x=150;hK.y=172;s(hK);MB g=xB.SE(h,3,0);g.x=110;g.y=171;g.VB=-2*XB.PI/180;g.lB=g.tB=0.6;s(g);}void set AJ(int g){OK=g;QK.text="Level ${OK}";}void set LG(int g){UK=g;bK.text="${UK}";}}class CH extends FB{HB NK;PB RK;List<EB> dK;MB jK;eC rK;CH(HB g,PB h){NK=g;RK=h;dK=xB.LH(NK);jK=new MB(dK[0]);jK.x=-jK.width/2;jK.y=-jK.height/2;s(jK);rK=null;}void dG(int g){RK.remove(rK);rK=new eC(0,g,0.5*g,RB.fC);rK.XC=(h){int i=((h*dK.length)%dK.length).toInt();jK.JC=dK[i];jK.y=XB.sin(h*2*XB.PI)*3-jK.height/2;};RK.add(rK);}void FJ(){RK.remove(rK);jK.JC=dK[0];}}class DH extends FB{HB NK;PB RK;List<EB> eK;MB lK;eB qK;aC wK;eC AL;DH(HB g,PB h){NK=g;RK=h;eK=xB.MH(NK);lK=new MB(eK[0]);qK=NK.rB("Warning");wK=null;s(lK);}void start(){wK=qK.play();RK.remove(AL);AL=new eC(0,80,9.0,RB.fC);AL.XC=(h){int g=h.toInt()%8;lK.JC=eK[(g<=4)?g+1:8-g];};RK.add(AL);}void stop(){if(wK!=null){wK.stop();wK=null;}RK.remove(AL);lK.JC=eK[0];}}class EH extends FB{fE PK;GD TK;GD ZK;Function iK;EH(HB h,PB i){MB n=new MB(h.BB("ExitBox"));s(n);SC g=new SC();g.KC=new PD("Arial",24,0xFFFFFF,bold:true,align:EC.dC);g.width=240;g.height=100;g.wordWrap=true;g.text=h.KD("GENexitquery");g.x=47;g.y=150-g.BF/2;g.WB=false;s(g);PK=new fE(7,h.BB("ExitGauge"),nD.lE);PK.x=268;PK.y=25;PK.addEventListener("TimeOver",jL);s(PK);PK.DE("TimeOver",0);PK.start();MB j=new MB(h.BB("ExitYesButtonNormal"));MB k=new MB(h.BB("ExitYesButtonPressed"));TK=new GD(j,j,k,k);TK.x=68;TK.y=239;TK.addEventListener(u.mC,pL);s(TK);MB l=new MB(h.BB("ExitNoButtonNormal"));MB m=new MB(h.BB("ExitNoButtonPressed"));ZK=new GD(l,l,m,m);ZK.x=173;ZK.y=232;ZK.addEventListener(u.mC,rL);s(ZK);this.addEventListener(CB.UD,(o)=>i.add(PK));this.addEventListener(CB.XD,(o)=>i.remove(PK));}void sL(bool g){if(iK!=null){iK(g);iK=null;}}void pL(u g){sL(true);}void rL(u g){sL(false);}void jL(CB g){sL(false);}show(Function g){iK=g;}}class DB{static const String jD="None";static const String TB="Joker";static const String PC="Block";static const String KF="Double";static const String LF="Quint";}class xB{static MB SE(HB h,int i,int j){MB g=new MB(h.iC("Elements").BB("Chain${i}${j}"));g.YC=25;g.ZC=25;return g;}static MB FH(HB h,int i,int j){MB g=new MB(h.iC("Elements").BB("Link${i}${j}"));g.YC=25;g.ZC=25;return g;}static MB WE(HB h,String i){MB g=new MB(h.iC("Elements").BB(i));g.YC=25;g.ZC=25;return g;}static FB GH(HB o,PB m){FB n=new FB();num l=0;jB q=o.iC("Levelup");for(int i=0;i<7;i++ ){MB g=new MB(q.BB("LevelUp${i}"));g.x=-g.width/2;g.y=-g.height/2;FB h=new FB();h.s(g);h.x=l+g.width/2;h.lB=0;h.tB=0;n.s(h);fB j=new fB(h,2.0,RB.gI);j.gB.lB.cB(1.0);j.gB.tB.cB(1.0);j.hC=i*0.05;fB k=new fB(h,0.4,RB.fC);k.gB.lB.cB(0.0);k.gB.tB.cB(0.0);k.hC=3.0;m.add(j);m.add(k);l=l+5+g.width;}return n;}static List<EB> IH(HB j,int h){jB i=j.iC("Elements");List<EB> g=new List<EB>();g.add(i.BB("JokerChain${h}0"));g.add(i.BB("JokerChain${h}1"));g.add(i.BB("JokerChain${h}2"));g.add(i.BB("JokerChain${h}3"));g.add(i.BB("JokerChain${h}4"));return g;}static List<EB> JH(HB j,int h){jB i=j.iC("Elements");List<EB> g=new List<EB>();g.add(i.BB("JokerLink${h}0"));g.add(i.BB("JokerLink${h}1"));g.add(i.BB("JokerLink${h}2"));g.add(i.BB("JokerLink${h}3"));g.add(i.BB("JokerLink${h}4"));return g;}static List<EB> KH(HB j,int h){jB i=j.iC("Locks");List<EB> g=new List<EB>();g.add(i.BB("Lock${h}0"));g.add(i.BB("Lock${h}1"));g.add(i.BB("Lock${h}2"));g.add(i.BB("Lock${h}3"));g.add(i.BB("Lock${h}4"));return g;}static List<EB> LH(HB i){jB h=i.iC("Head");List<EB> g=new List<EB>();g.add(h.BB("Head1"));g.add(h.BB("Head2"));g.add(h.BB("Head3"));g.add(h.BB("Head2"));g.add(h.BB("Head1"));return g;}static List<EB> MH(HB i){jB h=i.iC("Alarm");List<EB> g=new List<EB>();g.add(h.BB("Alarm0"));g.add(h.BB("Alarm1"));g.add(h.BB("Alarm2"));g.add(h.BB("Alarm3"));g.add(h.BB("Alarm4"));g.add(h.BB("Alarm5"));return g;}}class OC{static const int OD=1;static const int TE=2;static const int UE=3;}class IF extends FB implements oB{List<GF> yK;num WK;IF(HB n,PB AB,int o,int q){yK=new List<GF>();WK=0.0;this.WB=false;var t=xB.SE(n,o,q);var l=new XB.Random();num i;num m;num GB;for(int g=0;g<=1;g++ ){for(int h=0;h<=1;h++ ){if(h==0&&g==0){i=XB.PI*1.15;VB=-XB.PI*2;}if(h==1&&g==0){i=XB.PI*1.85;VB=XB.PI*2;}if(h==1&&g==1){i=XB.PI*0.15;VB=XB.PI*2;}if(h==0&&g==1){i=XB.PI*0.85;VB=-XB.PI*2;}i=i+0.2*XB.PI*l.nextDouble();m=80.0+40.0*l.nextDouble();MB j=new MB(t.JC);j.mI=new IB(h*25,g*25,25,25);j.YC=12.5+h*25;j.ZC=12.5+g*25;j.x=h*25;j.y=g*25;s(j);GF k=new GF();k.KG=j;k.lG=h*25+12.5;k.mG=g*25+12.5;k.angle=i;k.oG=m;k.VB=VB;yK.add(k);}}}bool DC(num k){WK=XB.min(0.8,WK+k);num l=981.0;for(var g in yK){var h=g.KG;var i=g.angle;var j=g.oG;var m=g.VB;var n=g.lG+WK*(XB.cos(i)*j);var o=g.mG+WK*(XB.sin(i)*j+WK*l*0.5);h.x=n;h.y=o;h.VB=WK*m;}if(WK>=0.6){this.alpha=(0.8-WK)/0.2;}if(WK>=0.8){this.zE();}return (WK<0.8);}}gC QC;aE MF;MB kC;fB lD;SC RC;void main(){QC=new gC("Stage",jC.querySelector('#stage'));MF=new aE();MF.iI(QC);EB.wF.webp=true;EB.JD("images/Loading.png").then((g){kC=new MB(g);kC.YC=20;kC.ZC=20;kC.x=400;kC.y=270;QC.s(kC);RC=new SC();RC.KC=new PD("Arial",20,0xA0A0A0,bold:true);RC.width=240;RC.height=40;RC.text="... loading ...";RC.x=400-RC.WJ/2;RC.y=320;RC.WB=false;QC.s(RC);lD=new fB(kC,100,RB.fC);lD.gB.VB.cB(100.0*2.0*XB.PI);QC.dD.add(lD);HH();});}void HH(){var g=new HB();g.pB("Background","images/Background.jpg");g.pB("ExitBox","images/ExitBox.png");g.pB("ExitButtonNormal","images/ExitButtonNormal.png");g.pB("ExitButtonPressed","images/ExitButtonPressed.png");g.pB("ExitGauge","images/ExitGauge.png");g.pB("ExitNoButtonNormal","images/ExitNoButtonNormal.png");g.pB("ExitNoButtonPressed","images/ExitNoButtonPressed.png");g.pB("ExitYesButtonNormal","images/ExitYesButtonNormal.png");g.pB("ExitYesButtonPressed","images/ExitYesButtonPressed.png");g.pB("InfoBox","images/InfoBox.png");g.pB("MessageBox","images/MessageBox.png");g.pB("ShuffleButtonNormal","images/ShuffleButtonNormal.png");g.pB("ShuffleButtonPressed","images/ShuffleButtonPressed.png");g.pB("TimeGauge","images/TimeGauge.png");g.ZD("Alarm","images/AlarmTextureAtlas.json",uC.ID);g.ZD("Head","images/HeadTextureAtlas.json",uC.ID);g.ZD("Elements","images/ElementsTextureAtlas.json",uC.ID);g.ZD("Levelup","images/LevelupTextureAtlas.json",uC.ID);g.ZD("Locks","images/LocksTextureAtlas.json",uC.ID);g.bB("BonusAllUnlock","sounds/BonusAllUnlock.mp3");g.bB("BonusUniversal","sounds/BonusUniversal.mp3");g.bB("ChainBlast","sounds/ChainBlast.mp3");g.bB("ChainBlastSpecial","sounds/ChainBlastSpecial.mp3");g.bB("ChainError","sounds/ChainError.mp3");g.bB("ChainFall","sounds/ChainFall.mp3");g.bB("ChainHelp","sounds/ChainHelp.mp3");g.bB("ChainLink","sounds/ChainLink.mp3");g.bB("ChainRotate","sounds/ChainRotate.mp3");g.bB("Click","sounds/Click.mp3");g.bB("GameOver","sounds/GameOver.mp3");g.bB("Laugh","sounds/Laugh.mp3");g.bB("LevelUp","sounds/LevelUp.mp3");g.bB("PointsCounter","sounds/PointsCounter.mp3");g.bB("Unlock","sounds/Unlock.mp3");g.bB("Warning","sounds/Warning.mp3");g.bB("Intro","sounds/Intro.mp3");g.CC("ESCAPE_INS_AIM_0","Connect at least 3 chain links of the same colour to a horizontal or vertical chain.");g.CC("ESCAPE_INS_DES_0","You can change the direction of a chain link by touching it.");g.CC("ESCAPE_INS_TIP_0","Earn extra points for connecting chain links displaying a key symbol.");g.CC("ESCBlockErrorHint","Sorry but block chains can´t be twisted!");g.CC("ESCLevelBoxText","Connect {0} chain links and help the crook to escape!");g.CC("ESCNoActionHint","Press on the chain links to twist them.");g.CC("ESCNoComboHint","You have to connect at least 3 chain links of the same colour.");g.CC("ESCStartText","Form horizontal or vertical same-colour chains and become an escape agent!");g.CC("ESCtogo","Chain links:");g.CC("GENexitquery","Do you really want to quit the game?");g.CC("GEN2ndchancetime","Time is up. Second chance!");g.CC("GENtimeup","Sorry! Your time is up.");g.CC("GENgameover","Game Over");g.load().then((j){QC.LC(kC);QC.LC(RC);QC.dD.remove(lD);var i=new oJ(g,QC.dD);QC.s(new MB(g.BB("Background")));QC.s(i);i.start();}).catchError((k){for(var h in g.TG){print("Loading resouce failed: ${h.kind}.${h.name} - ${h.error}");}});}class QF{final jB VM;final String dM;final bool wM;final int GN;final int TN;final int iN;final int rN;final int yN;final int FO;final int OO;final int ZO;QF.IK(jB h,String i,Map g):VM=h,dM=i,wM=BI(g["rotated"]),GN=HC(g["sourceSize"]["w"]),TN=HC(g["sourceSize"]["h"]),iN=HC(g["spriteSourceSize"]["x"]),rN=HC(g["spriteSourceSize"]["y"]),yN=HC(g["frame"]["x"]),FO=HC(g["frame"]["y"]),OO=HC(g["frame"]["w"]),ZO=HC(g["frame"]["h"]);jB get XJ=>VM;String get name=>dM;bool get SJ=>wM;int get sI=>yN;int get tI=>FO;int get VG=>OO;int get UG=>ZO;int get GJ=>iN;int get HJ=>rN;int get LJ=>GN;int get KJ=>TN;}class bC extends CB{static const String VF="keyDown";static const String YF="keyUp";bool BO=false;bool IO=false;bool TO=false;bool bO=false;bool iO=false;int rO=0;int vO=0;int yO=0;bC(String g,[bool h=false]):super(g,h);bool get altKey=>BO;bool get ctrlKey=>IO;bool get shiftKey=>TO;int get charCode=>rO;int get keyCode=>vO;int get keyLocation=>yO;}class CB{static const String UH="added";static const String UD="addedToStage";static const String eF="enterFrame";static const String kF="exitFrame";static const String oH="removed";static const String XD="removedFromStage";static const String uH="resize";static const String tF="render";static const String EG="progress";String WN;bool yP;int zP;FC pM;FC BQ;bool CQ;bool GQ;CB(String g,[bool h=false]){xP(g,h);}void xP(String g,[bool h=false]){WN=g;yP=h;zP=vC.tD;pM=null;BQ=null;CQ=false;GQ=false;}bool get fD=>CQ;bool get VJ=>GQ;String get type=>WN;bool get bubbles=>yP;bool get EE=>true;FC get target=>pM;}class FC{Map<String,aB> XM;aB<CB> on(String i){var g=XM;if(g==null){g=new Map<String,aB>();XM=g;}var h=g[i];if(h==null){h=new aB.GK(this,i);g[i]=h;}return h;}nB.StreamSubscription<CB> addEventListener(String g,RF h,{bool useCapture: false}){return useCapture?this.on(g).capture(h):this.on(g).listen(h);}void dispatchEvent(CB g){PQ(g,this,vC.tD);}bool TQ(CB g){var h=XM;if(h==null)return false;var i=h[g.type];if(i==null)return false;return i.aQ(g);}PQ(CB g,FC j,int k){g.CQ=false;g.GQ=false;var h=XM;if(h==null)return;var i=h[g.type];if(i==null)return;i.PQ(g,j,k);}}abstract class dE{void iB(AC g);}class aE{PB KM;List<gC> ZM;num iM;Function tM;bool jN;int pN;bF DO;pF NO;vF aO;aE(){KM=new PB();ZM=new List<gC>();iM=-1;jN=false;DO=new bF(0);NO=new pF();aO=new vF();pN=null;tM=XP;YP();}PB get dD=>KM;void start(){iM=-1;YP();}void stop(){wP();}void iI(gC g){if(g.AF!=null){g.AF.QJ(g);}ZM.add(g);g.KQ=this;}void QJ(gC g){if(g.AF==this){ZM.remove(g);g.KQ=null;}}YP(){if(pN==null){pN=jC.window.requestAnimationFrame(tM);}}wP(){if(pN!=null){jC.window.cancelAnimationFrame(pN);pN=null;}}XP(num g){pN=null;YP();g=g.toDouble();if(iM==-1)iM=g;if(iM>g)iM=g;var j=g-iM;var i=j/1000.0;var k=g/1000.0;var l=false;if(j>=1){iM=g;DO.dN=i;pE(DO,BG);KM.DC(i);for(int h=0;h<ZM.length;h++ ){ZM[h].dD.DC(i);}if(jN){jN=false;pE(aO,FG);}for(int h=0;h<ZM.length;h++ ){ZM[h].BJ(k,i);}pE(NO,DG);}}}class MB extends v{EB WM;String kM;IB xM;MB([EB g=null,String h="auto"]){this.JC=g;this.NJ=h;xM=null;}EB get JC=>WM;set JC(EB g){if(g==null)WM=null;if(g is EB)WM=g;}set NJ(String g){if(g is String)kM=g;}set mI(IB g){if(g==null)xM=null;if(g is IB)xM=g;}IB qB(JB j,[IB k]){var g=WM;var h=0,i=0;if(g!=null){h=g.width;i=g.height;}return rE(j,h,i,k);}v sB(num h,num i){var g=WM;if(g==null)return null;if(h<0.0||i<0)return null;if(h>=g.width||i>=g.height)return null;return this;}void iB(AC h){var g=WM;if(g==null)return;if(xM==null){g.iB(h);}else{g.gG(h,xM);}}}class SC extends QB{String NM="";PD oM=null;String EN=pD.oE;String WN=FD.SH;int oN=0;int vN=0;num EO=0.0;num MO=0.0;num UO=0.0;num dO=0.0;num gO=0.0;bool lO=false;bool pO=false;bool tO=false;bool AP=false;bool GP=false;String JP="•";int NP=0xFFFFFF;int QP=0x000000;int VP=0;num SM=100;num fM=100;num ZP=0.0;num bP=0.0;final List<DD> dP=new List<DD>();int iP=3;bool pP=true;jC.CanvasElement qP;SC([String g,PD h]){this.text=(g!=null)?g:"";this.KC=(h!=null)?h:new PD("Arial",12,0x000000);this.onKeyDown.listen(IQ);this.IJ.listen(MQ);this.onMouseDown.listen(OQ);}String get text=>NM;PD get KC=>oM;String get type=>WN;bool get border=>GP;int get borderColor=>QP;void set width(num g){SM=g.toDouble();iP|= 3;}void set height(num g){fM=g.toDouble();iP|= 3;}void set text(String g){NM=g.replaceAll('\r\n','\n').replaceAll('\r','\n');oN=NM.length;iP|= 3;}void set KC(PD g){oM=g.clone();iP|= 3;}void set wordWrap(bool g){lO=g;iP|= 3;}num get x{zQ();return super.x;}num get width{zQ();return SM;}num get height{zQ();return fM;}num get WJ{zQ();return ZP;}num get BF{zQ();return bP;}JB get ZB{zQ();return super.ZB;}IB qB(JB g,[IB h]){return rE(g,SM,fM,h);}v sB(num g,num h){if(g>=0&&h>=0&&g<SM&&h<fM)return this;return null;}void iB(AC h){zQ();ER();var g=h.context;if(pP){var i=qP;if(i!=null)g.drawImageScaled(i,0.0,0.0,SM,fM);}else{FR(g);}EO+= h.nI;if(WN==FD.TD){var j=this.BD;if(j!=null&&j.focus==this&&EO.remainder(0.8)<0.4){g.fillStyle=VD(oM.color);g.fillRect(MO,UO,dO,gO);}}}zQ(){if((iP&1)==0){return;}else{iP&= 255-1;}dP.clear();var j=0;var i='';var m='';var pG=0;var AB=0;var n=UC(oM.size);var t=UC(oM.leftMargin);var gD=UC(oM.rightMargin);var YJ=UC(oM.topMargin);var ZJ=UC(oM.bottomMargin);var qG=UC(oM.indent);var rG=UC(KC.leading);var aJ=LI(oM.align);var sG=oM.FQ;var tG=dH(sG);var uG=UC(tG.aD);var CD=UC(tG.HE);var GB=SM-t-gD;var k=AE;var vG=new List<int>();var wG=NM.split('\n');k.font=sG;k.textAlign="start";k.textBaseline="alphabetic";k.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);for(int hD=0;hD<wG.length;hD++ ){var KB=wG[hD];if(KB is !String)continue;vG.add(dP.length);if(lO==false){dP.add(new DD.GK(KB,j));j+= KB.length+1;}else{i=null;AB=qG;var xG=KB.split(' ');for(int MD=0;MD<xG.length;MD++ ){var SB=xG[MD];if(SB is !String)continue;m=i;i=(m==null)?SB:"${m} ${SB}";i=HR(i);pG=k.measureText(i).width.toDouble();if(AB+pG>=GB){if(m==null){dP.add(new DD.GK(i,j));j+= i.length+1;i=null;AB=0;}else{dP.add(new DD.GK(m,j));j+= m.length+1;i=HR(SB);AB=0;}}}if(i!=null){dP.add(new DD.GK(i,j));j+= i.length+1;}}}ZP=0.0;bP=0.0;for(int h=0;h<dP.length;h++ ){var g=dP[h];if(g is !DD)continue;var EF=vG.contains(h)?qG:0;var bJ=t+EF;var yG=YJ+n+h*(rG+n+CD);var zG=k.measureText(g.NM).width.toDouble();g.IM=bJ;g.LM=yG;g.SM=zG;g.fM=n;g.XN=uG;g.kN=CD;g.sN=rG;g.AO=EF;ZP=XB.max(ZP,t+EF+zG+gD);bP=yG+CD+ZJ;}var l=lO?SM:ZP.ceil();var mB=bP.ceil();if(SM!=l||fM!=mB){switch (EN){case pD.VH:SM=l;fM=mB;break;case pD.uF:super.x-= (l-SM);SM=l;fM=mB;break;case pD.dC:super.x-= (l-SM)/2;SM=l;fM=mB;break;}}GB=SM-t-gD;for(int h=0;h<dP.length;h++ ){var g=dP[h];if(g is !DD)continue;switch (aJ){case EC.dC:case EC.eH:g.IM+= (GB-g.width)/2;break;case EC.uF:case EC.YH:g.IM+= (GB-g.width);break;}}if(WN==FD.TD){for(int h=dP.length-1;h>=0;h-- ){var g=dP[h];if(g is !DD)continue;if(oN>=g.TM){var cJ=oN-g.TM;var dJ=g.NM.substring(0,cJ);vN=h;MO=g.x+k.measureText(dJ).width.toDouble();UO=g.y-uG*0.9;dO=1.0;gO=n;break;}}var o=0.0;var q=0.0;while (o+MO>SM)o-= SM*0.2;while (o+MO<0)o+= SM*0.2;while (q+UO+gO>fM)q-= n;while (q+UO<0)q+= n;MO+= o;UO+= q;for(int h=0;h<dP.length;h++ ){var g=dP[h];if(g is !DD)continue;g.IM+= o;g.LM+= q;}}}ER(){if((iP&2)==0){return;}else{iP&= 255-2;}if(pP==false){return;}var g=(gC.qE?CE:1.0)/BE;var h=(SM*g).ceil();var i=(fM*g).ceil();if(h<=0||i<=0){qP=null;return;}if(qP==null){qP=new jC.CanvasElement(width:h,height:i);}if(qP.width!=h)qP.width=h;if(qP.height!=i)qP.height=i;var j=qP.context2D;j.setTransform(g,0.0,0.0,g,0.0,0.0);j.clearRect(0,0,SM,fM);FR(j);}FR(jC.CanvasRenderingContext2D g){var i=oM;var j=(i.bold?i.size/10:i.size/20).ceil();g.save();g.beginPath();g.rect(0,0,SM,fM);g.clip();if(AP){g.fillStyle=VD(NP);g.fillRect(0,0,SM,fM);}g.font=i.FQ;g.textAlign="start";g.textBaseline="alphabetic";g.fillStyle=g.strokeStyle=VD(i.color);g.lineCap=g.lineJoin="round";g.lineWidth=j;for(int k=0;k<dP.length;k++ ){var h=dP[k];g.fillText(h.NM,h.x,h.y);if(i.underline){num l=(h.y+j).round();if(j%2!=0)l+= 0.5;g.beginPath();g.moveTo(h.x,l);g.lineTo(h.x+h.width,l);g.stroke();}}if(GP){g.strokeStyle=VD(QP);g.lineWidth=1;g.strokeRect(0,0,SM,fM);}g.restore();}String HR(String g){if(g is !String)return g;if(tO==false)return g;var h="";for(int i=0;i<g.length;i++ ){h="${h}${JP}";}return h;}IQ(bC t){if(WN==FD.TD){zQ();var k=NM;var n=k.length;var j=dP;var g=oN;var i=vN;var h=-1;switch (t.keyCode){case jC.KeyCode.BACKSPACE:if(g>0){NM=k.substring(0,g-1)+k.substring(g);h=g-1;}break;case jC.KeyCode.END:var m=j[i];h=m.TM+m.NM.length;break;case jC.KeyCode.HOME:var m=j[i];h=m.TM;break;case jC.KeyCode.LEFT:if(g>0){h=g-1;}break;case jC.KeyCode.UP:if(i>0&&i<j.length){var o=j[i];var l=j[i-1];var q=XB.min(g-o.TM,l.NM.length);h=l.TM+q;}else{h=0;}break;case jC.KeyCode.RIGHT:if(g<n){h=g+1;}break;case jC.KeyCode.DOWN:if(i>=0&&i<j.length-1){var o=j[i];var l=j[i+1];var q=XB.min(g-o.TM,l.NM.length);h=l.TM+q;}else{h=n;}break;case jC.KeyCode.DELETE:if(g<n){NM=k.substring(0,g)+k.substring(g+1);h=g;}break;}if(h!=-1){oN=h;EO=0.0;iP|= 3;}}}MQ(QD i){if(WN==FD.TD){var j=NM.length;var h=oN;var g=i.text;if(g=='\r')g='\n';if(g=='\n'&&pO==false)g='';if(g=='')return;if(VP!=0&&j>=VP)return;NM=NM.substring(0,h)+g+NM.substring(h);oN=oN+g.length;EO=0.0;iP|= 3;}}OQ(u j){var t=j.wE.toDouble();var k=j.xE.toDouble();var l=AE;l.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);for(int i=0;i<dP.length;i++ ){var g=dP[i];if(g is !DD)continue;var m=g.NM;var AB=g.x;var GB=g.y-g.aD;var KB=g.y+g.HE;if(GB<=k&&KB>=k){var n=double.INFINITY;var o=0;for(var h=0;h<=m.length;h++ ){var SB=l.measureText(m.substring(0,h)).width.toDouble();var q=(AB+SB-t).abs();if(q<n){n=q;o=h;}}oN=g.TM+o;EO=0.0;iP|= 3;}}}}class PD{String font;num size;int color;bool bold;bool italic;bool underline;String align;num topMargin;num bottomMargin;num leftMargin;num rightMargin;num indent;num leading;PD(this.font,this.size,this.color,{this.bold: false,this.italic: false,this.underline: false,this.align: "left",this.topMargin: 0.0,this.bottomMargin: 0.0,this.leftMargin: 0.0,this.rightMargin: 0.0,this.indent: 0.0,this.leading: 0.0});PD clone(){return new PD(font,size,color,bold:bold,italic:italic,underline:underline,align:align,topMargin:topMargin,bottomMargin:bottomMargin,leftMargin:leftMargin,rightMargin:rightMargin,indent:indent,leading:leading);}String get FQ{var g="${size}px ${font}, sans-serif";if(bold)g="bold ${g}";if(italic)g="italic ${g}";return g;}}class uC{static const String TH="json";static const String ID="jsonarray";}abstract class oB{bool DC(num g);}class HB extends FC{final Map<String,cE> uM=new Map<String,cE>();static const GC<CB> kH=const GC<CB>(CB.EG);aB<CB> get onProgress=>HB.kH.forTarget(this);zO(String h,String g,String k,nB.Future l){var i="${h}.${g}";var j=new cE(h,g,k,l);if(uM.containsKey(i)){throw new StateError("ResourceManager already contains a resource called '${g}'");}else{uM[i]=j;}j.complete.then((oP){this.dispatchEvent(new CB(CB.EG));});}dynamic rP(String i,String h){var j="${i}.${h}";var g=uM[j];if(g==null){throw new StateError("Resource '${h}' does not exist.");}else if(g.value!=null){return g.value;}else if(g.error!=null){throw g.error;}else{throw new StateError("Resource '${h}' has not finished loading yet.");}}nB.Future<HB> load(){var h=this.MJ.map((i)=>i.complete);return nB.Future.wait(h).then((j){var g=this.TG.length;if(g>0){throw new StateError("Failed to load ${g} resource(s).");}else{return this;}});}List<cE> get MJ{return uM.values.where((g)=>g.value==null&&g.error==null).toList();}List<cE> get TG{return uM.values.where((g)=>g.error!=null).toList();}void pB(String h,String g,[bE i=null]){zO("BitmapData",h,g,EB.JD(g,i));}void bB(String h,String g,[sC i=null]){zO("Sound",h,g,eB.JD(g,i));}void ZD(String h,String g,String i){zO("TextureAtlas",h,g,jB.JD(g,i));}void CC(String g,String h){zO("Text",g,"",new nB.Future.value(h));}EB BB(String h){var g=rP("BitmapData",h);if(g is !EB)throw "dart2js_hint";return g;}eB rB(String h){var g=rP("Sound",h);if(g is !eB)throw "dart2js_hint";return g;}jB iC(String h){var g=rP("TextureAtlas",h);if(g is !jB)throw "dart2js_hint";return g;}String KD(String h){var g=rP("Text",h);if(g is !String)throw "dart2js_hint";return g;}}class cC{static String xC;static rD WF;static PH WD;static List<String> lF=SI();static String get nE{if(xC==null)MI();return xC;}static void MI(){xC="AudioElement";WD=new PH();if(FF.AudioContext.supported){xC="WebAudioApi";WF=new rD();}var g=jC.window.navigator.userAgent;if(g.contains("IEMobile")){if(g.contains("9.0")||g.contains("10.0")){xC="Mock";}}if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod")){if(g.contains("OS 3")||g.contains("OS 4")||g.contains("OS 5")){xC="Mock";}}if(lF.length==0){xC="Mock";}print("StageXL: supported audio engine is: ${nE}");}static List<String> SI(){var g=new List<String>();var h=new jC.AudioElement();var i=["maybe","probably"];if(i.indexOf(h.canPlayType("audio/mpeg",""))!=-1)g.add("mp3");if(i.indexOf(h.canPlayType("audio/mp4",""))!=-1)g.add("mp4");if(i.indexOf(h.canPlayType("audio/ogg",""))!=-1)g.add("ogg");if(i.indexOf(h.canPlayType("audio/wav",""))!=-1)g.add("wav");print("StageXL: supported audio types are: ${g}");return g;}static List<String> JG(String i,sC h){var k=new RegExp(r"(mp3|mp4|ogg|wav)$",multiLine:false,caseSensitive:true);var g=lF.toList();var l=k.firstMatch(i);var j=new List<String>();if(l==null){throw new ArgumentError("Unsupported file extension.");}if(g.length==0){throw new UnsupportedError("This browser supports no known audio codec.");}if(!h.mp3)g.remove("mp3");if(!h.mp4)g.remove("mp4");if(!h.ogg)g.remove("ogg");if(!h.wav)g.remove("wav");var m=l.group(1);if(g.contains(m)){j.add(i);g.remove(m);}for(var n in g){j.add(i.replaceAll(k,n));}return j;}}class GD extends QB{v upState;v overState;v downState;v hitTestState;bool DF=true;bool enabled=true;v xN;GD([this.upState,this.overState,this.downState,this.hitTestState]){addEventListener(u.rF,nO);addEventListener(u.yD,nO);addEventListener(u.vD,nO);addEventListener(u.mE,nO);xN=this.upState;}IB qB(JB g,[IB h]){if(xN!=null){cP.uE(xN.ZB,g);return xN.qB(cP,h);}return super.qB(g,h);}v sB(num j,num k){if(this.hitTestState!=null){JB g=this.hitTestState.ZB;double h=j-g.uB;double i=k-g.vB;double l=(g.d*h-g.c*i)/g.pC;double m=(g.a*i-g.b*h)/g.pC;if(this.hitTestState.sB(l,m)!=null)return this;}return null;}void iB(AC g){if(xN!=null)g.hG(xN);}void nO(u g){if(g.type==u.yD){xN=upState;}else{xN=g.TC?downState:overState;}}}class FB extends ED{bool wJ=false;bool DF=false;FB vE=null;OH PN=null;v hN=null;AQ(){var i=this.JE;var j=this.BD;var l=this.visible;if(i!=null&&this.BD!=null){var g=rC.lH;if(g!=null){var h=this.ZB.PE(i);if(h.x<g.left)h.x=g.left;if(h.x>g.right)h.x=g.right;if(h.y<g.top)h.y=g.top;if(h.y>g.bottom)h.y=g.bottom;i=this.ZB.OG().PE(h);}var m=new NB(bN,nN).add(i).subtract(rC.iH);var k=this.ZB.PE(m);this.visible=false;hN=j.sB(j.CJ,j.DJ);this.x=k.x;this.y=k.y;this.visible=l;}}IB qB(JB h,[IB g]){if(g==null)g=new IB.FK();super.qB(h,g);if(PN!=null){g=PN.tQ(h).union(g);}return g;}v sB(num i,num j){v h=null;if(this.vE!=null){var g=this.QE(this.vE);if(g!=null){double k=i*g.a+j*g.c+g.uB;double l=i*g.b+j*g.d+g.vB;if(this.vE.sB(k,l)!=null){h=this;}}}else{h=super.sB(i,j);if(h==null&&PN!=null){if(PN.xQ(i,j)){h=this;}}}return h;}iB(AC g){if(PN!=null)PN.iB(g);super.iB(g);}}abstract class ED extends QB{final List<v> vM=new List<v>();bool MN=true;bool cN=true;void s(v g){if(g.parent==this){int h=vM.indexOf(g);vM.removeAt(h);vM.add(g);}else{hI(g,vM.length);}}void hI(v g,int h){if(h<0||h>vM.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){vM.removeAt(vM.indexOf(g));if(h>vM.length)h-- ;vM.insert(h,g);}else{g.zE();g.VQ(this);vM.insert(h,g);g.dispatchEvent(new CB(CB.UH,true));if(this.BD!=null)dQ(g,new CB(CB.UD));}}void LC(v h){int g=vM.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");PJ(g);}void PJ(int g){if(g<0||g>=vM.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");v h=vM[g];h.dispatchEvent(new CB(CB.oH,true));if(this.BD!=null)dQ(h,new CB(CB.XD));h.VQ(null);vM.removeAt(g);}bool contains(v g){for(;g!=null;g=g.aP)if(g==this)return true;return false;}IB qB(JB n,[IB g]){if(g==null)g=new IB.FK();if(vM.length==0)return super.qB(n,g);num i=double.INFINITY;num j=double.INFINITY;num k=double.NEGATIVE_INFINITY;num l=double.NEGATIVE_INFINITY;int q=vM.length;for(int m=0;m<vM.length;m++ ){v o=vM[m];cP.uE(o.ZB,n);IB h=o.qB(cP,g);if(h.left<i)i=h.left;if(h.top<j)j=h.top;if(h.right>k)k=h.right;if(h.bottom>l)l=h.bottom;}g.x=i;g.y=j;g.width=k-i;g.height=l-j;return g;}v sB(num h,num i){h=h.toDouble();i=i.toDouble();v AB=null;for(int o=vM.length-1;o>=0;o-- ){var j=vM[o];var k=j.mask;var g=j.ZB;if(j.visible&&j.eG==false){num GB=h-g.uB;num KB=i-g.vB;num q=(g.d*GB-g.c*KB)/g.pC;num t=(g.a*KB-g.b*GB)/g.pC;num l=0.0;num m=0.0;if(k!=null){if(k.NC==null){l=q;m=t;}else if(identical(k.NC,j)){l=q;m=t;}else if(identical(k.NC,this)){l=h;m=i;}else{g=this.QE(k.NC);g=(g!=null)?g:zD;l=h*g.a+i*g.c+g.uB;m=h*g.b+i*g.d+g.vB;}if(k.WG(l,m)==false)continue;}var n=j.sB(q,t);if(n==null)continue;if(n is QB&&n.WB){return MN?n:this;}AB=this;}}return AB;}void iB(AC i){for(int g=0;g<vM.length;g++ ){v h=vM[g];if(h.visible&&h.eG==false){i.hG(h);}}}IR(v g,List i){i.add(g);if(g is ED){var j=g.vM;for(int h=0;h<j.length;h++ ){IR(j[h],i);}}}dQ(v i,CB j){List g=[] ;IR(i,g);for(int h=0;h<g.length;h++ ){g[h].dispatchEvent(j);}}}class nD extends v{static const String iE='DIRECTION_UP';static const String aF='DIRECTION_RIGHT';static const String lE='DIRECTION_DOWN';static const String xD='DIRECTION_LEFT';String RO;num XO;EB WM;IB xM;nD(EB h,[String g=xD]){if(g!=iE&&g!=lE&&g!=xD&&g!=aF){throw new ArgumentError('Invalid Gauge direction!');}RO=g;XO=1.0;WM=h;xM=new IB.FK();gP();}num get ratio=>XO;set ratio(num g){if(g<0.0)g=0.0;if(g>1.0)g=1.0;XO=g;gP();}EB get JC=>WM;set JC(EB g){WM=g;gP();}gP(){if(WM==null){xM.left=0;xM.top=0;xM.right=0;xM.bottom=0;}else{int g=WM.width;int h=WM.height;switch (RO){case xD:xM.left=((1.0-XO)*g).toInt();xM.top=0;xM.right=g;xM.bottom=h;break;case iE:xM.left=0;xM.top=((1.0-XO)*h).toInt();xM.right=g;xM.bottom=h;break;case aF:xM.left=0;xM.top=0;xM.right=(XO*g).toInt();xM.bottom=h;break;case lE:xM.left=0;xM.top=0;xM.right=g;xM.bottom=(XO*h).toInt();break;}}}IB qB(JB g,[IB h]){int i=(WM!=null)?WM.width:0;int j=(WM!=null)?WM.height:0;return rE(g,i,j,h);}v sB(num g,num h){if(WM!=null&&g>=0.0&&h>=0.0&&g<WM.width&&h<WM.height)return this;return null;}void iB(AC g){if(WM!=null)WM.gG(g,xM);}}class NF{final fB CF;NF(this.CF);call(String g,num h){RN(g).cB(h);}BC get x=>RN("x");BC get y=>RN("y");BC get lB=>RN("scaleX");BC get tB=>RN("scaleY");BC get skewX=>RN("skewX");BC get skewY=>RN("skewY");BC get YC=>RN("pivotX");BC get ZC=>RN("pivotY");BC get VB=>RN("rotation");BC get alpha=>RN("alpha");BC RN(String h){var g=new BC(h);this.CF.RN(g);return g;}}class aB<wC extends CB> extends nB.Stream<wC>{final FC pM;final String AN;List<lC> SN=[] ;int fN=0;aB.GK(this.pM,this.AN);bool get isBroadcast=>true;nB.Stream<wC> asBroadcastStream({void onListen(nB.StreamSubscription subscription),void onCancel(nB.StreamSubscription subscription)})=>this;FC get target=>pM;lC<wC> listen(void h(wC event),{Function onError,void onDone(),bool cancelOnError: false}){var g=new lC<wC>.GK(this,h,false);SN.add(g);switch (AN){case CB.eF:BG.add(g);break;case CB.kF:DG.add(g);break;case CB.tF:FG.add(g);break;}return g;}lC<wC> capture(void h(wC event)){var g=new lC<wC>.GK(this,h,true);SN.add(g);fN++ ;return g;}QQ(lC h){var i=SN;var j=[] ;if(h.yI){fN-- ;}for(var g=0;g<i.length;g++ ){var k=i[g];if(identical(k,h)==false){j.add(k);}}SN=j;}bool aQ(CB g){return g.EE&&fN>0||g.bubbles&&SN.length>fN;}PQ(wC h,FC j,int k){var i=SN;var l=i.length;for(var g=0;g<l;g++ ){i[g].PQ(h,j,k);if(h.VJ)return;}}}class IB{num IM;num LM;num SM;num fM;IB(num g,num h,num i,num j):IM=g,LM=h,SM=i,fM=j;IB.FK():this(0,0,0,0);IB clone()=>new IB(IM,LM,SM,fM);String toString()=>"Rectangle [x=${IM}, y=${LM}, width=${SM}, height=${fM}]";num get x=>IM;num get y=>LM;num get width=>SM;num get height=>fM;num get left=>IM;num get top=>LM;num get right=>IM+SM;num get bottom=>LM+fM;NB get size=>new NB(SM,fM);set x(num g){IM=g;}set y(num g){LM=g;}set width(num g){SM=g;}set height(num g){fM=g;}set bottom(num g){this.height=g-LM;}set left(num g){IM=g;}set right(num g){SM=g-IM;}set top(num g){LM=g;}bool contains(num g,num h){return IM<=g&&LM<=h&&IM+SM>=g&&LM+fM>=h;}bool SG(IB g){return IM==g.x&&LM==g.y&&SM==g.width&&fM==g.height;}bool get isEmpty{return SM==0&&fM==0;}FE(IB g){IM=g.x;LM=g.y;SM=g.width;fM=g.height;}IB union(IB g){num h=XB.min(this.left,g.left);num i=XB.min(this.top,g.top);num j=XB.max(this.right,g.right);num k=XB.max(this.bottom,g.bottom);return new IB(h,i,j-h,k-i);}IB align(){int g=this.left.floor();int h=this.top.floor();int i=this.right.ceil();int j=this.bottom.ceil();return new IB(g,h,i-g,j-h);}}class DD{String NM;int TM;num IM=0.0;num LM=0.0;num SM=0.0;num fM=0.0;num XN=0.0;num kN=0.0;num sN=0.0;num AO=0.0;DD.GK(this.NM,this.TM);num get x=>IM;num get y=>LM;num get width=>SM;num get height=>fM;num get aD=>XN;num get HE=>kN;num get leading=>sN;num get indent=>AO;}class JB{double JM,MM,OM,PM,RM,UM;double gM;JB(num g,num h,num i,num j,num k,num l):JM=g.toDouble(),MM=h.toDouble(),OM=i.toDouble(),PM=j.toDouble(),RM=k.toDouble(),UM=l.toDouble(),gM=(g*j-h*i).toDouble();JB.JK():JM=1.0,MM=0.0,OM=0.0,PM=1.0,RM=0.0,UM=0.0,gM=1.0;JB clone(){return new JB(JM,MM,OM,PM,RM,UM);}JB OG(){num g=(PM/gM);num h=-(MM/gM);num i=-(OM/gM);num j=(JM/gM);num k=-(g*RM+i*UM);num l=-(h*RM+j*UM);return new JB(g,h,i,j,k,l);}num get a=>JM;num get b=>MM;num get c=>OM;num get d=>PM;num get uB=>RM;num get vB=>UM;num get pC=>gM;NB PE(NB g){var h=g.x.toDouble();var i=g.y.toDouble();return new NB(h*JM+i*OM+RM,h*MM+i*PM+UM);}NB XQ(XB.Point g){var h=g.x.toDouble();var i=g.y.toDouble();return new NB(h*JM+i*OM+RM,h*MM+i*PM+UM);}void zC(JB g){num l=JM;num m=MM;num n=OM;num o=PM;num q=RM;num t=UM;num AB=gM;num h=g.a;num i=g.b;num j=g.c;num k=g.d;num GB=g.uB;num KB=g.vB;num SB=g.pC;JM=(l*h+m*j).toDouble();MM=(l*i+m*k).toDouble();OM=(n*h+o*j).toDouble();PM=(n*i+o*k).toDouble();RM=(q*h+t*j+GB).toDouble();UM=(q*i+t*k+KB).toDouble();gM=(AB*SB).toDouble();}void identity(){JM=1.0;MM=0.0;OM=0.0;PM=1.0;RM=0.0;UM=0.0;gM=1.0;}void YG(){num j=JM;num k=MM;num l=OM;num m=PM;num h=RM;num i=UM;num g=gM;JM=(m/g).toDouble();MM=-(k/g).toDouble();OM=-(l/g).toDouble();PM=(j/g).toDouble();RM=-(JM*h+OM*i).toDouble();UM=-(MM*h+PM*i).toDouble();gM=(1.0/g).toDouble();}void scale(num g,num h){JM=(JM*g).toDouble();MM=(MM*h).toDouble();OM=(OM*g).toDouble();PM=(PM*h).toDouble();RM=(RM*g).toDouble();UM=(UM*h).toDouble();gM=(gM*g*h).toDouble();}void translate(num g,num h){RM=(RM+g).toDouble();UM=(UM+h).toDouble();}void LE(num g,num h,num i,num j,num k,num l){JM=g.toDouble();MM=h.toDouble();OM=i.toDouble();PM=j.toDouble();RM=k.toDouble();UM=l.toDouble();gM=(JM*PM-MM*OM).toDouble();}void FE(JB g){JM=g.a.toDouble();MM=g.b.toDouble();OM=g.c.toDouble();PM=g.d.toDouble();RM=g.uB.toDouble();UM=g.vB.toDouble();gM=g.pC.toDouble();}void uE(JB g,JB h){num m=g.a;num n=g.b;num o=g.c;num q=g.d;num t=g.uB;num AB=g.vB;num GB=g.pC;num i=h.a;num j=h.b;num k=h.c;num l=h.d;num KB=h.uB;num SB=h.vB;num mB=h.pC;JM=(m*i+n*k).toDouble();MM=(m*j+n*l).toDouble();OM=(o*i+q*k).toDouble();PM=(o*j+q*l).toDouble();RM=(t*i+AB*k+KB).toDouble();UM=(t*j+AB*l+SB).toDouble();gM=(GB*mB).toDouble();}}abstract class oD{v NC=null;bool border=false;int borderColor=0xFF000000;int borderWidth=1;jC.CanvasRenderingContext2D YN;oD();factory oD.HK(num g,num h,num i,num j){return new uJ(g,h,i,j);}jI(AC h,JB g){YN=h.context;YN.setTransform(g.a,g.b,g.c,g.d,g.uB,g.vB);YN.beginPath();vP();YN.save();YN.clip();}qI(){YN.restore();if(border){YN.strokeStyle=oF(borderColor);YN.lineWidth=borderWidth;YN.lineCap="round";YN.lineJoin="round";YN.stroke();}}bool WG(num g,num h);vP();}class mD{final JB matrix=new JB.JK();double alpha=1.0;String cD=uD.wD;mD eN;mD get EJ{if(eN==null)eN=new mD();return eN;}}class cE{String QM;String dM;String lM;dynamic sM=null;dynamic DN=null;nB.Completer ON=new nB.Completer();cE(String g,String h,String i,nB.Future j):QM=g,dM=h,lM=i{j.then((k){sM=k;}).catchError((l){DN=l;}).whenComplete((){ON.complete(this);});}String toString()=>"ResourceManagerResource [kind=${QM}, name=${dM}, url = ${lM}]";String get kind=>QM;String get name=>dM;dynamic get value=>sM;dynamic get error=>DN;nB.Future get complete=>ON.future;}class qC extends eB{qC(){}static nB.Future<eB> JD(String g,[sC h=null]){return new nB.Future<eB>.value(new qC());}num get length{return double.NAN;}aC play([bool h=false,UB g]){if(g==null){g=new UB();}return new tJ(this,h,g);}}abstract class eB{static nB.Future<eB> JD(String g,[sC h=null]){switch (cC.nE){case "WebAudioApi":return XE.JD(g,h);case "AudioElement":return YE.JD(g,h);default:return qC.JD(g,h);}}static sC wF=new sC(mp3:true,mp4:true,ogg:true,wav:true);num get length;aC play([bool g=false,UB h]);}class UB{num volume;num pan;UB([this.volume=1,this.pan=0]);}class tJ extends aC{bool bM;UB jM;tJ(qC i,bool g,UB h){bM=g;jM=h;}UB get MC=>jM;set MC(UB g){jM=g;}void stop(){}}abstract class aC extends FC{UB get MC;void set MC(UB g);void stop();}class YE extends eB{jC.AudioElement cM;List<jC.AudioElement> qM;List<tC> hM;YE(){hM=new List<tC>();cM=new jC.AudioElement();cM.onEnded.listen(VO);qM=new List<jC.AudioElement>();qM.add(cM);jC.document.body.children.add(cM);}static nB.Future<eB> JD(String k,[sC g=null]){if(g==null)g=eB.wF;var n=new YE();var h=n.cM;var i=cC.JG(k,g);var j=new nB.Completer<eB>();if(i.length==0){return qC.JD(k,g);}nB.StreamSubscription l;nB.StreamSubscription m;o(q){l.cancel();m.cancel();j.complete(n);}t(q){if(i.length>0){h.src=i.removeAt(0);h.load();}else{l.cancel();m.cancel();if(g.ignoreErrors){qC.JD(k,g).then((AB)=>j.complete(AB));}else{j.completeError(new StateError("Failed to load audio."));}}}l=h.onCanPlayThrough.listen(o);m=h.onError.listen(t);h.src=i.removeAt(0);h.load();return j.future;}num get length=>cM.duration;aC play([bool h=false,UB g]){if(g==null)g=new UB();return new tC(this,h,g);}jC.AudioElement CP(tC h){jC.AudioElement g;if(qM.length==0){g=cM.clone(true);g.onEnded.listen(VO);}else{g=qM.removeAt(0);}cC.WD.qO(h);hM.add(h);return g;}void LQ(tC h){cC.WD.MP(h);hM.remove(h);jC.AudioElement g=h.cM;qM.add(g);if(g.currentTime>0&&g.ended==false){g.currentTime=0;}}void VO(jC.Event h){var i=h.target;for(var g=0;g<hM.length;g++ ){if(identical(hM[g].cM,i)){hM[g].stop();break;}}}}class tC extends aC{YE nM;jC.AudioElement cM;bool bM;UB jM;tC(YE g,bool i,UB h){nM=g;jM=(h!=null)?h:new UB();bM=i;cM=g.CP(this);cC.WD.JO(this);cM.loop=bM;cM.play();}UB get MC=>jM;void set MC(UB g){jM=(g!=null)?g:new UB();cC.WD.JO(this);}void stop(){if(cM!=null){if(cM.ended==false)cM.pause();nM.LQ(this);cM=null;}}}class sC{bool mp3;bool mp4;bool ogg;bool wav;bool ignoreErrors;sC({this.mp3: false,this.mp4: false,this.ogg: false,this.wav: false,this.ignoreErrors: true});}class XE extends eB{FF.AudioBuffer aM;XE(){if(cC.nE!="WebAudioApi"){throw new UnsupportedError("This browser does not support Web Audio API.");}}static nB.Future<eB> JD(String i,[sC g=null]){if(g==null)g=eB.wF;var l=new XE();var h=new nB.Completer<eB>();var j=cC.JG(i,g);var n=rD.sD;if(j.length==0){return qC.JD(i,g);}o(q){n.decodeAudioData(q.response).then((FF.AudioBuffer t){l.aM=t;h.complete(l);}).catchError((AB){if(g.ignoreErrors){qC.JD(i,g).then((k)=>h.complete(k));}else{h.completeError(new StateError("Failed to decode audio."));}});}m(AB){if(j.length>0){jC.HttpRequest.request(j.removeAt(0),responseType:'arraybuffer').then(o).catchError(m);}else{if(g.ignoreErrors){qC.JD(i,g).then((k)=>h.complete(k));}else{h.completeError(new StateError("Failed to load audio."));}}}m(null);return h.future;}num get length{return aM.duration;}aC play([bool h=false,UB g]){if(g==null)g=new UB();return new sJ(this,h,g);}}class sJ extends aC{UB jM;bool bM;FF.AudioBufferSourceNode KN;XE VN;rD WF;sJ(XE i,bool g,UB h){VN=i;jM=(h!=null)?h:new UB();bM=g;WF=new rD(cC.WF.XG);WF.sE(jM);KN=rD.sD.createBufferSource();KN.buffer=VN.aM;KN.loop=g;KN.connectNode(WF.XG);KN.start(0);}UB get MC=>jM;void set MC(UB g){jM=(MC!=null)?MC:new UB();WF.sE(g);}void stop(){KN.stop(0);}}class GC<wC extends CB>{final String eventType;const GC(this.eventType);aB<wC> forTarget(FC g)=>g.on(eventType);}class PF{static const String oE="none";static const String fH="touchPoint";}class jB{final List<QF> YM=new List<QF>();EB WM;static nB.Future<jB> JD(String n,String q){nB.Completer<jB> i=new nB.Completer<jB>();jB g=new jB();switch (q){case uC.TH:case uC.ID:jC.HttpRequest.getString(n).then((t){var o=eJ.JSON.decode(t);var h=o["frames"];var AB=o["meta"];var GB=RI(n,AB["image"]);if(h is List){for(var KB in h){var j=KB as Map;var k=j["filename"] as String;var l=HG(k);var m=new QF.IK(g,l,j);g.YM.add(m);}}if(h is Map){for(String k in h.keys){var j=h[k] as Map;var l=HG(k);var m=new QF.IK(g,l,j);g.YM.add(m);}}EB.JD(GB).then((EB SB){g.WM=SB;i.complete(g);}).catchError((mB){i.completeError(new StateError("Failed to load image."));});}).catchError((mB){i.completeError(new StateError("Failed to load json file."));});break;}return i.future;}EB BB(String h){for(int g=0;g<YM.length;g++ ){var i=YM[g];if(i.name==h){return new EB.MK(i);}}throw new ArgumentError("TextureAtlasFrame not found: '${h}'");}}class pD{static const String dC="center";static const String VH="left";static const String oE="none";static const String uF="right";}class bE{bool png;bool jpg;bool webp;bool autoHiDpi;bE({this.png: true,this.jpg: true,this.webp: false,this.autoHiDpi: true});}class RD{static const String RH="exactFit";static const String ZH="noBorder";static const String hH="noScale";static const String hF="showAll";}class HD{static const int QH=0;static const int VH=1;static const int uF=2;static const int gH=3;static const int gF=4;}final Map<String,yF> gE=new Map<String,yF>();class OF{}class yB{static const String hE="auto";static const String jE="arrow";static const String kE="button";static const String jH="hand";static const String iF="ibeam";static const String nH="wait";}class ZE implements oB{final Function eM;num mM=0.0;num yM=0.0;int HN=1;ZE(Function g,num h):eM=g{yM=XB.max(h,0.0001);}bool DC(num h){num g=mM+h;while (g>=yM&&HN>0){mM=yM;HN-- ;eM();g-= yM;}mM=g;return (HN>0);}num get LD=>yM;num get currentTime=>mM;}class eE{oB nC;eE AD;}class rC{static String SF=yB.hE;static bool WH=false;static FB cF=null;static NB iH=null;static IB lH=null;static nB.StreamController<String> qH=new nB.StreamController<String>();static nB.Stream<String> tH=qH.stream.asBroadcastStream();static String GG(String i){String h=i;String g="auto";if(SF!=yB.hE){h=SF;}switch (h){case yB.hE:g="auto";break;case yB.jE:g="default";break;case yB.kE:g="pointer";break;case yB.jH:g="move";break;case yB.iF:g="text";break;case yB.nH:g="wait";break;}if(WH){g="none";}return g;}}class u extends CB{static const String mC="click";static const String aH="doubleClick";static const String vD="mouseDown";static const String mE="mouseUp";static const String mF="mouseMove";static const String yD="mouseOut";static const String rF="mouseOver";static const String sF="mouseWheel";static const String xF="middleClick";static const String xH="middleMouseDown";static const String AI="middleMouseUp";static const String zF="rightClick";static const String EI="rightMouseDown";static const String FI="rightMouseUp";static const String HI="rollOut";static const String JI="rollOver";num jP,kP;num mP,nP;num DQ,EQ;bool HQ;bool BO;bool iO;bool IO;bool TO;int NQ;u(String g,[bool h=false]):super(g,h){xP(g,h);}void xP(String g,[bool h=false]){super.xP(g,h);jP=kP=0;mP=nP=0;DQ=EQ=0;HQ=false;BO=false;iO=false;IO=false;TO=false;NQ=0;}set SQ(NB g){jP=g.x;kP=g.y;}set UQ(NB g){mP=g.x;nP=g.y;}num get wE=>jP;num get xE=>kP;num get deltaX=>DQ;num get deltaY=>EQ;bool get TC=>HQ;bool get altKey=>BO;bool get ctrlKey=>IO;bool get shiftKey=>TO;int get bD=>NQ;}class YB extends CB{static const String UF="touchBegin";static const String ZF="touchEnd";static const String dF="touchCancel";static const String jF="touchMove";static const String pH="touchOver";static const String sH="touchOut";int eP;bool hP;num jP,kP;num mP,nP;bool BO;bool iO;bool IO;bool TO;num sP;int tP;int uP;YB(String g,[bool h=false]):super(g,h){xP(g,h);}void xP(String g,[bool h=false]){super.xP(g,h);eP=0;hP=false;jP=kP=0;mP=nP=0;BO=false;iO=false;IO=false;TO=false;sP=1.00;tP=0;uP=0;}set SQ(NB g){jP=g.x;kP=g.y;}set UQ(NB g){mP=g.x;nP=g.y;}int get OE=>eP;num get wE=>jP;num get xE=>kP;bool get altKey=>BO;bool get ctrlKey=>IO;bool get shiftKey=>TO;}class QD extends CB{static const String XF="textInput";String NM="";QD(String g,[bool h=false]):super(g,h);String get text=>NM;}abstract class NH{}class OH{}abstract class QB extends v{bool oI=false;bool WB=true;bool EK=true;int tabIndex=0;static const GC<u> mH=const GC<u>(u.yD);static const GC<u> GI=const GC<u>(u.mF);static const GC<u> II=const GC<u>(u.vD);static const GC<u> KI=const GC<u>(u.mE);static const GC<u> TI=const GC<u>(u.sF);aB<u> get onMouseOut=>QB.mH.forTarget(this);aB<u> get onMouseMove=>QB.GI.forTarget(this);aB<u> get onMouseDown=>QB.II.forTarget(this);aB<u> get onMouseUp=>QB.KI.forTarget(this);aB<u> get onMouseWheel=>QB.TI.forTarget(this);static const GC<YB> VI=const GC<YB>(YB.jF);static const GC<YB> WI=const GC<YB>(YB.ZF);static const GC<YB> YI=const GC<YB>(YB.dF);aB<YB> get onTouchMove=>QB.VI.forTarget(this);aB<YB> get onTouchEnd=>QB.WI.forTarget(this);aB<YB> get onTouchCancel=>QB.YI.forTarget(this);static const GC<bC> cI=const GC<bC>(bC.YF);static const GC<bC> eI=const GC<bC>(bC.VF);aB<bC> get onKeyUp=>QB.cI.forTarget(this);aB<bC> get onKeyDown=>QB.eI.forTarget(this);static const GC<QD> fI=const GC<QD>(QD.XF);aB<QD> get IJ=>QB.fI.forTarget(this);}abstract class v extends FC implements dE{static int bH=0;int CN=bH++ ;num IM=0.0;num LM=0.0;num bN=0.0;num nN=0.0;num tN=1.0;num CO=1.0;num HO=0.0;num QO=0.0;num YO=0.0;num eO=1.0;bool hO=true;bool kO=false;oD sO=null;EB wO=null;IB DP=null;bool HP=false;List<NH> OP=null;OF PP=null;String SP=null;String dM="";ED aP=null;final JB cP=new JB.JK();final JB fP=new JB.JK();bool lP=true;num get x=>IM;num get y=>LM;num get YC=>bN;num get ZC=>nN;num get lB=>tN;num get tB=>CO;num get skewX=>HO;num get skewY=>QO;num get VB=>YO;bool get visible=>hO;bool get eG=>kO;num get alpha=>eO;oD get mask=>sO;bool get lI=>wO!=null;OF get TJ=>PP;String get cD=>SP;String get name=>dM;ED get parent=>aP;NB get JE{var g=this.BD;return (g!=null)?this.VC(g.nQ):null;}num get CJ{var g=this.JE;return (g!=null)?g.x:0.0;}num get DJ{var g=this.JE;return (g!=null)?g.y:0.0;}v get root{v g=this;while (g.aP!=null)g=g.aP;return g;}gC get BD{v g=this.root;return (g is gC)?g:null;}set x(num g){if(g is num)IM=g;lP=true;}set y(num g){if(g is num)LM=g;lP=true;}set YC(num g){if(g is num)bN=g;lP=true;}set ZC(num g){if(g is num)nN=g;lP=true;}set lB(num g){if(g is num)tN=g;lP=true;}set tB(num g){if(g is num)CO=g;lP=true;}set skewX(num g){if(g is num)HO=g;lP=true;}set skewY(num g){if(g is num)QO=g;lP=true;}set VB(num g){if(g is num)YO=g;lP=true;}set visible(bool g){if(g is bool)hO=g;}set alpha(num g){if(g is num){if(g<0.0)g=0.0;if(g>1.0)g=1.0;eO=g;}}set mask(oD g){sO=g;}set cD(String g){SP=g;}void setTransform(num g,num h,[num i,num j,num k,num l,num m,num n,num o]){if(g is num)IM=g;if(h is num)LM=h;if(i is num)tN=i;if(j is num)CO=j;if(k is num)YO=k;if(l is num)HO=l;if(m is num)QO=m;if(n is num)bN=n;if(o is num)nN=o;lP=true;}num get width=>qB(this.ZB).width;num get height=>qB(this.ZB).height;void set width(num h){this.lB=1;num g=this.width;this.lB=(g!=0.0)?h/g:1.0;}void set height(num h){this.tB=1;num g=this.height;this.tB=(g!=0.0)?h/g:1.0;}void zE(){if(aP!=null)aP.LC(this);}JB get ZB{if(lP){lP=false;num i=HO+YO;num j=QO+YO;num g=tN;num h=CO;num o=bN;num q=nN;if(g>-0.0001&&g<0.0001)g=(g>=0)?0.0001:-0.0001;if(h>-0.0001&&h<0.0001)h=(h>=0)?0.0001:-0.0001;if(i==0.0&&j==0.0){fP.LE(g,0.0,0.0,h,IM-o*g,LM-q*h);}else{num k,l,m,n;num t=XB.cos(i);num AB=XB.sin(i);if(i==j){k=g*t;l=g*AB;m=-h*AB;n=h*t;}else{k=g*XB.cos(j);l=g*XB.sin(j);m=-h*AB;n=h*t;}num GB=IM-(o*k+q*m);num KB=LM-(o*l+q*n);fP.LE(k,l,m,n,GB,KB);}}return fP;}JB QE(v h){if(h==aP){return this.ZB.clone();}if(h!=null&&h.aP==this){return h.ZB.OG();}JB j=new JB.JK();v g=this;while (g!=h&&g.aP!=null){j.zC(g.ZB);g=g.aP;}if(h==null&&g!=null){j.zC(g.ZB);g=null;}if(g==h)return j;JB k=new JB.JK();v i=h;while (i!=this&&i.aP!=null){k.zC(i.ZB);i=i.aP;}k.YG();if(i==this){return k;}if(i!=g){return null;}j.zC(k);return j;}IB qB(JB h,[IB g]){if(g==null)g=new IB.FK();g.x=h.uB;g.y=h.vB;g.width=0;g.height=0;return g;}v sB(num g,num h){if(qB(zD).contains(g,h))return this;return null;}NB VC(NB h){cP.identity();for(var g=this;g!=null;g=g.aP){cP.zC(g.ZB);}cP.YG();return cP.PE(h);}void AR(AC g){g.context.translate(DP.x,DP.y);wO.iB(g);}void dispatchEvent(CB g){List<v> h=null;if(g.EE||g.bubbles){for(v j=parent;j!=null;j=j.parent){if(j.TQ(g)){if(h==null)h=[] ;h.add(j);}}}if(h!=null&&g.EE){for(int i=h.length-1;i>=0;i-- ){h[i].PQ(g,this,vC.TF);if(g.fD)return;}}PQ(g,this,vC.tD);if(g.fD)return;if(h!=null&&g.bubbles){for(int i=0;i<h.length;i++ ){h[i].PQ(g,this,vC.cH);if(g.fD)return;}}}void VQ(ED h){for(var g=h;g!=null;g=g.aP)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");aP=h;}void iB(AC g);}class vC{static const int TF=1;static const int tD=2;static const int cH=3;}class NB{num IM;num LM;NB(num g,num h):IM=g,LM=h;NB.FK():this(0,0);NB clone()=>new NB(IM,LM);String toString()=>"Point [x=${IM}, y=${LM}]";num get x=>IM;num get y=>LM;num get length=>XB.sqrt(IM*IM+LM*LM);set x(num g){IM=g;}set y(num g){LM=g;}NB add(NB g){return new NB(IM+g.x,LM+g.y);}NB subtract(NB g){return new NB(IM-g.x,LM-g.y);}FE(NB g){IM=g.x;LM=g.y;}bool SG(NB g){return IM==g.x&&LM==g.y;}}class FD{static const String SH="dynamic";static const String TD="input";}class EC{static const String dC="center";static const String YH="end";static const String eH="justify";static const String uF="right";}class qD extends CB{qD(String g):super(g,false);bool get EE=>false;}class PH{List<tC> hM=new List<tC>();num IN=1.0;sE(UB g){IN=g.volume;hM.forEach(JO);}qO(tC g){hM.add(g);}MP(tC g){hM.remove(g);}JO(tC g){var h=g.cM;var i=g.jM.volume;if(h!=null){h.volume=IN*i;}}}class EB implements dE{int SM;int fM;bool rM;num BN;num LN;int UN;int gN;int qN;int zN;int GO;int PO;int WO;int cO;int fO;jC.CanvasImageSource mO;jC.CanvasRenderingContext2D YN;static bE wF=new bE();EB(int i,int j,[bool k=true,int g=0xFFFFFFFF,l=1.0]){SM=HC(i);fM=HC(j);rM=k;BN=l.toDouble();LN=BN/BE;UN=((1.0-LN).abs()<0.001)?0:1;zN=0;GO=0;gN=SM;qN=fM;PO=0;WO=0;cO=(SM*LN).ceil();fO=(fM*LN).ceil();var h=new jC.CanvasElement(width:cO,height:fO);mO=h;YN=h.context2D;YN.fillStyle=rM?oF(g):VD(g);YN.fillRect(0,0,cO,fO);}EB.LK(jC.ImageElement g,[num j=1.0]){var h=HC(g.naturalWidth);var i=HC(g.naturalHeight);rM=true;BN=UC(j);LN=BN;SM=(h/BN).round();fM=(i/BN).round();UN=((1.0-LN).abs()<0.001)?0:1;zN=0;GO=0;gN=SM;qN=fM;PO=0;WO=0;cO=h;fO=i;mO=g;}EB.MK(QF g){var h=g.XJ.WM;SM=g.LJ.toInt();fM=g.KJ.toInt();rM=true;BN=h.BN;LN=h.LN;UN=g.SJ?3:2;zN=g.GJ;GO=g.HJ;gN=g.VG;qN=g.UG;PO=(g.sI*LN).floor();WO=(g.tI*LN).floor();cO=(g.VG*LN).ceil();fO=(g.UG*LN).ceil();mO=h.mO;}static nB.Future<EB> JD(String g,[bE i=null,num k=1.0]){if(i==null){i=EB.wF;}if(gC.qE&&i.autoHiDpi){if(g.contains("@1x.")&&CE>=1.5){k=k*2.0;g=g.replaceAll("@1x.","@2x.");}}nB.Completer<EB> j=new nB.Completer<EB>();jC.ImageElement h=new jC.ImageElement();nB.StreamSubscription l;nB.StreamSubscription m;l=h.onLoad.listen((o){l.cancel();m.cancel();j.complete(new EB.LK(h,k));});m=h.onError.listen((o){l.cancel();m.cancel();j.completeError(new StateError("Failed to load image."));});if(i.webp==false){h.src=g;return j.future;}XI.then((bool q){var t=new RegExp(r"(png|jpg|jpeg)$",multiLine:false,caseSensitive:true);var n=t.firstMatch(g);if(q==false||n==null){h.src=g;}else{h.src=g.substring(0,g.length-n.group(1).length)+"webp";}});return j.future;}int get width=>SM;int get height=>fM;EB clone([num g]){g=(g!=null)?g:BN;var h=new EB(SM,fM,true,0,g);h.pI(this);return h;}void pI(dE h,[JB g=null]){JR();g=(g==null)?new JB.JK():g.clone();g.scale(LN,LN);var i=new AC.KK(YN,g);h.iB(i);YN.globalAlpha=1.0;YN.globalCompositeOperation=uD.wD;}void clear(){JR();YN.setTransform(LN,0.0,0.0,LN,0.0,0.0);YN.clearRect(0,0,SM,fM);}void iB(AC h){var g=h.context;switch (UN){case 0:g.drawImage(mO,zN,GO);break;case 1:g.drawImageScaled(mO,zN,GO,gN,qN);break;case 2:g.drawImageScaledFromSource(mO,PO,WO,cO,fO,zN,GO,gN,qN);break;case 3:g.transform(0.0,-1.0,1.0,0.0,zN,GO+qN);g.drawImageScaledFromSource(mO,PO,WO,fO,cO,0.0,0.0,qN,gN);break;}}void gG(AC h,IB g){if(g.width==0||g.height==0)return;var i=h.context;if(UN!=0){JR();}var j=(g.x-zN)*LN;var k=(g.y-GO)*LN;var l=g.width*LN;var m=g.height*LN;var n=g.x+zN;var o=g.y+GO;var q=g.width;var t=g.height;i.drawImageScaledFromSource(mO,j,k,l,m,n,o,q,t);}void JR(){if(YN==null){var g=BN/BE;var i=(SM*g).ceil();var j=(fM*g).ceil();var h=new jC.CanvasElement(width:i,height:j);var k=new JB(g,0.0,0.0,g,0.0,0.0);var l=new AC.KK(h.context2D,k);this.iB(l);BN=BN;LN=g;UN=((1.0-LN).abs()<0.001)?0:1;zN=0;GO=0;gN=SM;qN=fM;PO=0;WO=0;cO=i;fO=j;mO=h;YN=h.context2D;}}}class fE extends nD implements oB{static const String XH='TIME_OUT';bool aN=false;num mM=0.0;num yM=0.0;Map<String,num> KO;bool SO=true;fE(num g,EB h,[String i=nD.xD]):super(h,i){if(g<=0)throw new ArgumentError('Time must be greater than zero');yM=g;MG();}bool DC(num g){if(aN&&ratio>0.0){ratio=ratio-g/LD;if(ratio==0.0)pause();}return true;}void start(){aN=true;}void pause(){aN=false;}void reset([num g=0.0]){pause();g=XB.max(g,0.0);if(g!=0.0){yM=g;MG();}ratio=1.0;}void DE(String g,num h){KO[g]=h/LD;}void MG(){KO=new Map<String,num>();DE(fE.XH,0);}num get LD=>yM;num get RJ=>ratio*LD;void set ratio(num h){num i=ratio;super.ratio=h;if(SO){KO.forEach((j,g){if(g<i&&g>=ratio)dispatchEvent(new CB(j));});}}}class rD{static FF.AudioContext sD=new FF.AudioContext();FF.AudioNode zM;FF.GainNode JN;rD([FF.AudioNode g]){zM=(g!=null)?g:sD.destination;JN=sD.createGain();JN.connectNode(zM);}void sE(UB g){var h=g.volume;JN.gain.value=XB.pow(h,2);}FF.AudioNode get XG=>JN;}typedef num SD(num ratio);typedef void RF<wC extends CB>(wC event);class lC<wC extends CB> extends nB.StreamSubscription<wC>{int NN=0;bool ZN=false;bool mN=false;aB<wC> wN;RF<wC> LO;lC.GK(this.wN,this.LO,this.mN);bool get isPaused=>NN>0;bool get xI=>ZN;bool get yI=>mN;aB<wC> get rI=>wN;void onData(void g(wC event)){LO=g;}void onError(void g(error)){}void onDone(void g()){}nB.Future cancel(){if(ZN==false){ZN=true;wN.QQ(this);}return null;}void pause([nB.Future g]){NN++ ;if(g!=null){g.whenComplete(resume);}}void resume(){if(NN==0){throw new StateError("Subscription is not paused.");}NN-- ;}PQ(wC g,FC i,int h){if(ZN)return;if(mN!=(h==vC.TF))return;g.pM=i;g.BQ=wN.target;g.zP=h;LO(g);}}class PB implements oB{eE QN;eE lN;num uN=0.0;PB(){QN=new eE();lN=QN;}void add(oB g){if(g is !oB){throw new ArgumentError("The supplied animatable does not extend type Animatable.");}if(this.contains(g)==false){var h=new eE();lN.nC=g;lN.AD=h;lN=h;}}void remove(oB h){if(h!=null){var g=QN;while (identical(g,lN)==false){if(identical(g.nC,h)){g.nC=null;break;}g=g.AD;}}}bool contains(oB h){if(h!=null){var g=QN;while (identical(g,lN)==false){if(identical(g.nC,h))return true;g=g.AD;}}return false;}fB CF(v g,num h,[SD i]){fB j=i!=null?new fB(g,h,i):new fB(g,h);add(j);return j;}ZE kB(Function h,num i){ZE g=new ZE(h,i);add(g);return g;}bool DC(num j){uN+= j;var g=QN;var i=lN;while (identical(g,i)==false){var k=g.nC;if(k==null){var h=g.AD;g.nC=h.nC;g.AD=h.AD;if(identical(h,i))i=g;if(identical(h,lN))lN=g;}else if(k.DC(j)==false){g.nC=null;}else{g=g.AD;}}return true;}}class uD{static const String wD="source-over";}String VD(int g){int h=(g>>16)&0xFF;int i=(g>>8)&0xFF;int j=g&0xFF;return "rgb(${h},${i},${j})";}yF dH(String g){if(gE.containsKey(g)==false){gE[g]=new yF(g);}return gE[g];}class bF extends qD{num dN;bF(num g):super(CB.eF),dN=g;}class fF{static String wH=PF.oE;static nB.StreamController<String> zH=new nB.StreamController<String>();static nB.Stream<String> CI=zH.stream.asBroadcastStream();static String get NI=>wH;}class zB{static const String nF="B";static const String rH="BL";static const String qF="BR";static const String VH="L";static const String uF="R";static const String vH="T";static const String yH="TR";static const String oE="";}String oF(int g){int h=(g>>24)&0xFF;int i=(g>>16)&0xFF;int j=(g>>8)&0xFF;int k=g&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class eC extends oB{final num jO;final num oO;final SD uO;num BP;Function EP;Function IP;Function LP;num yM;num mM;num RP;bool TP;bool WP;eC(num g,num i,num j,[SD h]):jO=g,oO=i,uO=(h!=null)?h:RB.fC{BP=g;mM=0.0;yM=XB.max(0.0001,j);RP=0.0;TP=false;WP=false;}bool DC(num g){if(mM<yM||WP==false){mM=mM+g;if(mM>yM)mM=yM;if(mM>=0.0){if(WP==false){WP=true;if(EP!=null)EP();}num h=mM/yM;num i=uO(h);BP=jO+i*(oO-jO);if(IP!=null)IP(TP?BP.round():BP);if(LP!=null&&mM==yM)LP();}}return mM<yM;}num get ME=>jO;num get NE=>oO;num get LD=>yM;num get currentTime=>mM;set hC(num g){if(WP==false)mM=mM+RP-g;RP=g;}void set onStart(void g()){EP=g;}void set XC(void g(num value)){IP=g;}void set onComplete(void g()){LP=g;}}class pF extends qD{pF():super(CB.kF);}class AC{final jC.CanvasRenderingContext2D YN;num mM=0.0;num xO=0.0;mD FP;mD KP;AC.KK(jC.CanvasRenderingContext2D i,[JB h]):YN=i{FP=new mD();KP=FP;var g=FP.matrix;if(h is JB){g.FE(h);}YN.setTransform(g.a,g.b,g.c,g.d,g.uB,g.vB);YN.globalAlpha=1.0;YN.globalCompositeOperation=uD.wD;}jC.CanvasRenderingContext2D get context=>YN;num get currentTime=>mM;num get nI=>xO;void reset([JB h,num i,num j]){mM=(i is num)?i:0.0;xO=(j is num)?j:0.0;KP=FP;var g=FP.matrix;if(h is JB){g.FE(h);}YN.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);YN.clearRect(0,0,YN.canvas.width,YN.canvas.height);YN.setTransform(g.a,g.b,g.c,g.d,g.uB,g.vB);YN.globalAlpha=1.0;YN.globalCompositeOperation=uD.wD;}void hG(v h){var g=h.ZB;var AB=h.alpha;var j=h.mask;var k=h.TJ;var n=h.cD;var l=KP;var i=KP.EJ;KP=i;var o=i.matrix;var q=l.alpha.toDouble()*AB;var t=(n!=null)?n:l.cD;o.uE(g,l.matrix);i.alpha=q;i.cD=t;if(j!=null){if(j.NC==null){g=i.matrix;}else if(identical(j.NC,h)){g=i.matrix;}else if(identical(j.NC,h.parent)){g=l.matrix;}else{g=j.NC.QE(h);if(g==null)g=zD;else g.zC(i.matrix);}j.jI(this,g);}if(k!=null){if(k.NC==null){g=i.matrix;}else if(identical(k.NC,h)){g=i.matrix;}else if(identical(k.NC,h.parent)){g=l.matrix;}else{g=k.NC.QE(h);if(g==null)g=zD;else g.zC(i.matrix);}k.vJ(this,g);}var m=o;YN.setTransform(m.a,m.b,m.c,m.d,m.uB,m.vB);YN.globalCompositeOperation=t;YN.globalAlpha=q;if(h.lI){h.AR(this);}else{h.iB(this);}if(k!=null){k.xJ();}if(j!=null){j.qI();}KP=l;}}class vF extends qD{vF():super(CB.tF);}class yF{String fontStyle;int aD=0;int HE=0;int height=0;yF(String j){this.fontStyle=j;var h=new jC.Element.tag("span");h.style.font=this.fontStyle;h.text="Hg";var g=new jC.Element.tag("div");g.style.display="inline-block";g.style.width="1px";g.style.height="0px";var i=new jC.Element.tag("div");i.append(g);i.append(h);jC.document.body.append(i);try {g.style.verticalAlign="baseline";this.aD=g.offsetTop-h.offsetTop;g.style.verticalAlign="bottom";this.height=g.offsetTop-h.offsetTop;this.HE=height-aD;}catch (k){}finally {i.remove();}}}class RB{static num fC(num g){return g;}static num IG(num g){return g*g*g;}static num IC(num g){g=1.0-g;return 1.0-g*g*g;}static num gI(num g){if(g==0.0||g==1.0)return g;return XB.pow(2.0,-10.0*g)*XB.sin((g-0.3/4.0)*(2.0*XB.PI)/0.3)+1;}}bool BI(bool g){if(g is bool){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a bool.");}}class YD{static const String hE="auto";static const String DI="stop";static const String AG="once";}final List<lC<bF>> BG=[] ;int HC(int g){if(g is int){return g;}else{throw new ArgumentError("The supplied value (${g}) is not an int.");}}final List<lC<pF>> DG=[] ;class CG{QB target=null;bool TC=false;int tE=0;int bD=0;String bG,cG;String ZG,aG;CG(this.bG,this.cG,this.ZG,this.aG);}final List<lC<vF>> FG=[] ;num UC(num g){if(g is num){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a number.");}}pE(qD h,List<lC> i){var k=i.length;for(int g=0;g<k;g++ ){var j=i[g];if(j.xI==false){h.CQ=false;h.GQ=false;var l=j.rI.target;j.PQ(h,l,vC.tD);}else{i.removeAt(g);k-- ;g-- ;}}}class BC{final String yE;num ME=double.NAN;num NE=double.NAN;BC(this.yE);void cB(num g){this.NE=g.toDouble();}bool get zI=>!ME.isNaN&&!NE.isNaN;num JQ(v g){switch (yE){case 'x':return g.x;case 'y':return g.y;case 'pivotX':return g.YC;case 'pivotY':return g.ZC;case 'scaleX':return g.lB;case 'scaleY':return g.tB;case 'skewX':return g.skewX;case 'skewY':return g.skewY;case 'rotation':return g.VB;case 'alpha':return g.alpha;default:return 0.0;}}void bQ(v g,num h){switch (yE){case 'x':g.x=h;break;case 'y':g.y=h;break;case 'pivotX':g.YC=h;break;case 'pivotY':g.ZC=h;break;case 'scaleX':g.lB=h;break;case 'scaleY':g.tB=h;break;case 'skewX':g.skewX=h;break;case 'skewY':g.skewY=h;break;case 'rotation':g.VB=h;break;case 'alpha':g.alpha=h;break;}}}String LI(String g){if(g is String){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a string.");}}class OI{static int QI=0;int OE=QI++ ;QB target=null;bool KE=false;OI(this.target,this.KE);}String HG(String g){RegExp h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);Match i=h.firstMatch(g);return i.group(1);}class uJ extends oD{final IB RQ;uJ(num g,num h,num i,num j):RQ=new IB(g,h,i,j);vP(){YN.rect(RQ.x,RQ.y,RQ.width,RQ.height);}bool WG(num g,num h){return RQ.contains(g,h);}}class gC extends ED{static bool qE=dI;jC.CanvasElement WQ;jC.CanvasRenderingContext2D YN;int cO,fO;int YQ;int ZQ,cQ;IB eQ;JB fQ;JB gQ;aE KQ;PB KM;QB hQ;AC iQ;String jQ;String kQ;String lQ;String mQ;NB nQ;QB oQ;List<CG> pQ;Map<int,OI> qQ;u rQ;YB sQ;gC(String k,jC.CanvasElement g,[int h,int i,int j]){if(g is !jC.CanvasElement){throw new ArgumentError("The canvas argument is not a CanvasElement");}if(g.tabIndex==-1)g.tabIndex=0;if(g.style.outline=="")g.style.outline="none";dM=k;WQ=g;YN=g.context2D;cO=(h!=null)?h:g.width;fO=(i!=null)?i:g.height;YQ=(j!=null)?j:30;ZQ=-1;cQ=-1;eQ=new IB.FK();fQ=new JB.JK();gQ=new JB.JK();yQ();KQ=null;KM=new PB();iQ=new AC.KK(YN);jQ=YD.hE;kQ=RD.hF;lQ=zB.oE;pQ=[new CG(u.vD,u.mE,u.mC,u.aH),new CG(u.xH,u.AI,u.xF,u.xF),new CG(u.EI,u.FI,u.zF,u.zF)];mQ=yB.jE;oQ=null;nQ=new NB(0,0);rQ=new u(u.mC,true);rC.tH.listen(tH);WQ.onMouseDown.listen(nO);WQ.onMouseUp.listen(nO);WQ.onMouseMove.listen(nO);WQ.onMouseOut.listen(nO);WQ.onMouseWheel.listen(BR);qQ=new Map<int,OI>();sQ=new YB(YB.UF,true);fF.CI.listen(CR);CR(null);WQ.onKeyDown.listen(DR);WQ.onKeyUp.listen(DR);WQ.onKeyPress.listen(DR);}aE get AF=>KQ;PB get dD=>KM;NB get JE=>nQ;QB get focus=>hQ;String get align=>lQ;GR(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x(num g){GR();}set y(num g){GR();}set YC(num g){GR();}set ZC(num g){GR();}set lB(num g){GR();}set tB(num g){GR();}set skewX(num g){GR();}set skewY(num g){GR();}set VB(num g){GR();}set alpha(num g){GR();}set width(num g){GR();}set height(num g){GR();}BJ(num g,num h){if(jQ==YD.hE||jQ==YD.AG){yQ();iQ.reset(gQ,g,h);iB(iQ);if(jQ==YD.AG)jQ=YD.DI;}}yQ(){var GB=WQ.getBoundingClientRect();var KB=WQ.clientLeft+GB.left;var SB=WQ.clientTop+GB.top;var g=WQ.clientWidth;var h=WQ.clientHeight;var o=cO;var q=fO;if(g is !num)throw "dart2js_hint";if(h is !num)throw "dart2js_hint";if(o is !num)throw "dart2js_hint";if(q is !num)throw "dart2js_hint";if(g==0||h==0)return;var i=1.0;var j=1.0;var k=0.0;var l=0.0;var m=g/o;var n=h/q;switch (kQ){case RD.RH:i=m;j=n;break;case RD.ZH:i=j=(m>n)?m:n;break;case RD.hH:i=j=1.0;break;case RD.hF:i=j=(m<n)?m:n;break;}switch (lQ){case zB.yH:case zB.uF:case zB.qF:k=(g-o*i);break;case zB.vH:case zB.oE:case zB.nF:k=(g-o*i)/2;break;}switch (lQ){case zB.rH:case zB.nF:case zB.qF:l=(h-q*j);break;case zB.VH:case zB.oE:case zB.uF:l=(h-q*j)/2;break;}var t=eQ;t.x=-k/i;t.y=-l/j;t.width=g/i;t.height=h/j;var AB=(gC.qE?CE:1.0)/BE;gQ.LE(i,0.0,0.0,j,k,l);gQ.scale(AB,AB);fQ.LE(1.0,0.0,0.0,1.0,-KB-k,-SB-l);fQ.scale(1.0/i,1.0/j);if(ZQ!=g||cQ!=h){ZQ=g;cQ=h;WQ.width=(ZQ*AB).round();WQ.height=(cQ*AB).round();if(WQ.clientWidth!=g||WQ.clientHeight!=h){WQ.style.width="${g}px";WQ.style.height="${h}px";}dispatchEvent(new CB(CB.uH));}}tH(String g){WQ.style.cursor=rC.GG(mQ);}nO(jC.MouseEvent k){k.preventDefault();var SB=new DateTime.now().millisecondsSinceEpoch;var mB=k.button;QB g=null;NB i=fQ.XQ(k.client);NB GB=null;if(mB<0||mB>2)return;if(k.type=="mousemove"&&nQ.SG(i))return;CG h=pQ[mB];nQ=i;if(rC.cF!=null){rC.cF.AQ();}if(k.type!="mouseout"){g=sB(i.x,i.y) as QB;}var n=yB.jE;if(g is FB&&(g as FB).DF){n=yB.kE;}if(g is GD&&(g as GD).DF){n=yB.kE;}if(g is SC&&(g as SC).type==FD.TD){n=yB.iF;}if(mQ!=n){mQ=n;WQ.style.cursor=rC.GG(n);}if(oQ!=g){v KB=oQ;v t=g;List o=[] ;List q=[] ;int l=0;for(v j=KB;j!=null;j=j.parent){o.add(j);}for(v j=t;j!=null;j=j.parent){q.add(j);}for(;;l++ ){if(l==o.length)break;if(l==q.length)break;var hD=o[o.length-l-1];var gD=q[q.length-l-1];if(hD!=gD)break;}if(KB!=null){KB.dispatchEvent(rQ..xP(u.yD,true)..SQ=KB.VC(i)..UQ=i..HQ=h.TC);}for(int m=0;m<o.length-l;m++ ){v g=o[m];g.dispatchEvent(rQ..xP(u.HI,false)..SQ=g.VC(i)..UQ=i..HQ=h.TC);}for(int m=q.length-l-1;m>=0;m-- ){v g=q[m];g.dispatchEvent(rQ..xP(u.JI,false)..SQ=g.VC(i)..UQ=i..HQ=h.TC);}if(t!=null){t.dispatchEvent(rQ..xP(u.rF,true)..SQ=t.VC(i)..UQ=i..HQ=h.TC);}oQ=t;}String AB=null;bool CD=false;bool MD=false;if(k.type=="mousedown"){WQ.focus();AB=h.bG;if(g!=h.target||SB>h.tE+500){h.bD=0;}h.TC=true;h.target=g;h.tE=SB;h.bD++ ;}if(k.type=="mouseup"){AB=h.cG;h.TC=false;CD=(h.target==g);MD=CD&&h.bD.isEven&&(SB<h.tE+500);}if(k.type=="mousemove"){AB=u.mF;}if(AB!=null&&g!=null){GB=g.VC(i);g.dispatchEvent(rQ..xP(AB,true)..SQ=GB..UQ=i..HQ=h.TC..NQ=h.bD);if(CD){if(MD&&g.oI){g.dispatchEvent(rQ..xP(h.aG,true)..SQ=GB..UQ=i..HQ=h.TC);}else{g.dispatchEvent(rQ..xP(h.ZG,true)..SQ=GB..UQ=i..HQ=h.TC);}}}}BR(jC.WheelEvent g){var h=fQ.XQ(g.client);var i=sB(h.x,h.y) as QB;if(i!=null){i.dispatchEvent(rQ..xP(u.sF,true)..SQ=i.VC(h)..UQ=h..DQ=g.deltaX..EQ=g.deltaY);if(rQ.fD)g.preventDefault();}}List<nB.StreamSubscription<YB>> KR=[] ;CR(String h){KR.forEach((g)=>g.cancel());if(fF.NI==PF.fH){KR=[WQ.onTouchStart.listen(LR),WQ.onTouchEnd.listen(LR),WQ.onTouchMove.listen(LR),WQ.onTouchEnter.listen(LR),WQ.onTouchLeave.listen(LR),WQ.onTouchCancel.listen(LR)];}}LR(jC.TouchEvent j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=fQ.XQ(m.client);var h=sB(i.x,i.y) as QB;var g=qQ.containsKey(l)?qQ[l]:new OI(h,qQ.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(sQ..xP(YB.sH,true)..SQ=(g.target.BD!=null)?g.target.VC(i):new NB.FK()..UQ=i..eP=g.OE..hP=g.KE);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(sQ..xP(YB.pH,true)..SQ=h.VC(i)..UQ=i..eP=g.OE..hP=g.KE);g.target=h;}String k=null;if(j.type=="touchstart"){WQ.focus();qQ[l]=g;k=YB.UF;}if(j.type=="touchend"){qQ.remove(l);k=YB.ZF;}if(j.type=="touchcancel"){qQ.remove(l);k=YB.dF;}if(j.type=="touchmove"){k=YB.jF;}if(k!=null&&h!=null){h.dispatchEvent(sQ..xP(k,true)..SQ=h.VC(i)..UQ=i..eP=g.OE..hP=g.KE);}}}DR(jC.KeyboardEvent g){if(g.keyCode==8){g.preventDefault();}if(hQ==null){return;}if(g.type=="keypress"){var i=g.charCode;var l=g.keyCode;if(l==13)i=13;if(i==0)return;var m=new QD(QD.XF,true)..NM=new String.fromCharCodes([i]);hQ.dispatchEvent(m);}else{var h=HD.QH;var j="";if(g.type=="keyup")j=bC.YF;if(g.type=="keydown")j=bC.VF;if(g.keyLocation==jC.KeyLocation.LEFT)h=HD.VH;if(g.keyLocation==jC.KeyLocation.RIGHT)h=HD.uF;if(g.keyLocation==jC.KeyLocation.NUMPAD)h=HD.gH;if(g.keyLocation==jC.KeyLocation.JOYSTICK)h=HD.gF;if(g.keyLocation==jC.KeyLocation.MOBILE)h=HD.gF;var k=new bC(j,true)..BO=g.altKey..IO=g.ctrlKey..TO=g.shiftKey..rO=g.charCode..vO=g.keyCode..yO=h;hQ.dispatchEvent(k);if(k.fD){g.preventDefault();}}}}String RI(String i,String g){RegExp j=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);Match k=j.firstMatch(i);String h=k.group(1);return (h==null)?g:"${h}${g}";}nB.Future<bool> UI(){var h=new nB.Completer<bool>();var g=new jC.ImageElement();void i(){h.complete(g.width==2&&g.height==2);}g.onLoad.listen((j)=>i());g.onError.listen((j)=>i());g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return h.future;}IB rE(JB g,num m,num n,IB j){m=m.toDouble();n=n.toDouble();num SB=0.0;num mB=0.0;num o=m*g.a;num q=m*g.b;num t=m*g.a+n*g.c;num AB=m*g.b+n*g.d;num GB=n*g.c;num KB=n*g.d;num h=SB;if(h>o)h=o;if(h>t)h=t;if(h>GB)h=GB;num i=mB;if(i>q)i=q;if(i>AB)i=AB;if(i>KB)i=KB;num k=SB;if(k<o)k=o;if(k<t)k=t;if(k<GB)k=GB;num l=mB;if(l<q)l=q;if(l<AB)l=AB;if(l<KB)l=KB;if(j==null)j=new IB.FK();j.x=g.uB+h;j.y=g.vB+i;j.width=k-h;j.height=l-i;return j;}class fB implements oB{final v uQ;final SD uO;final List<BC> vQ=new List<BC>();Function EP;Function IP;Function LP;NF wQ;num yM;num mM;num RP;bool TP;bool WP;fB(v g,num h,[SD i=RB.fC]):uQ=g,uO=i{wQ=new NF(this);mM=0.0;yM=XB.max(0.0001,h);RP=0.0;TP=false;WP=false;}NF get gB=>wQ;void RN(BC g){if(uQ!=null&&WP==false){vQ.add(g);}}void complete(){if(yM>=mM)DC(yM-mM);}bool DC(num k){if(mM<yM||WP==false){mM=mM+k;if(mM>yM){mM=yM;}if(mM>=0.0){if(WP==false){WP=true;for(int g=0;g<vQ.length;g++ ){var h=vQ[g];h.ME=h.JQ(uQ);}if(EP!=null){EP();}}num l=mM/yM;num m=uO(l).toDouble();for(int g=0;g<vQ.length;g++ ){var h=vQ[g];if(h.zI){var i=h.ME.toDouble();var n=h.NE.toDouble();var j=i+m*(n-i);h.bQ(uQ,TP?j.round():j);}}if(IP!=null){IP();}if(LP!=null&&mM==yM){LP();}}}return mM<yM;}num get LD=>yM;num get currentTime=>mM;set hC(num g){if(WP==false)mM=mM+RP-g;RP=g;}void set onStart(void g()){EP=g;}void set XC(void g()){IP=g;}void set onComplete(void g()){LP=g;}}final nB.Future<bool> XI=UI();final JB zD=new JB.JK();final jC.CanvasElement ZI=new jC.CanvasElement(width:16,height:16);final jC.CanvasRenderingContext2D AE=ZI.context2D;final num BE=AE.backingStorePixelRatio==null?1.0:AE.backingStorePixelRatio.toDouble();final num CE=jC.window.devicePixelRatio==null?1.0:jC.window.devicePixelRatio;final bool aI=((){var g=jC.window.navigator.userAgent.toLowerCase();return g.indexOf("iphone")>=0||g.indexOf("ipad")>=0||g.indexOf("ipod")>=0||g.indexOf("android")>=0||g.indexOf("webos")>=0||g.indexOf("windows phone")>=0;})();final int bI=jC.window.screen==null?1024:XB.max(jC.window.screen.width,jC.window.screen.height);final bool dI=CE>1.0&&(!aI||bI>480);
//# sourceMappingURL=index.dart.map
//@ sourceMappingURL=index.dart.map
