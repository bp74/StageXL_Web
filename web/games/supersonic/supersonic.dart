import "dart:html" as RB;import "dart:math" as cB;import "dart:async" as kB;import "dart:web_audio" as AH;import "dart:convert" as oM;class pM{static const String qM="Chrome";static const String rM="Firefox";static const String sM="Internet Explorer";static const String tM="Safari";final String DL;final String minimumVersion;const pM(this.DL,[this.minimumVersion]);}class uM{const uM();}class vM{final String name;const vM(this.name);}class wM{const wM();}class xM{const xM();}class MC extends UC{static const num EH=1.0;static const num RJ=100;static const int SJ=0xFFFFFF;num aM=EH;int XL=5;jD xD;bool ZI=false;num uI=500;int CL=0xffffff;KE FC;fB OB;NJ zD;bool vN=true;bool dF=false;num RI=60.0;xF cE;String aC=AF;bool fG=false;String HM="Web";MC(int g,int h):super(g,h){this.addEventListener(DB.VH,(i){this.eL();});}set DE(bool g){vN=g;this.dispatchEvent(new t(t.GE,this));}bool get DE=>vN;void eL(){if(!ZI){this.addEventListener(u.SE,(g)=>this.dF=false);this.addEventListener(u.CD,(g)=>this.dF=true);this.KM();this.addEventListener(t.wE,this.kG);this.addEventListener(t.GE,this.wL);this.addEventListener(t.sE,this.zL);this.addEventListener(t.vE,this.AM);this.addEventListener(t.uE,this.uL);this.addEventListener(t.tE,this.xL);this.addEventListener(t.xE,this.jG);this.addEventListener(t.yE,this.iG);this.WD();this.kE=0;this.BE=0;this.AE=3;this.start();ZI=true;}}String qB(String j,[List h=null]){var i=q.cL(j);if(h!=null){for(int g=0;g<h.length;g++ ){i=i.replaceAll("{${g}}",h[g].toString());}}return i;}void KM(){this.aM=EH;this.CL=SJ;this.uI=RJ;this.XL=5;this.RI=60000;}void WD(){this.xD=new jD(this);this.HB(this.xD);QB g=q.TB("items").MB("button_exit");QB h=q.TB("items").MB("button_exit_2");this.FC=new KE(new tB(g),new tB(h),new tB(g),new tB(h));this.FC.width=75;this.FC.height=66;this.FC.x=707;this.FC.y=525;this.FC.addEventListener(u.CD,sL);this.HB(this.FC);this.FC.visible=false;this.zD=new NJ(this,aC);this.zD.x=0;this.zD.y=0;this.HB(this.zD);}void ML(){var g=this.vD();g.text=this.qB("MESSAGE_RESTART_LEVEL");g.addEventListener(SB.NC,this.oI);}void IL(int h){var g=this.vD();g.text=this.qB("MESSAGE_FREE_LEVEL_BARRIER_${h}");g.addEventListener(SB.NC,this.oI);}void oI(SB g){this.fD(g.cF);this.xD.GL();}void LI(){this.xD.dG();var g=this.vD();if(this.rB==0){g.text=this.qB("MESSAGE_FIRST_LEVEL_WEB");}else{g.text=this.qB("MESSAGE_START_LEVEL",[(this.rB+1)]);}g.addEventListener(SB.NC,this.CM);}void CM(SB g){this.fD(g.cF);this.lL();}void JL(){var g=this.vD();g.text=this.qB("MESSAGE_GAME_OVER");g.addEventListener(SB.NC,this.tL);}void tL(SB g){this.fD(g.cF);}fB vD([fB g=null,num i=1.0,bool j=true]){if(this.OB!=null)this.fD(this.OB);this.FC.visible=false;this.zD.visible=true;if(g==null){this.OB=new fB(this,j,aC);}else{this.OB=g;}this.OB.width=fB.qE;this.OB.height=fB.HE;this.OB.x=(this.bF/2)-(fB.qE/2)+30;this.OB.y=(this.QI/2)-(fB.HE/2);this.OB.alpha=0;this.HB(this.OB);var h=new QF(this.OB,i,LG.NG);h.CI.alpha.vG(1);lB.add(h);return this.OB;}void fD(fB g){this.paused=false;this.zD.visible=true;this.FC.visible=true;if(g==null)return;g.bE();if(this.contains(g)){this.HC(g);}this.OB=null;}void ZL(){lB.remove(cE);if(this.fG)this.qI(null);this.dF=true;this.DE=false;}void BM(){if(this.OB!=null)return;if(HM.toLowerCase()=="web")return;lB.remove(cE);this.cE=new xF(this.ZL,this.RI);lB.add(this.cE);this.fG=true;this.paused=true;var g=this.vD(null,200,false);this.FC.visible=true;g.text=this.qB("MESSAGE_FIRST_LEVEL");g.addEventListener(SB.NC,this.qI);}void qI(SB g){lB.remove(this.cE);this.fG=false;this.OB.iB(SB.NC);this.fD(this.OB);}void sL(u h){if(this.OB is OJ)return;var g=new OJ(this,aC);this.vD(g);this.paused=true;g.addEventListener(SB.NC,this.pL);g.addEventListener(SB.rE,this.oL);}void pL(SB g){this.dispatchEvent(new t(t.yE,this));this.OB.iB(SB.NC);this.OB.iB(SB.rE);this.fD(this.OB);this.paused=true;}void oL(SB g){this.OB.iB(SB.NC);this.OB.iB(SB.rE);this.fD(OB);}void kG(t g){this.xD.dG();lB.ZF(this.LI,0.5);}void TL(){this.xD.dG();}void zL(t g){}void wL(t g){}void AM(t g){}void uL(t g){}void xL(t g){}void jG(t g){lB.ZF(this.JL,2.0);}void iG(t g){}}class UC extends nC{num gN=0;int kN=0;bool nN=true;int pN=3;num qN=0.0;int rN;int sN;UC(int g,int h){WM(g,h);}void WM(int g,int h){rN=g;sN=h;this.dispatchEvent(new t(t.sF,this));}int get bF=>rN;int get QI=>sN;num get kE=>qN;int get AE=>pN;num get BE=>gN;int get UM=>gN.toDouble().round().toInt();int get rB=>kN;bool get paused=>nN;void start(){this.paused=false;this.dispatchEvent(new t(t.wE,this));}void YL(){this.dispatchEvent(new t(t.xE,this));}set kE(num g){if(g<0.0)g=0.0;if(g>1.0)g=1.0;qN=g;this.dispatchEvent(new t(t.sE,this));}set AE(int g){if(g<0)g=0;pN=g;this.dispatchEvent(new t(t.GE,this));if(pN==0)this.YL();}set BE(num g){if(g<0)g=0;gN=g;this.dispatchEvent(new t(t.vE,this));}set rB(int g){if(g<0)g=0;kN=g;this.dispatchEvent(new t(t.uE,this));}int lL(){this.rB+= 1;return this.rB;}set paused(bool g){nN=g;this.dispatchEvent(new t(t.tE,this));}}class t extends DB{static const String GE="GameEvent.TYPE_LIVES_CHANGED";static const String sE="GameEvent.TYPE_PROGRESS_CHANGED";static const String tE="GameEvent.TYPE_PAUSE_CHANGED";static const String uE="GameEvent.TYPE_LEVEL_CHANGED";static const String vE="GameEvent.TYPE_SCORE_CHANGED";static const String wE="GameEvent.TYPE_GAME_START";static const String xE="GameEvent.TYPE_GAME_OVER";static const String yE="GameEvent.TYPE_GAME_ABORT";static const String sF="GameEvent.TYPE_GAME_SIZE_CHANGED";UC CB;t(String g,this.CB,[bool h=false]):super(g,h);}class jD extends nF{static num CH=0.025;static num pF=1.0;static int kD=600;static int qF=800;static int rF=600;static int FH=400;static int GH=300;static num IE=cB.sqrt(qF*qF+rF*rF);static num VJ=(IE*2/kD);static int HH=6;LC VB;yC bB;yC bC;QJ uC;num pG=30.0*cB.PI/180;num oG=1.0*cB.PI/180;num EE=0.05;num mG=-1;num gF=1;PJ UB;tB FD;List TG=["barrier01","barrier02","barrier03","barrier04","barrier05","barrier06","barrier07"];mB UG;oC VG;mB II;oC HL;mB AJ;int nG=15;num aI;bool wD=false;num YF=0;lC cG;lC UF;num RG=0.90;num vI=0;NE wN;tB NN;LH jB;int WL=0;tB ZC;bool uD=false;num gE,hE;aJ UI;kB.StreamSubscription<RE> iE;jD(MC g):super(g){wN=new NE.aN(80,60,690,524);this.mask=wN;this.UG=q.eG("speedalizer");this.VG=this.UG.play(true);this.jB=new LH();this.HB(this.jB);UI=new aJ(800,600);HB(UI);gE=hE=0;VC.addEventListener(u.JG,this.lG);VC.addEventListener(u.CD,this.lG);VC.addEventListener(u.SE,this.lG);iE=this.rL.listen(this.xN);}void lG(u g){gE=g.wI;hE=g.xI;}void JM(){var g=this.CB.BE;this.CB.BE=g+(this.CB as MC).uI*(this.CB.rB*this.CB.AE);}void lI(t g){}void fF(t g){super.fF(g);this.bM();}void bM(){uD=false;iE.pause();this.YF=0;this.CB.kE=0;this.wD=false;num h=60;this.uC=new QJ(IE,HH*h);for(var g=this.uC.GB.length;g>=0;g-- ){if(g%h!=0&&g%h!=1){this.uC.sI(g);}}this.VB=new LC(FH,GH);this.bB=new yC(0,0,0);this.bC=new yC(0,0,pF);this.oG=(1+(0.1*this.CB.rB))*cB.PI/180;this.EE=0.015+(0.004*this.CB.rB);this.gF=2+this.CB.rB;this.mG=-this.gF;this.vI=this.CB.rB*2;this.nG=15+(this.CB.rB);this.WD();this.KL();iE.resume();}void WD(){if(this.UB!=null)this.HC(this.UB);this.UB=new PJ();this.HB(this.UB);if(this.ZC!=null)this.HC(this.ZC);this.ZC=new tB(q.TB("items").MB("crosshair"));this.ZC.gC=0.5;this.ZC.hC=0.5;this.ZC.x=(qF/2)-this.ZC.width/2;this.ZC.y=(rF/2)-this.ZC.height/2;this.HB(this.ZC);}void dG(){this.uD=false;this.iE.pause();var h=60;this.uC=new QJ(IE,HH*h);for(var g=this.uC.GB.length;g>=0;g-- )if(g%h!=0&&g%h!=1)this.uC.sI(g);this.VB=new LC(FH,GH);this.bB=new yC(0,0,0);this.bC=new yC(0,0,pF);this.oG=2*cB.PI/180;this.gF=0;this.mG=0;if(this.UB!=null){this.HC(this.UB);this.UB=null;}this.UB=new PJ();this.HB(this.UB);if(this.FD!=null){this.HC(this.FD);this.FD=null;}this.KI();this.iE.resume();}void KI(){var g=new lC(null);g.sC=-1;g.TC=0;g.position=this.bB.clone();g.position.z=0.5;this.UB.pD(g);}void JI(){var g=new lC(new tB(q.TB("items").MB("countdown01")));g.sC=0;g.TC=0;g.position=this.bB.clone();g.position.z=0.5;g.aE=0;g.eE=true;this.UB.pD(g);g=new lC(new tB(q.TB("items").MB("countdown02")));g.sC=0;g.TC=0;g.position=this.bB.clone();g.position.z=0;g.aE=1;g.eE=true;this.UB.pD(g);g=new lC(new tB(q.TB("items").MB("countdown03")));g.sC=0;g.TC=0;g.position=this.bB.clone();g.position.z=-0.5;g.aE=2;g.eE=true;this.UB.pD(g);g=new lC(new tB(q.TB("items").MB("countdown04")));g.sC=0;g.TC=0;g.position=this.bB.clone();g.position.z=-1;g.aE=3;g.eE=true;this.UB.pD(g);}lC LL(){var h=1+this.CB.rB;if(h>=this.TG.length)h=this.TG.length-1;var i=oF.DH(0,h);var j=this.TG[i];var g=new lC(new tB(q.MB(j)));g.ID=true;g.IC=oF.DH(0,359)*cB.PI/180;g.TC=oF.UJ(this.mG,this.gF)*cB.PI/180;g.position=this.bB.clone();return g;}void KL(){this.JI();this.KI();var h=0;for(var i=0;i<nG;i++ ){var g=null;if(i==nG-1){g=new lC(new tB(q.MB("finish")));g.IC=0;g.TC=5*cB.PI/180;g.position=this.bB.clone();g.sC=0;g.ID=true;g.YI=true;this.cG=g;}else{h++ ;if(this.CB.rB==1&&h<=3){if(h==1){g=new lC(new tB(q.MB("training01")));g.ID=true;g.IC=0;g.TC=0;g.position=this.bB.clone();g.CE=1;}else if(h==2){g=new lC(new tB(q.MB("training02")));g.ID=true;g.IC=135*cB.PI/180;g.TC=0;g.position=this.bB.clone();g.CE=2;}else if(h==3){g=new lC(new tB(q.MB("training02")));g.ID=true;g.IC=315*cB.PI/180;g.TC=0;g.position=this.bB.clone();g.CE=3;}}else{g=this.LL();}}g.jE=-i*1-3;g.position.z=g.jE;g.sC=0;this.UB.pD(g);}}void vL(){this.wD=false;var g=CB as MC;g.TL();g.LI();}void xN(DB h){if(this.CB.paused==false){this.MM();var g=this.CB as MC;if(g.DE&&this.uD&&!g.dF)g.BM();}else{fE=-1;}}bool ZD(lC h){KB g=new KB(this.VB.x,this.VB.y);g=this.bI(g);g=h.GC(g);return h.ZD(g);}void GL(){this.uD=false;for(var g=0;g<this.UB.cC.length;g++ ){this.UB.cC[g].position.z-= (2.5+1-RG)+1;}UF.position.z+= (1-RG);this.JI();this.wD=false;this.EE=this.aI;this.FD.visible=false;}void qL(){var g=this.CB as MC;g.FC.visible=false;this.wD=false;this.uD=false;this.aI=this.EE;this.EE=0;if(this.FD!=null)this.HC(this.FD);this.FD=new tB(q.MB("broken"));this.HB(this.FD);if(this.UF.CE>0&& ++this.WL<=5){lB.ZF((){g.IL(this.UF.CE);},2.0);}else{this.CB.AE-- ;if(this.CB.AE>0)lB.ZF(g.ML,2.0);}this.VG.stop();this.VG=this.UG.play(true);this.II=q.eG("crash");this.HL=this.II.play();}num fE=-1;void MM(){var k=lB.elapsedTime;var h=1.0;if(fE==-1)fE=k;h=cB.min(k-fE,1.0000)*40;fE=k;if(wD){this.YF-= (this.EE*h);var n=this.CB.BE;this.CB.BE=n+(this.vI*h);}this.UB.ZM();this.pG+= (this.oG*h);this.bC.x=-(this.gE-this.VB.x)*3;this.bC.y=-(this.hE-this.VB.y)*3;if(this.bC.TI()>IE*0.7){this.bC.VM(IE*0.7);}this.bC.z=pF;this.bB=this.bC.clone();this.bB.z=CH;this.LM();for(var l=0;l<this.UB.cC.length;l++ ){var g=this.UB.cC[l];g.position.z+= (EE*h);if(g.position.z>=1){if(g.eE&&g.aE==3)uD=true;if(g.XE!=null){this.AJ=q.eG("swish");var o=this.AJ.play();}if(g.ID){wD=true;}if(g.jE!=0){this.YF=g.jE;}if(g.ID&&ZD(g)){g.position.z=RG;UF=g;this.qL();}else{if(g.CE==3){(this.CB as MC).DE=false;}if(g.ID){this.JM();}if(g.YI){this.vL();}else if(g.sC==0){this.UB.PM(g);}else{g.position.z+= g.sC;}}}var i=this.bC.clone();i.z=g.position.z;if(i.z<0||i.z>1){g.x=100000;}else{var j=this.mF(i);j=j.add(this.VB);var m=(20*(i.z*i.z));if(m>1)m=1;g.alpha=m;g.x=j.x;g.y=j.y;g.IC+= (g.TC*h);g.setScale(FE(g.position.z)*VJ);}}if(this.cG!=null)this.CB.kE=(this.YF+3)/(this.cG.jE+3);}LC mF(yC g){var h=new LC(g.x,g.y);h.x*= FE(g.z);h.y*= FE(g.z);return h;}num FE(num g){var h=CH;if(g<0)return 0;if(g>1)return 1;return h/(h+(1-g));}void LM(){if(jB==null)return;var k=2;var j=this.bC.clone();j.scale(k);var h=this.uC.transform(FE(j.z)*k,this.pG,this.mF(j));var i=this.uC.transform(FE(this.bB.z),this.pG,this.mF(this.bB));var l=this.mF(this.bB).add(this.VB);jB.WB.clear();jB.WB.beginPath();jB.WB.GI(l.x,l.y,this.uC.IM*FE(this.bB.z));jB.WB.closePath();jB.WB.yI(0xffcccccc,1);jB.WB.beginPath();for(var g=0;g<h.GB.length;g+= 2){jB.WB.moveTo(h.GB[g].x+this.VB.x,h.GB[g].y+this.VB.y);jB.WB.lineTo(h.GB[g+1].x+this.VB.x,h.GB[g+1].y+this.VB.y);jB.WB.lineTo(i.GB[g+1].x+this.VB.x,i.GB[g+1].y+this.VB.y);jB.WB.lineTo(i.GB[g].x+this.VB.x,i.GB[g].y+this.VB.y);jB.WB.lineTo(h.GB[g].x+this.VB.x,h.GB[g].y+this.VB.y);}jB.WB.closePath();jB.WB.RL(0xFF000000);}}class nF extends nC{UC iN;nF(UC g){this.CB=g;}set CB(UC g){if(iN!=null){iN.iB(t.xE);iN.iB(t.yE);iN.iB(t.sF);iN.iB(t.wE);iN.iB(t.uE);iN.iB(t.tE);iN.iB(t.vE);iN.iB(t.GE);iN.iB(t.sE);}iN=g;if(iN!=null){iN.addEventListener(t.xE,this.jG);iN.addEventListener(t.yE,this.iG);iN.addEventListener(t.sF,this.lI);iN.addEventListener(t.wE,this.kG);iN.addEventListener(t.uE,this.fF);iN.addEventListener(t.tE,this.yL);iN.addEventListener(t.vE,this.pI);iN.addEventListener(t.GE,this.mI);iN.addEventListener(t.sE,this.nI);}}UC get CB=>iN;void jG(t g){}void iG(t g){}void lI(t g){}void kG(t g){}void fF(t g){}void yL(t g){}void pI(t g){}void mI(t g){}void nI(t g){}}class NJ extends nF{tB VD;WC vC;WC SC;WC RC;WC fC;tB dC;tB eC;String font;int xG=30;List<tB> jF;NJ(UC h,[String i=AF]):super(h){this.font=i;this.WD();StringBuffer g=new StringBuffer();g.write((this.CB as MC).qB("GENlevel"));g.write(": 0");RC.text=g.toString();}void WD(){this.VD=new tB(q.TB("items").MB("topbar"));this.VD.x=0;this.VD.y=0;this.HB(this.VD);this.vC=new WC();this.vC.EC=new ME(font,24,0,bold:true,align:yB.cH);this.vC.hD=0x000000;this.vC.width=400;this.vC.height=100;this.vC.x=20;this.vC.y=xG;this.HB(vC);this.SC=new WC();this.SC.EC=new ME(font,24,0,bold:true,align:yB.NF);this.SC.hD=0x000000;this.SC.width=200;this.SC.height=100;this.SC.x=(this.CB.bF/2)-this.SC.width+60;this.SC.y=xG;this.HB(SC);this.RC=new WC();this.RC.EC=new ME(font,24,0,bold:true,align:yB.NF);this.RC.hD=0x000000;this.RC.width=200;this.RC.height=100;this.RC.x=(this.CB.bF)-(this.RC.width)-20;this.RC.y=xG;this.HB(RC);this.fC=new WC();this.fC.EC=new ME(font,24,0,bold:true,align:yB.HF);this.fC.hD=0x000000;this.fC.width=200;this.fC.height=100;this.fC.x=20;this.fC.y=this.CB.QI-this.fC.height-20;this.HB(fC);this.fC.visible=false;this.dC=new tB(q.TB("items").MB("progressbar"));this.dC.x=25;this.dC.y=82;this.HB(this.dC);this.eC=new tB(q.TB("items").MB("progressship"));this.eC.x=25;this.eC.y=this.dC.y+(this.dC.height-(this.dC.height-this.eC.height))-(this.eC.height);this.HB(this.eC);this.jF=new List<tB>();for(var h=0;h<3;h++ ){var g=new tB(q.TB("items").MB("spaceship"));g.y=10;g.x=(this.CB.bF/2)+70+(h*35);this.HB(g);this.jF.add(g);}}void nI(t g){this.eC.x=25;this.eC.y=this.dC.y+(this.dC.height-((this.dC.height-this.eC.height)*g.CB.kE))-(this.eC.height);}void mI(t i){var g=i.CB as MC;if(g.DE){this.SC.text=g.qB("DISPLAY_TRAINING");}else{this.SC.text=g.qB("DISPLAY_LIVES");}for(var h=0;h<this.jF.length;h++ ){this.jF[h].visible=(!g.DE)&&(h<i.CB.AE);}}void pI(t h){var i=h.CB as MC;var g=new StringBuffer();g.write(i.qB("GENscore"));g.write(": ${h.CB.UM.toString()}");vC.text=g.toString();}void fF(t h){var i=h.CB as MC;var g=new StringBuffer();g.write(i.qB("GENlevel"));g.write(": ${h.CB.rB.toString()}");RC.text=g.toString();}}class LC{num x;num y;LC(this.x,this.y);set length(num g){this.normalize();this.jL(g);}num get length{return cB.sqrt(x*x+y*y);}normalize(){var g=this.length;if(g==0)throw new UnsupportedError("divided by 0");if(g==1)return;x/= g;y/= g;}scale(num g){x*= g;y*= g;}LC clone(){return new LC(x,y);}LC add(LC g){if(g==null)return null;return new LC(x+g.x,y+g.y);}LC subtract(LC g){if(g==null)return null;return new LC(x-g.x,y-g.y);}jL(num g){x*= g;y*= g;}num get VF{num g=cB.PI-cB.atan2(this.x,this.y);if(g<0)g+= 2*cB.PI;return g;}set VF(num h){var i=this.length;var g=KB.RK(i,h-cB.PI/2);this.x=g.x;this.y=g.y;}}class yC{num x;num y;num z;yC(this.x,this.y,this.z);reset(num g,num h,num i){x=g;y=h;z=i;}yC clone(){return new yC(x,y,z);}num TI(){return cB.sqrt(x*x+y*y+z*z);}VM(num g){this.normalize();this.scale(g);}yC add(yC g){return new yC(x+g.x,y+g.y,z+g.z);}scale(num g){x*= g;y*= g;z*= g;}void normalize(){var g=TI();if(g==0||g==1)return;x/= g;y/= g;z/= g;}bool aG(yC g){return (g.x==x&&g.y==y&&g.z==z);}}class lC extends nC{tB hN;LH lN;nC oN;yC position;num sC=-1;num TC=0;num XM=1;bool ID=false;bool YI=false;bool eE=false;bool VN=false;int aE=0;int CE=0;num jE=0;lC(tB g){oN=new nC();HB(oN);this.XE=g;if(this.XE==null)return;this.x=100000;}set XE(tB g){if(hN!=null)this.HC(hN);if(lN!=null)this.HC(lN);hN=null;lN=null;if(g!=null){hN=g;hN.JD=jD.kD/2;hN.KD=jD.kD/2;HB(hN);}else{lN=new LH();HB(lN);}HB(oN);}tB get XE=>hN;void setScale(num g){this.XM=g;if(lN!=null){lN.WB.clear();lN.WB.beginPath();lN.WB.GI(0,0,jD.kD/2*g);lN.WB.closePath();lN.WB.yI(0xff999999,1);}if(hN!=null){hN.gC=hN.hC=g;}oN.gC=oN.hC=g;}bool ZD(KB j){if(hN==null)return false;var g=this.bI(j);g=hN.GC(g);var k=this.XE.WG.aL(g.x.toInt(),g.y.toInt());var l=(k>>24)&0xFF;var i=false;if(l>0){i=true;var h=new tB(q.TB("items").MB("blood"));h.JD=50;h.KD=50;h.x=g.x-jD.kD/2;h.y=g.y-jD.kD/2;oN.HB(h);}return i;}}class OJ extends fB{KE DC;KE GD;WC wC;WC iC;int EI=40;int FI=30;String aC;OJ(UC h,[String g=AF]):super(h,true,g){this.aC=g;this.iB(u.UD);this.iB(u.CD);this.WD();}void WD(){var g=this.CB as MC;this.KC.wordWrap=true;this.text=g.qB("GENexitquery");this.DC=new KE(new tB(q.TB("items").MB("but_yes")),new tB(q.TB("items").MB("but_yes2")),new tB(q.TB("items").MB("but_yes2")),new tB(q.TB("items").MB("but_yes2")));this.DC.x=FI;this.DC.y=fB.HE-this.DC.height-EI;this.DC.addEventListener(u.UD,this.gM);this.HB(this.DC);this.GD=new KE(new tB(q.TB("items").MB("but_no")),new tB(q.TB("items").MB("but_no2")),new tB(q.TB("items").MB("but_no2")),new tB(q.TB("items").MB("but_no2")));this.GD.x=fB.qE-this.GD.width-FI;this.GD.y=fB.HE-this.DC.height-EI;this.GD.addEventListener(u.UD,this.jI);this.HB(this.GD);this.wC=new WC();this.wC.addEventListener(u.UD,this.DC.dispatchEvent);this.wC.hD=0x000000;this.wC.EC=new ME(aC,48,0,bold:true,align:yB.cH);this.wC.height=60;this.wC.x=this.DC.x+this.DC.width;this.wC.y=this.DC.y+5;this.HB(this.wC);this.wC.text=g.qB("GENyes");this.iC=new WC();this.iC.addEventListener(u.UD,this.GD.dispatchEvent);this.iC.hD=0x000000;this.iC.EC=new ME(aC,48,0,bold:true,align:yB.NF);this.iC.height=60;this.iC.x=this.GD.x-this.iC.width;this.iC.y=this.DC.y+5;this.HB(this.iC);this.iC.text=g.qB("GENno");}ZG(){jI(null);}void gM(DB g){bE();this.dispatchEvent(new SB(SB.NC,this));}void jI(DB g){bE();this.dispatchEvent(new SB(SB.rE,this));}}class fB extends nF implements mC{static int qE=588;static int HE=314;static num TJ=10.0;tB VD;WC KC;num uN;num sG;String aC;fB(UC h,[bool i=true,String g=AF]):super(h){this.aC=g;this.width=fB.qE;this.height=fB.HE;this.VD=new tB(q.TB("items").MB("menu_bg"));this.HB(this.VD);this.KC=new WC();this.KC.hD=0x000000;this.KC.wordWrap=true;this.KC.EC=new ME(g,30,0x000000,bold:true,align:yB.HF);this.KC.width=476;this.KC.height=250;this.KC.x=60;this.KC.y=90;this.HB(this.KC);this.addEventListener(u.CD,this.onClick);if(i){this.BJ=0;this.sG=0;lB.add(this);}else{this.BJ=1;}this.alpha=0;}bool DD(num g){this.sG+= g;if(this.sG>TJ){bE();ZG();return false;}return true;}set text(String g){if(g==null)return;var h=new ME(aC,30,0x000000,bold:true,align:yB.HF);h.size=(g.length<=30)?45:30;this.KC.EC=h;this.KC.text=g;}void onClick(u g){bE();ZG();}void ZG(){this.dispatchEvent(new SB(SB.NC,this));}set BJ(num g){if(g<0)g=1;if(g>1)g=1;uN=g;var h=(255*uN).round().toInt();}void bE(){lB.remove(this);}}class SB extends DB{static const String NC="MenuEvent.TYPE_OK";static const String rE="MenuEvent.TYPE_CANCEL";fB cF;SB(String g,fB h,[bool i=false]):super(g,i){this.cF=h;}}class PJ extends nC{List<lC> cC;PJ(){cC=new List<lC>();}void ZM(){this.cC.sort(hM);}void pD(lC g){if(this.contains(g))return;this.HB(g);this.cC.add(g);}void PM(lC g){if(this.cC.length>0){var h=this.cC.indexOf(g);if(h>=0)this.cC.removeAt(h);}if(this.contains(g)){this.HC(g);}}int hM(lC g,lC h){if(!this.contains(g)){return (this.contains(h)?1:0);}if(!this.contains(h)){return (this.contains(g)?-1:0);}if(g.position.z>h.position.z){if(this.yD(g)<this.yD(h)){this.zI(g,h);}else{return 1;}}if(g.position.z<h.position.z){if(this.yD(g)>this.yD(h)){this.zI(g,h);}else{return -1;}}return 0;}}class oF{static cB.Random BH=new cB.Random();static int DH(int g,int h){if(h<g){var i=g;g=h;h=i;}if(g==h){return g;}else{return BH.nextInt(h+1)+g;}}static num UJ(num g,num h){if(h<g){var i=g;g=h;h=i;}if(g==h){return g;}else{return BH.nextDouble()*(h-g)+g;}}}class QJ extends pE{num jN;int mN;QJ(num g,int h):super(){if(h<3)h=3;if(g==0)g=1;jN=g;mN=h;tN();}num get IM=>jN;tN(){var g=new List<LC>();var h=0.0;var k=2*cB.PI/mN;for(var i=0;i<mN;i++ ){var j=new LC(0,-jN);j.VF=h;g.add(j);h+= k;}this.GB=g;}}class pE{List<LC> GB;pE([List<LC> g]){this.GB=(g!=null)?g:new List();}sI(int g){if(g<GB.length){this.GB.removeAt(g);}}bool ZD(LC h){var k=this.GB.length;var i=k-1;var j=false;for(var g=0;g<k;g++ ){if(GB[g].y<h.y&&GB[i].y>=h.y||GB[i].y<h.y&&GB[g].y>=h.y){if(GB[g].x+(h.y-GB[g].y)/(GB[i].y-GB[g].y)*(GB[i].x-GB[g].x)<h.x){j=!j;}}i=g;}return j;}pE rotate(num k){var h=this.GB.length;var i=new List<LC>(h);for(var g=0;g<h;g++ ){var j=this.GB[g].clone();j.VF+= k;i[g]=j;}return new pE(i);}pE scale(num h){if(h==0)h=double.MIN_POSITIVE;var i=this.GB.length;var j=new List<LC>(i);for(var g=0;g<i;g++ ){var k=this.GB[g].clone();k.scale(h);j[g]=k;}return new pE(j);}pE transform(num k,num l,LC m){var i=this.GB.length;var j=new List<LC>(i);for(var g=0;g<i;g++ ){var h=this.GB[g].clone();h.scale(k);h.VF+= l;j[g]=h.add(m);}return new pE(j);}}rC VC;AG tF;CG q;OE lB;tB zC;QF zE;WC OC;const String AF="Russo One";void main(){VC=new rC("Stage",RB.querySelector('#stage'));tF=new AG();tF.yK(VC);lB=tF.hG;QB.pH.webp=true;kB.Future<QB> g=QB.oD("images/Loading.png");g.then((h){zC=new tB(h);zC.JD=20;zC.KD=20;zC.x=400;zC.y=270;VC.HB(zC);zE=new QF(zC,100,LG.NG);zE.CI.IC.vG(100.0*2.0*cB.PI);lB.add(zE);OC=new WC();OC.EC=new ME("Arial",20,0xA0A0A0,bold:true);OC.width=240;OC.height=40;OC.text="... loading ...";OC.x=400-OC.eM/2;OC.y=320;OC.hI=false;VC.HB(OC);WJ();});}void WJ(){q=new CG();q.onProgress.listen((l){var i=q.SL;var j=q.rI;var k=q.bG;print("Resource Progress -> finished: ${i.length}, pending:${j.length}, failed:${k.length}");});q.PC("barrier01","images/barrier01.png");q.PC("barrier02","images/barrier02.png");q.PC("barrier03","images/barrier03.png");q.PC("barrier04","images/barrier04.png");q.PC("barrier05","images/barrier05.png");q.PC("barrier06","images/barrier06.png");q.PC("barrier07","images/barrier07.png");q.PC("training01","images/training01.png");q.PC("training02","images/training02.png");q.PC("finish","images/finish.png");q.PC("broken","images/broken.png");q.zK("items","images/ItemTextureAtlas.json",zF.TH);q.SG("crash","sounds/crash.mp3");q.SG("swish","sounds/swish.mp3");q.SG("speedalizer","sounds/speedalizer.mp3");q.dB("DISPLAY_LEVEL","Level: {0}");q.dB("DISPLAY_LIVES","Ships:");q.dB("DISPLAY_SCORE","Score: {0}");q.dB("DISPLAY_TRAINING","Training");q.dB("MESSAGE_FIRST_LEVEL","Remain with your finger on the screen in order to fly through the tunnel!");q.dB("MESSAGE_FIRST_LEVEL_WEB","Move the mouse pointer to navigate through the obstacles!");q.dB("MESSAGE_FREE_LEVEL_BARRIER_1","Navigate to the center to fly through the hole!");q.dB("MESSAGE_FREE_LEVEL_BARRIER_2","Navigate to the upper left side to fly through the hole!");q.dB("MESSAGE_FREE_LEVEL_BARRIER_3","Navigate to the bottom right side to fly through the hole!");q.dB("MESSAGE_GAME_OVER","Game\nOver!");q.dB("MESSAGE_RESTART_LEVEL","Ooops!\nGet Ready\nFor Restart!");q.dB("MESSAGE_START_LEVEL","Get Ready\nFor Level {0}!");q.dB("GENscore","Score");q.dB("GENlevel","Level");q.dB("GENexitquery","Do you really want to quit the game?");q.dB("GENyes","Yes");q.dB("GENno","No");q.load().then((m){VC.HC(zC);VC.HC(OC);lB.remove(zE);UC h=new MC(800,600);h.AL(VC);h.start();}).catchError((n){for(var g in q.bG){print("Loading resouce failed: ${g.kind}.${g.name} - ${g.error}");}});}class pC{final List<KH> RO=new List<KH>();QB NO;static kB.Future<pC> oD(String n,String s){kB.Completer<pC> i=new kB.Completer<pC>();pC g=new pC();switch (s){case zF.gJ:case zF.TH:RB.HttpRequest.getString(n).then((AB){var o=oM.JSON.decode(AB);var h=o["frames"];var BB=o["meta"];var IB=eK(n,BB["image"]);if(h is List){for(var LB in h){var j=LB as Map;var k=j["filename"] as String;var l=AI(k);var m=new KH.bN(g,l,j);g.RO.add(m);}}if(h is Map){for(String k in h.keys){var j=h[k] as Map;var l=AI(k);var m=new KH.bN(g,l,j);g.RO.add(m);}}QB.oD(IB).then((QB PB){g.NO=PB;i.complete(g);}).catchError((eB){i.completeError(new StateError("Failed to load image."));});}).catchError((eB){i.completeError(new StateError("Failed to load json file."));});break;}return i.future;}QB MB(String h){for(int g=0;g<RO.length;g++ ){var i=RO[g];if(i.name==h){return new QB.fN(i);}}throw new ArgumentError("TextureAtlasFrame not found: '${h}'");}}class BF{String GO;String UO;String cO;dynamic jO=null;dynamic uO=null;kB.Completer EP=new kB.Completer();BF(String g,String h,String i,kB.Future j):GO=g,UO=h,cO=i{j.then((k){jO=k;}).catchError((l){uO=l;}).whenComplete((){EP.complete(this);});}String toString()=>"ResourceManagerResource [kind=${GO}, name=${UO}, url = ${cO}]";String get kind=>GO;String get name=>UO;dynamic get value=>jO;dynamic get error=>uO;kB.Future get complete=>EP.future;}class uB<SD extends DB>{final String eventType;const uB(this.eventType);aB<SD> forTarget(AC g)=>g.on(eventType);}class tB extends v{QB NO;String bO;FB pO;tB([QB g=null,String h="auto"]){this.WG=g;this.GM=h;pO=null;}QB get WG=>NO;set WG(QB g){if(g==null)NO=null;if(g is QB)NO=g;}set GM(String g){if(g is String)bO=g;}FB hB(EB j,[FB k]){var g=NO;var h=0,i=0;if(g!=null){h=g.width;i=g.height;}return QG(j,h,i,k);}v XB(num h,num i){var g=NO;if(g==null)return null;if(h<0.0||i<0)return null;if(h>=g.width||i>=g.height)return null;return this;}void JB(nB h){var g=NO;if(g==null)return;if(pO==null){g.JB(h);}else{g.RM(h,pO);}}}abstract class mC{bool DD(num g);}class WC extends NB{String DO="";ME fO=null;String vO=EF.MG;String LP=lD.fJ;int dP=0;int kP=0;num tP=0.0;num AQ=0.0;num GQ=0.0;num OQ=0.0;num RQ=0.0;bool UQ=false;bool YQ=false;bool cQ=false;bool iQ=false;bool mQ=false;String pQ="•";int tQ=0xFFFFFF;int wQ=0x000000;int zQ=0;num JO=100;num WO=100;num DR=0.0;num FR=0.0;final List<mD> HR=new List<mD>();int NR=3;bool UR=true;RB.CanvasElement VR;WC([String g,ME h]){this.text=(g!=null)?g:"";this.EC=(h!=null)?h:new ME("Arial",12,0x000000);this.onKeyDown.listen(nR);this.DM.listen(rR);this.onMouseDown.listen(tR);}String get text=>DO;ME get EC=>fO;String get type=>LP;bool get border=>mQ;int get borderColor=>wQ;void set width(num g){JO=g.toDouble();NR|= 3;}void set height(num g){WO=g.toDouble();NR|= 3;}void set text(String g){DO=g.replaceAll('\r\n','\n').replaceAll('\r','\n');dP=DO.length;NR|= 3;}void set hD(int g){fO.color=g;NR|= 2;}void set EC(ME g){fO=g.clone();NR|= 3;}void set wordWrap(bool g){UQ=g;NR|= 3;}num get x{kS();return super.x;}num get width{kS();return JO;}num get height{kS();return WO;}num get eM{kS();return DR;}EB get YB{kS();return super.YB;}FB hB(EB g,[FB h]){return QG(g,JO,WO,h);}v XB(num g,num h){if(g>=0&&h>=0&&g<JO&&h<WO)return this;return null;}void JB(nB h){kS();pS();var g=h.context;if(UR){var i=VR;if(i!=null)g.drawImageScaled(i,0.0,0.0,JO,WO);}else{qS(g);}tP+= h.NL;if(LP==lD.PE){var j=this.gD;if(j!=null&&j.focus==this&&tP.remainder(0.8)<0.4){g.fillStyle=QE(fO.color);g.fillRect(AQ,GQ,OQ,RQ);}}}kS(){if((NR&1)==0){return;}else{NR&= 255-1;}HR.clear();var j=0;var i='';var m='';var CJ=0;var BB=0;var n=YC(fO.size);var AB=YC(fO.leftMargin);var nE=YC(fO.rightMargin);var iM=YC(fO.topMargin);var jM=YC(fO.bottomMargin);var DJ=YC(fO.indent);var EJ=YC(EC.leading);var kM=ZK(fO.align);var FJ=fO.kR;var GJ=oJ(FJ);var HJ=YC(GJ.WE);var xC=YC(GJ.aF);var IB=JO-AB-nE;var k=UE;var IJ=new List<int>();var JJ=DO.split('\n');k.font=FJ;k.textAlign="start";k.textBaseline="alphabetic";k.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);for(int oE=0;oE<JJ.length;oE++ ){var LB=JJ[oE];if(LB is !String)continue;IJ.add(HR.length);if(UQ==false){HR.add(new mD.ZN(LB,j));j+= LB.length+1;}else{i=null;BB=DJ;var KJ=LB.split(' ');for(int LD=0;LD<KJ.length;LD++ ){var PB=KJ[LD];if(PB is !String)continue;m=i;i=(m==null)?PB:"${m} ${PB}";i=zS(i);CJ=k.measureText(i).width.toDouble();if(BB+CJ>=IB){if(m==null){HR.add(new mD.ZN(i,j));j+= i.length+1;i=null;BB=0;}else{HR.add(new mD.ZN(m,j));j+= m.length+1;i=zS(PB);BB=0;}}}if(i!=null){HR.add(new mD.ZN(i,j));j+= i.length+1;}}}DR=0.0;FR=0.0;for(int h=0;h<HR.length;h++ ){var g=HR[h];if(g is !mD)continue;var zG=IJ.contains(h)?DJ:0;var lM=AB+zG;var LJ=iM+n+h*(EJ+n+xC);var MJ=k.measureText(g.DO).width.toDouble();g.yN=lM;g.CO=LJ;g.JO=MJ;g.WO=n;g.MP=HJ;g.ZP=xC;g.hP=EJ;g.oP=zG;DR=cB.max(DR,AB+zG+MJ+nE);FR=LJ+xC+jM;}var l=UQ?JO:DR.ceil();var eB=FR.ceil();if(JO!=l||WO!=eB){switch (vO){case EF.cH:JO=l;WO=eB;break;case EF.NF:super.x-= (l-JO);JO=l;WO=eB;break;case EF.HF:super.x-= (l-JO)/2;JO=l;WO=eB;break;}}IB=JO-AB-nE;for(int h=0;h<HR.length;h++ ){var g=HR[h];if(g is !mD)continue;switch (kM){case yB.HF:case yB.qJ:g.yN+= (IB-g.width)/2;break;case yB.NF:case yB.kJ:g.yN+= (IB-g.width);break;}}if(LP==lD.PE){for(int h=HR.length-1;h>=0;h-- ){var g=HR[h];if(g is !mD)continue;if(dP>=g.IO){var mM=dP-g.IO;var nM=g.DO.substring(0,mM);kP=h;AQ=g.x+k.measureText(nM).width.toDouble();GQ=g.y-HJ*0.9;OQ=1.0;RQ=n;break;}}var o=0.0;var s=0.0;while (o+AQ>JO)o-= JO*0.2;while (o+AQ<0)o+= JO*0.2;while (s+GQ+RQ>WO)s-= n;while (s+GQ<0)s+= n;AQ+= o;GQ+= s;for(int h=0;h<HR.length;h++ ){var g=HR[h];if(g is !mD)continue;g.yN+= o;g.CO+= s;}}}pS(){if((NR&2)==0){return;}else{NR&= 255-2;}if(UR==false){return;}var g=(rC.PG?TF:1.0)/VE;var h=(JO*g).ceil();var i=(WO*g).ceil();if(h<=0||i<=0){VR=null;return;}if(VR==null){VR=new RB.CanvasElement(width:h,height:i);}if(VR.width!=h)VR.width=h;if(VR.height!=i)VR.height=i;var j=VR.context2D;j.setTransform(g,0.0,0.0,g,0.0,0.0);j.clearRect(0,0,JO,WO);qS(j);}qS(RB.CanvasRenderingContext2D g){var i=fO;var j=(i.bold?i.size/10:i.size/20).ceil();g.save();g.beginPath();g.rect(0,0,JO,WO);g.clip();if(iQ){g.fillStyle=QE(tQ);g.fillRect(0,0,JO,WO);}g.font=i.kR;g.textAlign="start";g.textBaseline="alphabetic";g.fillStyle=g.strokeStyle=QE(i.color);g.lineCap=g.lineJoin="round";g.lineWidth=j;for(int k=0;k<HR.length;k++ ){var h=HR[k];g.fillText(h.DO,h.x,h.y);if(i.underline){num l=(h.y+j).round();if(j%2!=0)l+= 0.5;g.beginPath();g.moveTo(h.x,l);g.lineTo(h.x+h.width,l);g.stroke();}}if(mQ){g.strokeStyle=QE(wQ);g.lineWidth=1;g.strokeRect(0,0,JO,WO);}g.restore();}String zS(String g){if(g is !String)return g;if(cQ==false)return g;var h="";for(int i=0;i<g.length;i++ ){h="${h}${pQ}";}return h;}nR(qC AB){if(LP==lD.PE){kS();var k=DO;var n=k.length;var j=HR;var g=dP;var i=kP;var h=-1;switch (AB.keyCode){case RB.KeyCode.BACKSPACE:if(g>0){DO=k.substring(0,g-1)+k.substring(g);h=g-1;}break;case RB.KeyCode.END:var m=j[i];h=m.IO+m.DO.length;break;case RB.KeyCode.HOME:var m=j[i];h=m.IO;break;case RB.KeyCode.LEFT:if(g>0){h=g-1;}break;case RB.KeyCode.UP:if(i>0&&i<j.length){var o=j[i];var l=j[i-1];var s=cB.min(g-o.IO,l.DO.length);h=l.IO+s;}else{h=0;}break;case RB.KeyCode.RIGHT:if(g<n){h=g+1;}break;case RB.KeyCode.DOWN:if(i>=0&&i<j.length-1){var o=j[i];var l=j[i+1];var s=cB.min(g-o.IO,l.DO.length);h=l.IO+s;}else{h=n;}break;case RB.KeyCode.DELETE:if(g<n){DO=k.substring(0,g)+k.substring(g+1);h=g;}break;}if(h!=-1){dP=h;tP=0.0;NR|= 3;}}}rR(LE i){if(LP==lD.PE){var j=DO.length;var h=dP;var g=i.text;if(g=='\r')g='\n';if(g=='\n'&&YQ==false)g='';if(g=='')return;if(zQ!=0&&j>=zQ)return;DO=DO.substring(0,h)+g+DO.substring(h);dP=dP+g.length;tP=0.0;NR|= 3;}}tR(u j){var AB=j.cI.toDouble();var k=j.dI.toDouble();var l=UE;l.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);for(int i=0;i<HR.length;i++ ){var g=HR[i];if(g is !mD)continue;var m=g.DO;var BB=g.x;var IB=g.y-g.WE;var LB=g.y+g.aF;if(IB<=k&&LB>=k){var n=double.INFINITY;var o=0;for(var h=0;h<=m.length;h++ ){var PB=l.measureText(m.substring(0,h)).width.toDouble();var s=(BB+PB-AB).abs();if(s<n){n=s;o=h;}}dP=g.IO+o;tP=0.0;NR|= 3;}}}}class ME{String font;num size;int color;bool bold;bool italic;bool underline;String align;num topMargin;num bottomMargin;num leftMargin;num rightMargin;num indent;num leading;ME(this.font,this.size,this.color,{this.bold: false,this.italic: false,this.underline: false,this.align: "left",this.topMargin: 0.0,this.bottomMargin: 0.0,this.leftMargin: 0.0,this.rightMargin: 0.0,this.indent: 0.0,this.leading: 0.0});ME clone(){return new ME(font,size,color,bold:bold,italic:italic,underline:underline,align:align,topMargin:topMargin,bottomMargin:bottomMargin,leftMargin:leftMargin,rightMargin:rightMargin,indent:indent,leading:leading);}String get kR{var g="${size}px ${font}, sans-serif";if(bold)g="bold ${g}";if(italic)g="italic ${g}";return g;}}class LH extends v{FF MO=new FF();FF get WB=>MO;FB hB(EB g,[FB h]){if(MO==null){return super.hB(g,h);}else{return MO.nQ(g);}}v XB(num g,num h){if(MO==null){return null;}else{return MO.MR(g,h)?this:null;}}void JB(nB g){if(MO!=null)MO.JB(g);}}class FF{static final Map cJ={"A":0,"B":1,"C":2,"D":3,"E":4,"F":5,"G":6,"H":7,"I":8,"J":9,"K":10,"L":11,"M":12,"N":13,"O":14,"P":15,"Q":16,"R":17,"S":18,"T":19,"U":20,"V":21,"W":22,"X":23,"Y":24,"Z":25,"a":26,"b":27,"c":28,"d":29,"e":30,"f":31,"g":32,"h":33,"i":34,"j":35,"k":36,"l":37,"m":38,"n":39,"o":40,"p":41,"q":42,"r":43,"s":44,"t":45,"u":46,"v":47,"w":48,"x":49,"y":50,"z":51,"0":52,"1":53,"2":54,"3":55,"4":56,"5":57,"6":58,"7":59,"8":60,"9":61,"+":62,"/":63};final List<BC> rQ=new List<BC>();FB xQ=new FB.YN();bool AR=true;clear(){rQ.clear();AR=true;}IR(BC g){rQ.add(g);AR=true;}beginPath()=>IR(new BN());closePath()=>IR(new CN());moveTo(num g,num h)=>IR(new DN(g,h));lineTo(num g,num h)=>IR(new EN(g,h));quadraticCurveTo(num g,num h,num i,num j)=>IR(new GN(g,h,i,j));bezierCurveTo(num g,num h,num i,num j,num k,num l)=>IR(new HN(g,h,i,j,k,l));arc(num g,num h,num i,num j,num k,bool l)=>IR(new IN(g,h,i,j,k,l));rect(num g,num h,num i,num j)=>IR(new JN(g,h,i,j));yI(int g,[num h=1.0,String i=XJ.iJ,String j=YJ.iJ])=>IR(new KN(OF(g),h,i,j));RL(int g)=>IR(new LN(OF(g)));GI(num g,num h,num i){IR(new DN(g+i,h));IR(new IN(g,h,i,0,cB.PI*2,false));}decode(String i){var j=cJ;var LB=[moveTo,lineTo,quadraticCurveTo,bezierCurveTo,closePath];List<int> PB=[2,2,4,6,0];List<num> k=new List<num>();var l=0,m=0;var h=0,eB=i.length;while (h<eB){var AB=i[h];var n=j[AB];var o=n>>3;var BB=LB[o];if(BB==null||(n&3)>0)throw ("bad path data (@${h}): ${AB}");var xC=PB[o];if(o==0)l=m=0;k.length=0;h++ ;var IB=(n>>2&1)+2;for(var s=0;s<xC;s++ ){var g=j[i[h]];var LD=(g>>5)>0?-1:1;g=((g&31)<<6)|(j[i[h+1]]);if(IB==3)g=(g<<6)|(j[i[h+2]]);g=LD*g/10;if(s%2>0)l=(g+= l);else m=(g+= m);k.add(g);h+= IB;}Function.apply(BB,k);}}FB nQ(EB i){var h=new XC(i);for(int g=0;g<rQ.length;g++ ){rQ[g].jC(h);}return h.bL();}bool MR(num i,num j){if(AR){AR=false;xQ=nQ(new EB.cN());}if(xQ.contains(i,j)){var g=UE;g.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);g.beginPath();for(int h=0;h<rQ.length;h++ ){if(rQ[h].XB(g,i,j)){return true;}}}return false;}void JB(nB i){var h=i.context;h.beginPath();for(int g=0;g<rQ.length;g++ ){rQ[g].JB(h);}}}class CG extends AC{final Map<String,BF> lO=new Map<String,BF>();static const uB<DB> wJ=const uB<DB>(DB.xH);aB<DB> get onProgress=>CG.wJ.forTarget(this);hQ(String h,String g,String k,kB.Future l){var i="${h}.${g}";var j=new BF(h,g,k,l);if(lO.containsKey(i)){throw new StateError("ResourceManager already contains a resource called '${g}'");}else{lO[i]=j;}j.complete.then((TR){this.dispatchEvent(new DB(DB.xH));});}dynamic WR(String i,String h){var j="${i}.${h}";var g=lO[j];if(g==null){throw new StateError("Resource '${h}' does not exist.");}else if(g.value!=null){return g.value;}else if(g.error!=null){throw g.error;}else{throw new StateError("Resource '${h}' has not finished loading yet.");}}kB.Future<CG> load(){var h=this.rI.map((i)=>i.complete);return kB.Future.wait(h).then((j){var g=this.bG.length;if(g>0){throw new StateError("Failed to load ${g} resource(s).");}else{return this;}});}List<BF> get SL{return lO.values.where((g)=>g.value!=null).toList();}List<BF> get rI{return lO.values.where((g)=>g.value==null&&g.error==null).toList();}List<BF> get bG{return lO.values.where((g)=>g.error!=null).toList();}void PC(String h,String g,[yF i=null]){hQ("BitmapData",h,g,QB.oD(g,i));}void SG(String h,String g,[QD i=null]){hQ("Sound",h,g,mB.oD(g,i));}void zK(String h,String g,String i){hQ("TextureAtlas",h,g,pC.oD(g,i));}void dB(String g,String h){hQ("Text",g,"",new kB.Future.value(h));}QB MB(String h){var g=WR("BitmapData",h);if(g is !QB)throw "dart2js_hint";return g;}mB eG(String h){var g=WR("Sound",h);if(g is !mB)throw "dart2js_hint";return g;}pC TB(String h){var g=WR("TextureAtlas",h);if(g is !pC)throw "dart2js_hint";return g;}String cL(String h){var g=WR("Text",h);if(g is !String)throw "dart2js_hint";return g;}}class IH{final QF wG;IH(this.wG);call(String g,num h){HP(g).vG(h);}xB get x=>HP("x");xB get y=>HP("y");xB get gC=>HP("scaleX");xB get hC=>HP("scaleY");xB get skewX=>HP("skewX");xB get skewY=>HP("skewY");xB get JD=>HP("pivotX");xB get KD=>HP("pivotY");xB get IC=>HP("rotation");xB get alpha=>HP("alpha");xB HP(String h){var g=new xB(h);this.wG.HP(g);return g;}}abstract class ND extends NB{final List<v> mO=new List<v>();bool DP=true;bool QP=true;void HB(v g){if(g.parent==this){int h=mO.indexOf(g);mO.removeAt(h);mO.add(g);}else{xK(g,mO.length);}}void xK(v g,int h){if(h<0||h>mO.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){mO.removeAt(mO.indexOf(g));if(h>mO.length)h-- ;mO.insert(h,g);}else{g.OM();g.AS(this);mO.insert(h,g);g.dispatchEvent(new DB(DB.hJ,true));if(this.gD!=null)IS(g,new DB(DB.VH));}}void HC(v h){int g=mO.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");NM(g);}void NM(int g){if(g<0||g>=mO.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");v h=mO[g];h.dispatchEvent(new DB(DB.AK,true));if(this.gD!=null)IS(h,new DB(DB.EK));h.AS(null);mO.removeAt(g);}dynamic SI(int g){if(g<0||g>=mO.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");return mO[g];}int yD(v g){return mO.indexOf(g);}void zI(v i,v j){int g=yD(i);int h=yD(j);if(g==-1||h==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");dM(g,h);}void dM(int g,int h){v i=SI(g);v j=SI(h);mO[g]=j;mO[h]=i;}bool contains(v g){for(;g!=null;g=g.ER)if(g==this)return true;return false;}FB hB(EB n,[FB g]){if(g==null)g=new FB.YN();if(mO.length==0)return super.hB(n,g);num i=double.INFINITY;num j=double.INFINITY;num k=double.NEGATIVE_INFINITY;num l=double.NEGATIVE_INFINITY;int s=mO.length;for(int m=0;m<mO.length;m++ ){v o=mO[m];GR.YG(o.YB,n);FB h=o.hB(GR,g);if(h.left<i)i=h.left;if(h.top<j)j=h.top;if(h.right>k)k=h.right;if(h.bottom>l)l=h.bottom;}g.x=i;g.y=j;g.width=k-i;g.height=l-j;return g;}v XB(num h,num i){h=h.toDouble();i=i.toDouble();v BB=null;for(int o=mO.length-1;o>=0;o-- ){var j=mO[o];var k=j.mask;var g=j.YB;if(j.visible&&j.kI==false){num IB=h-g.oB;num LB=i-g.pB;num s=(g.d*IB-g.c*LB)/g.tC;num AB=(g.a*LB-g.b*IB)/g.tC;num l=0.0;num m=0.0;if(k!=null){if(k.JC==null){l=s;m=AB;}else if(identical(k.JC,j)){l=s;m=AB;}else if(identical(k.JC,this)){l=h;m=i;}else{g=this.lF(k.JC);g=(g!=null)?g:SF;l=h*g.a+i*g.c+g.oB;m=h*g.b+i*g.d+g.pB;}if(k.ZD(l,m)==false)continue;}var n=j.XB(s,AB);if(n==null)continue;if(n is NB&&n.hI){return DP?n:this;}BB=this;}}return BB;}void JB(nB i){for(int g=0;g<mO.length;g++ ){v h=mO[g];if(h.visible&&h.kI==false){i.tI(h);}}}ET(v g,List i){i.add(g);if(g is ND){var j=g.mO;for(int h=0;h<j.length;h++ ){ET(j[h],i);}}}IS(v i,DB j){List g=[] ;ET(i,g);for(int h=0;h<g.length;h++ ){g[h].dispatchEvent(j);}}}class EB{double zN,BO,EO,FO,HO,KO;double XO;EB(num g,num h,num i,num j,num k,num l):zN=g.toDouble(),BO=h.toDouble(),EO=i.toDouble(),FO=j.toDouble(),HO=k.toDouble(),KO=l.toDouble(),XO=(g*j-h*i).toDouble();EB.cN():zN=1.0,BO=0.0,EO=0.0,FO=1.0,HO=0.0,KO=0.0,XO=1.0;EB clone(){return new EB(zN,BO,EO,FO,HO,KO);}EB HI(){num g=(FO/XO);num h=-(BO/XO);num i=-(EO/XO);num j=(zN/XO);num k=-(g*HO+i*KO);num l=-(h*HO+j*KO);return new EB(g,h,i,j,k,l);}num get a=>zN;num get b=>BO;num get c=>EO;num get d=>FO;num get oB=>HO;num get pB=>KO;num get tC=>XO;KB mE(KB g){var h=g.x.toDouble();var i=g.y.toDouble();return new KB(h*zN+i*EO+HO,h*BO+i*FO+KO);}gB iD(gB g){var h=g.x.toDouble();var i=g.y.toDouble();return new gB(h*zN+i*EO+HO,h*BO+i*FO+KO);}KB CS(cB.Point g){var h=g.x.toDouble();var i=g.y.toDouble();return new KB(h*zN+i*EO+HO,h*BO+i*FO+KO);}void HD(EB g){num l=zN;num m=BO;num n=EO;num o=FO;num s=HO;num AB=KO;num BB=XO;num h=g.a;num i=g.b;num j=g.c;num k=g.d;num IB=g.oB;num LB=g.pB;num PB=g.tC;zN=(l*h+m*j).toDouble();BO=(l*i+m*k).toDouble();EO=(n*h+o*j).toDouble();FO=(n*i+o*k).toDouble();HO=(s*h+AB*j+IB).toDouble();KO=(s*i+AB*k+LB).toDouble();XO=(BB*PB).toDouble();}void identity(){zN=1.0;BO=0.0;EO=0.0;FO=1.0;HO=0.0;KO=0.0;XO=1.0;}void XI(){num j=zN;num k=BO;num l=EO;num m=FO;num h=HO;num i=KO;num g=XO;zN=(m/g).toDouble();BO=-(k/g).toDouble();EO=-(l/g).toDouble();FO=(j/g).toDouble();HO=-(zN*h+EO*i).toDouble();KO=-(BO*h+FO*i).toDouble();XO=(1.0/g).toDouble();}void rotate(num i){num g=cB.cos(i);num h=cB.sin(i);num j=zN;num k=BO;num l=EO;num m=FO;num n=HO;num o=KO;zN=(j*g-k*h).toDouble();BO=(j*h+k*g).toDouble();EO=(l*g-m*h).toDouble();FO=(l*h+m*g).toDouble();HO=(n*g-o*h).toDouble();KO=(n*h+o*g).toDouble();}void scale(num g,num h){zN=(zN*g).toDouble();BO=(BO*h).toDouble();EO=(EO*g).toDouble();FO=(FO*h).toDouble();HO=(HO*g).toDouble();KO=(KO*h).toDouble();XO=(XO*g*h).toDouble();}void translate(num g,num h){HO=(HO+g).toDouble();KO=(KO+h).toDouble();}void iF(num g,num h,num i,num j,num k,num l){zN=g.toDouble();BO=h.toDouble();EO=i.toDouble();FO=j.toDouble();HO=k.toDouble();KO=l.toDouble();XO=(zN*FO-BO*EO).toDouble();}void XF(EB g){zN=g.a.toDouble();BO=g.b.toDouble();EO=g.c.toDouble();FO=g.d.toDouble();HO=g.oB.toDouble();KO=g.pB.toDouble();XO=g.tC.toDouble();}void YG(EB g,EB h){num m=g.a;num n=g.b;num o=g.c;num s=g.d;num AB=g.oB;num BB=g.pB;num IB=g.tC;num i=h.a;num j=h.b;num k=h.c;num l=h.d;num LB=h.oB;num PB=h.pB;num eB=h.tC;zN=(m*i+n*k).toDouble();BO=(m*j+n*l).toDouble();EO=(o*i+s*k).toDouble();FO=(o*j+s*l).toDouble();HO=(AB*i+BB*k+LB).toDouble();KO=(AB*j+BB*l+PB).toDouble();XO=(IB*eB).toDouble();}}abstract class BC{JB(RB.CanvasRenderingContext2D g);bool XB(RB.CanvasRenderingContext2D g,num h,num i){JB(g);return false;}jC(XC g){}}abstract class oC extends AC{void stop();}class nC extends ND{bool ON=false;bool yG=false;nC gG=null;FF MO=null;v WP=null;FF get WB{return (MO!=null)?MO:MO=new FF();}fR(){var i=this.eF;var j=this.gD;var l=this.visible;if(i!=null&&this.gD!=null){var g=PD.xJ;if(g!=null){var h=this.YB.mE(i);if(h.x<g.left)h.x=g.left;if(h.x>g.right)h.x=g.right;if(h.y<g.top)h.y=g.top;if(h.y>g.bottom)h.y=g.bottom;i=this.YB.HI().mE(h);}var m=new KB(PP,bP).add(i).subtract(PD.uJ);var k=this.YB.mE(m);this.visible=false;WP=j.XB(j.gE,j.hE);this.x=k.x;this.y=k.y;this.visible=l;}}FB hB(EB h,[FB g]){if(g==null)g=new FB.YN();super.hB(h,g);if(MO!=null){g=MO.nQ(h).union(g);}return g;}v XB(num i,num j){v h=null;if(this.gG!=null){var g=this.lF(this.gG);if(g!=null){double k=i*g.a+j*g.c+g.oB;double l=i*g.b+j*g.d+g.pB;if(this.gG.XB(k,l)!=null){h=this;}}}else{h=super.XB(i,j);if(h==null&&MO!=null){if(MO.MR(i,j)){h=this;}}}return h;}JB(nB g){if(MO!=null)MO.JB(g);super.JB(g);}}abstract class NB extends v{bool OL=false;bool hI=true;bool XN=true;int tabIndex=0;static const uB<u> yJ=const uB<u>(u.PF);static const uB<u> UK=const uB<u>(u.JG);static const uB<u> WK=const uB<u>(u.CD);static const uB<u> YK=const uB<u>(u.SE);static const uB<u> iK=const uB<u>(u.mH);aB<u> get onMouseOut=>NB.yJ.forTarget(this);aB<u> get onMouseMove=>NB.UK.forTarget(this);aB<u> get onMouseDown=>NB.WK.forTarget(this);aB<u> get onMouseUp=>NB.YK.forTarget(this);aB<u> get onMouseWheel=>NB.iK.forTarget(this);static const uB<ZB> kK=const uB<ZB>(ZB.gH);static const uB<ZB> lK=const uB<ZB>(ZB.XH);static const uB<ZB> nK=const uB<ZB>(ZB.ZH);aB<ZB> get onTouchMove=>NB.kK.forTarget(this);aB<ZB> get onTouchEnd=>NB.lK.forTarget(this);aB<ZB> get onTouchCancel=>NB.nK.forTarget(this);static const uB<qC> rK=const uB<qC>(qC.WH);static const uB<qC> tK=const uB<qC>(qC.RH);aB<qC> get onKeyUp=>NB.rK.forTarget(this);aB<qC> get onKeyDown=>NB.tK.forTarget(this);static const uB<LE> uK=const uB<LE>(LE.UH);aB<LE> get DM=>NB.uK.forTarget(this);}class aJ extends NB{num width;num height;aJ(this.width,this.height);FB hB(EB g,[FB h]){return QG(g,width,height,h);}v XB(num g,num h){if(g>=0.0&&h>=0.0&&g<width&&h<height)return this;return null;}void JB(nB g){}}class xF implements mC{final Function VO;num dO=0.0;num oO=0.0;int xO=1;xF(Function g,num h):VO=g{oO=cB.max(h,0.0001);}bool DD(num h){num g=dO+h;while (g>=oO&&xO>0){dO=oO;xO-- ;VO();g-= oO;}dO=g;return (xO>0);}num get currentTime=>dO;}class JH{static const String MG="none";static const String rJ="touchPoint";}class nD{static const int dJ=0;static const int cH=1;static const int NF=2;static const int sJ=3;static const int bH=4;}abstract class ZJ{}class gB{final num yN;final num CO;gB(num g,num h):yN=g.toDouble(),CO=h.toDouble();gB clone()=>new gB(yN,CO);num get x=>yN;num get y=>CO;String toString()=>"Vector [x=${yN}, y=${CO}]";gB operator+(gB g)=>new gB(yN+g.yN,CO+g.CO);gB operator-(gB g)=>new gB(yN-g.yN,CO-g.CO);gB operator*(gB g)=>new gB(yN*g.yN,CO*g.CO);gB operator/(gB g)=>new gB(yN/g.yN,CO/g.CO);gB operator-()=>new gB(-yN,-CO);bool operator==(gB g)=>yN==g.yN&&CO==g.CO;int get hashCode=>yN.hashCode+CO.hashCode*7;gB scale(num g){return new gB(yN*g,CO*g);}gB normalize(){num g=1/length;return new gB(yN*g,CO*g);}num get length=>cB.sqrt(yN*yN+CO*CO);gB rotate(num g){num h=cB.sin(g);num i=cB.cos(g);return new gB(yN*i-CO*h,yN*h+CO*i);}}class JE{static const String eJ="exactFit";static const String lJ="noBorder";static const String tJ="noScale";static const String dH="showAll";}class mD{String DO;int IO;num yN=0.0;num CO=0.0;num JO=0.0;num WO=0.0;num MP=0.0;num ZP=0.0;num hP=0.0;num oP=0.0;mD.ZN(this.DO,this.IO);num get x=>yN;num get y=>CO;num get width=>JO;num get height=>WO;num get WE=>MP;num get aF=>ZP;num get leading=>hP;num get indent=>oP;}abstract class NE{v JC=null;bool border=false;int borderColor=0xFF000000;int borderWidth=1;RB.CanvasRenderingContext2D NP;NE();factory NE.aN(num g,num h,num i,num j){return new AN(g,h,i,j);}BL(nB h,EB g){NP=h.context;NP.setTransform(g.a,g.b,g.c,g.d,g.oB,g.pB);NP.beginPath();aR();NP.save();NP.clip();}PL(){NP.restore();if(border){NP.strokeStyle=OF(borderColor);NP.lineWidth=borderWidth;NP.lineCap="round";NP.lineJoin="round";NP.stroke();}}bool ZD(num g,num h);aR();}class AD{static String TD;static GF SH;static bJ LF;static List<String> hH=gK();static String get KG{if(TD==null)aK();return TD;}static void aK(){TD="AudioElement";LF=new bJ();if(AH.AudioContext.supported){TD="WebAudioApi";SH=new GF();}var g=RB.window.navigator.userAgent;if(g.contains("IEMobile")){if(g.contains("9.0")||g.contains("10.0")){TD="Mock";}}if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod")){if(g.contains("OS 3")||g.contains("OS 4")||g.contains("OS 5")){TD="Mock";}}if(hH.length==0){TD="Mock";}print("StageXL: supported audio engine is: ${KG}");}static List<String> gK(){var g=new List<String>();var h=new RB.AudioElement();var i=["maybe","probably"];if(i.indexOf(h.canPlayType("audio/mpeg",""))!=-1)g.add("mp3");if(i.indexOf(h.canPlayType("audio/mp4",""))!=-1)g.add("mp4");if(i.indexOf(h.canPlayType("audio/ogg",""))!=-1)g.add("ogg");if(i.indexOf(h.canPlayType("audio/wav",""))!=-1)g.add("wav");print("StageXL: supported audio types are: ${g}");return g;}static List<String> BI(String i,QD h){var k=new RegExp(r"(mp3|mp4|ogg|wav)$",multiLine:false,caseSensitive:true);var g=hH.toList();var l=k.firstMatch(i);var j=new List<String>();if(l==null){throw new ArgumentError("Unsupported file extension.");}if(g.length==0){throw new UnsupportedError("This browser supports no known audio codec.");}if(!h.mp3)g.remove("mp3");if(!h.mp4)g.remove("mp4");if(!h.ogg)g.remove("ogg");if(!h.wav)g.remove("wav");var m=l.group(1);if(g.contains(m)){j.add(i);g.remove(m);}for(var n in g){j.add(i.replaceAll(k,n));}return j;}}class MD extends mB{MD(){}static kB.Future<mB> oD(String g,[QD h=null]){return new kB.Future<mB>.value(new MD());}num get length{return double.NAN;}oC play([bool h=false,zB g]){if(g==null){g=new zB();}return new zM(this,h,g);}}abstract class mB{static kB.Future<mB> oD(String g,[QD h=null]){switch (AD.KG){case "WebAudioApi":return vF.oD(g,h);case "AudioElement":return uF.oD(g,h);default:return MD.oD(g,h);}}static QD pH=new QD(mp3:true,mp4:true,ogg:true,wav:true);num get length;oC play([bool g=false,zB h]);}class zB{num volume;num pan;zB([this.volume=1,this.pan=0]);}class zM extends oC{bool TO;zB aO;zM(MD i,bool g,zB h){TO=g;aO=h;}void stop(){}}class KB{num yN;num CO;KB(num g,num h):yN=g,CO=h;KB.YN():this(0,0);KB clone()=>new KB(yN,CO);String toString()=>"Point [x=${yN}, y=${CO}]";static KB RK(num g,num h)=>new KB(g*cB.cos(h),g*cB.sin(h));num get x=>yN;num get y=>CO;num get length=>cB.sqrt(yN*yN+CO*CO);set x(num g){yN=g;}set y(num g){CO=g;}KB add(KB g){return new KB(yN+g.x,CO+g.y);}KB subtract(KB g){return new KB(yN-g.x,CO-g.y);}XF(KB g){yN=g.x;CO=g.y;}bool aG(KB g){return yN==g.x&&CO==g.y;}}class uF extends mB{RB.AudioElement SO;List<RB.AudioElement> hO;List<OD> YO;uF(){YO=new List<OD>();SO=new RB.AudioElement();SO.onEnded.listen(HQ);hO=new List<RB.AudioElement>();hO.add(SO);RB.document.body.children.add(SO);}static kB.Future<mB> oD(String k,[QD g=null]){if(g==null)g=mB.pH;var n=new uF();var h=n.SO;var i=AD.BI(k,g);var j=new kB.Completer<mB>();if(i.length==0){return MD.oD(k,g);}kB.StreamSubscription l;kB.StreamSubscription m;o(s){l.cancel();m.cancel();j.complete(n);}AB(s){if(i.length>0){h.src=i.removeAt(0);h.load();}else{l.cancel();m.cancel();if(g.ignoreErrors){MD.oD(k,g).then((BB)=>j.complete(BB));}else{j.completeError(new StateError("Failed to load audio."));}}}l=h.onCanPlayThrough.listen(o);m=h.onError.listen(AB);h.src=i.removeAt(0);h.load();return j.future;}num get length=>SO.duration;oC play([bool h=false,zB g]){if(g==null)g=new zB();return new OD(this,h,g);}RB.AudioElement jQ(OD h){RB.AudioElement g;if(hO.length==0){g=SO.clone(true);g.onEnded.listen(HQ);}else{g=hO.removeAt(0);}AD.LF.ZQ(h);YO.add(h);return g;}void qR(OD h){AD.LF.sQ(h);YO.remove(h);RB.AudioElement g=h.SO;hO.add(g);if(g.currentTime>0&&g.ended==false){g.currentTime=0;}}void HQ(RB.Event h){var i=h.target;for(var g=0;g<YO.length;g++ ){if(identical(YO[g].SO,i)){YO[g].stop();break;}}}}class OD extends oC{uF eO;RB.AudioElement SO;bool TO;zB aO;OD(uF g,bool i,zB h){eO=g;aO=(h!=null)?h:new zB();TO=i;SO=g.jQ(this);AD.LF.yP(this);SO.loop=TO;SO.play();}void stop(){if(SO!=null){if(SO.ended==false)SO.pause();eO.qR(this);SO=null;}}}class QD{bool mp3;bool mp4;bool ogg;bool wav;bool ignoreErrors;QD({this.mp3: false,this.mp4: false,this.ogg: false,this.wav: false,this.ignoreErrors: true});}class vF extends mB{AH.AudioBuffer PO;vF(){if(AD.KG!="WebAudioApi"){throw new UnsupportedError("This browser does not support Web Audio API.");}}static kB.Future<mB> oD(String i,[QD g=null]){if(g==null)g=mB.pH;var l=new vF();var h=new kB.Completer<mB>();var j=AD.BI(i,g);var n=GF.IF;if(j.length==0){return MD.oD(i,g);}o(s){n.decodeAudioData(s.response).then((AH.AudioBuffer AB){l.PO=AB;h.complete(l);}).catchError((BB){if(g.ignoreErrors){MD.oD(i,g).then((k)=>h.complete(k));}else{h.completeError(new StateError("Failed to decode audio."));}});}m(BB){if(j.length>0){RB.HttpRequest.request(j.removeAt(0),responseType:'arraybuffer').then(o).catchError(m);}else{if(g.ignoreErrors){MD.oD(i,g).then((k)=>h.complete(k));}else{h.completeError(new StateError("Failed to load audio."));}}}m(null);return h.future;}num get length{return PO.duration;}oC play([bool h=false,zB g]){if(g==null)g=new zB();return new yM(this,h,g);}}class yM extends oC{zB aO;bool TO;AH.AudioBufferSourceNode AP;vF KP;GF SH;yM(vF i,bool g,zB h){KP=i;aO=(h!=null)?h:new zB();TO=g;SH=new GF(AD.SH.WI);SH.DI(aO);AP=GF.IF.createBufferSource();AP.buffer=KP.PO;AP.loop=g;AP.connectNode(SH.WI);AP.start(0);}void stop(){AP.stop(0);}}class zF{static const String gJ="json";static const String TH="jsonarray";}class FB{num yN;num CO;num JO;num WO;FB(num g,num h,num i,num j):yN=g,CO=h,JO=i,WO=j;FB.YN():this(0,0,0,0);FB clone()=>new FB(yN,CO,JO,WO);String toString()=>"Rectangle [x=${yN}, y=${CO}, width=${JO}, height=${WO}]";num get x=>yN;num get y=>CO;num get width=>JO;num get height=>WO;num get left=>yN;num get top=>CO;num get right=>yN+JO;num get bottom=>CO+WO;KB get VB=>new KB(yN+JO/2,CO+WO/2);KB get size=>new KB(JO,WO);set x(num g){yN=g;}set y(num g){CO=g;}set width(num g){JO=g;}set height(num g){WO=g;}void set size(KB g){JO=g.x;WO=g.y;}bool contains(num g,num h){return yN<=g&&CO<=h&&yN+JO>=g&&CO+WO>=h;}bool aG(FB g){return yN==g.x&&CO==g.y&&JO==g.width&&WO==g.height;}bool get isEmpty{return JO==0&&WO==0;}XF(FB g){yN=g.x;CO=g.y;JO=g.width;WO=g.height;}FB union(FB g){num h=cB.min(this.left,g.left);num i=cB.min(this.top,g.top);num j=cB.max(this.right,g.right);num k=cB.max(this.bottom,g.bottom);return new FB(h,i,j-h,k-i);}FB align(){int g=this.left.floor();int h=this.top.floor();int i=this.right.ceil();int j=this.bottom.ceil();return new FB(g,h,i-g,j-h);}}class DB{static const String hJ="added";static const String VH="addedToStage";static const String IG="enterFrame";static const String fH="exitFrame";static const String AK="removed";static const String EK="removedFromStage";static const String HK="resize";static const String nH="render";static const String xH="progress";String LP;bool dR;int eR;AC gO;AC gR;bool hR;bool lR;DB(String g,[bool h=false]){cR(g,h);}void cR(String g,[bool h=false]){LP=g;dR=h;eR=RD.JF;gO=null;gR=null;hR=false;lR=false;}bool get lE=>hR;bool get cM=>lR;String get type=>LP;bool get bubbles=>dR;bool get WF=>true;AC get target=>gO;}class KH{final pC LO;final String UO;final bool nO;final int wO;final int IP;final int XP;final int gP;final int nP;final int uP;final int CQ;final int KQ;KH.bN(pC h,String i,Map g):LO=h,UO=i,nO=OK(g["rotated"]),wO=CC(g["sourceSize"]["w"]),IP=CC(g["sourceSize"]["h"]),XP=CC(g["spriteSourceSize"]["x"]),gP=CC(g["spriteSourceSize"]["y"]),nP=CC(g["frame"]["x"]),uP=CC(g["frame"]["y"]),CQ=CC(g["frame"]["w"]),KQ=CC(g["frame"]["h"]);pC get fM=>LO;String get name=>UO;bool get TM=>nO;int get UL=>nP;int get VL=>uP;int get OI=>CQ;int get NI=>KQ;int get mL=>XP;int get nL=>gP;int get FM=>wO;int get EM=>IP;}class MH{}class DF{final EB matrix=new EB.cN();double alpha=1.0;String ZE=KF.MF;DF SP;DF get kL{if(SP==null)SP=new DF();return SP;}}class yF{bool png;bool jpg;bool webp;bool autoHiDpi;yF({this.png: true,this.jpg: true,this.webp: false,this.autoHiDpi: true});}class vB{static const String FG="auto";static const String GG="arrow";static const String HG="button";static const String vJ="hand";static const String eH="ibeam";static const String zJ="wait";}class PD{static String OH=vB.FG;static bool jJ=false;static nC YH=null;static KB uJ=null;static FB xJ=null;static kB.StreamController<String> CK=new kB.StreamController<String>();static kB.Stream<String> GK=CK.stream.asBroadcastStream();static String zH(String i){String h=i;String g="auto";if(OH!=vB.FG){h=OH;}switch (h){case vB.FG:g="auto";break;case vB.GG:g="default";break;case vB.HG:g="pointer";break;case vB.vJ:g="move";break;case vB.eH:g="text";break;case vB.zJ:g="wait";break;}if(jJ){g="none";}return g;}}class CF extends DB{CF(String g):super(g,false);bool get WF=>false;}class BG{mC ED;BG aD;}class u extends DB{static const String UD="click";static const String nJ="doubleClick";static const String CD="mouseDown";static const String SE="mouseUp";static const String JG="mouseMove";static const String PF="mouseOut";static const String lH="mouseOver";static const String mH="mouseWheel";static const String qH="middleClick";static const String KK="middleMouseDown";static const String NK="middleMouseUp";static const String sH="rightClick";static const String SK="rightMouseDown";static const String TK="rightMouseUp";static const String VK="rollOut";static const String XK="rollOver";num OR,PR;num RR,SR;num iR,jR;bool mR;bool qP;bool TQ;bool xP;bool FQ;int sR;u(String g,[bool h=false]):super(g,h){cR(g,h);}void cR(String g,[bool h=false]){super.cR(g,h);OR=PR=0;RR=SR=0;iR=jR=0;mR=false;qP=false;TQ=false;xP=false;FQ=false;sR=0;}set xR(KB g){OR=g.x;PR=g.y;}set zR(KB g){RR=g.x;SR=g.y;}num get cI=>OR;num get dI=>PR;num get wI=>RR;num get xI=>SR;num get deltaX=>iR;num get deltaY=>jR;bool get QC=>mR;bool get altKey=>qP;bool get ctrlKey=>xP;bool get shiftKey=>FQ;int get YE=>sR;}class ZB extends DB{static const String QH="touchBegin";static const String XH="touchEnd";static const String ZH="touchCancel";static const String gH="touchMove";static const String BK="touchOver";static const String FK="touchOut";int JR;bool LR;num OR,PR;num RR,SR;bool qP;bool TQ;bool xP;bool FQ;num XR;int YR;int ZR;ZB(String g,[bool h=false]):super(g,h){cR(g,h);}void cR(String g,[bool h=false]){super.cR(g,h);JR=0;LR=false;OR=PR=0;RR=SR=0;qP=false;TQ=false;xP=false;FQ=false;XR=1.00;YR=0;ZR=0;}set xR(KB g){OR=g.x;PR=g.y;}set zR(KB g){RR=g.x;SR=g.y;}int get kF=>JR;num get cI=>OR;num get dI=>PR;num get wI=>RR;num get xI=>SR;bool get altKey=>qP;bool get ctrlKey=>xP;bool get shiftKey=>FQ;}class LE extends DB{static const String UH="textInput";String DO="";LE(String g,[bool h=false]):super(g,h);String get text=>DO;}class qC extends DB{static const String RH="keyDown";static const String WH="keyUp";bool qP=false;bool xP=false;bool FQ=false;bool MQ=false;bool TQ=false;int aQ=0;int dQ=0;int gQ=0;qC(String g,[bool h=false]):super(g,h);bool get altKey=>qP;bool get ctrlKey=>xP;bool get shiftKey=>FQ;int get charCode=>aQ;int get keyCode=>dQ;int get keyLocation=>gQ;}class AG{OE AO;List<rC> QO;num ZO;Function kO;bool YP;int fP;RE sP;jH BQ;oH LQ;AG(){AO=new OE();QO=new List<rC>();ZO=-1;YP=false;sP=new RE(0);BQ=new jH();LQ=new oH();fP=null;kO=BR;CR();}OE get hG=>AO;void start(){ZO=-1;CR();}void stop(){bR();}void yK(rC g){if(g.rG!=null){g.rG.QM(g);}QO.add(g);g.pR=this;}void QM(rC g){if(g.rG==this){QO.remove(g);g.pR=null;}}CR(){if(fP==null){fP=RB.window.requestAnimationFrame(kO);}}bR(){if(fP!=null){RB.window.cancelAnimationFrame(fP);fP=null;}}BR(num g){fP=null;CR();g=g.toDouble();if(ZO==-1)ZO=g;if(ZO>g)ZO=g;var j=g-ZO;var i=j/1000.0;var k=g/1000.0;var l=false;if(j>=1){ZO=g;sP.RP=i;OG(sP,uH);AO.DD(i);for(int h=0;h<QO.length;h++ ){QO[h].hG.DD(i);}if(YP){YP=false;OG(LQ,yH);}for(int h=0;h<QO.length;h++ ){QO[h].iL(k,i);}OG(BQ,wH);}}}class aB<SD extends DB> extends kB.Stream<SD>{final AC gO;final String rO;List<BD> GP=[] ;int TP=0;aB.ZN(this.gO,this.rO);bool get isBroadcast=>true;kB.Stream<SD> asBroadcastStream({void onListen(kB.StreamSubscription subscription),void onCancel(kB.StreamSubscription subscription)})=>this;AC get target=>gO;BD<SD> listen(void h(SD event),{Function onError,void onDone(),bool cancelOnError: false}){var g=new BD<SD>.ZN(this,h,false);GP.add(g);switch (rO){case DB.IG:uH.add(g);break;case DB.fH:wH.add(g);break;case DB.nH:yH.add(g);break;}return g;}BD<SD> capture(void h(SD event)){var g=new BD<SD>.ZN(this,h,true);GP.add(g);TP++ ;return g;}void FL(){var h=GP;for(var g=0;g<h.length;g++ ){h[g].cancel();}}vR(BD h){var i=GP;var j=[] ;if(h.gL){TP-- ;}for(var g=0;g<i.length;g++ ){var k=i[g];if(identical(k,h)==false){j.add(k);}}GP=j;}bool FS(DB g){return g.WF&&TP>0||g.bubbles&&GP.length>TP;}uR(SD h,AC j,int k){var i=GP;var l=i.length;for(var g=0;g<l;g++ ){i[g].uR(h,j,k);if(h.cM)return;}}}abstract class wF{void JB(nB g);}class RD{static const int PH=1;static const int JF=2;static const int pJ=3;}abstract class v extends AC implements wF{static int mJ=0;int tO=mJ++ ;num yN=0.0;num CO=0.0;num PP=0.0;num bP=0.0;num iP=1.0;num rP=1.0;num wP=0.0;num DQ=0.0;num JQ=0.0;num PQ=1.0;bool SQ=true;bool VQ=false;NE bQ=null;QB eQ=null;FB kQ=null;bool oQ=false;List<ZJ> uQ=null;MH vQ=null;String yQ=null;String UO="";ND ER=null;final EB GR=new EB.cN();final EB KR=new EB.cN();bool QR=true;static const uB<RE> fK=const uB<RE>(DB.IG);aB<RE> get rL=>v.fK.forTarget(this);num get x=>yN;num get y=>CO;num get JD=>PP;num get KD=>bP;num get gC=>iP;num get hC=>rP;num get skewX=>wP;num get skewY=>DQ;num get IC=>JQ;bool get visible=>SQ;bool get kI=>VQ;num get alpha=>PQ;NE get mask=>bQ;bool get EL=>eQ!=null;MH get YM=>vQ;String get ZE=>yQ;String get name=>UO;ND get parent=>ER;KB get eF{var g=this.gD;return (g!=null)?this.GC(g.TS):null;}num get gE{var g=this.eF;return (g!=null)?g.x:0.0;}num get hE{var g=this.eF;return (g!=null)?g.y:0.0;}v get root{v g=this;while (g.ER!=null)g=g.ER;return g;}rC get gD{v g=this.root;return (g is rC)?g:null;}set x(num g){if(g is num)yN=g;QR=true;}set y(num g){if(g is num)CO=g;QR=true;}set JD(num g){if(g is num)PP=g;QR=true;}set KD(num g){if(g is num)bP=g;QR=true;}set gC(num g){if(g is num)iP=g;QR=true;}set hC(num g){if(g is num)rP=g;QR=true;}set skewX(num g){if(g is num)wP=g;QR=true;}set skewY(num g){if(g is num)DQ=g;QR=true;}set IC(num g){if(g is num)JQ=g;QR=true;}set visible(bool g){if(g is bool)SQ=g;}set alpha(num g){if(g is num){if(g<0.0)g=0.0;if(g>1.0)g=1.0;PQ=g;}}set mask(NE g){bQ=g;}set ZE(String g){yQ=g;}void setTransform(num g,num h,[num i,num j,num k,num l,num m,num n,num o]){if(g is num)yN=g;if(h is num)CO=h;if(i is num)iP=i;if(j is num)rP=j;if(k is num)JQ=k;if(l is num)wP=l;if(m is num)DQ=m;if(n is num)PP=n;if(o is num)bP=o;QR=true;}num get width=>hB(this.YB).width;num get height=>hB(this.YB).height;void set width(num h){this.gC=1;num g=this.width;this.gC=(g!=0.0)?h/g:1.0;}void set height(num h){this.hC=1;num g=this.height;this.hC=(g!=0.0)?h/g:1.0;}void AL(ND g){g.HB(this);}void OM(){if(ER!=null)ER.HC(this);}EB get YB{if(QR){QR=false;num i=wP+JQ;num j=DQ+JQ;num g=iP;num h=rP;num o=PP;num s=bP;if(g>-0.0001&&g<0.0001)g=(g>=0)?0.0001:-0.0001;if(h>-0.0001&&h<0.0001)h=(h>=0)?0.0001:-0.0001;if(i==0.0&&j==0.0){KR.iF(g,0.0,0.0,h,yN-o*g,CO-s*h);}else{num k,l,m,n;num AB=cB.cos(i);num BB=cB.sin(i);if(i==j){k=g*AB;l=g*BB;m=-h*BB;n=h*AB;}else{k=g*cB.cos(j);l=g*cB.sin(j);m=-h*BB;n=h*AB;}num IB=yN-(o*k+s*m);num LB=CO-(o*l+s*n);KR.iF(k,l,m,n,IB,LB);}}return KR;}EB lF(v h){if(h==ER){return this.YB.clone();}if(h!=null&&h.ER==this){return h.YB.HI();}EB j=new EB.cN();v g=this;while (g!=h&&g.ER!=null){j.HD(g.YB);g=g.ER;}if(h==null&&g!=null){j.HD(g.YB);g=null;}if(g==h)return j;EB k=new EB.cN();v i=h;while (i!=this&&i.ER!=null){k.HD(i.YB);i=i.ER;}k.XI();if(i==this){return k;}if(i!=g){return null;}j.HD(k);return j;}FB hB(EB h,[FB g]){if(g==null)g=new FB.YN();g.x=h.oB;g.y=h.pB;g.width=0;g.height=0;return g;}v XB(num g,num h){if(hB(SF).contains(g,h))return this;return null;}KB bI(KB h){GR.identity();for(var g=this;g!=null;g=g.ER){GR.HD(g.YB);}return GR.mE(h);}KB GC(KB h){GR.identity();for(var g=this;g!=null;g=g.ER){GR.HD(g.YB);}GR.XI();return GR.mE(h);}void lS(nB g){g.context.translate(kQ.x,kQ.y);eQ.JB(g);}void dispatchEvent(DB g){List<v> h=null;if(g.WF||g.bubbles){for(v j=parent;j!=null;j=j.parent){if(j.yR(g)){if(h==null)h=[] ;h.add(j);}}}if(h!=null&&g.WF){for(int i=h.length-1;i>=0;i-- ){h[i].uR(g,this,RD.PH);if(g.lE)return;}}uR(g,this,RD.JF);if(g.lE)return;if(h!=null&&g.bubbles){for(int i=0;i<h.length;i++ ){h[i].uR(g,this,RD.pJ);if(g.lE)return;}}}void AS(ND h){for(var g=h;g!=null;g=g.ER)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");ER=h;}void JB(nB g);}class AC{Map<String,aB> OO;aB<DB> on(String i){var g=OO;if(g==null){g=new Map<String,aB>();OO=g;}var h=g[i];if(h==null){h=new aB.ZN(this,i);g[i]=h;}return h;}kB.StreamSubscription<DB> addEventListener(String g,NH h,{bool useCapture: false}){return useCapture?this.on(g).capture(h):this.on(g).listen(h);}void iB(String g){this.on(g).FL();}void dispatchEvent(DB g){uR(g,this,RD.JF);}bool yR(DB g){var h=OO;if(h==null)return false;var i=h[g.type];if(i==null)return false;return i.FS(g);}uR(DB g,AC j,int k){g.hR=false;g.lR=false;var h=OO;if(h==null)return;var i=h[g.type];if(i==null)return;i.uR(g,j,k);}}class XJ{static const String iJ="round";}class lD{static const String fJ="dynamic";static const String PE="input";}class yB{static const String HF="center";static const String kJ="end";static const String qJ="justify";static const String cH="left";static const String NF="right";}class EF{static const String HF="center";static const String cH="left";static const String MG="none";static const String NF="right";}class KE extends NB{v upState;v overState;v downState;v hitTestState;bool yG=true;bool enabled=true;v mP;KE([this.upState,this.overState,this.downState,this.hitTestState]){addEventListener(u.lH,XQ);addEventListener(u.PF,XQ);addEventListener(u.CD,XQ);addEventListener(u.SE,XQ);mP=this.upState;}FB hB(EB g,[FB h]){if(mP!=null){GR.YG(mP.YB,g);return mP.hB(GR,h);}return super.hB(g,h);}v XB(num j,num k){if(this.hitTestState!=null){EB g=this.hitTestState.YB;double h=j-g.oB;double i=k-g.pB;double l=(g.d*h-g.c*i)/g.tC;double m=(g.a*i-g.b*h)/g.tC;if(this.hitTestState.XB(l,m)!=null)return this;}return null;}void JB(nB g){if(mP!=null)g.tI(mP);}void XQ(u g){if(g.type==u.PF){mP=upState;}else{mP=g.QC?downState:overState;}}}final Map<String,rH> EG=new Map<String,rH>();class YJ{static const String iJ="round";}class QB implements wF{int JO;int WO;bool iO;num sO;num BP;int JP;int VP;int eP;int pP;int vP;int EQ;int IQ;int NQ;int QQ;RB.CanvasImageSource WQ;RB.CanvasRenderingContext2D NP;static yF pH=new yF();QB(int i,int j,[bool k=true,int g=0xFFFFFFFF,l=1.0]){JO=CC(i);WO=CC(j);iO=k;sO=l.toDouble();BP=sO/VE;JP=((1.0-BP).abs()<0.001)?0:1;pP=0;vP=0;VP=JO;eP=WO;EQ=0;IQ=0;NQ=(JO*BP).ceil();QQ=(WO*BP).ceil();var h=new RB.CanvasElement(width:NQ,height:QQ);WQ=h;NP=h.context2D;NP.fillStyle=iO?OF(g):QE(g);NP.fillRect(0,0,NQ,QQ);}QB.eN(RB.ImageElement g,[num j=1.0]){var h=CC(g.naturalWidth);var i=CC(g.naturalHeight);iO=true;sO=YC(j);BP=sO;JO=(h/sO).round();WO=(i/sO).round();JP=((1.0-BP).abs()<0.001)?0:1;pP=0;vP=0;VP=JO;eP=WO;EQ=0;IQ=0;NQ=h;QQ=i;WQ=g;}QB.fN(KH g){var h=g.fM.NO;JO=g.FM.toInt();WO=g.EM.toInt();iO=true;sO=h.sO;BP=h.BP;JP=g.TM?3:2;pP=g.mL;vP=g.nL;VP=g.OI;eP=g.NI;EQ=(g.UL*BP).floor();IQ=(g.VL*BP).floor();NQ=(g.OI*BP).ceil();QQ=(g.NI*BP).ceil();WQ=h.WQ;}static kB.Future<QB> oD(String g,[yF i=null,num k=1.0]){if(i==null){i=QB.pH;}if(rC.PG&&i.autoHiDpi){if(g.contains("@1x.")&&TF>=1.5){k=k*2.0;g=g.replaceAll("@1x.","@2x.");}}kB.Completer<QB> j=new kB.Completer<QB>();RB.ImageElement h=new RB.ImageElement();kB.StreamSubscription l;kB.StreamSubscription m;l=h.onLoad.listen((o){l.cancel();m.cancel();j.complete(new QB.eN(h,k));});m=h.onError.listen((o){l.cancel();m.cancel();j.completeError(new StateError("Failed to load image."));});if(i.webp==false){h.src=g;return j.future;}mK.then((bool s){var AB=new RegExp(r"(png|jpg|jpeg)$",multiLine:false,caseSensitive:true);var n=AB.firstMatch(g);if(s==false||n==null){h.src=g;}else{h.src=g.substring(0,g.length-n.group(1).length)+"webp";}});return j.future;}int get width=>JO;int get height=>WO;RB.ImageData getImageData(int g,int h,int i,int j,[num m]){if(m!=null&&m!=sO){var n=new QB(i,j,true,0,m);n.MI(this,new EB(1.0,0.0,0.0,1.0,-g,-h));return n.getImageData(g,h,i,j);}yS();var k=sO;var l=BP;if(VE>1.0){return NP.getImageDataHD(g*k,h*k,i*k,j*k);}else{return NP.getImageData(g*l,h*l,i*l,j*l);}}QB clone([num g]){g=(g!=null)?g:sO;var h=new QB(JO,WO,true,0,g);h.MI(this);return h;}void MI(wF h,[EB g=null]){yS();g=(g==null)?new EB.cN():g.clone();g.scale(BP,BP);var i=new nB.dN(NP,g);h.JB(i);NP.globalAlpha=1.0;NP.globalCompositeOperation=KF.MF;}void clear(){yS();NP.setTransform(BP,0.0,0.0,BP,0.0,0.0);NP.clearRect(0,0,JO,WO);}int aL(int o,int s){var j=getImageData(o,s,1,1);var i=j.width*j.height;var h=j.data;var k=0,l=0,m=0,n=0;for(int g=0;g<i;g++ ){k+= RF?h[g*4+0]:h[g*4+3];l+= RF?h[g*4+1]:h[g*4+2];m+= RF?h[g*4+2]:h[g*4+1];n+= RF?h[g*4+3]:h[g*4+0];}return ((n~/i)<<24)+((k~/i)<<16)+((l~/i)<<8)+((m~/i)<<0);}void JB(nB h){var g=h.context;switch (JP){case 0:g.drawImage(WQ,pP,vP);break;case 1:g.drawImageScaled(WQ,pP,vP,VP,eP);break;case 2:g.drawImageScaledFromSource(WQ,EQ,IQ,NQ,QQ,pP,vP,VP,eP);break;case 3:g.transform(0.0,-1.0,1.0,0.0,pP,vP+eP);g.drawImageScaledFromSource(WQ,EQ,IQ,QQ,NQ,0.0,0.0,eP,VP);break;}}void RM(nB h,FB g){if(g.width==0||g.height==0)return;var i=h.context;if(JP!=0){yS();}var j=(g.x-pP)*BP;var k=(g.y-vP)*BP;var l=g.width*BP;var m=g.height*BP;var n=g.x+pP;var o=g.y+vP;var s=g.width;var AB=g.height;i.drawImageScaledFromSource(WQ,j,k,l,m,n,o,s,AB);}void yS(){if(NP==null){var g=sO/VE;var i=(JO*g).ceil();var j=(WO*g).ceil();var h=new RB.CanvasElement(width:i,height:j);var k=new EB(g,0.0,0.0,g,0.0,0.0);var l=new nB.dN(h.context2D,k);this.JB(l);sO=sO;BP=g;JP=((1.0-BP).abs()<0.001)?0:1;pP=0;vP=0;VP=JO;eP=WO;EQ=0;IQ=0;NQ=i;QQ=j;WQ=h;NP=h.context2D;}}}class bJ{List<OD> YO=new List<OD>();num yO=1.0;DI(zB g){yO=g.volume;YO.forEach(yP);}ZQ(OD g){YO.add(g);}sQ(OD g){YO.remove(g);}yP(OD g){var h=g.SO;var i=g.aO.volume;if(h!=null){h.volume=yO*i;}}}class GF{static AH.AudioContext IF=new AH.AudioContext();AH.AudioNode qO;AH.GainNode zO;GF([AH.AudioNode g]){qO=(g!=null)?g:IF.destination;zO=IF.createGain();zO.connectNode(qO);}void DI(zB g){var h=g.volume;zO.gain.value=cB.pow(h,2);}AH.AudioNode get WI=>zO;}typedef num DG(num ratio);typedef void NH<SD extends DB>(SD event);class BD<SD extends DB> extends kB.StreamSubscription<SD>{int CP=0;bool OP=false;bool cP=false;aB<SD> lP;NH<SD> zP;BD.ZN(this.lP,this.zP,this.cP);bool get isPaused=>CP>0;bool get fL=>OP;bool get gL=>cP;aB<SD> get QL=>lP;void onData(void g(SD event)){zP=g;}void onError(void g(error)){}void onDone(void g()){}kB.Future cancel(){if(OP==false){OP=true;lP.vR(this);}return null;}void pause([kB.Future g]){CP++ ;if(g!=null){g.whenComplete(resume);}}void resume(){if(CP==0){throw new StateError("Subscription is not paused.");}CP-- ;}uR(SD g,AC i,int h){if(OP)return;if(cP!=(h==RD.PH))return;g.gO=i;g.gR=lP.target;g.eR=h;zP(g);}}class OE implements mC{BG FP;BG aP;num jP=0.0;OE(){FP=new BG();aP=FP;}num get elapsedTime=>jP;void add(mC g){if(g is !mC){throw new ArgumentError("The supplied animatable does not extend type Animatable.");}if(this.contains(g)==false){var h=new BG();aP.ED=g;aP.aD=h;aP=h;}}void remove(mC h){if(h!=null){var g=FP;while (identical(g,aP)==false){if(identical(g.ED,h)){g.ED=null;break;}g=g.aD;}}}bool contains(mC h){if(h!=null){var g=FP;while (identical(g,aP)==false){if(identical(g.ED,h))return true;g=g.aD;}}return false;}QF wG(v g,num h,[DG i]){QF j=i!=null?new QF(g,h,i):new QF(g,h);add(j);return j;}xF ZF(Function h,num i){xF g=new xF(h,i);add(g);return g;}bool DD(num j){jP+= j;var g=FP;var i=aP;while (identical(g,i)==false){var k=g.ED;if(k==null){var h=g.aD;g.ED=h.ED;g.aD=h.aD;if(identical(h,i))i=g;if(identical(h,aP))aP=g;}else if(k.DD(j)==false){g.ED=null;}else{g=g.aD;}}return true;}}class KF{static const String MF="source-over";}String QE(int g){int h=(g>>16)&0xFF;int i=(g>>8)&0xFF;int j=g&0xFF;return "rgb(${h},${i},${j})";}rH oJ(String g){if(EG.containsKey(g)==false){EG[g]=new rH(g);}return EG[g];}class RE extends CF{num RP;RE(num g):super(DB.IG),RP=g;}class aH{static String JK=JH.MG;static kB.StreamController<String> MK=new kB.StreamController<String>();static kB.Stream<String> PK=MK.stream.asBroadcastStream();static String get bK=>JK;}class wB{static const String iH="B";static const String DK="BL";static const String kH="BR";static const String cH="L";static const String NF="R";static const String IK="T";static const String LK="TR";static const String MG="";}String OF(int g){int h=(g>>24)&0xFF;int i=(g>>16)&0xFF;int j=(g>>8)&0xFF;int k=g&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class jH extends CF{jH():super(DB.fH);}class nB{final RB.CanvasRenderingContext2D NP;num dO=0.0;num fQ=0.0;DF lQ;DF qQ;nB.dN(RB.CanvasRenderingContext2D i,[EB h]):NP=i{lQ=new DF();qQ=lQ;var g=lQ.matrix;if(h is EB){g.XF(h);}NP.setTransform(g.a,g.b,g.c,g.d,g.oB,g.pB);NP.globalAlpha=1.0;NP.globalCompositeOperation=KF.MF;}RB.CanvasRenderingContext2D get context=>NP;num get currentTime=>dO;num get NL=>fQ;void reset([EB h,num i,num j]){dO=(i is num)?i:0.0;fQ=(j is num)?j:0.0;qQ=lQ;var g=lQ.matrix;if(h is EB){g.XF(h);}NP.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);NP.clearRect(0,0,NP.canvas.width,NP.canvas.height);NP.setTransform(g.a,g.b,g.c,g.d,g.oB,g.pB);NP.globalAlpha=1.0;NP.globalCompositeOperation=KF.MF;}void tI(v h){var g=h.YB;var BB=h.alpha;var j=h.mask;var k=h.YM;var n=h.ZE;var l=qQ;var i=qQ.kL;qQ=i;var o=i.matrix;var s=l.alpha.toDouble()*BB;var AB=(n!=null)?n:l.ZE;o.YG(g,l.matrix);i.alpha=s;i.ZE=AB;if(j!=null){if(j.JC==null){g=i.matrix;}else if(identical(j.JC,h)){g=i.matrix;}else if(identical(j.JC,h.parent)){g=l.matrix;}else{g=j.JC.lF(h);if(g==null)g=SF;else g.HD(i.matrix);}j.BL(this,g);}if(k!=null){if(k.JC==null){g=i.matrix;}else if(identical(k.JC,h)){g=i.matrix;}else if(identical(k.JC,h.parent)){g=l.matrix;}else{g=k.JC.lF(h);if(g==null)g=SF;else g.HD(i.matrix);}k.MN(this,g);}var m=o;NP.setTransform(m.a,m.b,m.c,m.d,m.oB,m.pB);NP.globalCompositeOperation=AB;NP.globalAlpha=s;if(h.EL){h.lS(this);}else{h.JB(this);}if(k!=null){k.PN();}if(j!=null){j.PL();}qQ=l;}}class oH extends CF{oH():super(DB.nH);}class rH{String fontStyle;int WE=0;int aF=0;int height=0;rH(String j){this.fontStyle=j;var h=new RB.Element.tag("span");h.style.font=this.fontStyle;h.text="Hg";var g=new RB.Element.tag("div");g.style.display="inline-block";g.style.width="1px";g.style.height="0px";var i=new RB.Element.tag("div");i.append(g);i.append(h);RB.document.body.append(i);try {g.style.verticalAlign="baseline";this.WE=g.offsetTop-h.offsetTop;g.style.verticalAlign="bottom";this.height=g.offsetTop-h.offsetTop;this.aF=height-WE;}catch (k){}finally {i.remove();}}}class XC{EB matrix;num cD=double.INFINITY;num dD=double.NEGATIVE_INFINITY;num eD=double.INFINITY;num bD=double.NEGATIVE_INFINITY;num rD=double.INFINITY;num sD=double.NEGATIVE_INFINITY;num tD=double.INFINITY;num qD=double.NEGATIVE_INFINITY;num XD=double.NAN;num YD=double.NAN;XC(this.matrix);bool get dE=>!XD.isNaN&&!YD.isNaN;bool get VI=>!cD.isInfinite&&!dD.isInfinite&&!eD.isInfinite&&!bD.isInfinite;bool get dL=>!rD.isInfinite&&!sD.isInfinite&&!tD.isInfinite&&!qD.isInfinite;SM(){XD=YD=double.NAN;cD=eD=double.INFINITY;dD=bD=double.NEGATIVE_INFINITY;}kC(num g,num h){XD=g;YD=h;}sB(num g,num h,[bool k=false]){if(dE){g=g.toDouble();h=h.toDouble();num i=k?g:g*matrix.a+h*matrix.c+matrix.oB;num j=k?h:g*matrix.b+h*matrix.d+matrix.pB;if(cD>i)cD=i;if(dD<i)dD=i;if(eD>j)eD=j;if(bD<j)bD=j;}}stroke(num l){if(VI){var g=cB.sqrt(matrix.tC)*l/2;var h=cD-g;var i=dD+g;var j=eD-g;var k=bD+g;if(rD>h)rD=h;if(sD<i)sD=i;if(tD>j)tD=j;if(qD<k)qD=k;}}fill(){if(VI){if(rD>cD)rD=cD;if(sD<dD)sD=dD;if(tD>eD)tD=eD;if(qD<bD)qD=bD;}}FB bL(){if(dL){var g=rD.floor();var i=sD.ceil();var h=tD.floor();var j=qD.ceil();return new FB(g,h,i-g,j-h);}else{return new FB.YN();}}}class LG{static num NG(num g){return g;}}bool OK(bool g){if(g is bool){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a bool.");}}class TE{static const String FG="auto";static const String QK="stop";static const String tH="once";}final List<BD<RE>> uH=[] ;int CC(int g){if(g is int){return g;}else{throw new ArgumentError("The supplied value (${g}) is not an int.");}}final List<BD<jH>> wH=[] ;class vH{NB target=null;bool QC=false;int XG=0;int YE=0;String gI,iI;String eI,fI;vH(this.gI,this.iI,this.eI,this.fI);}final List<BD<oH>> yH=[] ;num YC(num g){if(g is num){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a number.");}}OG(CF h,List<BD> i){var k=i.length;for(int g=0;g<k;g++ ){var j=i[g];if(j.fL==false){h.hR=false;h.lR=false;var l=j.QL.target;j.uR(h,l,RD.JF);}else{i.removeAt(g);k-- ;g-- ;}}}class xB{final String qG;num tG=double.NAN;num uG=double.NAN;xB(this.qG);void vG(num g){this.uG=g.toDouble();}bool get hL=>!tG.isNaN&&!uG.isNaN;num oR(v g){switch (qG){case 'x':return g.x;case 'y':return g.y;case 'pivotX':return g.JD;case 'pivotY':return g.KD;case 'scaleX':return g.gC;case 'scaleY':return g.hC;case 'skewX':return g.skewX;case 'skewY':return g.skewY;case 'rotation':return g.IC;case 'alpha':return g.alpha;default:return 0.0;}}void GS(v g,num h){switch (qG){case 'x':g.x=h;break;case 'y':g.y=h;break;case 'pivotX':g.JD=h;break;case 'pivotY':g.KD=h;break;case 'scaleX':g.gC=h;break;case 'scaleY':g.hC=h;break;case 'skewX':g.skewX=h;break;case 'skewY':g.skewY=h;break;case 'rotation':g.IC=h;break;case 'alpha':g.alpha=h;break;}}}String ZK(String g){if(g is String){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a string.");}}class cK{static int dK=0;int kF=dK++ ;NB target=null;bool hF=false;cK(this.target,this.hF);}String AI(String g){RegExp h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);Match i=h.firstMatch(g);return i.group(1);}class AN extends NE{final FB wR;AN(num g,num h,num i,num j):wR=new FB(g,h,i,j);aR(){NP.rect(wR.x,wR.y,wR.width,wR.height);}bool ZD(num g,num h){return wR.contains(g,h);}}class rC extends ND{static bool PG=sK;RB.CanvasElement BS;RB.CanvasRenderingContext2D NP;int NQ,QQ;int DS;int ES,HS;FB KS;EB LS;EB MS;AG pR;OE AO;NB NS;nB OS;String PS;String QS;String RS;String SS;KB TS;NB US;List<vH> VS;Map<int,cK> WS;u XS;ZB YS;rC(String k,RB.CanvasElement g,[int h,int i,int j]){if(g is !RB.CanvasElement){throw new ArgumentError("The canvas argument is not a CanvasElement");}if(g.tabIndex==-1)g.tabIndex=0;if(g.style.outline=="")g.style.outline="none";UO=k;BS=g;NP=g.context2D;NQ=(h!=null)?h:g.width;QQ=(i!=null)?i:g.height;DS=(j!=null)?j:30;ES=-1;HS=-1;KS=new FB.YN();LS=new EB.cN();MS=new EB.cN();jS();pR=null;AO=new OE();OS=new nB.dN(NP);PS=TE.FG;QS=JE.dH;RS=wB.MG;VS=[new vH(u.CD,u.SE,u.UD,u.nJ),new vH(u.KK,u.NK,u.qH,u.qH),new vH(u.SK,u.TK,u.sH,u.sH)];SS=vB.GG;US=null;TS=new KB(0,0);XS=new u(u.UD,true);PD.GK.listen(GK);BS.onMouseDown.listen(XQ);BS.onMouseUp.listen(XQ);BS.onMouseMove.listen(XQ);BS.onMouseOut.listen(XQ);BS.onMouseWheel.listen(mS);WS=new Map<int,cK>();YS=new ZB(ZB.QH,true);aH.PK.listen(nS);nS(null);BS.onKeyDown.listen(oS);BS.onKeyUp.listen(oS);BS.onKeyPress.listen(oS);}AG get rG=>pR;OE get hG=>AO;KB get eF=>TS;NB get focus=>NS;String get align=>RS;vS(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x(num g){vS();}set y(num g){vS();}set JD(num g){vS();}set KD(num g){vS();}set gC(num g){vS();}set hC(num g){vS();}set skewX(num g){vS();}set skewY(num g){vS();}set IC(num g){vS();}set alpha(num g){vS();}set width(num g){vS();}set height(num g){vS();}iL(num g,num h){if(PS==TE.FG||PS==TE.tH){jS();OS.reset(MS,g,h);JB(OS);if(PS==TE.tH)PS=TE.QK;}}jS(){var IB=BS.getBoundingClientRect();var LB=BS.clientLeft+IB.left;var PB=BS.clientTop+IB.top;var g=BS.clientWidth;var h=BS.clientHeight;var o=NQ;var s=QQ;if(g is !num)throw "dart2js_hint";if(h is !num)throw "dart2js_hint";if(o is !num)throw "dart2js_hint";if(s is !num)throw "dart2js_hint";if(g==0||h==0)return;var i=1.0;var j=1.0;var k=0.0;var l=0.0;var m=g/o;var n=h/s;switch (QS){case JE.eJ:i=m;j=n;break;case JE.lJ:i=j=(m>n)?m:n;break;case JE.tJ:i=j=1.0;break;case JE.dH:i=j=(m<n)?m:n;break;}switch (RS){case wB.LK:case wB.NF:case wB.kH:k=(g-o*i);break;case wB.IK:case wB.MG:case wB.iH:k=(g-o*i)/2;break;}switch (RS){case wB.DK:case wB.iH:case wB.kH:l=(h-s*j);break;case wB.cH:case wB.MG:case wB.NF:l=(h-s*j)/2;break;}var AB=KS;AB.x=-k/i;AB.y=-l/j;AB.width=g/i;AB.height=h/j;var BB=(rC.PG?TF:1.0)/VE;MS.iF(i,0.0,0.0,j,k,l);MS.scale(BB,BB);LS.iF(1.0,0.0,0.0,1.0,-LB-k,-PB-l);LS.scale(1.0/i,1.0/j);if(ES!=g||HS!=h){ES=g;HS=h;BS.width=(ES*BB).round();BS.height=(HS*BB).round();if(BS.clientWidth!=g||BS.clientHeight!=h){BS.style.width="${g}px";BS.style.height="${h}px";}dispatchEvent(new DB(DB.HK));}}GK(String g){BS.style.cursor=PD.zH(SS);}XQ(RB.MouseEvent k){k.preventDefault();var PB=new DateTime.now().millisecondsSinceEpoch;var eB=k.button;NB g=null;KB i=LS.CS(k.client);KB IB=null;if(eB<0||eB>2)return;if(k.type=="mousemove"&&TS.aG(i))return;vH h=VS[eB];TS=i;if(PD.YH!=null){PD.YH.fR();}if(k.type!="mouseout"){g=XB(i.x,i.y) as NB;}var n=vB.GG;if(g is nC&&(g as nC).yG){n=vB.HG;}if(g is KE&&(g as KE).yG){n=vB.HG;}if(g is WC&&(g as WC).type==lD.PE){n=vB.eH;}if(SS!=n){SS=n;BS.style.cursor=PD.zH(n);}if(US!=g){v LB=US;v AB=g;List o=[] ;List s=[] ;int l=0;for(v j=LB;j!=null;j=j.parent){o.add(j);}for(v j=AB;j!=null;j=j.parent){s.add(j);}for(;;l++ ){if(l==o.length)break;if(l==s.length)break;var oE=o[o.length-l-1];var nE=s[s.length-l-1];if(oE!=nE)break;}if(LB!=null){LB.dispatchEvent(XS..cR(u.PF,true)..xR=LB.GC(i)..zR=i..mR=h.QC);}for(int m=0;m<o.length-l;m++ ){v g=o[m];g.dispatchEvent(XS..cR(u.VK,false)..xR=g.GC(i)..zR=i..mR=h.QC);}for(int m=s.length-l-1;m>=0;m-- ){v g=s[m];g.dispatchEvent(XS..cR(u.XK,false)..xR=g.GC(i)..zR=i..mR=h.QC);}if(AB!=null){AB.dispatchEvent(XS..cR(u.lH,true)..xR=AB.GC(i)..zR=i..mR=h.QC);}US=AB;}String BB=null;bool xC=false;bool LD=false;if(k.type=="mousedown"){BS.focus();BB=h.gI;if(g!=h.target||PB>h.XG+500){h.YE=0;}h.QC=true;h.target=g;h.XG=PB;h.YE++ ;}if(k.type=="mouseup"){BB=h.iI;h.QC=false;xC=(h.target==g);LD=xC&&h.YE.isEven&&(PB<h.XG+500);}if(k.type=="mousemove"){BB=u.JG;}if(BB!=null&&g!=null){IB=g.GC(i);g.dispatchEvent(XS..cR(BB,true)..xR=IB..zR=i..mR=h.QC..sR=h.YE);if(xC){if(LD&&g.OL){g.dispatchEvent(XS..cR(h.fI,true)..xR=IB..zR=i..mR=h.QC);}else{g.dispatchEvent(XS..cR(h.eI,true)..xR=IB..zR=i..mR=h.QC);}}}}mS(RB.WheelEvent g){var h=LS.CS(g.client);var i=XB(h.x,h.y) as NB;if(i!=null){i.dispatchEvent(XS..cR(u.mH,true)..xR=i.GC(h)..zR=h..iR=g.deltaX..jR=g.deltaY);if(XS.lE)g.preventDefault();}}List<kB.StreamSubscription<ZB>> PT=[] ;nS(String h){PT.forEach((g)=>g.cancel());if(aH.bK==JH.rJ){PT=[BS.onTouchStart.listen(QT),BS.onTouchEnd.listen(QT),BS.onTouchMove.listen(QT),BS.onTouchEnter.listen(QT),BS.onTouchLeave.listen(QT),BS.onTouchCancel.listen(QT)];}}QT(RB.TouchEvent j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=LS.CS(m.client);var h=XB(i.x,i.y) as NB;var g=WS.containsKey(l)?WS[l]:new cK(h,WS.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(YS..cR(ZB.FK,true)..xR=(g.target.gD!=null)?g.target.GC(i):new KB.YN()..zR=i..JR=g.kF..LR=g.hF);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(YS..cR(ZB.BK,true)..xR=h.GC(i)..zR=i..JR=g.kF..LR=g.hF);g.target=h;}String k=null;if(j.type=="touchstart"){BS.focus();WS[l]=g;k=ZB.QH;}if(j.type=="touchend"){WS.remove(l);k=ZB.XH;}if(j.type=="touchcancel"){WS.remove(l);k=ZB.ZH;}if(j.type=="touchmove"){k=ZB.gH;}if(k!=null&&h!=null){h.dispatchEvent(YS..cR(k,true)..xR=h.GC(i)..zR=i..JR=g.kF..LR=g.hF);}}}oS(RB.KeyboardEvent g){if(g.keyCode==8){g.preventDefault();}if(NS==null){return;}if(g.type=="keypress"){var i=g.charCode;var l=g.keyCode;if(l==13)i=13;if(i==0)return;var m=new LE(LE.UH,true)..DO=new String.fromCharCodes([i]);NS.dispatchEvent(m);}else{var h=nD.dJ;var j="";if(g.type=="keyup")j=qC.WH;if(g.type=="keydown")j=qC.RH;if(g.keyLocation==RB.KeyLocation.LEFT)h=nD.cH;if(g.keyLocation==RB.KeyLocation.RIGHT)h=nD.NF;if(g.keyLocation==RB.KeyLocation.NUMPAD)h=nD.sJ;if(g.keyLocation==RB.KeyLocation.JOYSTICK)h=nD.bH;if(g.keyLocation==RB.KeyLocation.MOBILE)h=nD.bH;var k=new qC(j,true)..qP=g.altKey..xP=g.ctrlKey..FQ=g.shiftKey..aQ=g.charCode..dQ=g.keyCode..gQ=h;NS.dispatchEvent(k);if(k.lE){g.preventDefault();}}}}String eK(String i,String g){RegExp j=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);Match k=j.firstMatch(i);String h=k.group(1);return (h==null)?g:"${h}${g}";}bool hK(){var g=new RB.CanvasElement(width:1,height:1);g.context2D.fillStyle="#000000";g.context2D.fillRect(0,0,1,1);var h=g.context2D.getImageData(0,0,1,1).data;var i=(h[0]==0);return i;}kB.Future<bool> jK(){var h=new kB.Completer<bool>();var g=new RB.ImageElement();void i(){h.complete(g.width==2&&g.height==2);}g.onLoad.listen((j)=>i());g.onError.listen((j)=>i());g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return h.future;}FB QG(EB g,num m,num n,FB j){m=m.toDouble();n=n.toDouble();num PB=0.0;num eB=0.0;num o=m*g.a;num s=m*g.b;num AB=m*g.a+n*g.c;num BB=m*g.b+n*g.d;num IB=n*g.c;num LB=n*g.d;num h=PB;if(h>o)h=o;if(h>AB)h=AB;if(h>IB)h=IB;num i=eB;if(i>s)i=s;if(i>BB)i=BB;if(i>LB)i=LB;num k=PB;if(k<o)k=o;if(k<AB)k=AB;if(k<IB)k=IB;num l=eB;if(l<s)l=s;if(l<BB)l=BB;if(l<LB)l=LB;if(j==null)j=new FB.YN();j.x=g.oB+h;j.y=g.pB+i;j.width=k-h;j.height=l-i;return j;}class QF implements mC{final v ZS;final DG aS;final List<xB> bS=new List<xB>();Function cS;Function dS;Function eS;IH fS;num oO;num dO;num gS;bool hS;bool iS;QF(v g,num h,[DG i=LG.NG]):ZS=g,aS=i{fS=new IH(this);dO=0.0;oO=cB.max(0.0001,h);gS=0.0;hS=false;iS=false;}IH get CI=>fS;void HP(xB g){if(ZS!=null&&iS==false){bS.add(g);}}void complete(){if(oO>=dO)DD(oO-dO);}bool DD(num k){if(dO<oO||iS==false){dO=dO+k;if(dO>oO){dO=oO;}if(dO>=0.0){if(iS==false){iS=true;for(int g=0;g<bS.length;g++ ){var h=bS[g];h.tG=h.oR(ZS);}if(cS!=null){cS();}}num l=dO/oO;num m=aS(l).toDouble();for(int g=0;g<bS.length;g++ ){var h=bS[g];if(h.hL){var i=h.tG.toDouble();var n=h.uG.toDouble();var j=i+m*(n-i);h.GS(ZS,hS?j.round():j);}}if(dS!=null){dS();}if(eS!=null&&dO==oO){eS();}}}return dO<oO;}num get currentTime=>dO;}class BN extends BC{BN();JB(RB.CanvasRenderingContext2D g){g.beginPath();}jC(XC g){g.SM();}}class CN extends BC{CN();JB(RB.CanvasRenderingContext2D g){g.closePath();}}class DN extends BC{num yN,CO;DN(num g,num h){yN=g.toDouble();CO=h.toDouble();}JB(RB.CanvasRenderingContext2D g){g.moveTo(yN,CO);}jC(XC g){g.kC(yN,CO);}}final bool RF=hK();class EN extends BC{num yN,CO;EN(num g,num h){yN=g.toDouble();CO=h.toDouble();}JB(RB.CanvasRenderingContext2D g){g.lineTo(yN,CO);}jC(XC g){if(g.dE==false){g.kC(yN,CO);}g.sB(g.XD,g.YD);g.sB(yN,CO);g.kC(yN,CO);}}final kB.Future<bool> mK=jK();final EB SF=new EB.cN();final RB.CanvasElement oK=new RB.CanvasElement(width:16,height:16);final RB.CanvasRenderingContext2D UE=oK.context2D;final num VE=UE.backingStorePixelRatio==null?1.0:UE.backingStorePixelRatio.toDouble();final num TF=RB.window.devicePixelRatio==null?1.0:RB.window.devicePixelRatio;final bool pK=((){var g=RB.window.navigator.userAgent.toLowerCase();return g.indexOf("iphone")>=0||g.indexOf("ipad")>=0||g.indexOf("ipod")>=0||g.indexOf("android")>=0||g.indexOf("webos")>=0||g.indexOf("windows phone")>=0;})();final int qK=RB.window.screen==null?1024:cB.max(RB.window.screen.width,RB.window.screen.height);final bool sK=TF>1.0&&(!pK||qK>480);class GN extends BC{num rS,sS;num tS,uS;GN(num g,num h,num i,num j){rS=g.toDouble();sS=h.toDouble();tS=i.toDouble();uS=j.toDouble();}JB(RB.CanvasRenderingContext2D g){g.quadraticCurveTo(rS,sS,tS,uS);}num wS(num g,num i,num j,num k){num h=1-g;return h*h*i+2*h*g*j+g*g*k;}num xS(num g,num h,num j){num k=-1;num i=g-2*h+j;return (i!=0)?(g-h)/i:k;}jC(XC g){if(g.dE==false){g.kC(rS,sS);}var h=g.matrix.iD(new gB(g.XD,g.YD));var j=g.matrix.iD(new gB(rS,sS));var i=g.matrix.iD(new gB(tS,uS));g.sB(h.x,h.y,true);num k=xS(h.x,j.x,i.x);num l=xS(h.y,j.y,i.y);num m=(k>=0&&k<=1)?wS(k,h.x,j.x,i.x):h.x;num n=(l>=0&&l<=1)?wS(l,h.y,j.y,i.y):h.y;g.sB(m,n,true);g.sB(i.x,i.y,true);g.kC(tS,uS);}}class HN extends BC{num AT,BT;num CT,DT;num tS,uS;HN(num g,num h,num i,num j,num k,num l){AT=g.toDouble();BT=h.toDouble();CT=i.toDouble();DT=j.toDouble();tS=k.toDouble();uS=l.toDouble();}JB(RB.CanvasRenderingContext2D g){g.bezierCurveTo(AT,BT,CT,DT,tS,uS);}num FT(num g,num i,num j,num k,num l){num h=1-g;return h*h*h*i+3*h*h*g*j+3*h*g*g*k+g*g*g*l;}List<num> GT(num i,num h,num g,num j){num l=-i+2*h-g;num m=-cB.sqrt(-i*(g-j)+h*h-h*(g+j)+g*g);num k=-i+3*h-3*g+j;return (k!=0)?<num>[(l+m)/k,(l-m)/k]:<num>[-1,-1];}jC(XC g){if(g.dE==false){g.kC(AT,BT);}var i=g.matrix.iD(new gB(g.XD,g.YD));var h=g.matrix.iD(new gB(AT,BT));var j=g.matrix.iD(new gB(CT,DT));var k=g.matrix.iD(new gB(tS,uS));if(h.x==j.x)h=h+new gB(0.0123,0.0);if(h.y==j.y)h=h+new gB(0.0,0.0123);g.sB(i.x,i.y,true);List<num> o=GT(i.x,h.x,j.x,k.x);List<num> s=GT(i.y,h.y,j.y,k.y);for(int l=0;l<2;l++ ){num m=o[l].toDouble();num n=s[l].toDouble();num AB=(m>=0&&m<=1)?FT(m,i.x,h.x,j.x,k.x):i.x;num BB=(n>=0&&n<=1)?FT(n,i.y,h.y,j.y,k.y):i.y;g.sB(AB,BB,true);}g.sB(k.x,k.y,true);g.kC(tS,uS);}}class IN extends BC{num yN,CO,HT;num IT,JT;bool KT;IN(num g,num h,num i,num j,num k,bool l){yN=g.toDouble();CO=h.toDouble();HT=i.toDouble();IT=j.toDouble();JT=k.toDouble();KT=l;}JB(RB.CanvasRenderingContext2D g){g.arc(yN,CO,HT,IT,JT,KT);}jC(XC g){var j=new gB(HT,0);var l=j.rotate(IT);var m=j.rotate(JT);if(g.dE==false){g.kC(yN+l.x,CO+l.y);}var h=IT;var i=JT;if(KT){if(h<i)h=h+2*cB.PI;}else{if(i<h)i=i+2*cB.PI;}var n=i-h;var o=(n*30).abs()~/cB.PI+1;g.sB(g.XD,g.YD);for(var k=0;k<=o;k++ ){var s=j.rotate(h+k*n/o);g.sB(yN+s.x,CO+s.y);}g.kC(yN+m.x,CO+m.y);}}class JN extends BC{num yN,CO;num JO,WO;JN(num g,num h,num i,num j){yN=g.toDouble();CO=h.toDouble();JO=i.toDouble();WO=j.toDouble();}JB(RB.CanvasRenderingContext2D g){g.rect(yN,CO,JO,WO);}jC(XC g){g.kC(yN,CO);g.sB(yN,CO);g.sB(yN+JO,CO);g.sB(yN+JO,CO+WO);g.sB(yN,CO+WO);}}abstract class vK extends BC{num LT;String MT;String NT;vK(num g,String h,String i){LT=g.toDouble();MT=h;NT=i;}bool XB(RB.CanvasRenderingContext2D g,num h,num i){g.lineWidth=LT;g.lineJoin=MT;g.lineCap=NT;try {return g.isPointInStroke(h,i);}catch (j){return false;}}jC(XC g){g.stroke(LT);}}class KN extends vK{String OT;KN(String g,num h,String i,String j):super(h,i,j){OT=g;}JB(RB.CanvasRenderingContext2D g){g.strokeStyle=OT;g.lineWidth=LT;g.lineJoin=MT;g.lineCap=NT;g.stroke();}}abstract class wK extends BC{bool XB(RB.CanvasRenderingContext2D g,num h,num i){return g.isPointInPath(h,i);}jC(XC g){g.fill();}}class LN extends wK{String OT;LN(String g){OT=g;}JB(RB.CanvasRenderingContext2D g){g.fillStyle=OT;g.fill();}}
//# sourceMappingURL=index.dart.map
//@ sourceMappingURL=index.dart.map
