import "dart:async" as bB;import "dart:web_audio" as NG;import "dart:math" as UB;import "dart:json" as XL;import "dart:html" as OB;class YL{static const  ZL="Chrome";static const  aL="Firefox";static const  bL="Internet Explorer";static const  cL="Safari";final  yJ;final  minimumVersion;const YL(this.yJ,[this.minimumVersion]);}class dL{final  name;const dL(this.name);}class xB{var x;var y;xB(this.x,this.y);set length( g){this.normalize();this.aK(g);} get length{return UB.sqrt(x*x+y*y);}normalize(){var g=this.length;if(g==0)throw new UnsupportedError("divided by 0");if(g==1)return;x/= g;y/= g;}scale( g){x*= g;y*= g;} clone(){return new xB(x,y);} add( g){if(g==null)return null;return new xB(x+g.x,y+g.y);} subtract( g){if(g==null)return null;return new xB(x-g.x,y-g.y);}aK( g){x*= g;y*= g;} get kE{var g=UB.PI-UB.atan2(this.x,this.y);if(g<0)g+= 2*UB.PI;return g;}set kE( i){var h=this.length;var g=EB.XJ(h,i-UB.PI/2);this.x=g.x;this.y=g.y;} toString(){return ("V(${x},${y})");}}class gC{var x;var y;var z;gC(this.x,this.y,this.z);reset( h, i, g){x=h;y=i;z=g;} clone(){return new gC(x,y,z);} VH(){return UB.sqrt(x*x+y*y+z*z);}JL( g){this.normalize();this.scale(g);} add( g){return new gC(x+g.x,y+g.y,z+g.z);}scale( g){x*= g;y*= g;z*= g;} normalize(){var g=VH();if(g==0||g==1)return;x/= g;y/= g;z/= g;} toString(){return "V(x: ${x}, y: ${y}, z: ${z})";} nF( g){return (g.x==x&&g.y==y&&g.z==z);}}class XB extends EF implements kC{static var NE=588;static var jD=314;static var JI=10.0;var CD;var uB;var dM;var FG;var NC;XB( g,[ autoStart=true, fontName=XE]):super(g){this.NC=fontName;this.width=XB.NE;this.height=XB.jD;this.CD=new mB(n.MB("items").HB("menu_bg"));this.AB(this.CD);this.uB=new lC();this.uB.KD=0x000000;this.uB.wordWrap=true;this.uB.MC=new QF(fontName,30,0x000000,bold:true,align:qB.dE);this.uB.width=476;this.uB.height=250;this.uB.x=60;this.uB.y=90;this.AB(this.uB);this.u(q.mC,this.onClick);if(autoStart){this.zH=0;this.FG=0;cB.add(this);}else{this.zH=1;}this.alpha=0;} BD( g){this.FG+= g;if(this.FG>JI){BE();mF();return false;}return true;}set text( g){if(g==null)return;var h=new QF(NC,30,0x000000,bold:true,align:qB.dE);if(g.length<=30)h.size=45;else h.size=30;this.uB.MC=h;this.uB.text=g;} onClick( g){BE();mF();} mF(){this.dispatchEvent(new LB(LB.zB,this));}set zH( g){if(g<0)g=1;if(g>1)g=1;dM=g;var h=(255*dM).round().toInt();} BE(){cB.remove(this);}}class CI extends XB{var rB;var qC;var fC;var WC;var HH=40;var IH=30;var NC;CI( g,[ fontName=XE]):super(g,true,fontName){this.NC=fontName;this.YB(q.AD);this.YB(q.mC);this.DD();} DD(){var g=this.v as wB;this.uB.wordWrap=true;this.text=g.jB("GENexitquery");this.rB=new bE(new mB(n.MB("items").HB("but_yes")),new mB(n.MB("items").HB("but_yes2")),new mB(n.MB("items").HB("but_yes2")),new mB(n.MB("items").HB("but_yes2")));this.rB.x=IH;this.rB.y=XB.jD-this.rB.height-HH;this.rB.u(q.AD,this.TL);this.AB(this.rB);this.qC=new bE(new mB(n.MB("items").HB("but_no")),new mB(n.MB("items").HB("but_no2")),new mB(n.MB("items").HB("but_no2")),new mB(n.MB("items").HB("but_no2")));this.qC.x=XB.NE-this.qC.width-IH;this.qC.y=XB.jD-this.rB.height-HH;this.qC.u(q.AD,this.jH);this.AB(this.qC);this.fC=new lC();this.fC.u(q.AD,this.rB.dispatchEvent);this.fC.KD=0x000000;this.fC.MC=new QF(NC,48,0,bold:true,align:qB.pG);this.fC.height=60;this.fC.x=this.rB.x+this.rB.width;this.fC.y=this.rB.y+5;this.AB(this.fC);this.fC.text=g.jB("GENyes");this.WC=new lC();this.WC.u(q.AD,this.qC.dispatchEvent);this.WC.KD=0x000000;this.WC.MC=new QF(NC,48,0,bold:true,align:qB.fE);this.WC.height=60;this.WC.x=this.qC.x-this.WC.width;this.WC.y=this.rB.y+5;this.AB(this.WC);this.WC.text=g.jB("GENno");}mF(){jH(null);} TL( g){BE();this.dispatchEvent(new LB(LB.zB,this));} jH( g){BE();this.dispatchEvent(new LB(LB.OE,this));}}class EF extends iC{var TM;EF( g){this.v=g;}set v( g){if(TM!=null){TM.YB(o.UE);TM.YB(o.VE);TM.YB(o.IF);TM.YB(o.TE);TM.YB(o.RE);TM.YB(o.QE);TM.YB(o.SE);TM.YB(o.iD);TM.YB(o.PE);}TM=g;if(TM!=null){TM.u(o.UE,this.wF);TM.u(o.VE,this.vF);TM.u(o.IF,this.kH);TM.u(o.TE,this.xF);TM.u(o.RE,this.uE);TM.u(o.QE,this.lK);TM.u(o.SE,this.oH);TM.u(o.iD,this.lH);TM.u(o.PE,this.mH);}} get v{return TM;} wF( g){} vF( g){} kH( g){} xF( g){} uE( g){} lK( g){} oH( g){} lH( g){} mH( g){}}class LB extends GB{static const  zB="MenuEvent.TYPE_OK";static const  OE="MenuEvent.TYPE_CANCEL";var rE;LB( h, g,[ bubbles=false]):super(h,bubbles){this.rE=g;}}class BI extends EF{var CD;var eC;var EC;var DC;var TC;var RC;var SC;var font;var JG=30;var yE;BI( h,[ fontName=XE]):super(h){this.font=fontName;this.DD();var g=new StringBuffer();g.write((this.v as wB).jB("GENlevel"));g.write(": 0");DC.text=g.toString();} DD(){this.CD=new mB(n.MB("items").HB("topbar"));this.CD.x=0;this.CD.y=0;this.AB(this.CD);this.eC=new lC();this.eC.MC=new QF(font,24,0,bold:true,align:qB.pG);this.eC.KD=0x000000;this.eC.width=400;this.eC.height=100;this.eC.x=20;this.eC.y=JG;this.AB(eC);this.EC=new lC();this.EC.MC=new QF(font,24,0,bold:true,align:qB.fE);this.EC.KD=0x000000;this.EC.width=200;this.EC.height=100;this.EC.x=(this.v.pE/2)-this.EC.width+60;this.EC.y=JG;this.AB(EC);this.DC=new lC();this.DC.MC=new QF(font,24,0,bold:true,align:qB.fE);this.DC.KD=0x000000;this.DC.width=200;this.DC.height=100;this.DC.x=(this.v.pE)-(this.DC.width)-20;this.DC.y=JG;this.AB(DC);this.TC=new lC();this.TC.MC=new QF(font,24,0,bold:true,align:qB.dE);this.TC.KD=0x000000;this.TC.width=200;this.TC.height=100;this.TC.x=20;this.TC.y=this.v.SH-this.TC.height-20;this.AB(TC);this.TC.visible=false;this.RC=new mB(n.MB("items").HB("progressbar"));this.RC.x=25;this.RC.y=82;this.AB(this.RC);this.SC=new mB(n.MB("items").HB("progressship"));this.SC.x=25;this.SC.y=this.RC.y+(this.RC.height-(this.RC.height-this.SC.height))-(this.SC.height);this.AB(this.SC);this.yE=new List<mB>();for(var h=0;h<3;h++ ){var g=new mB(n.MB("items").HB("spaceship"));g.y=10;g.x=(this.v.pE/2)+70+(h*35);this.AB(g);this.yE.add(g);}} mH( g){this.SC.x=25;this.SC.y=this.RC.y+(this.RC.height-((this.RC.height-this.SC.height)*g.v.JE))-(this.SC.height);} lH( i){var h=i.v as wB;if(h.dD){this.EC.text=h.jB("DISPLAY_TRAINING");}else{this.EC.text=h.jB("DISPLAY_LIVES");}for(var g=0;g<this.yE.length;g++ ){this.yE[g].visible=(!h.dD)&&(g<i.v.aD);}} oH( h){var i=h.v as wB;var g=new StringBuffer();g.write(i.jB("GENscore"));g.write(": ${h.v.IL.toString()}");eC.text=g.toString();} uE( h){var i=h.v as wB;var g=new StringBuffer();g.write(i.jB("GENlevel"));g.write(": ${h.v.level.toString()}");DC.text=g.toString();}}class LD extends EF{static var PG=0.025;static var FF=1.0;static var MD=600;static var GF=800;static var HF=600;static var SG=400;static var TG=300;static var kD=UB.sqrt(GF*GF+HF*HF);static var LI=(kD*2/MD);static var UG=6;var PB;var TB;var PC;var dC;var CG=30.0*UB.PI/180;var BG=1.0*UB.PI/180;var fD=0.05;var zF=-1;var vE=1;var NB;var pC;var fF=["barrier01","barrier02","barrier03","barrier04","barrier05","barrier06","barrier07"];var gF;var hF;var LH;var AK;var yH;var AG=15;var cH;var WD=false;var mE=0;var oF;var jE;var dF=0.90;var tH=0;var fM;var rL;var ZB;var NK=0;var LC;var UD=false;var FE,GE;var WH;var HE;LD( g):super(g){fM=new ZE.JM(80,60,690,524);this.mask=fM;this.gF=n.qF("speedalizer");this.hF=this.gF.play(true);this.ZB=new VG();this.AB(this.ZB);WH=new WI(800,600);AB(WH);FE=GE=0;HC.u(q.YF,this.yF);HC.u(q.mC,this.yF);HC.u(q.tD,this.yF);HE=this.fK.listen(this.gM);} yF( g){FE=g.uH;GE=g.vH;} xK(){var g=this.v.bD;this.v.bD=g+(this.v as wB).sH*(this.v.level*this.v.aD);} kH( g){} uE( g){super.uE(g);this.OL();} OL(){UD=false;HE.pause();this.mE=0;this.v.JE=0;this.WD=false;var h=60;this.dC=new EI(kD,UG*h);for(var g=this.dC.w.length;g>=0;g-- )if(g%h!=0&&g%h!=1)this.dC.qH(g);this.PB=new xB(SG,TG);this.TB=new gC(0,0,0);this.PC=new gC(0,0,FF);this.BG=(1+(0.1*this.v.level))*UB.PI/180;this.fD=0.015+(0.004*this.v.level);this.vE=2+this.v.level;this.zF=-this.vE;this.tH=this.v.level*2;this.AG=15+(this.v.level);this.DD();this.DK();HE.resume();} DD(){if(this.NB!=null)this.tB(this.NB);this.NB=new DI();this.AB(this.NB);if(this.LC!=null)this.tB(this.LC);this.LC=new mB(n.MB("items").HB("crosshair"));this.LC.UC=0.5;this.LC.VC=0.5;this.LC.x=(GF/2)-this.LC.width/2;this.LC.y=(HF/2)-this.LC.height/2;this.AB(this.LC);} pF(){this.UD=false;this.HE.pause();var h=60;this.dC=new EI(kD,UG*h);for(var g=this.dC.w.length;g>=0;g-- )if(g%h!=0&&g%h!=1)this.dC.qH(g);this.PB=new xB(SG,TG);this.TB=new gC(0,0,0);this.PC=new gC(0,0,FF);this.BG=2*UB.PI/180;this.vE=0;this.zF=0;if(this.NB!=null){this.tB(this.NB);this.NB=null;}this.NB=new DI();this.AB(this.NB);if(this.pC!=null){this.tB(this.pC);this.pC=null;}this.NH();this.HE.resume();} NH(){var g=new XC(null);g.bC=-1;g.FC=0;g.position=this.TB.clone();g.position.z=0.5;this.NB.PD(g);} MH(){var g=new XC(new mB(n.MB("items").HB("countdown01")));g.bC=0;g.FC=0;g.position=this.TB.clone();g.position.z=0.5;g.yD=0;g.DE=true;this.NB.PD(g);g=new XC(new mB(n.MB("items").HB("countdown02")));g.bC=0;g.FC=0;g.position=this.TB.clone();g.position.z=0;g.yD=1;g.DE=true;this.NB.PD(g);g=new XC(new mB(n.MB("items").HB("countdown03")));g.bC=0;g.FC=0;g.position=this.TB.clone();g.position.z=-0.5;g.yD=2;g.DE=true;this.NB.PD(g);g=new XC(new mB(n.MB("items").HB("countdown04")));g.bC=0;g.FC=0;g.position=this.TB.clone();g.position.z=-1;g.yD=3;g.DE=true;this.NB.PD(g);} EK(){var h=1+this.v.level;if(h>=this.fF.length)h=this.fF.length-1;var i=hD.QG(0,h);var j=this.fF[i];var g=new XC(new mB(n.HB(j)));g.rC=true;g.GC=hD.QG(0,359)*UB.PI/180;g.FC=hD.KI(this.zF,this.vE)*UB.PI/180;g.position=this.TB.clone();return g;} DK(){this.MH();this.NH();var h=0;for(var i=0;i<AG;i++ ){var g=null;if(i==AG-1){g=new XC(new mB(n.HB("finish")));g.GC=0;g.FC=5*UB.PI/180;g.position=this.TB.clone();g.bC=0;g.rC=true;g.aH=true;this.oF=g;}else{h++ ;if(this.v.level==1&&h<=3){if(h==1){g=new XC(new mB(n.HB("training01")));g.rC=true;g.GC=0;g.FC=0;g.position=this.TB.clone();g.cD=1;}else if(h==2){g=new XC(new mB(n.HB("training02")));g.rC=true;g.GC=135*UB.PI/180;g.FC=0;g.position=this.TB.clone();g.cD=2;}else if(h==3){g=new XC(new mB(n.HB("training02")));g.rC=true;g.GC=315*UB.PI/180;g.FC=0;g.position=this.TB.clone();g.cD=3;}}else{g=this.EK();}}g.IE=-i*1-3;g.position.z=g.IE;g.bC=0;this.NB.PD(g);}} iK(){this.WD=false;var g=v as wB;g.KK();g.OH();} gM( h){if(this.v.paused==false){this.AL();var g=this.v as wB;if(g.dD&&this.UD&&!g.sE)g.oK();}else{EE=-1;}} qE( h){var g=new EB(this.PB.x,this.PB.y);g=this.dH(g);g=h.OC(g);return h.qE(g);} zJ(){this.UD=false;for(var g=0;g<this.NB.QC.length;g++ )this.NB.QC[g].position.z-= (2.5+1-dF)+1;jE.position.z+= (1-dF);this.MH();this.WD=false;this.fD=this.cH;this.pC.visible=false;} eK(){var g=this.v as wB;g.sB.visible=false;this.WD=false;this.UD=false;this.cH=this.fD;this.fD=0;if(this.pC!=null)this.tB(this.pC);this.pC=new mB(n.HB("broken"));this.AB(this.pC);if(this.jE.cD>0&& ++this.NK<=5){cB.nE((){g.BK(this.jE.cD);},2.0);}else{this.v.aD-- ;if(this.v.aD>0)cB.nE(g.FK,2.0);}this.hF.stop();this.hF=this.gF.play(true);this.LH=n.qF("crash");this.AK=this.LH.play();}var EE=-1; AL(){var k=cB.elapsedTime;var h=1.0;if(EE==-1)EE=k;h=UB.min(k-EE,1.0000)*40;EE=k;if(WD){this.mE-= (this.fD*h);var p=this.v.bD;this.v.bD=p+(this.tH*h);}this.NB.ML();this.CG+= (this.BG*h);this.PC.x=-(this.FE-this.PB.x)*3;this.PC.y=-(this.GE-this.PB.y)*3;if(this.PC.VH()>kD*0.7){this.PC.JL(kD*0.7);}this.PC.z=FF;this.TB=this.PC.clone();this.TB.z=PG;this.zK();for(var m=0;m<this.NB.QC.length;m++ ){var g=this.NB.QC[m];g.position.z+= (fD*h);if(g.position.z>=1){if(g.DE&&g.yD==3)UD=true;if(g.wD!=null){this.yH=n.qF("swish");var t=this.yH.play();}if(g.rC)WD=true;if(g.IE!=0)this.mE=g.IE;if(g.rC&&qE(g)){g.position.z=dF;jE=g;this.eK();}else{if(g.cD==3)(this.v as wB).dD=false;if(g.rC)this.xK();if(g.aH){this.iK();}else if(g.bC==0){this.NB.DL(g);}else{g.position.z+= g.bC;}}}var i=this.PC.clone();i.z=g.position.z;if(i.z<0||i.z>1){g.x=100000;}else{var j=this.DF(i);j=j.add(this.PB);var l=(20*(i.z*i.z));if(l>1)l=1;g.alpha=l;g.x=j.x;g.y=j.y;g.GC+= (g.FC*h);g.setScale(gD(g.position.z)*LI);}}if(this.oF!=null)this.v.JE=(this.mE+3)/(this.oF.IE+3);} DF( g){var h=new xB(g.x,g.y);h.x*= gD(g.z);h.y*= gD(g.z);return h;} gD( g){var h=PG;if(g<0)return 0;if(g>1)return 1;return h/(h+(1-g));} zK(){if(ZB==null)return;var l=2;var j=this.PC.clone();j.scale(l);var h=this.dC.transform(gD(j.z)*l,this.CG,this.DF(j));var i=this.dC.transform(gD(this.TB.z),this.CG,this.DF(this.TB));var k=this.DF(this.TB).add(this.PB);ZB.QB.clear();ZB.QB.beginPath();ZB.QB.JH(k.x,k.y,this.dC.wK*gD(this.TB.z));ZB.QB.closePath();ZB.QB.wH(0xffcccccc,1);ZB.QB.beginPath();for(var g=0;g<h.w.length;g+= 2){ZB.QB.moveTo(h.w[g].x+this.PB.x,h.w[g].y+this.PB.y);ZB.QB.lineTo(h.w[g+1].x+this.PB.x,h.w[g+1].y+this.PB.y);ZB.QB.lineTo(i.w[g+1].x+this.PB.x,i.w[g+1].y+this.PB.y);ZB.QB.lineTo(i.w[g].x+this.PB.x,i.w[g].y+this.PB.y);ZB.QB.lineTo(h.w[g].x+this.PB.x,h.w[g].y+this.PB.y);}ZB.QB.closePath();ZB.QB.JK(0xFF000000);}}class o extends GB{static const  iD="GameEvent.TYPE_LIVES_CHANGED";static const  PE="GameEvent.TYPE_PROGRESS_CHANGED";static const  QE="GameEvent.TYPE_PAUSE_CHANGED";static const  RE="GameEvent.TYPE_LEVEL_CHANGED";static const  SE="GameEvent.TYPE_SCORE_CHANGED";static const  TE="GameEvent.TYPE_GAME_START";static const  UE="GameEvent.TYPE_GAME_OVER";static const  VE="GameEvent.TYPE_GAME_ABORT";static const  IF="GameEvent.TYPE_GAME_SIZE_CHANGED";var v;o( h, g,[ bubbles=false]):super(h,bubbles){this.v=g;}}class XC extends iC{var RM;var VM;var XM;var position;var bC=-1;var FC=0;var LL=1;var rC=false;var aH=false;var DE=false;var BM=false;var yD=0;var cD=0;var IE=0;XC( g){XM=new iC();AB(XM);this.wD=g;if(this.wD==null)return;this.x=100000;}set wD( g){if(RM!=null)this.tB(RM);if(VM!=null)this.tB(VM);RM=null;VM=null;if(g!=null){RM=g;RM.sC=LD.MD/2;RM.tC=LD.MD/2;AB(RM);}else{VM=new VG();AB(VM);}AB(XM);} get wD{return RM;} setScale( g){this.LL=g;if(VM!=null){VM.QB.clear();VM.QB.beginPath();VM.QB.JH(0,0,LD.MD/2*g);VM.QB.closePath();VM.QB.wH(0xff999999,1);}if(RM!=null)RM.UC=RM.VC=g;XM.UC=XM.VC=g;} qE( j){if(RM==null)return false;var g=this.dH(j);g=RM.OC(g);var k=this.wD.bitmapData.RK(g.x.toInt(),g.y.toInt());var l=(k>>24)&0xFF;var i=false;if(l>0){i=true;var h=new mB(n.MB("items").HB("blood"));h.sC=50;h.tC=50;h.x=g.x-LD.MD/2;h.y=g.y-LD.MD/2;XM.AB(h);}return i;}}class DI extends iC{var QC;DI(){QC=new List<XC>();} ML(){this.QC.sort(UL);} PD( g){if(this.contains(g))return;this.AB(g);this.QC.add(g);} DL( g){if(this.QC.length>0){var h=this.QC.indexOf(g);if(h>=0)this.QC.removeAt(h);}if(this.contains(g))this.tB(g);} UL( g, h){if(!this.contains(g)){return (this.contains(h)?1:0);}if(!this.contains(h)){return (this.contains(g)?-1:0);}if(g.position.z>h.position.z){if(this.YD(g)<this.YD(h))this.xH(g,h);return 1;}if(g.position.z<h.position.z){if(this.YD(g)>this.YD(h))this.xH(g,h);return -1;}return 0;}}class wB extends yB{static const  RG=1.0;static const  HI=100;static const  II=0xFFFFFF;var NL=RG;var OK=5;var XD;var bH=false;var sH=500;var xJ=0xffffff;var sB;var JB;var ZD;var eM=true;var sE=false;var TH=60.0;var CE;var NC=XE;var sF=false;var tK="Web";wB( h, g):super(h,g){this.u(GB.hG,(i){this.XK();});}set dD( g){eM=g;this.dispatchEvent(new o(o.iD,this));} get dD{return eM;} XK(){if(!bH){this.u(q.tD,(g)=>this.sE=false);this.u(q.mC,(g)=>this.sE=true);this.yK();this.u(o.TE,this.xF);this.u(o.iD,this.jK);this.u(o.PE,this.mK);this.u(o.SE,this.nK);this.u(o.RE,this.onLevelChange);this.u(o.QE,this.kK);this.u(o.UE,this.wF);this.u(o.VE,this.vF);this.DD();this.JE=0;this.bD=0;this.aD=3;this.start();bH=true;}} jB( i,[ params=null]){var h=n.TK(i);if(params!=null)for(int g=0;g<params.length;g++ )h=h.replaceAll("{${g}}",params[g].toString());return h;} yK(){this.NL=RG;this.xJ=II;this.sH=HI;this.OK=5;this.TH=60000;} DD(){this.XD=new LD(this);this.AB(this.XD);var h=n.MB("items").HB("button_exit");var g=n.MB("items").HB("button_exit_2");this.sB=new bE(new mB(h),new mB(g),new mB(h),new mB(g));this.sB.width=75;this.sB.height=66;this.sB.x=707;this.sB.y=525;this.sB.u(q.mC,gK);this.AB(this.sB);this.sB.visible=false;this.ZD=new BI(this,NC);this.ZD.x=0;this.ZD.y=0;this.AB(this.ZD);} FK(){var g=this.VD();g.text=this.jB("MESSAGE_RESTART_LEVEL");g.u(LB.zB,this.nH);} BK( h){var g=this.VD();g.text=this.jB("MESSAGE_FREE_LEVEL_BARRIER_${h}");g.u(LB.zB,this.nH);} nH( g){this.ID(g.rE);this.XD.zJ();} OH(){this.XD.pF();var g=this.VD();if(this.level==0){g.text=this.jB("MESSAGE_FIRST_LEVEL_WEB");}else{g.text=this.jB("MESSAGE_START_LEVEL",[(this.level+1)]);}g.u(LB.zB,this.pK);} pK( g){this.ID(g.rE);this.bK();} CK(){var g=this.VD();g.text=this.jB("MESSAGE_GAME_OVER");g.u(LB.zB,this.hK);} hK( g){this.ID(g.rE);} VD([ menu=null, tweenDuration=1.0, autoStart=true]){if(this.JB!=null)this.ID(this.JB);this.sB.visible=false;this.ZD.visible=true;if(menu==null)this.JB=new XB(this,autoStart,NC);else this.JB=menu;this.JB.width=XB.NE;this.JB.height=XB.jD;this.JB.x=(this.pE/2)-(XB.NE/2)+30;this.JB.y=(this.SH/2)-(XB.jD/2);this.JB.alpha=0;this.AB(this.JB);var g=new iE(this.JB,tweenDuration,aF.bF);g.GH("alpha",1);cB.add(g);return this.JB;} ID( g){this.paused=false;this.ZD.visible=true;this.sB.visible=true;if(g==null)return;g.BE();if(this.contains(g)){this.tB(g);}this.JB=null;} QK(){cB.remove(CE);if(this.sF)this.pH(null);this.sE=true;this.dD=false;} oK(){if(this.JB!=null)return;if(tK.toLowerCase()=="web")return;cB.remove(CE);this.CE=new OF(this.QK,this.TH);cB.add(this.CE);this.sF=true;this.paused=true;var g=this.VD(null,200,false);this.sB.visible=true;g.text=this.jB("MESSAGE_FIRST_LEVEL");g.u(LB.zB,this.pH);} pH( g){cB.remove(this.CE);this.sF=false;this.JB.YB(LB.zB);this.ID(this.JB);} gK( h){if(this.JB is CI)return;var g=new CI(this,NC);this.VD(g);this.paused=true;g.u(LB.zB,this.dK);g.u(LB.OE,this.cK);} dK( g){this.dispatchEvent(new o(o.VE,this));this.JB.YB(LB.zB);this.JB.YB(LB.OE);this.ID(this.JB);this.paused=true;} cK( g){this.JB.YB(LB.zB);this.JB.YB(LB.OE);this.ID(JB);} xF( g){this.XD.pF();cB.nE(this.OH,0.5);} KK(){this.XD.pF();} mK( g){} jK( g){} nK( g){} onLevelChange( g){} kK( g){} wF( g){cB.nE(this.CK,2.0);} vF( g){}}class hD{static var OG=new UB.Random();static  QG( g, h){var i;if(h<g){var j=g;g=h;h=j;}if(g==h){i=g;}else{i=hD.OG.nextInt(h+1)+g;}return i;}static  KI( g, h){var i;if(h<g){var j=g;g=h;h=j;}if(g==h){i=g;}else{i=hD.OG.nextDouble()*(h-g)+g;}return i;}}class EI extends ME{var QM;var UM;EI( h, g):super(){if(g<3)g=3;if(h==0)h=1;this.QM=h;this.UM=g;GK();} get wK{return QM;} GK(){var g=new List<xB>();var h=0.0;var k=2*UB.PI/UM;for(var j=0;j<UM;j++ ){var i=new xB(0,-QM);i.kE=h;g.add(i);h+= k;}this.w=g;}}class ME implements FI,GI{var w;ME([ pointList]){this.w=(pointList!=null)?pointList:new List();}qH( g){if(g<w.length)this.w.removeAt(g);} qE( h){var k=this.w.length;var i=k-1;var j=false;for(var g=0;g<k;g++ ){if(w[g].y<h.y&&w[i].y>=h.y||w[i].y<h.y&&w[g].y>=h.y){if(w[g].x+(h.y-w[g].y)/(w[i].y-w[g].y)*(w[i].x-w[g].x)<h.x){j=!j;}}i=g;}return j;} rotate( k){var j=this.w.length;var i=new List<xB>(j);for(var g=0;g<j;g++ ){var h=this.w[g].clone();h.kE+= k;i[g]=h;}return new ME(i);} scale( h){if(h==0)h=double.MIN_POSITIVE;var j=this.w.length;var i=new List<xB>(j);for(var g=0;g<j;g++ ){var k=this.w[g].clone();k.scale(h);i[g]=k;}return new ME(i);} transform( l, k, m){var j=this.w.length;var i=new List<xB>(j);for(var g=0;g<j;g++ ){var h=this.w[g].clone();h.scale(l);h.kE+= k;i[g]=h.add(m);}return new ME(i);}}abstract class GI{}abstract class FI{}class yB extends iC{var SM=0;var WM=0;var YM=true;var ZM=3;var aM=0.0;var bM;var cM;yB( h, g){KL(h,g);} KL( g, h){bM=g;cM=h;this.dispatchEvent(new o(o.IF,this));} get pE{return bM;} get SH{return cM;} start(){this.paused=false;this.dispatchEvent(new o(o.TE,this));} PK(){this.dispatchEvent(new o(o.UE,this));}set JE( g){if(g<0.0)g=0.0;if(g>1.0)g=1.0;aM=g;this.dispatchEvent(new o(o.PE,this));} get JE{return aM;}set aD( g){if(g<0)g=0;ZM=g;this.dispatchEvent(new o(o.iD,this));if(ZM==0)this.PK();} get aD{return ZM;}set bD( g){if(g<0)g=0;SM=g;this.dispatchEvent(new o(o.SE,this));} get bD{return SM;} get IL{return SM.toDouble().round().toInt();}set level( g){if(g<0)g=0;WM=g;this.dispatchEvent(new o(o.RE,this));} get level{return WM;} bK(){this.level+= 1;return this.level;}set paused( g){YM=g;this.dispatchEvent(new o(o.QE,this));} get paused{return YM;}}var HC;var JF;var n;var cB;var MI;var hC;var WE;var AC;const  XE="Russo One"; main(){HC=new OD("Stage",OB.query('#stage'));JF=new MF();JF.uJ(HC);cB=JF.uF;MI=new UB.Random();var g=nB.FH("images/Loading.png");g.then((h){hC=new mB(h);hC.sC=20;hC.tC=20;hC.x=400;hC.y=270;HC.AB(hC);WE=new iE(hC,100,aF.bF);WE.GH("rotation",100.0*2.0*UB.PI);cB.add(WE);AC=new lC();AC.MC=new QF("Arial",20,0xA0A0A0,bold:true);AC.width=240;AC.height=40;AC.text="... loading ...";AC.x=400-AC.QL/2;AC.y=320;AC.hH=false;HC.AB(AC);NI();});} NI(){n=new aG();n.CC("barrier01","images/barrier01.png");n.CC("barrier02","images/barrier02.png");n.CC("barrier03","images/barrier03.png");n.CC("barrier04","images/barrier04.png");n.CC("barrier05","images/barrier05.png");n.CC("barrier06","images/barrier06.png");n.CC("barrier07","images/barrier07.png");n.CC("training01","images/training01.png");n.CC("training02","images/training02.png");n.CC("finish","images/finish.png");n.CC("broken","images/broken.png");n.vJ("items","images/ItemTextureAtlas.json",NF.gG);n.eF("crash","sounds/crash.mp3");n.eF("swish","sounds/swish.mp3");n.eF("speedalizer","sounds/speedalizer.mp3");n.VB("DISPLAY_LEVEL","Level: {0}");n.VB("DISPLAY_LIVES","Ships:");n.VB("DISPLAY_SCORE","Score: {0}");n.VB("DISPLAY_TRAINING","Training");n.VB("MESSAGE_FIRST_LEVEL","Remain with your finger on the screen in order to fly through the tunnel!");n.VB("MESSAGE_FIRST_LEVEL_WEB","Move the mouse pointer to navigate through the obstacles!");n.VB("MESSAGE_FREE_LEVEL_BARRIER_1","Navigate to the center to fly through the hole!");n.VB("MESSAGE_FREE_LEVEL_BARRIER_2","Navigate to the upper left side to fly through the hole!");n.VB("MESSAGE_FREE_LEVEL_BARRIER_3","Navigate to the bottom right side to fly through the hole!");n.VB("MESSAGE_GAME_OVER","Game\nOver!");n.VB("MESSAGE_RESTART_LEVEL","Ooops!\nGet Ready\nFor Restart!");n.VB("MESSAGE_START_LEVEL","Get Ready\nFor Level {0}!");n.VB("GENscore","Score");n.VB("GENlevel","Level");n.VB("GENexitquery","Do you really want to quit the game?");n.VB("GENyes","Yes");n.VB("GENno","No");n.load().then((j){HC.tB(hC);HC.tB(AC);cB.remove(WE);var h=new wB(800,600);h.wJ(HC);h.start();}).catchError((i){for(var g in n.PH){print("Loading resouce failed: ${g.kind}.${g.name} - ${g.error}");}});}const eL=const fL();class fL{const fL();}final  dG=new VI<List<s>>(()=>new List<s>());class YG extends hB{YG(){}static  FH( g){return new bB.Future<hB>.of(()=>new YG());} get length{return double.NAN;} play([ loop=false, soundTransform]){if(soundTransform==null){soundTransform=new gB();}return new hL(this,loop,soundTransform);}}class aG{var KN;aG(){KN=new Map<String,YE>();} ZO( g){var j=g.kind;var h=g.name;var i="${j}.${h}";if(KN.containsKey(i))throw new StateError("ResourceManager already contains a resource called '${h}'");KN[i]=g;} RP( i, g){var h="${i}.${g}";if(KN.containsKey(h)==false)throw new StateError("ResourceManager does not contains a resource called '${g}'");return KN[h];} CC( i, h){var g=new YE("BitmapData",i,h);g.VP(nB.FH(h));ZO(g);} eF( i, h){var g=new YE("Sound",i,h);g.VP(hB.FH(h));ZO(g);} vJ( j, h, i){var g=new YE("TextureAtlas",j,h);g.VP(jC.FH(h,i));ZO(g);} VB( i, h){var g=new YE("Text",i,"");g.VP(new bB.Future.immediate(h));ZO(g);} load(){var h=this.sK.map((i)=>i.YN);return bB.Future.wait(h).then((j){var g=this.PH;if(g.length>0)throw new StateError("Failed to load ${g.length} resource(s).");return this;});} get sK{return KN.values.where((g)=>g.KE==null).toList();} get PH{return KN.values.where((g)=>g.error!=null).toList();} HB( g){return RP("BitmapData",g).KE;} qF( g){return RP("Sound",g).KE;} MB( g){return RP("TextureAtlas",g).KE;} TK( g){return RP("Text",g).KE;}}class bE extends IB{var upState;var overState;var downState;var hitTestState;var KG=true;var enabled=true;var PO;bE([this.upState,this.overState,this.downState,this.hitTestState]){u(q.tG,oO);u(q.gE,oO);u(q.mC,oO);u(q.tD,oO);PO=this.upState;} eB( g,[ returnRectangle]){if(PO!=null){YP.lF(PO.sP,g);return PO.eB(YP,returnRectangle);}return super.eB(g,returnRectangle);} RB( k, l){if(this.hitTestState!=null){var g=this.hitTestState.sP;var h=k-g.kB;var i=l-g.lB;var m=(g.d*h-g.c*i)/g.cC;var j=(g.a*i-g.b*h)/g.cC;if(this.hitTestState.RB(m,j)!=null)return this;}return null;} CB( g){if(PO!=null)g.rH(PO);} oO( g){if(g.type==q.gE){PO=upState;}else{PO=g.aC?downState:overState;}}}class YE{var qM;var EN;var QN;var YN;var iN;var mN;YE( g, h, i){qM=g;EN=h;QN=i;iN=null;mN=null;} get kind=>qM; get name=>EN; get KE=>mN; get error=>iN;VP( i){YN=i.then((g){mN=g;iN=null;},onError:( h){mN=null;iN=h.error;});}}class jC{final  rM=new OB.ImageElement();final  hN=new List<bG>();static  FH( p, aB){var k=new bB.Completer<jC>();var g=new jC();switch (aB){case NF.bI:case NF.gG:OB.HttpRequest.getString(p).then((WB){var t=XL.parse(WB);var h=t["frames"];var DB=t["meta"];if(h is List){for(var KB in h){var j=KB as Map;var i=j["filename"] as String;var l=EH(i);var m=new bG.MM(g,l,j);g.hN.add(m);}}if(h is Map){for(String i in h.keys){var j=h[i] as Map;var l=EH(i);var m=new bG.MM(g,l,j);g.hN.add(m);}}g.rM..onLoad.listen((fB)=>k.complete(g))..onError.listen((fB)=>k.completeError(new StateError("Failed to load image.")))..src=jJ(p,DB["image"]);}).catchError((vB){k.completeError(new StateError("Failed to load json file."));});break;}return k.future;} get WK=>rM; HB( h){for(int g=0;g<hN.length;g++ )if(hN[g].name==h)return new nB.PM(hN[g]);throw new ArgumentError("TextureAtlasFrame not found: '${h}'");}}class bG{final  vM;final  EN;final  aN;final  kN;final  wN;final  CO;final  KO;final  QO;final  VO;final  XO;final  bO;bG.MM( i, h, g):vM=i,EN=h,aN=YJ(g["rotated"]),kN=oC(g["sourceSize"]["w"]),wN=oC(g["sourceSize"]["h"]),CO=oC(g["spriteSourceSize"]["x"]),KO=oC(g["spriteSourceSize"]["y"]),QO=oC(g["frame"]["x"]),VO=oC(g["frame"]["y"]),XO=oC(g["frame"]["w"]),bO=oC(g["frame"]["h"]); get RL=>vM; get name=>EN; get HL=>aN; get LK=>QO; get MK=>VO; get RH=>XO; get QH=>bO; get offsetX=>CO; get offsetY=>KO; get rK=>kN; get qK=>wN;}class VI<rD>{final  oM=new List<rD>();final  TN;var dN=0;VI( g()):TN=g; uK(){if(dN==0){return TN();}else{dN-- ;return oM[dN];}}vK( g){if(dN==oM.length){oM.add(g);}else{oM[dN]=g;}dN++ ;}reset(){oM.clear();dN=0;}}class PF extends hB{var zM;PF(){if(qD.hE==null)throw new UnsupportedError("This browser does not support Web Audio API.");}static  FH( p){var h=new PF();var k=hB.BH(p);var g=new bB.Completer<hB>();OB.HttpRequest.request(k,responseType:'arraybuffer').then((i){var j=i.response;var m=qD.hE;m.decodeAudioData(j,( l){h.zM=l;g.complete(h);},(t){g.completeError(new StateError("Failed to decode audio."));});}).catchError((t){g.completeError(new StateError("Failed to load audio."));});return g.future;} get length{return zM.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new gB();return new gL(this,loop,soundTransform);}}class qB{static const  dE="center";static const  hI="end";static const  nI="justify";static const  pG="left";static const  fE="right";}class ZG{static const  yG="none";static const  oI="touchPoint";}class NF{static const  bI="json";static const  gG="jsonarray";}class VG extends s{final  AN=new lD(); get QB=>AN; eB( g,[ returnRectangle]){return AN.gO(g);} RB( g, h){return AN.LP(g,h)?this:null;} CB( g){AN.CB(g);}}class gL extends YC{var ON;var SN;var xM;var yN;var HO;gL( j, h, i){ON=j;xM=h;SN=i;var g=qD.hE;yN=g.createGain();yN.connect(g.destination,0,0);yN.gain.value=(SN!=null)?UB.pow(SN.volume,2):1;HO=g.createBufferSource();HO.buffer=ON.zM;HO.loop=h;HO.connect(yN,0,0);HO.start(0);} set zE( g){SN=g;yN.gain.value=(SN!=null)?UB.pow(SN.volume,2):1;} stop(){HO.stop(0);}}class hL extends YC{var xM;var SN;hL( i, h, g){xM=h;SN=g;}set zE( g){SN=g;} stop(){}}class gB{var volume;var pan;var DM=1;var EM=0;var HM=1;var GM=0;gB([this.volume=1,this.pan=0]);}class ND{static const  YI=0;static const  pG=1;static const  fE=2;static const  pI=3;static const  oG=4;}class yC{static var cG=pB.TF;static var fI=false;static var kG=null;static var rI=null;static var uI=null;static var BJ=new bB.StreamController<String>();static var IJ=BJ.stream.asBroadcastStream();static  DH( i){var h=i;var g="auto";if(cG!=pB.TF){h=cG;}switch (h){case pB.TF:g="auto";break;case pB.VF:g="default";break;case pB.WF:g="pointer";break;case pB.sI:g="move";break;case pB.tI:g="text";break;case pB.wI:g="wait";break;}if(fI){g="none";}return g;}}class pB{static const  TF="auto";static const  VF="arrow";static const  WF="button";static const  sI="hand";static const  tI="ibeam";static const  wI="wait";}class QI{static const  aI="dynamic";}class aE extends YC{var RN;var DN;var xM;var SN;aE( g, i, h){RN=g;xM=i;SN=h;DN=g.tO(this);DN.loop=xM;this.zE=h;DN.play();} set zE( g){SN=g;if(DN!=null)DN.volume=(SN!=null)?SN.volume:1;} stop(){if(DN!=null){if(DN.ended==false)DN.pause();RN.AQ(this);DN=null;}}}class SI{static const  gI="pixel";}class qD{static var GJ=ZJ();static var hE=fJ();static var vG=gJ();static  ZJ(){var h=(hE!=null)?"WebAudioApi":"AudioElement";var g=OB.window.navigator.userAgent;if(g.contains("IEMobile"))if(g.contains("9.0")||g.contains("10.0"))h="Mock";if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod"))if(g.contains("OS 3")||g.contains("OS 4")||g.contains("OS 5"))h="Mock";if(vG.length==0)h="Mock";print("StageXL: supported audio engine is: ${h}");return h;}static  fJ(){if(NG.AudioContext.supported)return new NG.AudioContext();return null;}static  gJ(){var g=new List<String>();var h=new OB.AudioElement();var i=["maybe","probably"];if(i.indexOf(h.canPlayType("audio/ogg",""))!=-1)g.add("ogg");if(i.indexOf(h.canPlayType("audio/mpeg",""))!=-1)g.add("mp3");if(i.indexOf(h.canPlayType("audio/wav",""))!=-1)g.add("wav");print("StageXL: supported audio types are: ${g}");return g;}}final  SF=new Map<String,xG>();class lD{static final  PJ=new OB.CanvasElement(width:16,height:16);static final  TJ=PJ.context2d;final  XP=new List<IC>();var aP=new FB.KM();var gP=true;clear(){XP.clear();gP=true;}oP( g){XP.add(g);gP=true;}beginPath()=>oP(new jL());closePath()=>oP(new kL());moveTo( h, g)=>oP(new lL(h,g));lineTo( h, g)=>oP(new mL(h,g));arc( l, g, j, i, h, k)=>oP(new nL(l,g,j,i,h,k));rect( i, g, h, j)=>oP(new oL(i,g,h,j));wH( g,[ width=1, joints=UI.eI, caps=TI.eI])=>oP(new pL(ZF(g),width,joints,caps));JK( g)=>oP(new qL(ZF(g)));JH( i, g, h){oP(new lL(i+h,g));oP(new nL(i,g,h,0,UB.PI*2,false));} gO( i){var h=new nC(i);for(int g=0;g<XP.length;g++ ){XP[g].uC(h);}return h.SK();} LP( h, i){if(gP){gP=false;aP=gO(new BB.NM());}if(aP.contains(h,i)){var j=lD.TJ;j.beginPath();for(int g=0;g<XP.length;g++ ){if(XP[g].RB(j,h,i)){return true;}}}return false;} CB( i){var g=i.context;g.save();g.beginPath();for(int h=0;h<XP.length;h++ ){XP[h].CB(g);}g.restore();}}class WI extends IB{var width;var height;WI(this.width,this.height); eB( g,[ returnRectangle]){return cF(g,width,height,returnRectangle);} RB( g, h){if(g>=0.0&&h>=0.0&&g<width&&h<height)return this;return null;} CB( g){}}class KF extends hB{var DN;var VN;var oN;KF(){oN=new List<aE>();DN=new OB.AudioElement();DN.onEnded.listen(cO);VN=new List<OB.AudioElement>();VN.add(DN);OB.document.body.children.add(DN);}static  FH( t){var k=new KF();var g=k.DN;var i=new bB.Completer<hB>();var h;var j;p(m){h.cancel();j.cancel();i.complete(k);}l(m){h.cancel();j.cancel();i.completeError(new StateError("Failed to load audio."));}h=g.onCanPlayThrough.listen(p);j=g.onError.listen(l);g.src=hB.BH(t);g.load();return i.future;} get length{return DN.duration;} play([ loop=false, soundTransform]){if(soundTransform==null)soundTransform=new gB();return new aE(this,loop,soundTransform);} tO( h){var g;if(VN.length==0){g=DN.clone(true);g.onEnded.listen(cO);}else{g=VN.removeAt(0);}oN.add(h);return g;} AQ( g){var h=g.DN;var i=oN.indexOf(g);oN.removeAt(i);VN.add(h);if(DN.currentTime>0&&DN.ended==false)DN.currentTime=0;} cO( j){var i=j.target;var g=null;for(int h=0;h<oN.length&&g==null;h++ )if(oN[h].DN==i)g=oN[h];if(g!=null)g.stop();}}class mD{static const  ZI="exactFit";static const  iI="noBorder";static const  qI="noScale";static const  qG="showAll";}abstract class IC{CB( g); RB( g, h, i){CB(g);return false;}uC( g){}}abstract class LF{ CB( g);}class mB extends s{var bitmapData;var pixelSnapping;var kF;mB([this.bitmapData=null,this.pixelSnapping="auto"]){kF=null;} eB( h,[ returnRectangle]){var g=(bitmapData!=null)?bitmapData.width:0;var i=(bitmapData!=null)?bitmapData.height:0;return cF(h,g,i,returnRectangle);} RB( g, h){if(bitmapData!=null&&g>=0.0&&h>=0.0&&g<bitmapData.width&&h<bitmapData.height)return this;return null;} CB( g){if(bitmapData==null)return;if(kF==null){bitmapData.CB(g);}else{bitmapData.FL(g,kF);}}}class iC extends xC{var uL=false;var KG=false;var tF=null;var AN=null;var BO=null; get QB{return (AN!=null)?AN:AN=new lD();}xP(){var i=this.tE;var j=this.JD;var m=this.visible;if(i!=null&&this.JD!=null){var h=yC.uI;if(h!=null){var g=sP.LE(i);if(g.x<h.left)g.x=h.left;if(g.x>h.right)g.x=h.right;if(g.y<h.top)g.y=h.top;if(g.y>h.bottom)g.y=h.bottom;i=sP.KH().LE(g);}var l=new EB(nO,rO).add(i).subtract(yC.rI);var k=sP.LE(l);this.visible=false;BO=j.RB(j.FE,j.GE);this.x=k.x;this.y=k.y;this.visible=m;}} eB( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new FB.KM();super.eB(g,returnRectangle);if(AN!=null){returnRectangle=AN.gO(g).union(returnRectangle);}return returnRectangle;} RB( i, j){var h=null;if(this.tF!=null){var g=this.AI(this.tF);if(g!=null){var k=i*g.a+j*g.c+g.kB;var l=i*g.b+j*g.d+g.lB;if(this.tF.RB(k,l)!=null){h=this;}}}else{h=super.RB(i,j);if(h==null&&AN!=null){if(AN.LP(i,j)){h=this;}}}return h;}CB( g){if(AN!=null)AN.CB(g);super.CB(g);}}abstract class hB{static  FH( g){var h=qD.GJ;if(h=="WebAudioApi")return PF.FH(g);if(h=="AudioElement")return KF.FH(g);return YG.FH(g);} get length; play([ loop=false, soundTransform]);static  BH( g){var m=new RegExp(r"\.(ogg|mp3|wav)$",multiLine:false,caseSensitive:false);var i=m.firstMatch(g);var h=qD.vG;if(i==null)throw new ArgumentError("Unsupported file extension.");if(h.length==0)throw new UnsupportedError("This browser supports no known audio codec.");var j=i.group(1).toLowerCase();if(h.indexOf(j)==-1){var l=g.substring(0,g.length-j.length);var k=h[0];g="${l}${k}";}return g;}}abstract class YC extends ZC{ set zE( g); stop();}class OI{static const  yG="none";}class QF{var font;var size;var color;var bold;var italic;var underline;var align;var leftMargin;var rightMargin;var indent;var leading;var letterSpacing=0;var sL=0;var tL=false;var CM=false;QF(this.font,this.size,this.color,{this.bold: false,this.italic: false,this.underline: false,this.align: "left",this.leftMargin: 0,this.rightMargin: 0,this.indent: 0,this.leading: 0});}abstract class xC extends IB{final  ZN=new List<s>();var tN=true;var AO=true; AB( g){if(g.parent==this){var h=ZN.indexOf(g);ZN.removeAt(h);ZN.add(g);}else{tJ(g,ZN.length);}} tJ( g, h){if(h<0||h>ZN.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){ZN.removeAt(ZN.indexOf(g));if(h>ZN.length)h-- ;ZN.insert(h,g);}else{g.CL();g.KQ(this);ZN.insert(h,g);g.dispatchEvent(new GB(GB.dI,true));if(this.JD!=null)RQ(g,new GB(GB.hG));}} tB( h){var g=ZN.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");BL(g);} BL( g){if(g<0||g>=ZN.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=ZN[g];h.dispatchEvent(new GB(GB.vI,true));if(this.JD!=null)RQ(h,new GB(GB.zI));h.KQ(null);ZN.removeAt(g);} UH( g){if(g<0||g>=ZN.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");return ZN[g];} YD( g){return ZN.indexOf(g);} xH( j, i){var h=YD(j);var g=YD(i);if(h==-1||g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");PL(h,g);} PL( h, g){var j=UH(h);var i=UH(g);ZN[h]=i;ZN[g]=j;} contains( g){for(;g!=null;g=g.WP)if(g==this)return true;return false;} eB( p,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new FB.KM();if(ZN.length==0)return super.eB(p,returnRectangle);var h=double.INFINITY;var i=double.INFINITY;var k=double.NEGATIVE_INFINITY;var j=double.NEGATIVE_INFINITY;var t=ZN.length;for(int l=0;l<ZN.length;l++ ){var m=ZN[l];YP.lF(m.sP,p);var g=m.eB(YP,returnRectangle);if(g.left<h)h=g.left;if(g.top<i)i=g.top;if(g.right>k)k=g.right;if(g.bottom>j)j=g.bottom;}returnRectangle.x=h;returnRectangle.y=i;returnRectangle.width=k-h;returnRectangle.height=j-i;return returnRectangle;} RB( t, DB){var l=null;for(int j=ZN.length-1;j>=0;j-- ){var i=ZN[j];if(i.visible){var g=i.sP;var m=t-g.kB;var k=DB-g.lB;var KB=(g.d*m-g.c*k)/g.cC;var p=(g.a*k-g.b*m)/g.cC;var h=i.RB(KB,p);if(h!=null){if(h is IB)if(h.hH)return tN?h:this;l=this;}}}return l;} CB( i){for(int h=0;h<ZN.length;h++ ){var g=ZN[h];if(!g.MP&&g.visible)i.rH(g);}} RQ( g, j){g.dispatchEvent(j);if(g is xC){var i=new List<s>.from(g.ZN,growable:false);for(int h=0;h<i.length;h++ )RQ(i[h],j);}}}class OF implements kC{final  GN;var PN=0.0;var bN=0.0;var lN=1;OF( g, h):GN=g{bN=UB.max(h,0.0001);} BD( h){var g=PN+h;while (g>=bN&&lN>0){PN=bN;lN-- ;GN();g-= bN;}PN=g;return (lN>0);} get currentTime=>PN;}abstract class kC{ BD( g);}class nD implements kC{final  LN=new List<kC>();var fN=0;var qN=0.0; get elapsedTime=>qN; add( g){if(g==null)return;if(this.contains(g))return;if(fN==LN.length){LN.add(g);}else{LN[fN]=g;}fN++ ;} remove( h){if(h==null)return;for(int g=0;g<fN;g++ ){if(identical(LN[g],h)){LN[g]=null;break;}}} contains( h){if(h==null)return false;for(int g=0;g<fN;g++ ){if(identical(LN[g],h)){return true;}}return false;} IG( h, i,[ transitionFunction]){var g=new iE(h,i,transitionFunction);add(g);return g;} nE( h, i){var g=new OF(h,i);add(g);return g;} BD( k){qN+= k;var j=fN;var h=0;for(int g=0;g<j;g++ ){var i=LN[g];if(i==null)continue;if(i.BD(k)==false){LN[g]=null;continue;}if(h!=g){LN[h]=i;LN[g]=null;}h++ ;}if(h!=j){for(int g=j;g<fN;g++ ){LN[h++ ]=LN[g];LN[g]=null;}fN=h;}return true;}}class WG extends GB{static const  jI="textInput";var yM="";WG( g,[ bubbles=false]):super(g,bubbles);}class XG{final  IG;XG(this.IG);call( h, g){vN(h).SL(g);} get x=>vN("x"); get y=>vN("y"); get UC=>vN("scaleX"); get VC=>vN("scaleY"); get skewX=>vN("skewX"); get skewY=>vN("skewY"); get sC=>vN("pivotX"); get tC=>vN("pivotY"); get GC=>vN("rotation"); get alpha=>vN("alpha"); vN( h){var g=new oB(h);this.IG.vN(g);return g;}}class TI{static const  eI="round";}class dB{final  CN;final  WN=new List<BB>(100);final  sN=new List<double>(100);var DO=0;var PN=0.0;var OO=0.0;dB.LM( j,[ matrix]):CN=j{for(int h=0;h<100;h++ ){WN[h]=new BB.NM();sN[h]=1.0;}if(matrix!=null)WN[0].lE(matrix);var g=WN[0];var i=sN[0];CN.setTransform(g.a,g.b,g.c,g.d,g.kB,g.lB);CN.globalAlpha=i;} get context=>CN; get currentTime=>PN; reset([ matrix, currentTime, deltaTime]){if(matrix!=null)WN[0].lE(matrix);DO=0;PN=?currentTime?currentTime:0.0;OO=?deltaTime?deltaTime:0.0;var g=WN[0];var h=sN[0];CN.setTransform(g.a,g.b,g.c,g.d,g.kB,g.lB);CN.globalAlpha=h;CN.clearRect(0,0,CN.canvas.width,CN.canvas.height);} rH( i){var k=DO;var l=DO+1;var m=WN[k];var h=WN[l];var DB=sN[k];var t=sN[l]=i.HP*DB;var g=m;var j=i.QP;var p=i.TP;DO=l;h.lF(i.sP,m);if(j!=null){if(j.BF==null){g=h;}else if(identical(j.BF,i)){g=h;}else if(identical(j.BF,i.parent)){g=m;}else{g=j.BF.AI(i);if(g==null)g=lG;else g.concat(h);}CN.save();CN.setTransform(g.a,g.b,g.c,g.d,g.kB,g.lB);j.CB(this);}CN.setTransform(h.a,h.b,h.c,h.d,h.kB,h.lB);CN.globalAlpha=t;if(p!=null){p.CB(this);}else{i.CB(this);}if(j!=null){CN.restore();}DO=k;}}class EB{var hM;var lM;EB( h, g):hM=h,lM=g;EB.KM():this(0,0); clone()=>new EB(hM,lM); toString()=>"Point [x=${hM}, y=${lM}]";static  XJ( g, h)=>new EB(g*UB.cos(h),-g*UB.sin(h)); get x=>hM; get y=>lM; get length=>UB.sqrt(hM*hM+lM*lM);set x( g){hM=g;}set y( g){lM=g;} add( g){return new EB(hM+g.x,lM+g.y);} subtract( g){return new EB(hM-g.x,lM-g.y);}lE( g){hM=g.x;lM=g.y;} nF( g){return hM==g.x&&lM==g.y;}}class FB{var hM;var lM;var tM;var HN;FB( i, g, h, j):hM=i,lM=g,tM=h,HN=j;FB.KM():this(0,0,0,0); clone()=>new FB(hM,lM,tM,HN); toString()=>"Rectangle [x=${hM}, y=${lM}, width=${tM}, height=${HN}]"; get x=>hM; get y=>lM; get width=>tM; get height=>HN; get left=>hM; get top=>lM; get right=>hM+tM; get bottom=>lM+HN; get PB=>new EB(hM+tM/2,lM+HN/2); get size=>new EB(tM,HN);set x( g){hM=g;}set y( g){lM=g;}set width( g){tM=g;}set height( g){HN=g;} set size( g){tM=g.x;HN=g.y;} contains( g, h){return hM<=g&&lM<=h&&hM+tM>=g&&lM+HN>=h;} nF( g){return hM==g.x&&lM==g.y&&tM==g.width&&HN==g.height;} get isEmpty{return tM==0&&HN==0;}lE( g){hM=g.x;lM=g.y;tM=g.width;HN=g.height;} union( g){var i=UB.min(this.left,g.left);var h=UB.min(this.top,g.top);var j=UB.max(this.right,g.right);var k=UB.max(this.bottom,g.bottom);return new FB(i,h,j-i,k-h);}}class BB{var iM,jM,mM,nM,pM,uM;var IN;BB( h, i, g, j, k, l):iM=h.toDouble(),jM=i.toDouble(),mM=g.toDouble(),nM=j.toDouble(),pM=k.toDouble(),uM=l.toDouble(),IN=(h*j-i*g).toDouble();BB.NM():iM=1.0,jM=0.0,mM=0.0,nM=1.0,pM=0.0,uM=0.0,IN=1.0; clone(){return new BB(iM,jM,mM,nM,pM,uM);} KH(){var h=(nM/IN);var i=-(jM/IN);var g=-(mM/IN);var j=(iM/IN);var k=-(h*pM+g*uM);var l=-(i*pM+j*uM);return new BB(h,i,g,j,k,l);} get a=>iM; get b=>jM; get c=>mM; get d=>nM; get kB=>pM; get lB=>uM; get cC=>IN; LE( h){var i=h.x.toDouble();var g=h.y.toDouble();return new EB(i*iM+g*mM+pM,i*jM+g*nM+uM);} NQ( h){var i=h.x.toDouble();var g=h.y.toDouble();return new EB(i*iM+g*mM+pM,i*jM+g*nM+uM);} concat( g){var m=iM;var DB=jM;var KB=mM;var t=nM;var l=pM;var p=uM;var aB=IN;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var fB=g.kB;var WB=g.lB;var vB=g.cC;iM=(m*j+DB*i).toDouble();jM=(m*k+DB*h).toDouble();mM=(KB*j+t*i).toDouble();nM=(KB*k+t*h).toDouble();pM=(l*j+p*i+fB).toDouble();uM=(l*k+p*h+WB).toDouble();IN=(aB*vB).toDouble();} YH(){iM=1.0;jM=0.0;mM=0.0;nM=1.0;pM=0.0;uM=0.0;IN=1.0;} ZH(){var j=iM;var m=jM;var l=mM;var k=nM;var h=pM;var i=uM;var g=IN;iM=(k/g).toDouble();jM=-(m/g).toDouble();mM=-(l/g).toDouble();nM=(j/g).toDouble();pM=-(iM*h+mM*i).toDouble();uM=-(jM*h+nM*i).toDouble();IN=(1.0/g).toDouble();} rotate( i){var g=UB.cos(i);var h=UB.sin(i);var j=iM;var p=jM;var m=mM;var l=nM;var k=pM;var t=uM;iM=(j*g-p*h).toDouble();jM=(j*h+p*g).toDouble();mM=(m*g-l*h).toDouble();nM=(m*h+l*g).toDouble();pM=(k*g-t*h).toDouble();uM=(k*h+t*g).toDouble();} xE( h, i, g, k, j, l){iM=h.toDouble();jM=i.toDouble();mM=g.toDouble();nM=k.toDouble();pM=j.toDouble();uM=l.toDouble();IN=(iM*nM-jM*mM).toDouble();} lE( g){iM=g.a.toDouble();jM=g.b.toDouble();mM=g.c.toDouble();nM=g.d.toDouble();pM=g.kB.toDouble();uM=g.lB.toDouble();IN=g.cC.toDouble();} lF( h, g){var p=h.a;var KB=h.b;var WB=h.c;var DB=h.d;var m=h.kB;var t=h.lB;var fB=h.cC;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var vB=g.kB;var aB=g.lB;var wC=g.cC;iM=(p*k+KB*j).toDouble();jM=(p*l+KB*i).toDouble();mM=(WB*k+DB*j).toDouble();nM=(WB*l+DB*i).toDouble();pM=(m*k+t*j+vB).toDouble();uM=(m*l+t*i+aB).toDouble();IN=(fB*wC).toDouble();}}class UI{static const  eI="round";}class lC extends IB{var yM="";var NN=0x000000;var eN=null;var uN=OI.yG;var IO=SI.gI;var SO=QI.aI;var YO=false;var dO=false;var hO=0x000000;var lO=false;var pO=0x000000;var vO=0;var yO=0;var BP;var GP;var JP=true;var NP=100;var OP=100;var SP=null;var CN=null;lC([ text, textFormat]){if(text!=null)yM=text;if(textFormat!=null)MC=textFormat;else eN=new QF("Arial",12,0x000000);BP=new List<String>();GP=new List<RI>();} get type=>SO; get width=>NP; get height=>OP; set text( g){yM=g;JP=true;} set KD( g){NN=g;JP=true;} set MC( g){eN=g;NN=eN.color;JP=true;} set wordWrap( g){YO=g;JP=true;} set width( g){NP=g;JP=true;} set height( g){OP=g;JP=true;} get QL{gQ();return vO;} eB( g,[ returnRectangle]){return cF(g,NP,OP,returnRectangle);} RB( g, h){if(g>=0&&h>=0&&g<NP&&h<OP)return this;return null;} CB( g){gQ();g.CN.drawImage(SP,0.0,0.0);} uQ( t){var p=mI(t);BP.clear();GP.clear();if(YO==false){for(String h in yM.replaceAll('\r','').split('\n'))BP.add(h);}else{for(String h in yM.replaceAll('\r','').split('\n')){var g='';for(String j in h.split(' ')){var m=g;g=(g.length==0)?j:g+' '+j;if(CN.measureText(g).width>NP){if(m.length==0){BP.add(g);g='';}else{BP.add(m);g=j;}}}if(g.isEmpty==false){BP.add(g);}}}vO=0;yO=0;for(String g in BP){var k=CN.measureText(g);var l=0;if(eN.align==qB.dE||eN.align==qB.nI)l=(NP-k.width)/2;if(eN.align==qB.fE||eN.align==qB.hI)l=NP-k.width;var i=new RI(l,k.width,eN.size,p.vD,p.oE,0);GP.add(i);vO=UB.max(vO,i.width);yO=yO+i.height;}} gQ(){if(JP){JP=false;var h=NP.ceil().toInt();var i=OP.ceil().toInt();if(SP==null){SP=new OB.CanvasElement(width:h,height:i);CN=SP.context2d;}if(SP.width!=h)SP.width=h;if(SP.height!=i)SP.height=i;var m=new StringBuffer()..write(eN.italic?"italic ":"normal ")..write("normal ")..write(eN.bold?"bold ":"normal ")..write("${eN.size}px ")..write("${eN.font},sans-serif");var j=m.toString();CN.font=j;CN.textAlign="start";CN.textBaseline="alphabetic";CN.fillStyle=sD(NN);uQ(j);if(dO){CN.fillStyle=sD(hO);CN.fillRect(0,0,NP,OP);}else{CN.clearRect(0,0,NP,OP);}var k=eN.size;for(int g=0;g<BP.length;g++ ){var l=GP[g];CN.fillStyle=sD(NN);CN.fillText(BP[g],l.x,k);k+= l.height;}if(lO){CN.strokeStyle=sD(pO);CN.lineWidth=1;CN.strokeRect(0,0,NP,OP);}}}}class ZE{var BF=null;ZE();factory ZE.JM( i, g, h, j){return new iL(i,g,h,j);} CB( g){}}class MF{var kM;var BN;var MN;var cN;var rN;MF(){kM=new nD();BN=new List<OD>();MN=double.NAN;cN=cE.rG;rN=new oD(0);OB.window.requestAnimationFrame(uO);} get uF=>kM; uO( g){OB.window.requestAnimationFrame(uO);if(MN.isNaN)MN=g;if(MN>g)MN=g;var k=g-MN;var h=k/1000.0;var l=g/1000.0;if(k>=1){MN=g;rN.sM=h;cN.iP(rN);kM.BD(h);for(int i=0;i<BN.length;i++ ){var j=BN[i];j.uF.BD(h);j.ZK(l,h);}}} uJ( g){if(g.EG!=null){g.EG.EL(g);}BN.add(g);g.PQ=this;} EL( g){if(g.EG==this){BN.remove(g);g.PQ=null;}}}class GB{static const  dI="added";static const  hG="addedToStage";static const  XF="enterFrame";static const  vI="removed";static const  zI="removedFromStage";static const  FJ="resize";var SO;var tP;var lP;var UN;var wP;var mP;var rP;GB( g,[ bubbles=false]){PP(g,bubbles);} PP( g,[ bubbles=false]){SO=g;tP=bubbles;lP=zC.eE;UN=null;wP=null;mP=false;rP=false;} get AF=>mP; get type=>SO; get bubbles=>tP; get iF=>true; get target=>UN;}class zC{static const  eG=1;static const  eE=2;static const  lI=3;}class ZC{var wM; VK( g){if(wM!=null)return wM.containsKey(g)||wM.containsKey("${g}_CAPTURE");else return false;} u( g, i(event),{ useCapture: false}){var h=MO(g,useCapture);var j=h.listen(i);return j;} YB( g,{ useCapture: false}){var i=useCapture?"${g}_CAPTURE":g;var h=wM[i];if(h!=null)h.vP();} dispatchEvent( g){yP(g,this,this,zC.eE);} yP( g, k, l, i){if(wM!=null){var j=(i==zC.eG)?"${g.type}_CAPTURE":g.type;var h=wM[j];if(h!=null){g.UN=k;g.wP=l;g.lP=i;g.mP=false;g.rP=false;h.iP(g);}}} MO( g, j){if(wM==null){wM=new Map<String,pD>();}var i=j?"${g}_CAPTURE":g;var h=wM[i];if(h==null)h=wM[i]=new pD(this,g,j);return h;}}class cE<rD extends GB>{final  wM=new List<pD>();var jN=0;static var rG=new cE<oD>(); kO( g){for(int h=0;h<jN;h++ ){if(wM[h]==g)return;}if(jN==wM.length){wM.add(g);}else{wM[jN]=g;}jN++ ;} iP( j){j.lP=zC.eE;j.mP=false;j.rP=false;var k=jN;var i=0;for(int g=0;g<k;g++ ){var h=wM[g];if(h==null)continue;if(h.UO==0){wM[g]=null;continue;}j.UN=h.UN;j.wP=h.UN;h.iP(j);if(i!=g){wM[i]=h;wM[g]=null;}i++ ;}if(i!=k){for(int g=k;g<jN;g++ ){wM[i++ ]=wM[g];wM[g]=null;}jN=i;}}}class pD<rD extends GB> extends bB.Stream<rD>{final  UN;final  JN;final  nN;final  EO=new List<cI>();var UO=0;pD(this.UN,this.JN,this.nN); get isBroadcast=>true; asBroadcastStream()=>this; listen( h( event),{ onError( error), onDone(), unsubscribeOnError}){var g=new cI<rD>(this,h);if(UO==EO.length)EO.add(g);else EO[UO]=g;UO++ ;if(JN==GB.XF&&nN==false)cE.rG.kO(this);return g;} IP( h){for(int g=0;g<UO;g++ ){if(EO[g]==h){EO[g]=null;break;}}} vP(){for(int g=0;g<UO;g++ )if(EO[g]!=null)EO[g].cancel();} iP( k){var j=UO;var h=0;for(int g=0;g<j;g++ ){var i=EO[g];if(i==null)continue;i.GO(k);if(h!=g){EO[h]=i;EO[g]=null;}h++ ;}if(h!=j){for(int g=j;g<UO;g++ ){EO[h++ ]=EO[g];EO[g]=null;}UO=h;}}}class RI{var vD;var oE;var height;var leading;var width;var x;RI(this.x,this.width,this.height,this.vD,this.oE,this.leading);}class SB extends GB{static const  fG="touchBegin";static const  jG="touchEnd";static const  mG="touchCancel";static const  sG="touchMove";static const  AJ="touchOver";static const  EJ="touchOut";var ZP;var cP;var eP,fP;var hP,jP;var iO;var wO;var jO;var mO;var nP;var pP;var qP;SB( g,[ bubbles=false]):super(g,bubbles){PP(g,bubbles);} PP( g,[ bubbles=false]){super.PP(g,bubbles);ZP=0;cP=false;eP=fP=0;hP=jP=0;iO=false;wO=false;jO=false;mO=false;nP=1.00;pP=0;qP=0;}set FQ( g){eP=g.x;fP=g.y;}set IQ( g){hP=g.x;jP=g.y;} get CF=>ZP; get uH=>hP; get vH=>jP; get altKey=>iO; get ctrlKey=>jO; get shiftKey=>mO;}class oD extends GB{var sM;oD( g):super(GB.XF,false){sM=g;} get iF=>false;}class q extends GB{static const  AD="click";static const  kI="doubleClick";static const  mC="mouseDown";static const  tD="mouseUp";static const  YF="mouseMove";static const  gE="mouseOut";static const  tG="mouseOver";static const  uG="mouseWheel";static const  wG="middleClick";static const  MJ="middleMouseDown";static const  RJ="middleMouseUp";static const  zG="rightClick";static const  WJ="rightMouseDown";static const  aJ="rightMouseUp";var eP,fP;var hP,jP;var zP;var iO;var wO;var jO;var mO;var CQ;var DQ;var EQ;q( g,[ bubbles=false]):super(g,bubbles){PP(g,bubbles);} PP( g,[ bubbles=false]){super.PP(g,bubbles);eP=fP=0;hP=jP=0;zP=false;iO=false;wO=false;jO=false;mO=false;CQ=0;DQ=0;EQ=0;}set FQ( g){eP=g.x;fP=g.y;}set IQ( g){hP=g.x;jP=g.y;} get uH=>hP; get vH=>jP; get aC=>zP; get altKey=>iO; get ctrlKey=>jO; get shiftKey=>mO; get xD=>CQ; get deltaX=>DQ; get deltaY=>EQ;}class JC extends GB{static const  UF="keyDown";static const  iG="keyUp";var iO;var jO;var mO;var qO;var wO;var AP;var DP;var FP;JC( g,[ bubbles=false]):super(g,bubbles){PP(g,bubbles);} PP( g,[ bubbles=false]){super.PP(g,bubbles);iO=false;jO=false;mO=false;qO=false;wO=false;AP=0;DP=0;FP=0;} get altKey=>iO; get ctrlKey=>jO; get shiftKey=>mO; get charCode=>AP; get keyCode=>DP; get keyLocation=>FP;}abstract class IB extends s{var HK=false;var hH=true;var IM=true;var tabIndex=0;static const  xI=const BC<q>(q.gE);static const  NJ=const BC<q>(q.YF);static const  SJ=const BC<q>(q.mC);static const  bJ=const BC<q>(q.tD);static const  iJ=const BC<q>(q.uG); get onMouseOut=>IB.xI.forTarget(this); get onMouseMove=>IB.NJ.forTarget(this); get onMouseDown=>IB.SJ.forTarget(this); get onMouseUp=>IB.bJ.forTarget(this); get onMouseWheel=>IB.iJ.forTarget(this);static const  lJ=const BC<SB>(SB.sG);static const  mJ=const BC<SB>(SB.jG);static const  oJ=const BC<SB>(SB.mG); get onTouchMove=>IB.lJ.forTarget(this); get onTouchEnd=>IB.mJ.forTarget(this); get onTouchCancel=>IB.oJ.forTarget(this);static const  pJ=const BC<JC>(JC.iG);static const  qJ=const BC<JC>(JC.UF); get onKeyUp=>IB.pJ.forTarget(this); get onKeyDown=>IB.qJ.forTarget(this);}class BC<rD extends GB>{final  JN;const BC(this.JN); forTarget( g,{ useCapture: false}){return g.MO(JN,useCapture);}}class iB{final  hM;final  lM;iB( h, g):hM=h.toDouble(),lM=g.toDouble(); clone()=>new iB(hM,lM); get x=>hM; get y=>lM; toString()=>"Vector [x=${hM}, y=${lM}]"; operator+( g)=>new iB(hM+g.hM,lM+g.lM); operator-( g)=>new iB(hM-g.hM,lM-g.lM); operator*( g)=>new iB(hM*g.hM,lM*g.lM); operator/( g)=>new iB(hM/g.hM,lM/g.lM); operator-()=>new iB(-hM,-lM); operator==( g)=>hM==g.hM&&lM==g.lM; scale( g){return new iB(hM*g,lM*g);} normalize(){var g=1/length;return new iB(hM*g,lM*g);} get length=>UB.sqrt(hM*hM+lM*lM); rotate( g){var i=UB.sin(g);var h=UB.cos(g);return new iB(hM*h-lM*i,hM*i+lM*h);}}class nB implements LF{var tM;var HN;var XN;var gN;var pN;var zN;var FO;var LO;var RO;var TO;var WO;var aO;var fO;var CN;nB( h, i,[ transparent=true, fillColor=0xFFFFFFFF]){tM=h.toInt();HN=i.toInt();XN=transparent;gN=0;FO=RO=0;LO=TO=0;pN=WO=tM;zN=aO=HN;var g=new OB.CanvasElement(width:tM,height:HN);CN=g.context2d;CN.fillStyle=XN?ZF(fillColor):sD(fillColor);CN.fillRect(0,0,tM,HN);fO=g;}nB.OM( g){if(g==null)throw new ArgumentError();tM=g.naturalWidth.toInt();HN=g.naturalHeight.toInt();XN=true;gN=0;FO=RO=0;LO=TO=0;pN=WO=tM;zN=aO=HN;fO=g;}nB.PM( g){tM=g.rK.toInt();HN=g.qK.toInt();XN=true;gN=g.HL?2:1;FO=g.offsetX;LO=g.offsetY;pN=g.RH;zN=g.QH;RO=g.LK;TO=g.MK;WO=g.RH;aO=g.QH;fO=g.RL.WK;}static  FH( i){var h=new bB.Completer<nB>();var g=new OB.ImageElement();g.onLoad.listen((j)=>h.complete(new nB.OM(g)));g.onError.listen((j)=>h.completeError(new StateError("Error loading image.")));g.src=i;return h.future;} get width=>tM; get height=>HN; clone(){var g=new nB(tM,HN,true,0);g.IK(this);return g;} IK( h,[ matrix=null]){var g=wQ();var i=new dB.LM(g,matrix);h.CB(i);g.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);} clear(){var g=wQ();g.clearRect(0,0,tM,HN);} RK( j, h){var i=wQ();var k=i.getImageData(j,h,1,1);var g=k.data;if(nJ){return (g[0]<<16)+(g[1]<<8)+(g[2]<<0)+(g[3]<<24);}else{return (g[3]<<16)+(g[2]<<8)+(g[1]<<0)+(g[0]<<24);}} CB( h){var g=h.context;switch (gN){case 0:g.drawImage(fO,FO,LO);break;case 1:g.drawImageScaledFromSource(fO,RO,TO,WO,aO,FO,LO,pN,zN);break;case 2:g.transform(0.0,-1.0,1.0,0.0,FO,LO+zN);g.drawImageScaledFromSource(fO,RO,TO,aO,WO,0.0,0.0,zN,pN);break;}} FL( WL, g){var fB=WL.context;if(g.width<=0.0||g.height<=0.0)return;switch (gN){case 0:fB.drawImageScaledFromSource(fO,g.x-FO,g.y-LO,g.width,g.height,g.x+FO,g.y+LO,g.width,g.height);break;case 1:var j=RO;var h=TO;var DB=j+WO;var KB=h+aO;var l=RO-FO+g.x;var m=TO-LO+g.y;var aB=l+g.width;var WB=m+g.height;var t=(j>l)?j:l;var p=(h>m)?h:m;var vB=(DB<aB)?DB:aB;var LG=(KB<WB)?KB:WB;var k=vB-t;var i=LG-p;var MG=FO-j+t;var wC=LO-h+p;if(k>0.0&&i>0.0){fB.drawImageScaledFromSource(fO,t,p,k,i,MG,wC,k,i);}break;case 2:var j=RO;var h=TO;var DB=j+aO;var KB=h+WO;var l=RO+LO-g.y+zN-g.height;var m=TO-FO+g.x;var aB=l+g.height;var WB=m+g.width;var t=(j>l)?j:l;var p=(h>m)?h:m;var vB=(DB<aB)?DB:aB;var LG=(KB<WB)?KB:WB;var k=LG-p;var i=vB-t;var MG=FO-h+p;var wC=LO+DB-vB;if(k>0.0&&i>0.0){fB.transform(0.0,-1.0,1.0,0.0,MG,wC+i);fB.drawImageScaledFromSource(fO,t,p,i,k,0,0,i,k);}break;}} wQ(){if(CN==null){var g=new OB.CanvasElement(width:tM,height:HN);CN=g.context2d;switch (gN){case 0:CN.drawImage(fO,FO,LO);break;case 1:CN.drawImageScaledFromSource(fO,RO,TO,WO,aO,FO,LO,pN,zN);break;case 2:CN.transform(0.0,-1.0,1.0,0.0,FO,LO+zN);CN.drawImageScaledFromSource(fO,RO,TO,aO,WO,0.0,0.0,zN,pN);CN.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);break;}gN=0;FO=RO=0;LO=TO=0;pN=WO=tM;zN=aO=HN;fO=g;}return CN;}}typedef  RF( ratio);typedef  XI<rD extends GB>( event);class cI<rD extends GB> extends bB.StreamSubscription<rD>{var xN;var GO;var JO;var NO;cI(this.xN,this.GO){JO=0;NO=false;} cancel(){if(NO==false){xN.IP(this);NO=true;GO=null;}} onError( g( error)){} get uP=>JO>0; pause([ resumeSignal]){JO++ ;if(resumeSignal!=null){resumeSignal.whenComplete(resume);}} resume(){if(uP==false){throw new StateError("Subscription is not paused.");}JO-- ;}} sD( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";} mI( g){if(SF.containsKey(g)==false){SF[g]=new xG(g);}return SF[g];}final  lG=new BB.NM();class nG{static var KJ=ZG.yG;static var QJ=new bB.StreamController<String>();static var UJ=QJ.stream.asBroadcastStream();static  get cJ=>KJ;}abstract class s extends ZC implements LF{static var DJ=0;var eO=DJ++ ;var hM=0.0;var lM=0.0;var nO=0.0;var rO=0.0;var sO=1.0;var xO=1.0;var zO=0.0;var CP=0.0;var EP=0.0;var HP=1.0;var KP=true;var MP=false;var QP=null;var TP=null;var EN="";var WP=null;final  YP=new BB.NM();final  dP=new BB.NM();var kP=true;static const  hJ=const BC<oD>(GB.XF); get fK=>s.hJ.forTarget(this); get x=>hM; get y=>lM; get sC=>nO; get tC=>rO; get UC=>sO; get VC=>xO; get skewX=>zO; get skewY=>CP; get GC=>EP; get alpha=>HP; get visible=>KP; get name=>EN; get parent=>WP; get tE{var g=this.JD;return (g!=null)?this.OC(g.YQ):null;} get FE{var g=this.tE;return (g!=null)?g.x:0.0;} get GE{var g=this.tE;return (g!=null)?g.y:0.0;} get root{var g=this;while (g.WP!=null)g=g.WP;return g;} get JD{var g=this.root;if(g is OD)return g;return null;}set x( g){hM=g.toDouble();kP=true;}set y( g){lM=g.toDouble();kP=true;}set sC( g){nO=g.toDouble();kP=true;}set tC( g){rO=g.toDouble();kP=true;}set UC( g){sO=g.toDouble();kP=true;}set VC( g){xO=g.toDouble();kP=true;}set skewX( g){zO=g.toDouble();kP=true;}set skewY( g){CP=g.toDouble();kP=true;}set GC( g){EP=g.toDouble();kP=true;}set alpha( g){HP=g.toDouble();kP=true;}set visible( g){KP=g;kP=true;}set mask( g){QP=g;} setTransform( h, g,[ scaleX, scaleY, rotation, skewX, skewY, pivotX, pivotY]){kP=true;hM=h.toDouble();lM=g.toDouble();if(scaleX!=null){sO=scaleX.toDouble();if(scaleY!=null){xO=scaleY.toDouble();if(rotation!=null){EP=rotation.toDouble();if(skewX!=null){zO=skewX.toDouble();if(skewY!=null){CP=skewY.toDouble();if(pivotX!=null){nO=pivotX.toDouble();if(pivotY!=null)rO=pivotY.toDouble();}}}}}}} get width=>eB(sP).width; get height=>eB(sP).height; set width( h){this.UC=1;var g=this.width;this.UC=(g!=0.0)?h/g:1.0;} set height( h){this.VC=1;var g=this.height;this.VC=(g!=0.0)?h/g:1.0;} wJ( g){g.AB(this);} CL(){if(WP!=null)WP.tB(this);} get sP{if(kP){kP=false;var j=zO+EP;var i=CP+EP;if(j==0.0&&i==0.0){dP.xE(sO,0.0,0.0,xO,hM-nO*sO,lM-rO*xO);}else{var g,l,k,h;var m=UB.cos(j);var p=UB.sin(j);if(j==i){g=sO*m;l=sO*p;k=-xO*p;h=xO*m;}else{g=sO*UB.cos(i);l=sO*UB.sin(i);k=-xO*p;h=xO*m;}var DB=hM-(nO*g+rO*k);var t=lM-(nO*l+rO*h);dP.xE(g,l,k,h,DB,t);}}return dP;} AI( h){if(h==WP)return sP.clone();if(h.WP==this)return h.sP.KH();var j=new BB.NM();var g=this;while (g!=h&&g.WP!=null){j.concat(g.sP);g=g.WP;}if(h==null&&g!=null){j.concat(g.sP);g=null;}if(g==h)return j;var k=new BB.NM();var i=h;while (i!=this&&i.WP!=null){k.concat(i.sP);i=i.WP;}k.ZH();if(i==this)return k;if(i!=g)return null;j.concat(k);return j;} eB( g,[ returnRectangle]){if(returnRectangle==null)returnRectangle=new FB.KM();returnRectangle.x=g.kB;returnRectangle.y=g.lB;returnRectangle.width=0;returnRectangle.height=0;return returnRectangle;} RB( g, h){if(eB(lG).contains(g,h))return this;return null;} dH( h){YP.YH();for(s g=this;g!=null;g=g.WP)YP.concat(g.sP);return YP.LE(h);} OC( h){YP.YH();for(s g=this;g!=null;g=g.WP)YP.concat(g.sP);YP.ZH();return YP.LE(h);} dispatchEvent( h){var g=null;if(h.iF||h.bubbles)for(s j=WP;j!=null;j=j.WP)if(j.VK(h.type)){if(g==null)g=dG.uK() as List<s>;g.add(j);}if(h.iF&&g!=null)for(int i=g.length-1;i>=0;i-- )if(h.AF==false)g[i].yP(h,this,g[i],zC.eG);if(h.AF==false)yP(h,this,this,zC.eE);if(h.bubbles&&g!=null)for(int i=0;i<g.length;i++ )if(h.AF==false)g[i].yP(h,this,g[i],zC.lI);if(g!=null){g.clear();dG.vK(g);}} KQ( h){for(var g=h;g!=null;g=g.WP)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");WP=h;} CB( g);}class KC{static const  yI="B";static const  CJ="BL";static const  HJ="BR";static const  pG="L";static const  fE="R";static const  JJ="T";static const  LJ="TL";static const  OJ="TR";static const  yG="";} ZF( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class xG{var fontStyle;var vD=0;var oE=0;var height=0;xG( j){this.fontStyle=j;var h=new OB.Element.tag("span");h.style.font=this.fontStyle;h.text="Hg";var g=new OB.Element.tag("div");g.style.display="inline-block";g.style.width="1px";g.style.height="0px";var i=new OB.Element.tag("div");i.append(g);i.append(h);OB.document.body.append(i);try {g.style.verticalAlign="baseline";this.vD=g.offsetTop-h.offsetTop;g.style.verticalAlign="bottom";this.height=g.offsetTop-h.offsetTop;this.oE=height-vD;}catch (k){}finally {i.remove();}}}class nC{var matrix;var FD=double.INFINITY;var GD=double.NEGATIVE_INFINITY;var HD=double.INFINITY;var ED=double.NEGATIVE_INFINITY;var RD=double.INFINITY;var SD=double.NEGATIVE_INFINITY;var TD=double.INFINITY;var QD=double.NEGATIVE_INFINITY;var zD=double.NAN;var AE=double.NAN;nC(this.matrix); get rF=>!zD.isNaN&&!AE.isNaN; get XH=>!FD.isInfinite&&!GD.isInfinite&&!HD.isInfinite&&!ED.isInfinite; get UK=>!RD.isInfinite&&!SD.isInfinite&&!TD.isInfinite&&!QD.isInfinite;GL(){zD=AE=double.NAN;FD=HD=double.INFINITY;GD=ED=double.NEGATIVE_INFINITY;}eD( h, g){zD=h;AE=g;}vC( h, g,[ transformed=false]){if(rF){h=h.toDouble();g=g.toDouble();var i=transformed?h:h*matrix.a+g*matrix.c+matrix.kB;var j=transformed?g:h*matrix.b+g*matrix.d+matrix.lB;if(FD>i)FD=i;if(GD<i)GD=i;if(HD>j)HD=j;if(ED<j)ED=j;}}stroke( l){if(XH){var g=UB.sqrt(matrix.cC)*l/2;var h=FD-g;var i=GD+g;var j=HD-g;var k=ED+g;if(RD>h)RD=h;if(SD<i)SD=i;if(TD>j)TD=j;if(QD<k)QD=k;}}fill(){if(XH){if(RD>FD)RD=FD;if(SD<GD)SD=GD;if(TD>HD)TD=HD;if(QD<ED)QD=ED;}} SK(){if(UK){var g=RD.floor();var i=SD.ceil();var h=TD.floor();var j=QD.ceil();return new FB(g,h,i-g,j-h);}else{return new FB.KM();}}}class aF{static  bF( g){return g;}}class uD{static const  TF="auto";static const  VJ="stop";static const  AH="once";} YJ( g){if(g is bool){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a bool.");}}class iL extends ZE{final  bP;iL( i, g, h, j):bP=new FB(i,g,h,j); CB( h){var g=h.context;g.beginPath();g.rect(bP.x,bP.y,bP.width,bP.height);g.clip();}}class CH{var target=null;var aC=false;var jF=0;var xD=0;var gH,iH;var eH,fH;CH(this.gH,this.iH,this.eH,this.fH);} oC( g){if(g is int){return g;}else{throw new ArgumentError("The supplied value (${g}) is not an int.");}}class oB{final  DG;var GG=double.NAN;var HG=double.NAN;oB(this.DG); SL( g){this.HG=g.toDouble();} get YK=>!GG.isNaN&&!HG.isNaN; BQ( g){switch (DG){case 'x':return g.x;case 'y':return g.y;case 'pivotX':return g.sC;case 'pivotY':return g.tC;case 'scaleX':return g.UC;case 'scaleY':return g.VC;case 'skewX':return g.skewX;case 'skewY':return g.skewY;case 'rotation':return g.GC;case 'alpha':return g.alpha;default:return 0.0;}} QQ( g, h){switch (DG){case 'x':g.x=h;break;case 'y':g.y=h;break;case 'pivotX':g.sC=h;break;case 'pivotY':g.tC=h;break;case 'scaleX':g.UC=h;break;case 'scaleY':g.VC=h;break;case 'skewX':g.skewX=h;break;case 'skewY':g.skewY=h;break;case 'rotation':g.GC=h;break;case 'alpha':g.alpha=h;break;}}}class dJ{static var eJ=0;var CF=eJ++ ;var target=null;var wE=false;dJ(this.target,this.wE);}class OD extends xC{var SP;var CN;var GQ,HQ;var NP,OP;var JQ,LQ;var MQ;var OQ;var PQ;var kM;var vL=30;var SQ;var TQ;var UQ;var VQ;var WQ;var XQ;var YQ;var ZQ;var aQ;var bQ;var cQ;var dQ;var eQ;OD( h, g){EN=h;SP=g;SP.focus();CN=g.context2d;NP=GQ=g.width;OP=HQ=g.height;JQ=g.clientWidth;LQ=g.clientHeight;MQ=new BB.NM();OQ=new BB.NM();PQ=null;kM=new nD();TQ=new dB.LM(CN);UQ=uD.TF;VQ=mD.qG;WQ=KC.yG;aQ=[new CH(q.mC,q.tD,q.AD,q.kI),new CH(q.MJ,q.RJ,q.wG,q.wG),new CH(q.WJ,q.aJ,q.zG,q.zG)];XQ=pB.VF;ZQ=null;YQ=new EB(0,0);cQ=new q(q.AD,true);yC.IJ.listen(IJ);SP.onMouseDown.listen(oO);SP.onMouseUp.listen(oO);SP.onMouseMove.listen(oO);SP.onMouseOut.listen(oO);SP.onMouseWheel.listen(qQ);bQ=new Map<int,dJ>();eQ=new SB(SB.fG,true);nG.UJ.listen(rQ);rQ(null);dQ=new JC(JC.UF,true);SP.onKeyDown.listen(sQ);SP.onKeyUp.listen(sQ);SP.onKeyPress.listen(tQ);} get EG=>PQ; get uF=>kM; get tE=>YQ; get focus=>SQ; get align=>WQ;vQ(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){vQ();}set y( g){vQ();}set sC( g){vQ();}set tC( g){vQ();}set UC( g){vQ();}set VC( g){vQ();}set skewX( g){vQ();}set skewY( g){vQ();}set GC( g){vQ();}set alpha( g){vQ();}set width( g){vQ();}set height( g){vQ();}ZK( g, h){if(UQ==uD.TF||UQ==uD.AH){xQ();TQ.reset(OQ,g,h);CB(TQ);if(UQ==uD.AH)UQ=uD.VJ;}}xQ(){var m=SP.getBoundingClientRect();var p=SP.clientLeft+m.left;var t=SP.clientTop+m.top;var k=SP.clientWidth;var l=SP.clientHeight;if(k==0||l==0)return;var g=GQ;var h=HQ;var i=0;var j=0;switch (VQ){case mD.ZI:g=GQ;h=HQ;break;case mD.iI:if(k*HQ>l*GQ){h=(GQ*l)~/k;}else{g=(HQ*k)~/l;}break;case mD.qI:g=k;h=l;break;case mD.qG:if(k*HQ>l*GQ){g=(HQ*k)~/l;}else{h=(GQ*l)~/k;}break;}switch (WQ){case KC.yI:i=(GQ-g+1)~/2;j=(HQ-h);break;case KC.CJ:i=0;j=(HQ-h);break;case KC.HJ:i=(GQ-g);j=(HQ-h);break;case KC.pG:i=0;j=(HQ-h+1)~/2;break;case KC.fE:i=(GQ-g);j=(HQ-h+1)~/2;break;case KC.JJ:i=(GQ-g+1)~/2;j=0;break;case KC.LJ:i=0;j=0;break;case KC.OJ:i=(GQ-g+1);j=0;break;case KC.yG:i=(GQ-g+1)~/2;j=(HQ-h+1)~/2;break;}OQ.xE(1.0,0.0,0.0,1.0,0-i,0-j);MQ.xE(g/k,0.0,0.0,h/l,i-p,j-t);if(NP!=g||OP!=h){SP.width=NP=g;SP.height=OP=h;}if(JQ!=k||LQ!=l){JQ=k;LQ=l;dispatchEvent(new GB(GB.FJ));}}IJ( g){SP.style.cursor=yC.DH(XQ);}oO( j){j.preventDefault();var p=new DateTime.now().millisecondsSinceEpoch;var DB=j.button;var h=null;var i=MQ.NQ(j.client);var m=null;if(DB<0||DB>2)return;if(j.type=="mousemove"&&YQ.nF(i))return;var g=aQ[DB];YQ=i;if(yC.kG!=null)yC.kG.xP();if(j.type!="mouseout")h=RB(i.x,i.y) as IB;var l=pB.VF;if(h is iC)if(h.KG)l=pB.WF;if(h is bE)if(h.KG)l=pB.WF;if(XQ!=l){XQ=l;SP.style.cursor=yC.DH(l);}if(ZQ!=null&&ZQ!=h){ZQ.dispatchEvent(cQ..PP(q.gE,true)..FQ=(ZQ.JD!=null)?ZQ.OC(i):new EB.KM()..IQ=i..zP=g.aC);ZQ=null;}if(h!=null&&h!=ZQ){h.dispatchEvent(cQ..PP(q.tG,true)..FQ=h.OC(i)..IQ=i..zP=g.aC);ZQ=h;}var k=null;var t=false;var KB=false;if(j.type=="mousedown"){k=g.gH;if(h!=g.target||p>g.jF+500)g.xD=0;g.aC=true;g.target=h;g.jF=p;g.xD++ ;}if(j.type=="mouseup"){k=g.iH;g.aC=false;t=(g.target==h);KB=t&&g.xD.isEven&&(p<g.jF+500);}if(j.type=="mousemove"){k=q.YF;}if(k!=null&&h!=null){m=h.OC(i);h.dispatchEvent(cQ..PP(k,true)..FQ=m..IQ=i..zP=g.aC..CQ=g.xD);if(t){if(KB&&h.HK){h.dispatchEvent(cQ..PP(g.fH,true)..FQ=m..IQ=i..zP=g.aC);}else{h.dispatchEvent(cQ..PP(g.eH,true)..FQ=m..IQ=i..zP=g.aC);}}}}qQ( h){var g=MQ.NQ(h.client);var i=RB(g.x,g.y) as IB;if(i!=null){i.dispatchEvent(cQ..PP(q.uG,true)..FQ=i.OC(g)..IQ=g..DQ=h.deltaX..EQ=h.deltaY);if(cQ.AF)h.preventDefault();}}var GR=[] ;rQ( h){GR.forEach((g)=>g.cancel());if(nG.cJ==ZG.oI){GR=[SP.onTouchStart.listen(HR),SP.onTouchEnd.listen(HR),SP.onTouchMove.listen(HR),SP.onTouchEnter.listen(HR),SP.onTouchLeave.listen(HR),SP.onTouchCancel.listen(HR)];}}HR( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=MQ.NQ(m.client);var h=RB(i.x,i.y) as IB;var g=bQ.containsKey(l)?bQ[l]:new dJ(h,bQ.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(eQ..PP(SB.EJ,true)..FQ=(g.target.JD!=null)?g.target.OC(i):new EB.KM()..IQ=i..ZP=g.CF..cP=g.wE);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(eQ..PP(SB.AJ,true)..FQ=h.OC(i)..IQ=i..ZP=g.CF..cP=g.wE);g.target=h;}var k=null;if(j.type=="touchstart"){bQ[l]=g;k=SB.fG;}if(j.type=="touchend"){bQ.remove(l);k=SB.jG;}if(j.type=="touchcancel"){bQ.remove(l);k=SB.mG;}if(j.type=="touchmove"){k=SB.sG;}if(k!=null&&h!=null){h.dispatchEvent(eQ..PP(k,true)..FQ=h.OC(i)..IQ=i..ZP=g.CF..cP=g.wE);}}}sQ( g){g.preventDefault();var h=null;if(g.type=="keyup")h=JC.iG;if(g.type=="keydown")h=JC.UF;dQ..PP(h,true)..iO=g.altKey..jO=g.ctrlKey..mO=g.shiftKey..AP=g.charCode..DP=g.keyCode..FP=ND.YI;if(g.keyLocation==OB.KeyLocation.LEFT)dQ.FP=ND.pG;if(g.keyLocation==OB.KeyLocation.RIGHT)dQ.FP=ND.fE;if(g.keyLocation==OB.KeyLocation.NUMPAD)dQ.FP=ND.pI;if(g.keyLocation==OB.KeyLocation.JOYSTICK)dQ.FP=ND.oG;if(g.keyLocation==OB.KeyLocation.MOBILE)dQ.FP=ND.oG;if(SQ!=null)SQ.dispatchEvent(dQ);}tQ( g){var i=(g.charCode!=0)?g.charCode:g.keyCode;var h=new WG(WG.jI,true);h.yM=new String.fromCharCodes([i]);if(SQ!=null)SQ.dispatchEvent(h);}} EH( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);} jJ( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";} kJ(){var g=new OB.CanvasElement(width:1,height:1);g.context2d.fillStyle="#000000";g.context2d.fillRect(0,0,1,1);var i=g.context2d.getImageData(0,0,1,1).data;var h=(i[0]==0);return h;}class iE implements kC{final  fQ;final  hQ;final  iQ=new List<oB>();var jQ;var kQ;var lQ;var mQ;var bN;var PN;var nQ;var oQ;var pQ;iE( g, h,[ transitionFunction]):fQ=g,hQ=(?transitionFunction)?transitionFunction:aF.bF{mQ=new XG(this);PN=0.0;bN=UB.max(0.0001,h);nQ=0.0;oQ=false;pQ=false;} get GH=>mQ; vN( g){if(fQ!=null&&pQ==false){iQ.add(g);}} BD( m){if(PN<bN||pQ==false){PN=PN+m;if(PN>bN){PN=bN;}if(PN>=0.0){if(pQ==false){pQ=true;for(int h=0;h<iQ.length;h++ ){var g=iQ[h];g.GG=g.BQ(fQ);}if(jQ!=null){jQ();}}var k=PN/bN;var l=hQ(k).toDouble();for(int h=0;h<iQ.length;h++ ){var g=iQ[h];if(g.YK){var i=g.GG.toDouble();var p=g.HG.toDouble();var j=i+l*(p-i);g.QQ(fQ,oQ?j.round():j);}}if(kQ!=null){kQ();}if(lQ!=null&&PN==bN){lQ();}}}return PN<bN;} get currentTime=>PN;}class jL extends IC{jL();CB( g){g.beginPath();}uC( g){g.GL();}}class kL extends IC{kL();CB( g){g.closePath();}}class lL extends IC{var hM,lM;lL( h, g){hM=h.toDouble();lM=g.toDouble();}CB( g){g.moveTo(hM,lM);}uC( g){g.eD(hM,lM);}}var nJ=kJ(); cF( g, m, p, j){m=m.toDouble();p=p.toDouble();var wC=0.0;var vB=0.0;var KB=m*g.a;var fB=m*g.b;var WB=m*g.a+p*g.c;var DB=m*g.b+p*g.d;var aB=p*g.c;var t=p*g.d;var h=wC;if(h>KB)h=KB;if(h>WB)h=WB;if(h>aB)h=aB;var i=vB;if(i>fB)i=fB;if(i>DB)i=DB;if(i>t)i=t;var l=wC;if(l<KB)l=KB;if(l<WB)l=WB;if(l<aB)l=aB;var k=vB;if(k<fB)k=fB;if(k<DB)k=DB;if(k<t)k=t;if(j==null)j=new FB.KM();j.x=g.kB+h;j.y=g.lB+i;j.width=l-h;j.height=k-i;return j;}class mL extends IC{var hM,lM;mL( h, g){hM=h.toDouble();lM=g.toDouble();}CB( g){g.lineTo(hM,lM);}uC( g){if(g.rF==false){g.eD(hM,lM);}g.vC(g.zD,g.AE);g.vC(hM,lM);g.eD(hM,lM);}}class nL extends IC{var hM,lM,yQ;var zQ,AR;var BR;nL( l, g, j, i, h, k){hM=l.toDouble();lM=g.toDouble();yQ=j.toDouble();zQ=i.toDouble();AR=h.toDouble();BR=k;}CB( g){g.arc(hM,lM,yQ,zQ,AR,BR);}uC( g){var j=new iB(yQ,0);var t=j.rotate(zQ);var m=j.rotate(AR);if(g.rF==false){g.eD(hM+t.x,lM+t.y);}var h=zQ;var i=AR;if(BR){if(h<i)h=h+2*UB.PI;}else{if(i<h)i=i+2*UB.PI;}var DB=i-h;var l=(DB*30).abs()~/UB.PI+1;g.vC(g.zD,g.AE);for(var k=0;k<=l;k++ ){var p=j.rotate(h+k*DB/l);g.vC(hM+p.x,lM+p.y);}g.eD(hM+m.x,lM+m.y);}}class oL extends IC{var hM,lM;var tM,HN;oL( i, g, h, j){hM=i.toDouble();lM=g.toDouble();tM=h.toDouble();HN=j.toDouble();}CB( g){g.rect(hM,lM,tM,HN);}uC( g){g.eD(hM,lM);g.vC(hM,lM);g.vC(hM+tM,lM);g.vC(hM+tM,lM+HN);g.vC(hM,lM+HN);}}abstract class rJ extends IC{var CR;var DR;var ER;rJ( h, i, g){CR=h.toInt();DR=i;ER=g;} RB( g, h, i){g.lineWidth=CR;g.lineJoin=DR;g.lineCap=ER;try {return g.isPointInStroke(h,i);}catch (j){return false;}}uC( g){g.stroke(CR);}}class pL extends rJ{var FR;pL( g, i, j, h):super(i,j,h){FR=g;}CB( g){g.strokeStyle=FR;g.lineWidth=CR;g.lineJoin=DR;g.lineCap=ER;g.stroke();}}abstract class sJ extends IC{ RB( g, h, i){return g.isPointInPath(h,i);}uC( g){g.fill();}}class qL extends sJ{var FR;qL( g){FR=g;}CB( g){g.fillStyle=FR;g.fill();}}//@ sourceMappingURL=supersonic.dart.map
