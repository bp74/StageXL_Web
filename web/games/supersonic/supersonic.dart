import "dart:async" as YB;import "dart:math" as ZB;import "dart:web_audio" as pG;import "dart:html" as RB;import "dart:json" as PM;class QM{static const  RM="Chrome";static const  SM="Firefox";static const  TM="Internet Explorer";static const  UM="Safari";final  jK;final  minimumVersion;const QM(this.jK,[this.minimumVersion]);}class VM{const VM();}class WM{final  name;const WM(this.name);}class XM{const XM();}class YM{const YM();}class s extends CB{static const  uD="GameEvent.TYPE_LIVES_CHANGED";static const  bE="GameEvent.TYPE_PROGRESS_CHANGED";static const  cE="GameEvent.TYPE_PAUSE_CHANGED";static const  dE="GameEvent.TYPE_LEVEL_CHANGED";static const  eE="GameEvent.TYPE_SCORE_CHANGED";static const  fE="GameEvent.TYPE_GAME_START";static const  gE="GameEvent.TYPE_GAME_OVER";static const  hE="GameEvent.TYPE_GAME_ABORT";static const  cF="GameEvent.TYPE_GAME_SIZE_CHANGED";var BB;s( h, g,[ i=false]):super(h,i){this.BB=g;}}class oI extends gC{var UC;oI(){UC=new List<bC>();} BM(){this.UC.sort(IM);} bD( g){if(this.contains(g))return;this.GB(g);this.UC.add(g);} sL( g){if(this.UC.length>0){var h=this.UC.indexOf(g);if(h>=0)this.UC.removeAt(h);}if(this.contains(g))this.zB(g);} IM( g, h){if(!this.contains(g)){return (this.contains(h)?1:0);}if(!this.contains(h)){return (this.contains(g)?-1:0);}if(g.position.z>h.position.z){if(this.kD(g)<this.kD(h))this.lI(g,h);return 1;}if(g.position.z<h.position.z){if(this.kD(g)>this.kD(h))this.lI(g,h);return -1;}return 0;}}class OB extends CB{static const  FC="MenuEvent.TYPE_OK";static const  aE="MenuEvent.TYPE_CANCEL";var MF;OB( h, g,[ i=false]):super(h,i){this.MF=g;}}class bC extends gC{var MN;var QN;var SN;var position;var jC=-1;var KC=0;var AM=1;var yC=false;var II=false;var QE=false;var vM=false;var LE=0;var oD=0;var VE=0;bC( g){SN=new gC();GB(SN);this.JE=g;if(this.JE==null)return;this.x=100000;}set JE( g){if(MN!=null)this.zB(MN);if(QN!=null)this.zB(QN);MN=null;QN=null;if(g!=null){MN=g;MN.zC=TD.UD/2;MN.AD=TD.UD/2;GB(MN);}else{QN=new xG();GB(QN);}GB(SN);} get JE{return MN;} setScale( g){this.AM=g;if(QN!=null){QN.TB.clear();QN.TB.beginPath();QN.TB.rH(0,0,TD.UD/2*g);QN.TB.closePath();QN.TB.kI(0xff999999,1);}if(MN!=null)MN.YC=MN.ZC=g;SN.YC=SN.ZC=g;} LF( j){if(MN==null)return false;var g=this.LI(j);g=MN.SC(g);var k=this.JE.JG.HL(g.x.toInt(),g.y.toInt());var l=(k>>24)&0xFF;var i=false;if(l>0){i=true;var h=new pB(o.PB("items").JB("blood"));h.zC=50;h.AD=50;h.x=g.x-TD.UD/2;h.y=g.y-TD.UD/2;SN.GB(h);}return i;}}class CC extends EC{static const  tG=1.0;static const  uI=100;static const  vI=0xFFFFFF;var CM=tG;var EL=5;var jD;var JI=false;var gI=500;var iK=0xffffff;var yB;var MB;var lD;var ZN=true;var NF=false;var BI=60.0;var PE;var RC=jE;var UG=false;var kL="Web";CC( h, g):super(h,g){this.AB(CB.IH,(i){this.LL();});}set pD( g){ZN=g;this.dispatchEvent(new s(s.uD,this));} get pD{return ZN;} LL(){if(!JI){this.AB(u.GE,(g)=>this.NF=false);this.AB(u.sC,(g)=>this.NF=true);this.nL();this.AB(s.fE,this.ZG);this.AB(s.uD,this.ZL);this.AB(s.bE,this.cL);this.AB(s.eE,this.dL);this.AB(s.dE,this.XL);this.AB(s.cE,this.aL);this.AB(s.gE,this.YG);this.AB(s.hE,this.XG);this.LD();this.WE=0;this.nD=0;this.mD=3;this.start();JI=true;}} lB( j,[ h=null]){var i=o.JL(j);if(h!=null)for(int g=0;g<h.length;g++ )i=i.replaceAll("{${g}}",h[g].toString());return i;} nL(){this.CM=tG;this.iK=vI;this.gI=uI;this.EL=5;this.BI=60000;} LD(){this.jD=new TD(this);this.GB(this.jD);var h=o.PB("items").JB("button_exit");var g=o.PB("items").JB("button_exit_2");this.yB=new zD(new pB(h),new pB(g),new pB(h),new pB(g));this.yB.width=75;this.yB.height=66;this.yB.x=707;this.yB.y=525;this.yB.AB(u.sC,VL);this.GB(this.yB);this.yB.visible=false;this.lD=new qI(this,RC);this.lD.x=0;this.lD.y=0;this.GB(this.lD);} tK(){var g=this.hD();g.text=this.lB("MESSAGE_RESTART_LEVEL");g.AB(OB.FC,this.YI);} pK( h){var g=this.hD();g.text=this.lB("MESSAGE_FREE_LEVEL_BARRIER_${h}");g.AB(OB.FC,this.YI);} YI( g){this.RD(g.MF);this.jD.nK();} wH(){this.jD.RG();var g=this.hD();if(this.mB==0){g.text=this.lB("MESSAGE_FIRST_LEVEL_WEB");}else{g.text=this.lB("MESSAGE_START_LEVEL",[(this.mB+1)]);}g.AB(OB.FC,this.fL);} fL( g){this.RD(g.MF);this.QL();} qK(){var g=this.hD();g.text=this.lB("MESSAGE_GAME_OVER");g.AB(OB.FC,this.WL);} WL( g){this.RD(g.MF);} hD([ g=null, j=1.0, i=true]){if(this.MB!=null)this.RD(this.MB);this.yB.visible=false;this.lD.visible=true;if(g==null)this.MB=new cB(this,i,RC);else this.MB=g;this.MB.width=cB.ZE;this.MB.height=cB.vD;this.MB.x=(this.KF/2)-(cB.ZE/2)+30;this.MB.y=(this.AI/2)-(cB.vD/2);this.MB.alpha=0;this.GB(this.MB);var h=new yE(this.MB,j,vF.xF);h.oH.alpha.kG(1);gB.add(h);return this.MB;} RD( g){this.paused=false;this.lD.visible=true;this.yB.visible=true;if(g==null)return;g.OE();if(this.contains(g)){this.zB(g);}this.MB=null;} GL(){gB.remove(PE);if(this.UG)this.aI(null);this.NF=true;this.pD=false;} eL(){if(this.MB!=null)return;if(kL.toLowerCase()=="web")return;gB.remove(PE);this.PE=new lF(this.GL,this.BI);gB.add(this.PE);this.UG=true;this.paused=true;var g=this.hD(null,200,false);this.yB.visible=true;g.text=this.lB("MESSAGE_FIRST_LEVEL");g.AB(OB.FC,this.aI);} aI( g){gB.remove(this.PE);this.UG=false;this.MB.eB(OB.FC);this.RD(this.MB);} VL( h){if(this.MB is pI)return;var g=new pI(this,RC);this.hD(g);this.paused=true;g.AB(OB.FC,this.SL);g.AB(OB.aE,this.RL);} SL( g){this.dispatchEvent(new s(s.hE,this));this.MB.eB(OB.FC);this.MB.eB(OB.aE);this.RD(this.MB);this.paused=true;} RL( g){this.MB.eB(OB.FC);this.MB.eB(OB.aE);this.RD(MB);} ZG( g){this.jD.RG();gB.JF(this.wH,0.5);} AL(){this.jD.RG();} cL( g){} ZL( g){} dL( g){} XL( g){} aL( g){} YG( g){gB.JF(this.qK,2.0);} XG( g){}}class tD{static var qG=new ZB.Random();static  sG( g, h){var i;if(h<g){var j=g;g=h;h=j;}if(g==h){i=g;}else{i=tD.qG.nextInt(h+1)+g;}return i;}static  xI( g, h){var i;if(h<g){var j=g;g=h;h=j;}if(g==h){i=g;}else{i=tD.qG.nextDouble()*(h-g)+g;}return i;}}class DC{var x;var y;DC(this.x,this.y);set length( g){this.normalize();this.OL(g);} get length{return ZB.sqrt(x*x+y*y);}normalize(){var g=this.length;if(g==0)throw new UnsupportedError("divided by 0");if(g==1)return;x/= g;y/= g;}scale( g){x*= g;y*= g;} clone(){return new DC(x,y);} add( g){if(g==null)return null;return new DC(x+g.x,y+g.y);} subtract( g){if(g==null)return null;return new DC(x-g.x,y-g.y);}OL( g){x*= g;y*= g;} get DF{var g=ZB.PI-ZB.atan2(this.x,this.y);if(g<0)g+= 2*ZB.PI;return g;}set DF( i){var h=this.length;var g=HB.BK(h,i-ZB.PI/2);this.x=g.x;this.y=g.y;} toString(){return ("V(${x},${y})");}}class pC{var x;var y;var z;pC(this.x,this.y,this.z);reset( h, i, g){x=h;y=i;z=g;} clone(){return new pC(x,y,z);} DI(){return ZB.sqrt(x*x+y*y+z*z);}yL( g){this.normalize();this.scale(g);} add( g){return new pC(x+g.x,y+g.y,z+g.z);}scale( g){x*= g;y*= g;z*= g;} normalize(){var g=DI();if(g==0||g==1)return;x/= g;y/= g;z/= g;} toString(){return "V(x: ${x}, y: ${y}, z: ${z})";} OG( g){return (g.x==x&&g.y==y&&g.z==z);}}class cB extends YF implements cC{static var ZE=588;static var vD=314;static var wI=10.0;var KD;var BC;var YN;var hG;var RC;cB( i,[ h=true, g=jE]):super(i){this.RC=g;this.width=cB.ZE;this.height=cB.vD;this.KD=new pB(o.PB("items").JB("menu_bg"));this.GB(this.KD);this.BC=new NC();this.BC.SD=0x000000;this.BC.wordWrap=true;this.BC.QC=new kE(g,30,0x000000,bold:true,align:vB.qE);this.BC.width=476;this.BC.height=250;this.BC.x=60;this.BC.y=90;this.GB(this.BC);this.AB(u.sC,this.onClick);if(h){this.nI=0;this.hG=0;gB.add(this);}else{this.nI=1;}this.alpha=0;} uC( g){this.hG+= g;if(this.hG>wI){OE();MG();return false;}return true;}set text( g){if(g==null)return;var h=new kE(RC,30,0x000000,bold:true,align:vB.qE);if(g.length<=30)h.size=45;else h.size=30;this.BC.QC=h;this.BC.text=g;} onClick( g){OE();MG();} MG(){this.dispatchEvent(new OB(OB.FC,this));}set nI( g){if(g<0)g=1;if(g>1)g=1;YN=g;var h=(255*YN).round().toInt();} OE(){gB.remove(this);}}class qI extends YF{var KD;var mC;var JC;var IC;var XC;var VC;var WC;var font;var nG=30;var TF;qI( h,[ i=jE]):super(h){this.font=i;this.LD();var g=new StringBuffer();g.write((this.BB as CC).lB("GENlevel"));g.write(": 0");IC.text=g.toString();} LD(){this.KD=new pB(o.PB("items").JB("topbar"));this.KD.x=0;this.KD.y=0;this.GB(this.KD);this.mC=new NC();this.mC.QC=new kE(font,24,0,bold:true,align:vB.PH);this.mC.SD=0x000000;this.mC.width=400;this.mC.height=100;this.mC.x=20;this.mC.y=nG;this.GB(mC);this.JC=new NC();this.JC.QC=new kE(font,24,0,bold:true,align:vB.uE);this.JC.SD=0x000000;this.JC.width=200;this.JC.height=100;this.JC.x=(this.BB.KF/2)-this.JC.width+60;this.JC.y=nG;this.GB(JC);this.IC=new NC();this.IC.QC=new kE(font,24,0,bold:true,align:vB.uE);this.IC.SD=0x000000;this.IC.width=200;this.IC.height=100;this.IC.x=(this.BB.KF)-(this.IC.width)-20;this.IC.y=nG;this.GB(IC);this.XC=new NC();this.XC.QC=new kE(font,24,0,bold:true,align:vB.qE);this.XC.SD=0x000000;this.XC.width=200;this.XC.height=100;this.XC.x=20;this.XC.y=this.BB.AI-this.XC.height-20;this.GB(XC);this.XC.visible=false;this.VC=new pB(o.PB("items").JB("progressbar"));this.VC.x=25;this.VC.y=82;this.GB(this.VC);this.WC=new pB(o.PB("items").JB("progressship"));this.WC.x=25;this.WC.y=this.VC.y+(this.VC.height-(this.VC.height-this.WC.height))-(this.WC.height);this.GB(this.WC);this.TF=new List<pB>();for(var h=0;h<3;h++ ){var g=new pB(o.PB("items").JB("spaceship"));g.y=10;g.x=(this.BB.KF/2)+70+(h*35);this.GB(g);this.TF.add(g);}} XI( g){this.WC.x=25;this.WC.y=this.VC.y+(this.VC.height-((this.VC.height-this.WC.height)*g.BB.WE))-(this.WC.height);} WI( i){var h=i.BB as CC;if(h.pD){this.JC.text=h.lB("DISPLAY_TRAINING");}else{this.JC.text=h.lB("DISPLAY_LIVES");}for(var g=0;g<this.TF.length;g++ ){this.TF[g].visible=(!h.pD)&&(g<i.BB.mD);}} ZI( h){var i=h.BB as CC;var g=new StringBuffer();g.write(i.lB("GENscore"));g.write(": ${h.BB.xL.toString()}");mC.text=g.toString();} PF( h){var i=h.BB as CC;var g=new StringBuffer();g.write(i.lB("GENlevel"));g.write(": ${h.BB.mB.toString()}");IC.text=g.toString();}}class pI extends cB{var xB;var xC;var nC;var aC;var pH=40;var qH=30;var RC;pI( h,[ g=jE]):super(h,true,g){this.RC=g;this.eB(u.JD);this.eB(u.sC);this.LD();} LD(){var g=this.BB as CC;this.BC.wordWrap=true;this.text=g.lB("GENexitquery");this.xB=new zD(new pB(o.PB("items").JB("but_yes")),new pB(o.PB("items").JB("but_yes2")),new pB(o.PB("items").JB("but_yes2")),new pB(o.PB("items").JB("but_yes2")));this.xB.x=qH;this.xB.y=cB.vD-this.xB.height-pH;this.xB.AB(u.JD,this.HM);this.GB(this.xB);this.xC=new zD(new pB(o.PB("items").JB("but_no")),new pB(o.PB("items").JB("but_no2")),new pB(o.PB("items").JB("but_no2")),new pB(o.PB("items").JB("but_no2")));this.xC.x=cB.ZE-this.xC.width-qH;this.xC.y=cB.vD-this.xB.height-pH;this.xC.AB(u.JD,this.UI);this.GB(this.xC);this.nC=new NC();this.nC.AB(u.JD,this.xB.dispatchEvent);this.nC.SD=0x000000;this.nC.QC=new kE(RC,48,0,bold:true,align:vB.PH);this.nC.height=60;this.nC.x=this.xB.x+this.xB.width;this.nC.y=this.xB.y+5;this.GB(this.nC);this.nC.text=g.lB("GENyes");this.aC=new NC();this.aC.AB(u.JD,this.xC.dispatchEvent);this.aC.SD=0x000000;this.aC.QC=new kE(RC,48,0,bold:true,align:vB.uE);this.aC.height=60;this.aC.x=this.xC.x-this.aC.width;this.aC.y=this.xB.y+5;this.GB(this.aC);this.aC.text=g.lB("GENno");}MG(){UI(null);} HM( g){OE();this.dispatchEvent(new OB(OB.FC,this));} UI( g){OE();this.dispatchEvent(new OB(OB.aE,this));}}class YF extends gC{var ON;YF( g){this.BB=g;}set BB( g){if(ON!=null){ON.eB(s.gE);ON.eB(s.hE);ON.eB(s.cF);ON.eB(s.fE);ON.eB(s.dE);ON.eB(s.cE);ON.eB(s.eE);ON.eB(s.uD);ON.eB(s.bE);}ON=g;if(ON!=null){ON.AB(s.gE,this.YG);ON.AB(s.hE,this.XG);ON.AB(s.cF,this.VI);ON.AB(s.fE,this.ZG);ON.AB(s.dE,this.PF);ON.AB(s.cE,this.bL);ON.AB(s.eE,this.ZI);ON.AB(s.uD,this.WI);ON.AB(s.bE,this.XI);}} get BB{return ON;} YG( g){} XG( g){} VI( g){} ZG( g){} PF( g){} bL( g){} ZI( g){} WI( g){} XI( g){}}class TD extends YF{static var rG=0.025;static var ZF=1.0;static var UD=600;static var aF=800;static var bF=600;static var uG=400;static var vG=300;static var wD=ZB.sqrt(aF*aF+bF*bF);static var yI=(wD*2/UD);static var wG=6;var SB;var XB;var TC;var lC;var eG=30.0*ZB.PI/180;var dG=1.0*ZB.PI/180;var rD=0.05;var bG=-1;var QF=1;var QB;var wC;var GG=["barrier01","barrier02","barrier03","barrier04","barrier05","barrier06","barrier07"];var HG;var IG;var tH;var oK;var mI;var cG=15;var KI;var iD=false;var IF=0;var QG;var CF;var DG=0.90;var hI=0;var aN;var nM;var fB;var DL=0;var PC;var gD=false;var SE,TE;var EI;var UE;TD( g):super(g){aN=new nE.EN(80,60,690,524);this.mask=aN;this.HG=o.SG("speedalizer");this.IG=this.HG.play(true);this.fB=new xG();this.GB(this.fB);EI=new FJ(800,600);GB(EI);SE=TE=0;LC.AB(u.tF,this.aG);LC.AB(u.sC,this.aG);LC.AB(u.GE,this.aG);UE=this.UL.listen(this.bN);} aG( g){SE=g.iI;TE=g.jI;} mL(){var g=this.BB.nD;this.BB.nD=g+(this.BB as CC).gI*(this.BB.mB*this.BB.mD);} VI( g){} PF( g){super.PF(g);this.DM();} DM(){gD=false;UE.pause();this.IF=0;this.BB.WE=0;this.iD=false;var h=60;this.lC=new tI(wD,wG*h);for(var g=this.lC.FB.length;g>=0;g-- )if(g%h!=0&&g%h!=1)this.lC.eI(g);this.SB=new DC(uG,vG);this.XB=new pC(0,0,0);this.TC=new pC(0,0,ZF);this.dG=(1+(0.1*this.BB.mB))*ZB.PI/180;this.rD=0.015+(0.004*this.BB.mB);this.QF=2+this.BB.mB;this.bG=-this.QF;this.hI=this.BB.mB*2;this.cG=15+(this.BB.mB);this.LD();this.rK();UE.resume();} LD(){if(this.QB!=null)this.zB(this.QB);this.QB=new oI();this.GB(this.QB);if(this.PC!=null)this.zB(this.PC);this.PC=new pB(o.PB("items").JB("crosshair"));this.PC.YC=0.5;this.PC.ZC=0.5;this.PC.x=(aF/2)-this.PC.width/2;this.PC.y=(bF/2)-this.PC.height/2;this.GB(this.PC);} RG(){this.gD=false;this.UE.pause();var h=60;this.lC=new tI(wD,wG*h);for(var g=this.lC.FB.length;g>=0;g-- )if(g%h!=0&&g%h!=1)this.lC.eI(g);this.SB=new DC(uG,vG);this.XB=new pC(0,0,0);this.TC=new pC(0,0,ZF);this.dG=2*ZB.PI/180;this.QF=0;this.bG=0;if(this.QB!=null){this.zB(this.QB);this.QB=null;}this.QB=new oI();this.GB(this.QB);if(this.wC!=null){this.zB(this.wC);this.wC=null;}this.vH();this.UE.resume();} vH(){var g=new bC(null);g.jC=-1;g.KC=0;g.position=this.XB.clone();g.position.z=0.5;this.QB.bD(g);} uH(){var g=new bC(new pB(o.PB("items").JB("countdown01")));g.jC=0;g.KC=0;g.position=this.XB.clone();g.position.z=0.5;g.LE=0;g.QE=true;this.QB.bD(g);g=new bC(new pB(o.PB("items").JB("countdown02")));g.jC=0;g.KC=0;g.position=this.XB.clone();g.position.z=0;g.LE=1;g.QE=true;this.QB.bD(g);g=new bC(new pB(o.PB("items").JB("countdown03")));g.jC=0;g.KC=0;g.position=this.XB.clone();g.position.z=-0.5;g.LE=2;g.QE=true;this.QB.bD(g);g=new bC(new pB(o.PB("items").JB("countdown04")));g.jC=0;g.KC=0;g.position=this.XB.clone();g.position.z=-1;g.LE=3;g.QE=true;this.QB.bD(g);} sK(){var h=1+this.BB.mB;if(h>=this.GG.length)h=this.GG.length-1;var i=tD.sG(0,h);var j=this.GG[i];var g=new bC(new pB(o.JB(j)));g.yC=true;g.AC=tD.sG(0,359)*ZB.PI/180;g.KC=tD.xI(this.bG,this.QF)*ZB.PI/180;g.position=this.XB.clone();return g;} rK(){this.uH();this.vH();var h=0;for(var i=0;i<cG;i++ ){var g=null;if(i==cG-1){g=new bC(new pB(o.JB("finish")));g.AC=0;g.KC=5*ZB.PI/180;g.position=this.XB.clone();g.jC=0;g.yC=true;g.II=true;this.QG=g;}else{h++ ;if(this.BB.mB==1&&h<=3){if(h==1){g=new bC(new pB(o.JB("training01")));g.yC=true;g.AC=0;g.KC=0;g.position=this.XB.clone();g.oD=1;}else if(h==2){g=new bC(new pB(o.JB("training02")));g.yC=true;g.AC=135*ZB.PI/180;g.KC=0;g.position=this.XB.clone();g.oD=2;}else if(h==3){g=new bC(new pB(o.JB("training02")));g.yC=true;g.AC=315*ZB.PI/180;g.KC=0;g.position=this.XB.clone();g.oD=3;}}else{g=this.sK();}}g.VE=-i*1-3;g.position.z=g.VE;g.jC=0;this.QB.bD(g);}} YL(){this.iD=false;var g=BB as CC;g.AL();g.wH();} bN( h){if(this.BB.paused==false){this.pL();var g=this.BB as CC;if(g.pD&&this.gD&&!g.NF)g.eL();}else{RE=-1;}} LF( h){var g=new HB(this.SB.x,this.SB.y);g=this.LI(g);g=h.SC(g);return h.LF(g);} nK(){this.gD=false;for(var g=0;g<this.QB.UC.length;g++ )this.QB.UC[g].position.z-= (2.5+1-DG)+1;CF.position.z+= (1-DG);this.uH();this.iD=false;this.rD=this.KI;this.wC.visible=false;} TL(){var g=this.BB as CC;g.yB.visible=false;this.iD=false;this.gD=false;this.KI=this.rD;this.rD=0;if(this.wC!=null)this.zB(this.wC);this.wC=new pB(o.JB("broken"));this.GB(this.wC);if(this.CF.oD>0&& ++this.DL<=5){gB.JF((){g.pK(this.CF.oD);},2.0);}else{this.BB.mD-- ;if(this.BB.mD>0)gB.JF(g.tK,2.0);}this.IG.stop();this.IG=this.HG.play(true);this.tH=o.SG("crash");this.oK=this.tH.play();}var RE=-1; pL(){var k=gB.elapsedTime;var h=1.0;if(RE==-1)RE=k;h=ZB.min(k-RE,1.0000)*40;RE=k;if(iD){this.IF-= (this.rD*h);var n=this.BB.nD;this.BB.nD=n+(this.hI*h);}this.QB.BM();this.eG+= (this.dG*h);this.TC.x=-(this.SE-this.SB.x)*3;this.TC.y=-(this.TE-this.SB.y)*3;if(this.TC.DI()>wD*0.7){this.TC.yL(wD*0.7);}this.TC.z=ZF;this.XB=this.TC.clone();this.XB.z=rG;this.oL();for(var m=0;m<this.QB.UC.length;m++ ){var g=this.QB.UC[m];g.position.z+= (rD*h);if(g.position.z>=1){if(g.QE&&g.LE==3)gD=true;if(g.JE!=null){this.mI=o.SG("swish");var q=this.mI.play();}if(g.yC)iD=true;if(g.VE!=0)this.IF=g.VE;if(g.yC&&LF(g)){g.position.z=DG;CF=g;this.TL();}else{if(g.oD==3)(this.BB as CC).pD=false;if(g.yC)this.mL();if(g.II){this.YL();}else if(g.jC==0){this.QB.sL(g);}else{g.position.z+= g.jC;}}}var i=this.TC.clone();i.z=g.position.z;if(i.z<0||i.z>1){g.x=100000;}else{var j=this.XF(i);j=j.add(this.SB);var l=(20*(i.z*i.z));if(l>1)l=1;g.alpha=l;g.x=j.x;g.y=j.y;g.AC+= (g.KC*h);g.setScale(sD(g.position.z)*yI);}}if(this.QG!=null)this.BB.WE=(this.IF+3)/(this.QG.VE+3);} XF( g){var h=new DC(g.x,g.y);h.x*= sD(g.z);h.y*= sD(g.z);return h;} sD( g){var h=rG;if(g<0)return 0;if(g>1)return 1;return h/(h+(1-g));} oL(){if(fB==null)return;var l=2;var j=this.TC.clone();j.scale(l);var h=this.lC.transform(sD(j.z)*l,this.eG,this.XF(j));var i=this.lC.transform(sD(this.XB.z),this.eG,this.XF(this.XB));var k=this.XF(this.XB).add(this.SB);fB.TB.clear();fB.TB.beginPath();fB.TB.rH(k.x,k.y,this.lC.lL*sD(this.XB.z));fB.TB.closePath();fB.TB.kI(0xffcccccc,1);fB.TB.beginPath();for(var g=0;g<h.FB.length;g+= 2){fB.TB.moveTo(h.FB[g].x+this.SB.x,h.FB[g].y+this.SB.y);fB.TB.lineTo(h.FB[g+1].x+this.SB.x,h.FB[g+1].y+this.SB.y);fB.TB.lineTo(i.FB[g+1].x+this.SB.x,i.FB[g+1].y+this.SB.y);fB.TB.lineTo(i.FB[g].x+this.SB.x,i.FB[g].y+this.SB.y);fB.TB.lineTo(h.FB[g].x+this.SB.x,h.FB[g].y+this.SB.y);}fB.TB.closePath();fB.TB.yK(0xFF000000);}}abstract class rI{}abstract class sI{}class tI extends YE{var LN;var PN;tI( h, g):super(){if(g<3)g=3;if(h==0)h=1;this.LN=h;this.PN=g;vK();} get lL{return LN;} vK(){var g=new List<DC>();var h=0.0;var k=2*ZB.PI/PN;for(var j=0;j<PN;j++ ){var i=new DC(0,-LN);i.DF=h;g.add(i);h+= k;}this.FB=g;}}class YE implements rI,sI{var FB;YE([ g]){this.FB=(g!=null)?g:new List();}eI( g){if(g<FB.length)this.FB.removeAt(g);} LF( h){var k=this.FB.length;var i=k-1;var j=false;for(var g=0;g<k;g++ ){if(FB[g].y<h.y&&FB[i].y>=h.y||FB[i].y<h.y&&FB[g].y>=h.y){if(FB[g].x+(h.y-FB[g].y)/(FB[i].y-FB[g].y)*(FB[i].x-FB[g].x)<h.x){j=!j;}}i=g;}return j;} rotate( k){var j=this.FB.length;var i=new List<DC>(j);for(var g=0;g<j;g++ ){var h=this.FB[g].clone();h.DF+= k;i[g]=h;}return new YE(i);} scale( h){if(h==0)h=double.MIN_POSITIVE;var j=this.FB.length;var i=new List<DC>(j);for(var g=0;g<j;g++ ){var k=this.FB[g].clone();k.scale(h);i[g]=k;}return new YE(i);} transform( l, k, m){var j=this.FB.length;var i=new List<DC>(j);for(var g=0;g<j;g++ ){var h=this.FB[g].clone();h.scale(l);h.DF+= k;i[g]=h.add(m);}return new YE(i);}}class EC extends gC{var NN=0;var RN=0;var TN=true;var UN=3;var VN=0.0;var WN;var XN;EC( h, g){zL(h,g);} zL( g, h){WN=g;XN=h;this.dispatchEvent(new s(s.cF,this));} get KF{return WN;} get AI{return XN;} start(){this.paused=false;this.dispatchEvent(new s(s.fE,this));} FL(){this.dispatchEvent(new s(s.gE,this));}set WE( g){if(g<0.0)g=0.0;if(g>1.0)g=1.0;VN=g;this.dispatchEvent(new s(s.bE,this));} get WE{return VN;}set mD( g){if(g<0)g=0;UN=g;this.dispatchEvent(new s(s.uD,this));if(UN==0)this.FL();} get mD{return UN;}set nD( g){if(g<0)g=0;NN=g;this.dispatchEvent(new s(s.eE,this));} get nD{return NN;} get xL{return NN.toDouble().round().toInt();}set mB( g){if(g<0)g=0;RN=g;this.dispatchEvent(new s(s.dE,this));} get mB{return RN;} QL(){this.mB+= 1;return this.mB;}set paused( g){TN=g;this.dispatchEvent(new s(s.cE,this));} get paused{return TN;}}var LC;var dF;var o;var gB;var zI;var qC;var iE;var GC;const  jE="Russo One"; main(){LC=new hC("Stage",RB.query('#stage'),800,600);dF=new eF();dF.eK(LC);gB=dF.WG;zI=new ZB.Random();NB.bH.webp=true;var g=NB.aD("images/Loading.png");g.then((h){qC=new pB(h);qC.zC=20;qC.AD=20;qC.x=400;qC.y=270;LC.GB(qC);iE=new yE(qC,100,vF.xF);iE.oH.AC.kG(100.0*2.0*ZB.PI);gB.add(iE);GC=new NC();GC.QC=new kE("Arial",20,0xA0A0A0,bold:true);GC.width=240;GC.height=40;GC.text="... loading ...";GC.x=400-GC.FM/2;GC.y=320;GC.SI=false;LC.GB(GC);AJ();});} AJ(){o=new hF();o.onProgress.listen((l){var k=o.zK;var i=o.bI;var j=o.PG;print("Resource Progress -> finished: ${k.length}, pending:${i.length}, failed:${j.length}");});o.HC("barrier01","images/barrier01.png");o.HC("barrier02","images/barrier02.png");o.HC("barrier03","images/barrier03.png");o.HC("barrier04","images/barrier04.png");o.HC("barrier05","images/barrier05.png");o.HC("barrier06","images/barrier06.png");o.HC("barrier07","images/barrier07.png");o.HC("training01","images/training01.png");o.HC("training02","images/training02.png");o.HC("finish","images/finish.png");o.HC("broken","images/broken.png");o.fK("items","images/ItemTextureAtlas.json",iF.GH);o.FG("crash","sounds/crash.mp3");o.FG("swish","sounds/swish.mp3");o.FG("speedalizer","sounds/speedalizer.mp3");o.aB("DISPLAY_LEVEL","Level: {0}");o.aB("DISPLAY_LIVES","Ships:");o.aB("DISPLAY_SCORE","Score: {0}");o.aB("DISPLAY_TRAINING","Training");o.aB("MESSAGE_FIRST_LEVEL","Remain with your finger on the screen in order to fly through the tunnel!");o.aB("MESSAGE_FIRST_LEVEL_WEB","Move the mouse pointer to navigate through the obstacles!");o.aB("MESSAGE_FREE_LEVEL_BARRIER_1","Navigate to the center to fly through the hole!");o.aB("MESSAGE_FREE_LEVEL_BARRIER_2","Navigate to the upper left side to fly through the hole!");o.aB("MESSAGE_FREE_LEVEL_BARRIER_3","Navigate to the bottom right side to fly through the hole!");o.aB("MESSAGE_GAME_OVER","Game\nOver!");o.aB("MESSAGE_RESTART_LEVEL","Ooops!\nGet Ready\nFor Restart!");o.aB("MESSAGE_START_LEVEL","Get Ready\nFor Level {0}!");o.aB("GENscore","Score");o.aB("GENlevel","Level");o.aB("GENexitquery","Do you really want to quit the game?");o.aB("GENyes","Yes");o.aB("GENno","No");o.load().then((m){LC.zB(qC);LC.zB(GC);gB.remove(iE);var h=new CC(800,600);h.gK(LC);h.start();}).catchError((n){for(var g in o.PG){print("Loading resouce failed: ${g.kind}.${g.name} - ${g.error}");}});}const ZM=const aM();class aM{const aM();}class EJ{static const  OJ="round";}class lE extends CB{lE( g):super(g,false); get FF=>false;}class xD{static const  KJ="exactFit";static const  RJ="noBorder";static const  ZJ="noScale";static const  QH="showAll";}class AH{static const  wF="none";static const  XJ="touchPoint";}class WD{static var mJ=CK();static var xE=JK();static var cH=KK();static  CK(){var h=(xE!=null)?"WebAudioApi":"AudioElement";var g=RB.window.navigator.userAgent;if(g.contains("IEMobile"))if(g.contains("9.0")||g.contains("10.0"))h="Mock";if(g.contains("iPhone")||g.contains("iPad")||g.contains("iPod"))if(g.contains("OS 3")||g.contains("OS 4")||g.contains("OS 5"))h="Mock";if(cH.length==0)h="Mock";print("StageXL: supported audio engine is: ${h}");return h;}static  JK(){if(pG.AudioContext.supported)return new pG.AudioContext();return null;}static  KK(){var g=new List<String>();var h=new RB.AudioElement();var i=["maybe","probably"];if(i.indexOf(h.canPlayType("audio/mpeg",""))!=-1)g.add("mp3");if(i.indexOf(h.canPlayType("audio/mp4",""))!=-1)g.add("mp4");if(i.indexOf(h.canPlayType("audio/ogg",""))!=-1)g.add("ogg");if(i.indexOf(h.canPlayType("audio/wav",""))!=-1)g.add("wav");print("StageXL: supported audio types are: ${g}");return g;}static  nH( i, h){var l=new RegExp(r"(mp3|mp4|ogg|wav)$",multiLine:false,caseSensitive:true);var g=cH.toList();var k=l.firstMatch(i);var j=new List<String>();if(k==null){throw new ArgumentError("Unsupported file extension.");}if(g.length==0){throw new UnsupportedError("This browser supports no known audio codec.");}if(!h.mp3)g.remove("mp3");if(!h.mp4)g.remove("mp4");if(!h.ogg)g.remove("ogg");if(!h.wav)g.remove("wav");var m=k.group(1);if(g.contains(m)){j.add(i);g.remove(m);}for(var n in g){j.add(i.replaceAll(l,n));}return j;}}class rB{static const  pF="auto";static const  qF="arrow";static const  rF="button";static const  bJ="hand";static const  RH="ibeam";static const  eJ="wait";}class GD{static var BH=rB.pF;static var PJ=false;static var LH=null;static var aJ=null;static var dJ=null;static var iJ=new YB.StreamController<String>();static var nJ=iJ.stream.asBroadcastStream();static  lH( i){var h=i;var g="auto";if(BH!=rB.pF){h=BH;}switch (h){case rB.pF:g="auto";break;case rB.qF:g="default";break;case rB.rF:g="pointer";break;case rB.bJ:g="move";break;case rB.RH:g="text";break;case rB.eJ:g="wait";break;}if(PJ){g="none";}return g;}}class XD{static const  JJ=0;static const  PH=1;static const  uE=2;static const  YJ=3;static const  OH=4;}class zG{final  mG;zG(this.mG);call( h, g){mO(h).kG(g);} get x=>mO("x"); get y=>mO("y"); get YC=>mO("scaleX"); get ZC=>mO("scaleY"); get skewX=>mO("skewX"); get skewY=>mO("skewY"); get zC=>mO("pivotX"); get AD=>mO("pivotY"); get AC=>mO("rotation"); get alpha=>mO("alpha"); mO( h){var g=new tB(h);this.mG.mO(g);return g;}}class pB extends t{var sN;var FO;var XO;pB([ h=null, g="auto"]){this.JG=h;this.jL=g;XO=null;} get JG=>sN;set JG( g){if(g==null)sN=null;if(g is NB)sN=g;}set jL( g){if(g is String)FO=g;} dB( k,[ j]){var g=sN;var h=0,i=0;if(g!=null){h=g.width;i=g.height;}return BG(k,h,i,j);} UB( h, i){var g=sN;if(g==null)return null;if(h<0.0||i<0)return null;if(h>=g.width||i>=g.height)return null;return this;} IB( h){var g=sN;if(g==null)return;if(XO==null){g.IB(h);}else{g.uL(h,XO);}}}class AE{var hN;var oN;var cN=0.0;var gN=0.0;var nN=0.0;var BO=0.0;var rO=0.0;var DP=0.0;var LP=0.0;AE.DN(this.hN,this.oN); get x=>cN; get y=>gN; get width=>nN; get height=>BO; get EF=>rO; get NG=>DP; get leading=>LP;}class mF{var png;var jpg;var webp;var autoHiDpi;mF({this.png: true,this.jpg: true,this.webp: false,this.autoHiDpi: true});}abstract class cC{ uC( g);}class jB{final  cN;final  gN;jB( h, g):cN=h.toDouble(),gN=g.toDouble(); clone()=>new jB(cN,gN); get x=>cN; get y=>gN; toString()=>"Vector [x=${cN}, y=${gN}]"; operator+( g)=>new jB(cN+g.cN,gN+g.gN); operator-( g)=>new jB(cN-g.cN,gN-g.gN); operator*( g)=>new jB(cN*g.cN,gN*g.gN); operator/( g)=>new jB(cN/g.cN,gN/g.gN); operator-()=>new jB(-cN,-gN); operator==( g)=>cN==g.cN&&gN==g.gN; get hashCode=>cN.hashCode+gN.hashCode*7; scale( g){return new jB(cN*g,gN*g);} normalize(){var g=1/length;return new jB(cN*g,gN*g);} get length=>ZB.sqrt(cN*cN+gN*gN); rotate( g){var i=ZB.sin(g);var h=ZB.cos(g);return new jB(cN*h-gN*i,cN*i+gN*h);}}class eF{var eN;var uN;var EO;var RO;var CP;var OP;var aP;var jP;eF(){eN=new CE();uN=new List<hC>();EO=-1;CP=false;OP=new FE(0);aP=new VH();jP=new aH();RO=bQ;dQ();} get WG=>eN;dQ(){RB.window.requestAnimationFrame(RO);}bQ( g){dQ();g=g.toDouble();if(EO==-1)EO=g;if(EO>g)EO=g;var j=g-EO;var i=j/1000.0;var k=g/1000.0;var l=false;if(j>=1){EO=g;OP.wO=i;fH.dispatchEvent(OP);eN.uC(i);for(int h=0;h<uN.length;h++ ){uN[h].WG.uC(i);}if(CP){CP=false;kH.dispatchEvent(jP);}for(int h=0;h<uN.length;h++ ){uN[h].NL(k,i);}hH.dispatchEvent(aP);}} eK( g){if(g.gG!=null){g.gG.tL(g);}uN.add(g);g.kR=this;} tL( g){if(g.gG==this){uN.remove(g);g.kR=null;}}}abstract class kF{ IB( g);}class EB{var cN;var gN;var nN;var BO;EB( i, g, h, j):cN=i,gN=g,nN=h,BO=j;EB.CN():this(0,0,0,0); clone()=>new EB(cN,gN,nN,BO); toString()=>"Rectangle [x=${cN}, y=${gN}, width=${nN}, height=${BO}]"; get x=>cN; get y=>gN; get width=>nN; get height=>BO; get left=>cN; get top=>gN; get right=>cN+nN; get bottom=>gN+BO; get SB=>new HB(cN+nN/2,gN+BO/2); get size=>new HB(nN,BO);set x( g){cN=g;}set y( g){gN=g;}set width( g){nN=g;}set height( g){BO=g;} set size( g){nN=g.x;BO=g.y;} contains( g, h){return cN<=g&&gN<=h&&cN+nN>=g&&gN+BO>=h;} OG( g){return cN==g.x&&gN==g.y&&nN==g.width&&BO==g.height;} get isEmpty{return nN==0&&BO==0;}HF( g){cN=g.x;gN=g.y;nN=g.width;BO=g.height;} union( g){var i=ZB.min(this.left,g.left);var h=ZB.min(this.top,g.top);var j=ZB.max(this.right,g.right);var k=ZB.max(this.bottom,g.bottom);return new EB(i,h,j-i,k-h);} align(){var h=this.left.floor();var g=this.top.floor();var i=this.right.ceil();var j=this.bottom.ceil();return new EB(h,g,i-h,j-g);}}class lF implements cC{final  AO;var IO=0.0;var YO=0.0;var dO=1;lF( g, h):AO=g{YO=ZB.max(h,0.0001);} uC( h){var g=IO+h;while (g>=YO&&dO>0){IO=YO;dO-- ;AO();g-= YO;}IO=g;return (dO>0);} get currentTime=>IO;}class VD{final  matrix=new DB.HN();var alpha=1.0;var GF=sE.tE;var xO; get PL{if(xO==null)xO=new VD();return xO;}}class CB{static const  NJ="added";static const  IH="addedToStage";static const  sF="enterFrame";static const  TH="exitFrame";static const  hJ="removed";static const  kJ="removedFromStage";static const  oJ="resize";static const  ZH="render";static const  jH="progress";var qO;var FR;var GR;var NO;var IR;var JR;var MR;CB( g,[ h=false]){ER(g,h);} ER( g,[ h=false]){qO=g;FR=h;GR=ID.rE;NO=null;IR=null;JR=false;MR=false;} get VF=>JR; get type=>qO; get bubbles=>FR; get FF=>true; get target=>NO;}class xG extends t{var rN=new pE(); get TB=>rN; dB( g,[ h]){if(rN==null){return super.dB(g,h);}else{return rN.PQ(g);}} UB( g, h){if(rN==null){return null;}else{return rN.pQ(g,h)?this:null;}} IB( g){if(rN!=null)rN.IB(g);}}class HB{var cN;var gN;HB( h, g):cN=h,gN=g;HB.CN():this(0,0); clone()=>new HB(cN,gN); toString()=>"Point [x=${cN}, y=${gN}]";static  BK( g, h)=>new HB(g*ZB.cos(h),-g*ZB.sin(h)); get x=>cN; get y=>gN; get length=>ZB.sqrt(cN*cN+gN*gN);set x( g){cN=g;}set y( g){gN=g;} add( g){return new HB(cN+g.x,gN+g.y);} subtract( g){return new HB(cN-g.x,gN-g.y);}HF( g){cN=g.x;gN=g.y;} OG( g){return cN==g.x&&gN==g.y;}}class OC{var tN;var UO; AB( g, h(event),{ useCapture: false}){return PP(g,useCapture).listen(h);}eB( g,{ useCapture: false}){PP(g,useCapture).mK();}dispatchEvent( g){iQ(g,this,this,ID.rE);} LR( h, j, i){if(j&&UO!=null){var g=UO[h];if(g!=null&&g.WQ)return true;}if(i&&tN!=null){var g=tN[h];if(g!=null&&g.WQ)return true;}return false;} PP( h, g){if(g){if(UO==null)UO=new Map<String,YD>();}else{if(tN==null)tN=new Map<String,YD>();}var i=g?UO:tN;return i.putIfAbsent(h,(){return new YD(this,h,g);});}iQ( g, k, l, j){var h=(j==ID.CH)?UO:tN;if(h==null)return;var i=h[g.type];if(i==null)return;g.NO=k;g.IR=l;g.GR=j;g.JR=false;g.MR=false;i.dispatchEvent(g);}}class YD<BE extends CB> extends YB.Stream<BE>{final  NO;final  DO;final  gO;var zO=[] ;YD(this.NO,this.DO,this.gO); get isBroadcast=>true; asBroadcastStream({ onListen( subscription), onCancel( subscription)})=>this; get WQ=>zO.length>0; listen( i( event),{ onError(error), onDone(), cancelOnError: false}){var h=new DH<BE>(this,i);zO.add(h);if(gO==false){var g=this;switch (DO){case CB.sF:fH.EG(g);break;case CB.TH:hH.EG(g);break;case CB.ZH:kH.EG(g);break;}}return h;}lK( j){if(j.tO)return;var i=[] ;for(var g=0;g<zO.length;g++ ){var h=zO[g];if(identical(h,j)){h.tO=true;}else{i.add(h);}}zO=i;}mK(){for(var g=0;g<zO.length;g++ ){var h=zO[g];h.tO=true;}zO=[] ;}dispatchEvent( j){var k=zO;var i=zO.length;for(var g=0;g<i;g++ ){var h=k[g];if(h.tO==false){h.XP(j);}}}}class DB{var dN,fN,iN,kN,mN,pN;var CO;DB( h, i, g, j, k, l):dN=h.toDouble(),fN=i.toDouble(),iN=g.toDouble(),kN=j.toDouble(),mN=k.toDouble(),pN=l.toDouble(),CO=(h*j-i*g).toDouble();DB.HN():dN=1.0,fN=0.0,iN=0.0,kN=1.0,mN=0.0,pN=0.0,CO=1.0; clone(){return new DB(dN,fN,iN,kN,mN,pN);} sH(){var h=(kN/CO);var i=-(fN/CO);var g=-(iN/CO);var j=(dN/CO);var k=-(h*mN+g*pN);var l=-(i*mN+j*pN);return new DB(h,i,g,j,k,l);} get a=>dN; get b=>fN; get c=>iN; get d=>kN; get nB=>mN; get oB=>pN; get kC=>CO; XE( h){var i=h.x.toDouble();var g=h.y.toDouble();return new HB(i*dN+g*iN+mN,i*fN+g*kN+pN);} aR( h){var i=h.x.toDouble();var g=h.y.toDouble();return new HB(i*dN+g*iN+mN,i*fN+g*kN+pN);} concat( g){var m=dN;var v=fN;var w=iN;var q=kN;var l=mN;var n=pN;var VB=CO;var j=g.a;var k=g.b;var i=g.c;var h=g.d;var bB=g.nB;var KB=g.oB;var uB=g.kC;dN=(m*j+v*i).toDouble();fN=(m*k+v*h).toDouble();iN=(w*j+q*i).toDouble();kN=(w*k+q*h).toDouble();mN=(l*j+n*i+bB).toDouble();pN=(l*k+n*h+KB).toDouble();CO=(VB*uB).toDouble();} GI(){dN=1.0;fN=0.0;iN=0.0;kN=1.0;mN=0.0;pN=0.0;CO=1.0;} HI(){var j=dN;var m=fN;var l=iN;var k=kN;var h=mN;var i=pN;var g=CO;dN=(k/g).toDouble();fN=-(m/g).toDouble();iN=-(l/g).toDouble();kN=(j/g).toDouble();mN=-(dN*h+iN*i).toDouble();pN=-(fN*h+kN*i).toDouble();CO=(1.0/g).toDouble();} rotate( i){var g=ZB.cos(i);var h=ZB.sin(i);var j=dN;var n=fN;var m=iN;var l=kN;var k=mN;var q=pN;dN=(j*g-n*h).toDouble();fN=(j*h+n*g).toDouble();iN=(m*g-l*h).toDouble();kN=(m*h+l*g).toDouble();mN=(k*g-q*h).toDouble();pN=(k*h+q*g).toDouble();} scale( h, g){dN=(dN*h).toDouble();fN=(fN*g).toDouble();iN=(iN*h).toDouble();kN=(kN*g).toDouble();mN=(mN*h).toDouble();pN=(pN*g).toDouble();CO=(CO*h*g).toDouble();} translate( g, h){mN=(mN+g).toDouble();pN=(pN+h).toDouble();} SF( h, i, g, k, j, l){dN=h.toDouble();fN=i.toDouble();iN=g.toDouble();kN=k.toDouble();mN=j.toDouble();pN=l.toDouble();CO=(dN*kN-fN*iN).toDouble();} HF( g){dN=g.a.toDouble();fN=g.b.toDouble();iN=g.c.toDouble();kN=g.d.toDouble();mN=g.nB.toDouble();pN=g.oB.toDouble();CO=g.kC.toDouble();} LG( h, g){var n=h.a;var w=h.b;var KB=h.c;var v=h.d;var m=h.nB;var q=h.oB;var bB=h.kC;var k=g.a;var l=g.b;var j=g.c;var i=g.d;var uB=g.nB;var VB=g.oB;var oC=g.kC;dN=(n*k+w*j).toDouble();fN=(n*l+w*i).toDouble();iN=(KB*k+v*j).toDouble();kN=(KB*l+v*i).toDouble();mN=(m*k+q*j+uB).toDouble();pN=(m*l+q*i+VB).toDouble();CO=(bB*oC).toDouble();}}class vB{static const  qE="center";static const  QJ="end";static const  WJ="justify";static const  PH="left";static const  uE="right";}abstract class rC extends LB{final  TO=new List<t>();var iO=true;var vO=true; GB( g){if(g.parent==this){var h=TO.indexOf(g);TO.removeAt(h);TO.add(g);}else{dK(g,TO.length);}} dK( g, h){if(h<0||h>TO.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){TO.removeAt(TO.indexOf(g));if(h>TO.length)h-- ;TO.insert(h,g);}else{g.rL();g.YR(this);TO.insert(h,g);g.dispatchEvent(new CB(CB.NJ,true));if(this.BD!=null)fR(g,new CB(CB.IH));}} zB( h){var g=TO.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");qL(g);} qL( g){if(g<0||g>=TO.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=TO[g];h.dispatchEvent(new CB(CB.hJ,true));if(this.BD!=null)fR(h,new CB(CB.kJ));h.YR(null);TO.removeAt(g);} CI( g){if(g<0||g>=TO.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");return TO[g];} kD( g){return TO.indexOf(g);} lI( j, i){var h=kD(j);var g=kD(i);if(h==-1||g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");EM(h,g);} EM( h, g){var j=CI(h);var i=CI(g);TO[h]=i;TO[g]=j;} contains( g){for(;g!=null;g=g.gQ)if(g==this)return true;return false;} dB( q,[ g]){if(g==null)g=new EB.CN();if(TO.length==0)return super.dB(q,g);var i=double.INFINITY;var j=double.INFINITY;var l=double.NEGATIVE_INFINITY;var k=double.NEGATIVE_INFINITY;var v=TO.length;for(int m=0;m<TO.length;m++ ){var n=TO[m];jQ.LG(n.CR,q);var h=n.dB(jQ,g);if(h.left<i)i=h.left;if(h.top<j)j=h.top;if(h.right>l)l=h.right;if(h.bottom>k)k=h.bottom;}g.x=i;g.y=j;g.width=l-i;g.height=k-j;return g;} UB( i, k){i=i.toDouble();k=k.toDouble();var n=null;for(int l=TO.length-1;l>=0;l-- ){var j=TO[l];if(j.SS){var g=j.CR;var q=i-g.nB;var m=k-g.oB;var w=(g.d*q-g.c*m)/g.kC;var v=(g.a*m-g.b*q)/g.kC;var h=j.UB(w,v);if(h!=null){if(h is LB)if(h.SI)return iO?h:this;n=this;}}}return n;} IB( i){for(int g=0;g<TO.length;g++ ){var h=TO[g];if(h.SS)i.fI(h);}}TS( g, i){i.add(g);if(g is rC){var k=g as rC;var j=k.TO;for(int h=0;h<j.length;h++ ){TS(j[h],i);}}}fR( i, j){var g=AF.cI() as List<t>;TS(i,g);for(int h=0;h<g.length;h++ ){g[h].dispatchEvent(j);}g.clear();AF.dI(g);}}class zD extends LB{var upState;var overState;var downState;var hitTestState;var oG=true;var enabled=true;var SP;zD([this.upState,this.overState,this.downState,this.hitTestState]){AB(u.XH,AQ);AB(u.wE,AQ);AB(u.sC,AQ);AB(u.GE,AQ);SP=this.upState;} dB( h,[ g]){if(SP!=null){jQ.LG(SP.CR,h);return SP.dB(jQ,g);}return super.dB(h,g);} UB( k, l){if(this.hitTestState!=null){var g=this.hitTestState.CR;var h=k-g.nB;var i=l-g.oB;var m=(g.d*h-g.c*i)/g.kC;var j=(g.a*i-g.b*h)/g.kC;if(this.hitTestState.UB(m,j)!=null)return this;}return null;} IB( g){if(SP!=null)g.fI(SP);} AQ( g){if(g.type==u.wE){SP=upState;}else{SP=g.iC?downState:overState;}}}class pE{final  TQ=new List<MC>();var ZQ=new EB.CN();var eQ=true;clear(){TQ.clear();eQ=true;}mQ( g){TQ.add(g);eQ=true;}beginPath()=>mQ(new eM());closePath()=>mQ(new fM());moveTo( h, g)=>mQ(new gM(h,g));lineTo( h, g)=>mQ(new hM(h,g));arc( l, g, j, i, h, k)=>mQ(new iM(l,g,j,i,h,k));rect( i, g, h, j)=>mQ(new jM(i,g,h,j));kI( h,[ g=1.0, i=BJ.OJ, j=EJ.OJ])=>mQ(new kM(vE(h),g,i,j));yK( g)=>mQ(new lM(vE(g)));rH( i, g, h){mQ(new gM(i+h,g));mQ(new iM(i,g,h,0,ZB.PI*2,false));} PQ( i){var h=new tC(i);for(int g=0;g<TQ.length;g++ ){TQ[g].DD(h);}return h.IL();} pQ( h, i){if(eQ){eQ=false;ZQ=PQ(new DB.HN());}if(ZQ.contains(h,i)){var j=CG;j.beginPath();for(int g=0;g<TQ.length;g++ ){if(TQ[g].UB(j,h,i)){return true;}}}return false;} IB( i){var g=i.context;g.save();g.beginPath();for(int h=0;h<TQ.length;h++ ){TQ[h].IB(g);}g.restore();}}class gC extends rC{var oM=false;var oG=false;var VG=null;var rN=null;var AP=null; get TB{return (rN!=null)?rN:rN=new pE();}HR(){var i=this.OF;var j=this.BD;var m=this.visible;if(i!=null&&this.BD!=null){var h=GD.dJ;if(h!=null){var g=CR.XE(i);if(g.x<h.left)g.x=h.left;if(g.x>h.right)g.x=h.right;if(g.y<h.top)g.y=h.top;if(g.y>h.bottom)g.y=h.bottom;i=CR.sH().XE(g);}var l=new HB(uO,GP).add(i).subtract(GD.aJ);var k=CR.XE(l);this.visible=false;AP=j.UB(j.SE,j.TE);this.x=k.x;this.y=k.y;this.visible=m;}} dB( h,[ g]){if(g==null)g=new EB.CN();super.dB(h,g);if(rN!=null){g=rN.PQ(h).union(g);}return g;} UB( i, j){var h=null;if(this.VG!=null){var g=this.lG(this.VG);if(g!=null){var k=i*g.a+j*g.c+g.nB;var l=i*g.b+j*g.d+g.oB;if(this.VG.UB(k,l)!=null){h=this;}}}else{h=super.UB(i,j);if(h==null&&rN!=null){if(rN.pQ(i,j)){h=this;}}}return h;}IB( g){if(rN!=null)rN.IB(g);super.IB(g);}}class qB<BE extends CB>{final  DO;const qB(this.DO); forTarget( g,{ useCapture: false}){return g.PP(DO,useCapture);}}class kE{var font;var size;var color;var bold;var italic;var underline;var align;var topMargin;var leftMargin;var rightMargin;var indent;var leading;kE(this.font,this.size,this.color,{this.bold: false,this.italic: false,this.underline: false,this.align: "left",this.topMargin: 0.0,this.leftMargin: 0.0,this.rightMargin: 0.0,this.indent: 0.0,this.leading: 0.0}); clone(){return new kE(font,size,color,bold:bold,italic:italic,underline:underline,align:align,topMargin:topMargin,leftMargin:leftMargin,rightMargin:rightMargin,indent:indent,leading:leading);}}class iF{static const  MJ="json";static const  GH="jsonarray";}class jF{var vC;var MD;}class u extends CB{static const  JD="click";static const  TJ="doubleClick";static const  sC="mouseDown";static const  GE="mouseUp";static const  tF="mouseMove";static const  wE="mouseOut";static const  XH="mouseOver";static const  YH="mouseWheel";static const  dH="middleClick";static const  rJ="middleMouseDown";static const  vJ="middleMouseUp";static const  eH="rightClick";static const  AK="rightMouseDown";static const  DK="rightMouseUp";var rQ,sQ;var uQ,wQ;var KR;var VP;var wP;var dP;var iP;var RR;var SR;var UR;u( g,[ h=false]):super(g,h){ER(g,h);} ER( g,[ h=false]){super.ER(g,h);rQ=sQ=0;uQ=wQ=0;KR=false;VP=false;wP=false;dP=false;iP=false;RR=0;SR=0;UR=0;}set WR( g){rQ=g.x;sQ=g.y;}set XR( g){uQ=g.x;wQ=g.y;} get MI=>rQ; get NI=>sQ; get iI=>uQ; get jI=>wQ; get iC=>KR; get altKey=>VP; get ctrlKey=>dP; get shiftKey=>iP; get KE=>RR; get deltaX=>SR; get deltaY=>UR;}class mE{var lN;var zN;var HO;var QO=null;var aO=null;var jO=new YB.Completer();mE( h, i, j, k):lN=h,zN=i,HO=j{k.then((g){QO=g;}).catchError((l){aO=l;}).whenComplete((){jO.complete(this);});} toString()=>"ResourceManagerResource [kind=${lN}, name=${zN}, url = ${HO}]"; get kind=>lN; get name=>zN; get value=>QO; get error=>aO; get complete=>jO.future;}class CJ{static const  wF="none";}class NC extends LB{var hN="";var LO=null;var cO=CJ.wF;var qO=ZD.LJ;var HP=0;var QP=0;var YP=0.0;var eP=0.0;var kP=0.0;var rP=0.0;var uP=0.0;var yP=false;var BQ=false;var FQ=false;var LQ=false;var OQ=false;var RQ="•";var UQ=0x000000;var YQ=0x000000;var cQ=0;var nN=100;var BO=100;var fQ=0.0;var hQ=0.0;final  kQ=new List<AE>();var qQ=true;var xQ=null;var sO=null;NC([ h, g]){this.text=(h!=null)?h:"";this.QC=(g!=null)?g:new kE("Arial",12,0x000000);this.onKeyDown.listen(NR);this.gL.listen(QR);this.onMouseDown.listen(TR);} get text=>hN; get type=>qO; get border=>OQ; get borderColor=>YQ; get width=>nN; get height=>BO; set text( g){hN=g.replaceAll('\r\n','\n').replaceAll('\r','\n');HP=hN.length;qQ=true;} set SD( g){LO.color=g;qQ=true;} set QC( g){LO=g.clone();qQ=true;} set wordWrap( g){yP=g;qQ=true;} set width( g){nN=g.toDouble();qQ=true;} set height( g){BO=g.toDouble();qQ=true;} get FM{IS();return fQ;} dB( h,[ g]){return BG(h,nN,BO,g);} UB( g, h){if(g>=0&&h>=0&&g<nN&&h<BO)return this;return null;} IB( i){IS();YP+= i.uK;var g=i.sO;g.drawImageScaled(xQ,0.0,0.0,nN,BO);if(qO==ZD.DE){var h=this.BD;if(h!=null&&h.focus==this&&YP.remainder(0.8)<0.4){g.fillStyle=EE(LO.color);g.fillRect(eP,kP,rP,uP);}}}OS( uB){kQ.clear();var j=0;var h='';var n='';var oC=0;var k=LO.size.toDouble();var JM=LO.leftMargin.toDouble();var KM=LO.topMargin.toDouble();var LM=LO.align.toString();var bB=uB.EF.toDouble();var MM=uB.NG.toDouble();for(var VB in hN.split('\n')){if(yP==false){kQ.add(new AE.DN(VB,j));j+= VB.length+1;}else{h=null;for(var KB in VB.split(' ')){n=h;h=(n==null)?KB:"${n} ${KB}";h=RS(h);oC=sO.measureText(h).width.toDouble();if(oC>=nN){if(n==null){kQ.add(new AE.DN(h,j));j+= h.length+1;h=null;}else{kQ.add(new AE.DN(n,j));j+= n.length+1;h=RS(KB);}}}if(h!=null){kQ.add(new AE.DN(h,j));j+= h.length+1;}}}fQ=0.0;hQ=0.0;var v=0.0;var w=KM+k;for(int i=0;i<kQ.length;i++ ){var g=kQ[i];if(g is !AE)continue;var q=sO.measureText(g.hN).width.toDouble();switch (LM){case vB.qE:case vB.WJ:v=(nN-q)/2;break;case vB.uE:case vB.QJ:v=(nN-q);break;default:v=JM;}g.cN=v;g.gN=w;g.nN=q;g.BO=k;g.rO=bB;g.DP=MM;g.LP=0.0;w=w+k;fQ=ZB.max(fQ,q);hQ=hQ+k;}if(qO==ZD.DE){for(int i=kQ.length-1;i>=0;i-- ){var g=kQ[i];if(g is !AE)continue;if(HP>=g.oN){var NM=HP-g.oN;var OM=g.hN.substring(0,NM);QP=i;eP=g.cN+sO.measureText(OM).width.toDouble();kP=g.gN-bB*0.9;rP=1.0;uP=k;break;}}var l=0.0;var m=0.0;while (l+eP>nN)l-= nN*0.2;while (l+eP<0)l+= nN*0.2;while (m+kP+uP>BO)m-= k;while (m+kP<0)m+= k;eP+= l;kP+= m;for(int i=0;i<kQ.length;i++ ){var g=kQ[i];if(g is !AE)continue;g.cN+= l;g.gN+= m;}}} RS( g){if(g is !String)return g;if(FQ==false)return g;var h="";for(int i=0;i<g.length;i++ ){h="${h}${RQ}";}return h;}IS({ calculateOnly: false}){if(qQ){qQ=false;var h=(hC.zF?BF:1.0)/IE;var k=(nN*h).ceil();var i=(BO*h).ceil();if(xQ==null){xQ=new RB.CanvasElement(width:k,height:i);sO=xQ.context2D;}if(xQ.width!=k)xQ.width=k;if(xQ.height!=i)xQ.height=i;var g="${LO.size}px ${LO.font},sans-serif";if(LO.bold)g="bold ${g}";if(LO.italic)g="italic ${g}";sO.font=g;sO.textAlign="start";sO.textBaseline="alphabetic";sO.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);OS(UJ(g));if(calculateOnly){qQ=true;return;}sO.setTransform(h,0.0,0.0,h,0.0,0.0);if(LQ){sO.fillStyle=EE(UQ);sO.fillRect(0,0,nN,BO);}else{sO.clearRect(0,0,nN,BO);}sO.fillStyle=EE(LO.color);for(int l=0;l<kQ.length;l++ ){var j=kQ[l];sO.fillText(j.hN,j.cN,j.gN);}if(OQ){sO.strokeStyle=EE(YQ);sO.lineWidth=1;sO.strokeRect(0,0,nN,BO);}}}NR( w){if(qO==ZD.DE){IS(calculateOnly:true);var l=hN;var n=l.length;var j=kQ;var g=HP;var i=QP;var h=-1;switch (w.keyCode){case RB.KeyCode.BACKSPACE:if(g>0){hN=l.substring(0,g-1)+l.substring(g);h=g-1;}break;case RB.KeyCode.END:var m=j[i];h=m.oN+m.hN.length;break;case RB.KeyCode.HOME:var m=j[i];h=m.oN;break;case RB.KeyCode.LEFT:if(g>0){h=g-1;}break;case RB.KeyCode.UP:if(i>0&&i<j.length){var q=j[i];var k=j[i-1];var v=ZB.min(g-q.oN,k.hN.length);h=k.oN+v;}else{h=0;}break;case RB.KeyCode.RIGHT:if(g<n){h=g+1;}break;case RB.KeyCode.DOWN:if(i>=0&&i<j.length-1){var q=j[i];var k=j[i+1];var v=ZB.min(g-q.oN,k.hN.length);h=k.oN+v;}else{h=n;}break;case RB.KeyCode.DELETE:if(g<n){hN=l.substring(0,g)+l.substring(g+1);h=g;}break;}if(h!=-1){HP=h;YP=0.0;qQ=true;}}}QR( j){if(qO==ZD.DE){var i=hN.length;var h=HP;var g=j.text;if(g=='\r')g='\n';if(g=='\n'&&BQ==false)g='';if(g=='')return;if(cQ!=0&&i>=cQ)return;hN=hN.substring(0,h)+g+hN.substring(h);HP=HP+g.length;YP=0.0;qQ=true;}}TR( n){var bB=n.MI.toDouble();var l=n.NI.toDouble();if(sO==null)return;sO.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);for(int i=0;i<kQ.length;i++ ){var g=kQ[i];if(g is !AE)continue;var m=g.hN;var VB=g.cN;var w=g.gN-g.rO;var KB=g.gN+g.DP;if(w<=l&&KB>=l){var q=double.INFINITY;var j=0;for(var h=0;h<=m.length;h++ ){var v=sO.measureText(m.substring(0,h)).width.toDouble();var k=(VB+v-bB).abs();if(k<q){q=k;j=h;}}HP=g.oN+j;YP=0.0;qQ=true;}}}}class yD extends CB{static const  HH="textInput";var hN="";yD( g,[ h=false]):super(g,h); get text=>hN;}class WB extends CB{static const  EH="touchBegin";static const  KH="touchEnd";static const  MH="touchCancel";static const  SH="touchMove";static const  gJ="touchOver";static const  lJ="touchOut";var lQ;var oQ;var rQ,sQ;var uQ,wQ;var VP;var wP;var dP;var iP;var zQ;var AR;var BR;WB( g,[ h=false]):super(g,h){ER(g,h);} ER( g,[ h=false]){super.ER(g,h);lQ=0;oQ=false;rQ=sQ=0;uQ=wQ=0;VP=false;wP=false;dP=false;iP=false;zQ=1.00;AR=0;BR=0;}set WR( g){rQ=g.x;sQ=g.y;}set XR( g){uQ=g.x;wQ=g.y;} get WF=>lQ; get MI=>rQ; get NI=>sQ; get iI=>uQ; get jI=>wQ; get altKey=>VP; get ctrlKey=>dP; get shiftKey=>iP;}abstract class MC{IB( g); UB( g, h, i){IB(g);return false;}DD( g){}}class ID{static const  CH=1;static const  rE=2;static const  VJ=3;}class HJ<BE>{final  jN=new List<BE>();final  KO;var WO=0;HJ( g()):KO=g; cI(){if(WO==0){return KO();}else{WO-- ;return jN[WO];}}dI( g){if(WO==jN.length){jN.add(g);}else{jN[WO]=g;}WO++ ;}reset(){jN.clear();WO=0;}}class ZD{static const  LJ="dynamic";static const  DE="input";}class yG{final  qN;final  zN;final  VO;final  eO;final  oO;final  BP;final  JP;final  RP;final  ZP;final  fP;final  nP;yG.GN( i, h, g):qN=i,zN=h,VO=wJ(g["rotated"]),eO=wB(g["sourceSize"]["w"]),oO=wB(g["sourceSize"]["h"]),BP=wB(g["spriteSourceSize"]["x"]),JP=wB(g["spriteSourceSize"]["y"]),RP=wB(g["frame"]["x"]),ZP=wB(g["frame"]["y"]),fP=wB(g["frame"]["w"]),nP=wB(g["frame"]["h"]); get GM=>qN; get name=>zN; get wL=>VO; get BL=>RP; get CL=>ZP; get zH=>fP; get yH=>nP; get offsetX=>BP; get offsetY=>JP; get iL=>eO; get hL=>oO;}class eC extends CB{static const  FH="keyDown";static const  JH="keyUp";var VP=false;var dP=false;var iP=false;var pP=false;var wP=false;var CQ=0;var GQ=0;var KQ=0;eC( g,[ h=false]):super(g,h); get altKey=>VP; get ctrlKey=>dP; get shiftKey=>iP; get charCode=>CQ; get keyCode=>GQ; get keyLocation=>KQ;}abstract class nE{var CD=null;var border=false;var borderColor=0xFF000000;var borderWidth=1;var sO;nE();factory nE.EN( i, g, h, j){return new dM(i,g,h,j);}hK( h, g){sO=h.context;sO.setTransform(g.a,g.b,g.c,g.d,g.nB,g.oB);sO.beginPath();DR();sO.save();sO.clip();}xK(){sO.restore();if(border){sO.strokeStyle=vE(borderColor);sO.lineWidth=borderWidth;sO.lineCap="round";sO.lineJoin="round";sO.stroke();}}DR();}abstract class t extends OC implements kF{static var SJ=0;var bO=SJ++ ;var cN=0.0;var gN=0.0;var uO=0.0;var GP=0.0;var MP=1.0;var WP=1.0;var cP=0.0;var hP=0.0;var mP=0.0;var sP=1.0;var vP=true;var xP=false;var DQ=null;var HQ=null;var MQ=null;var QQ=false;var VQ=null;var XQ=null;var aQ=null;var zN="";var gQ=null;final  jQ=new DB.HN();final  nQ=new DB.HN();var tQ=true;static const  MK=const qB<FE>(CB.sF); get UL=>t.MK.forTarget(this); get x=>cN; get y=>gN; get zC=>uO; get AD=>GP; get YC=>MP; get ZC=>WP; get skewX=>cP; get skewY=>hP; get AC=>mP; get visible=>vP; get alpha=>sP; get kK=>HQ!=null; get GF=>aQ; get name=>zN; get parent=>gQ; get OF{var g=this.BD;return (g!=null)?this.SC(g.rR):null;} get SE{var g=this.OF;return (g!=null)?g.x:0.0;} get TE{var g=this.OF;return (g!=null)?g.y:0.0;} get root{var g=this;while (g.gQ!=null)g=g.gQ;return g;} get BD{var g=this.root;return (g is hC)?g:null;}set x( g){if(g is num)cN=g;tQ=true;}set y( g){if(g is num)gN=g;tQ=true;}set zC( g){if(g is num)uO=g;tQ=true;}set AD( g){if(g is num)GP=g;tQ=true;}set YC( g){if(g is num)MP=g;tQ=true;}set ZC( g){if(g is num)WP=g;tQ=true;}set skewX( g){if(g is num)cP=g;tQ=true;}set skewY( g){if(g is num)hP=g;tQ=true;}set AC( g){if(g is num)mP=g;tQ=true;}set visible( g){if(g is bool)vP=g;}set alpha( g){if(g is num)sP=g;}set mask( g){DQ=g;}set GF( g){aQ=g;} setTransform( k, l,[ n, g, h, q, j, i, m]){if(k is num)cN=k;if(l is num)gN=l;if(n is num)MP=n;if(g is num)WP=g;if(h is num)mP=h;if(q is num)cP=q;if(j is num)hP=j;if(i is num)uO=i;if(m is num)GP=m;tQ=true;} get width=>dB(CR).width; get height=>dB(CR).height; set width( h){this.YC=1;var g=this.width;this.YC=(g!=0.0)?h/g:1.0;} set height( h){this.ZC=1;var g=this.height;this.ZC=(g!=0.0)?h/g:1.0;} gK( g){g.GB(this);} rL(){if(gQ!=null)gQ.zB(this);} get SS=>vP&&!xP; get CR{if(tQ){tQ=false;var j=cP+mP;var i=hP+mP;if(j==0.0&&i==0.0){nQ.SF(MP,0.0,0.0,WP,cN-uO*MP,gN-GP*WP);}else{var g,l,k,h;var m=ZB.cos(j);var n=ZB.sin(j);if(j==i){g=MP*m;l=MP*n;k=-WP*n;h=WP*m;}else{g=MP*ZB.cos(i);l=MP*ZB.sin(i);k=-WP*n;h=WP*m;}var v=cN-(uO*g+GP*k);var q=gN-(uO*l+GP*h);nQ.SF(g,l,k,h,v,q);}}return nQ;} lG( h){if(h==gQ)return CR.clone();if(h.gQ==this)return h.CR.sH();var j=new DB.HN();var g=this;while (g!=h&&g.gQ!=null){j.concat(g.CR);g=g.gQ;}if(h==null&&g!=null){j.concat(g.CR);g=null;}if(g==h)return j;var k=new DB.HN();var i=h;while (i!=this&&i.gQ!=null){k.concat(i.CR);i=i.gQ;}k.HI();if(i==this)return k;if(i!=g)return null;j.concat(k);return j;} dB( h,[ g]){if(g==null)g=new EB.CN();g.x=h.nB;g.y=h.oB;g.width=0;g.height=0;return g;} UB( g, h){if(dB(AG).contains(g,h))return this;return null;} LI( h){jQ.GI();for(t g=this;g!=null;g=g.gQ)jQ.concat(g.CR);return jQ.XE(h);} SC( h){jQ.GI();for(t g=this;g!=null;g=g.gQ)jQ.concat(g.CR);jQ.HI();return jQ.XE(h);} KS( g){g.context.translate(MQ.x,MQ.y);HQ.IB(g);} dispatchEvent( h){var g=null;if(h.FF||h.bubbles){for(t j=gQ;j!=null;j=j.gQ){if(j.LR(h.type,h.FF,h.bubbles)){if(g==null)g=AF.cI() as List<t>;g.add(j);}}}if(h.FF&&g!=null){for(int i=g.length-1;i>=0&&h.VF==false;i-- ){g[i].iQ(h,this,g[i],ID.CH);}}if(h.VF==false){iQ(h,this,this,ID.rE);}if(h.bubbles&&g!=null){for(int i=0;i<g.length&&h.VF==false;i++ ){g[i].iQ(h,this,g[i],ID.VJ);}}if(g!=null){g.clear();AF.dI(g);}} YR( h){for(var g=h;g!=null;g=g.gQ)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");gQ=h;} IB( g);}class BJ{static const  OJ="round";}class dC{final  wN=new List<yG>();var sN;static  aD( n, bB){var k=new YB.Completer<dC>();var g=new dC();switch (bB){case iF.MJ:case iF.GH:RB.HttpRequest.getString(n).then((KB){var q=PM.parse(KB);var h=q["frames"];var v=q["meta"];var oC=LK(n,v["image"]);if(h is List){for(var w in h){var j=w as Map;var i=j["filename"] as String;var l=mH(i);var m=new yG.GN(g,l,j);g.wN.add(m);}}if(h is Map){for(String i in h.keys){var j=h[i] as Map;var l=mH(i);var m=new yG.GN(g,l,j);g.wN.add(m);}}NB.aD(oC).then(( uB){g.sN=uB;k.complete(g);}).catchError((VB){k.completeError(new StateError("Failed to load image."));});}).catchError((VB){k.completeError(new StateError("Failed to load json file."));});break;}return k.future;} JB( h){for(int g=0;g<wN.length;g++ ){var i=wN[g];if(i.name==h){return new NB.KN(i);}}throw new ArgumentError("TextureAtlasFrame not found: '${h}'");}}abstract class LB extends t{var wK=false;var SI=true;var BN=true;var tabIndex=0;static const  fJ=const qB<u>(u.wE);static const  sJ=const qB<u>(u.tF);static const  xJ=const qB<u>(u.sC);static const  EK=const qB<u>(u.GE);static const  NK=const qB<u>(u.YH); get onMouseOut=>LB.fJ.forTarget(this); get onMouseMove=>LB.sJ.forTarget(this); get onMouseDown=>LB.xJ.forTarget(this); get onMouseUp=>LB.EK.forTarget(this); get onMouseWheel=>LB.NK.forTarget(this);static const  QK=const qB<WB>(WB.SH);static const  RK=const qB<WB>(WB.KH);static const  SK=const qB<WB>(WB.MH); get onTouchMove=>LB.QK.forTarget(this); get onTouchEnd=>LB.RK.forTarget(this); get onTouchCancel=>LB.SK.forTarget(this);static const  VK=const qB<eC>(eC.JH);static const  WK=const qB<eC>(eC.FH); get onKeyUp=>LB.VK.forTarget(this); get onKeyDown=>LB.WK.forTarget(this);static const  ZK=const qB<yD>(yD.HH); get gL=>LB.ZK.forTarget(this);}class FJ extends LB{var width;var height;FJ(this.width,this.height); dB( h,[ g]){return BG(h,width,height,g);} UB( g, h){if(g>=0.0&&h>=0.0&&g<width&&h<height)return this;return null;} IB( g){}}class hF extends OC{final  SO=new Map<String,mE>();static const  cJ=const qB<CB>(CB.jH); get onProgress=>hF.cJ.forTarget(this);JQ( i, g, k, l){var j="${i}.${g}";var h=new mE(i,g,k,l);if(SO.containsKey(j)){throw new StateError("ResourceManager already contains a resource called '${g}'");}else{SO[j]=h;}h.complete.then((vQ){this.dispatchEvent(new CB(CB.jH));});} yQ( i, h){var j="${i}.${h}";var g=SO[j];if(g==null){throw new StateError("Resource '${h}' does not exist.");}else if(g.value!=null){return g.value;}else if(g.error!=null){throw g.error;}else{throw new StateError("Resource '${h}' has not finished loading yet.");}} load(){var i=this.bI.map((h)=>h.complete);return YB.Future.wait(i).then((j){var g=this.PG.length;if(g>0){throw new StateError("Failed to load ${g} resource(s).");}else{return this;}});} get zK{return SO.values.where((g)=>g.value!=null).toList();} get bI{return SO.values.where((g)=>g.value==null&&g.error==null).toList();} get PG{return SO.values.where((g)=>g.error!=null).toList();} HC( h, g,[ i=null]){JQ("BitmapData",h,g,NB.aD(g,i));} FG( i, g,[ h=null]){JQ("Sound",i,g,hB.aD(g,h));} fK( i, g, h){JQ("TextureAtlas",i,g,dC.aD(g,h));} aB( h, g){JQ("Text",h,"",new YB.Future.value(g));} JB( h){var g=yQ("BitmapData",h);if(g is !NB)throw "dart2js_hint";return g;} SG( h){var g=yQ("Sound",h);if(g is !hB)throw "dart2js_hint";return g;} PB( h){var g=yQ("TextureAtlas",h);if(g is !dC)throw "dart2js_hint";return g;} JL( h){var g=yQ("Text",h);if(g is !String)throw "dart2js_hint";return g;}}abstract class DJ{}final  oF=new Map<String,uF>();abstract class hB{static  aD( g,[ h=null]){switch (WD.mJ){case "WebAudioApi":return fF.aD(g,h);case "AudioElement":return gF.aD(g,h);default:return HD.aD(g,h);}}static var bH=new FD(mp3:true,mp4:true,ogg:true,wav:true); get length; play([ h=false, g]);}abstract class fC extends OC{ set UF( g); stop();}class FD{var mp3;var mp4;var ogg;var wav;var ignoreErrors;FD({this.mp3: false,this.mp4: false,this.ogg: false,this.wav: false,this.ignoreErrors: true});}class kB{var volume;var pan;var wM=1;var xM=0;var AN=1;var zM=0;kB([this.volume=1,this.pan=0]);}class cM extends fC{var xN;var MO;cM( i, h, g){xN=h;MO=g;}set UF( g){MO=g;} stop(){}}class gF extends hB{var yN;var OO;var hO;gF(){hO=new List<oE>();yN=new RB.AudioElement();yN.onEnded.listen(oP);OO=new List<RB.AudioElement>();OO.add(yN);RB.document.body.children.add(yN);}static  aD( l,[ g=null]){if(g==null)g=hB.bH;var n=new gF();var h=n.yN;var i=WD.nH(l,g);var j=new YB.Completer<hB>();if(i.length==0){return HD.aD(l,g);}var k;var m;KB(v){k.cancel();m.cancel();j.complete(n);}q(v){if(i.length>0){h.src=i.removeAt(0);h.load();}else{k.cancel();m.cancel();if(g.ignoreErrors){HD.aD(l,g).then((w)=>j.complete(w));}else{j.completeError(new StateError("Failed to load audio."));}}}k=h.onCanPlayThrough.listen(KB);m=h.onError.listen(q);h.src=i.removeAt(0);h.load();return j.future;} get length{return yN.duration;} play([ h=false, g]){if(g==null)g=new kB();return new oE(this,h,g);} EQ( h){var g;if(OO.length==0){g=yN.clone(true);g.onEnded.listen(oP);}else{g=OO.removeAt(0);}hO.add(h);return g;} OR( g){var h=g.yN;var i=hO.indexOf(g);hO.removeAt(i);OO.add(h);if(yN.currentTime>0&&yN.ended==false)yN.currentTime=0;} oP( j){var i=j.target;var g=null;for(int h=0;h<hO.length&&g==null;h++ )if(hO[h].yN==i)g=hO[h];if(g!=null)g.stop();}}class oE extends fC{var JO;var yN;var xN;var MO;oE( g, i, h){JO=g;xN=i;MO=h;yN=g.EQ(this);yN.loop=xN;this.UF=h;yN.play();} set UF( g){MO=g;if(yN!=null)yN.volume=(MO!=null)?MO.volume:1;} stop(){if(yN!=null){if(yN.ended==false)yN.pause();JO.OR(this);yN=null;}}}class fF extends hB{var vN;fF(){if(WD.xE==null)throw new UnsupportedError("This browser does not support Web Audio API.");}static  aD( i,[ g=null]){if(g==null)g=hB.bH;var m=new fF();var h=new YB.Completer<hB>();var j=WD.nH(i,g);var w=WD.xE;if(j.length==0){return HD.aD(i,g);}KB(n){w.decodeAudioData(n.response).then(( v){m.vN=v;h.complete(m);}).catchError((q){if(g.ignoreErrors){HD.aD(i,g).then((k)=>h.complete(k));}else{h.completeError(new StateError("Failed to decode audio."));}});}l(q){if(j.length>0){RB.HttpRequest.request(j.removeAt(0),responseType:'arraybuffer').then(KB).catchError(l);}else{if(g.ignoreErrors){HD.aD(i,g).then((k)=>h.complete(k));}else{h.completeError(new StateError("Failed to load audio."));}}}l(null);return h.future;} get length{return vN.duration;} play([ h=false, g]){if(g==null)g=new kB();return new bM(this,h,g);}}class bM extends fC{var GO;var MO;var xN;var nO;var FP;bM( j, h, i){GO=j;xN=h;MO=i;var g=WD.xE;nO=g.createGain();nO.connectNode(g.destination,0,0);nO.gain.value=(MO!=null)?ZB.pow(MO.volume,2):1;FP=g.createBufferSource();FP.buffer=GO.vN;FP.loop=h;FP.connectNode(nO,0,0);FP.start(0);} set UF( g){MO=g;nO.gain.value=(MO!=null)?ZB.pow(MO.volume,2):1;} stop(){FP.stop(0);}}class HD extends hB{HD(){}static  aD( g,[ h=null]){return new YB.Future<hB>.value(new HD());} get length{return double.NAN;} play([ h=false, g]){if(g==null){g=new kB();}return new cM(this,h,g);}}class GJ{}class NB implements kF{var nN;var BO;var PO;var ZO;var fO;var pO;var yO;var IP;var TP;var bP;var gP;var lP;var qP;var tP;var zP;var sO;static var bH=new mF();NB( i, l,[ j=true, g=0xFFFFFFFF,k=1.0]){nN=wB(i);BO=wB(l);PO=j;ZO=k.toDouble();fO=ZO/IE;pO=((1.0-fO).abs()<0.001)?0:1;TP=0;bP=0;yO=nN;IP=BO;gP=0;lP=0;qP=(nN*fO).ceil();tP=(BO*fO).ceil();var h=new RB.CanvasElement(width:qP,height:tP);zP=h;sO=h.context2D;sO.fillStyle=PO?vE(g):EE(g);sO.fillRect(0,0,qP,tP);}NB.JN( g,[ j=1.0]){var h=wB(g.naturalWidth);var i=wB(g.naturalHeight);PO=true;ZO=FK(j);fO=ZO;nN=(h/ZO).round();BO=(i/ZO).round();pO=((1.0-fO).abs()<0.001)?0:1;TP=0;bP=0;yO=nN;IP=BO;gP=0;lP=0;qP=h;tP=i;zP=g;}NB.KN( g){var h=g.GM.sN;nN=g.iL.toInt();BO=g.hL.toInt();PO=true;ZO=h.ZO;fO=h.fO;pO=g.wL?3:2;TP=g.offsetX;bP=g.offsetY;yO=g.zH;IP=g.yH;gP=(g.BL*fO).floor();lP=(g.CL*fO).floor();qP=(g.zH*fO).ceil();tP=(g.yH*fO).ceil();zP=h.zP;}static  aD( g,[ i=null, l=1.0]){if(i==null){i=NB.bH;}if(hC.zF&&i.autoHiDpi){if(g.contains("@1x.")&&BF>=1.5){l=l*2.0;g=g.replaceAll("@1x.","@2x.");}}var j=new YB.Completer<NB>();var h=new RB.ImageElement();var k;var m;k=h.onLoad.listen((w){k.cancel();m.cancel();j.complete(new NB.JN(h,l));});m=h.onError.listen((w){k.cancel();m.cancel();j.completeError(new StateError("Failed to load image."));});if(i.webp==false){h.src=g;return j.future;}TK.then(( q){var v=new RegExp(r"(png|jpg|jpeg)$",multiLine:false,caseSensitive:true);var n=v.firstMatch(g);if(q==false||n==null){h.src=g;}else{h.src=g.substring(0,g.length-n.group(1).length)+"webp";}});return j.future;} get width=>nN; get height=>BO; getImageData( h, j, g, i,[ m]){if(m!=null&&m!=ZO){var n=new NB(g,i,true,0,m);n.xH(this,new DB(1.0,0.0,0.0,1.0,-h,-j));return n.getImageData(h,j,g,i);}PS();var l=ZO;var k=fO;if(IE>1.0){return sO.getImageDataHD(h*l,j*l,g*l,i*l);}else{return sO.getImageData(h*k,j*k,g*k,i*k);}} clone([ g]){g=(g!=null)?g:ZO;var h=new NB(nN,BO,true,0,g);h.xH(this);return h;} xH( h,[ g=null]){PS();g=(g==null)?new DB.HN():g.clone();g.scale(fO,fO);var i=new iB.IN(sO,g);h.IB(i);sO.globalAlpha=1.0;sO.globalCompositeOperation=sE.tE;} clear(){PS();sO.setTransform(fO,0.0,0.0,fO,0.0,0.0);sO.clearRect(0,0,nN,BO);} HL( q, v){var j=getImageData(q,v,1,1);var i=j.width*j.height;var h=j.data;var k=0,m=0,n=0,l=0;for(int g=0;g<i;g++ ){k+= zE?h[g*4+0]:h[g*4+3];m+= zE?h[g*4+1]:h[g*4+2];n+= zE?h[g*4+2]:h[g*4+1];l+= zE?h[g*4+3]:h[g*4+0];}return ((l~/i)<<24)+((k~/i)<<16)+((m~/i)<<8)+((n~/i)<<0);} IB( h){var g=h.context;switch (pO){case 0:g.drawImage(zP,TP,bP);break;case 1:g.drawImageScaled(zP,TP,bP,yO,IP);break;case 2:g.drawImageScaledFromSource(zP,gP,lP,qP,tP,TP,bP,yO,IP);break;case 3:g.transform(0.0,-1.0,1.0,0.0,TP,bP+IP);g.drawImageScaledFromSource(zP,gP,lP,tP,qP,0.0,0.0,IP,yO);break;}} uL( q, g){if(g.width==0||g.height==0)return;var i=q.context;if(pO!=0){PS();}var h=(g.x-TP)*fO;var n=(g.y-bP)*fO;var v=g.width*fO;var k=g.height*fO;var l=g.x+TP;var j=g.y+bP;var w=g.width;var m=g.height;i.drawImageScaledFromSource(zP,h,n,v,k,l,j,w,m);} PS(){if(sO==null){var g=ZO/IE;var j=(nN*g).ceil();var i=(BO*g).ceil();var h=new RB.CanvasElement(width:j,height:i);var k=new DB(g,0.0,0.0,g,0.0,0.0);var l=new iB.IN(h.context2D,k);this.IB(l);ZO=ZO;fO=g;pO=((1.0-fO).abs()<0.001)?0:1;TP=0;bP=0;yO=nN;IP=BO;gP=0;lP=0;qP=j;tP=i;zP=h;sO=h.context2D;}}}typedef  nF( ratio);typedef  IJ<BE extends CB>( event);class DH<BE extends CB> extends YB.StreamSubscription<BE>{var kO=0;var tO=false;var KP;var XP;DH(this.KP,this.XP); get isPaused=>kO>0; onError( g(error)){} cancel(){KP.lK(this);} pause([ g]){kO++ ;if(g!=null){g.whenComplete(resume);}} resume(){if(kO==0){throw new StateError("Subscription is not paused.");}kO-- ;}}class CE implements cC{var lO;var EP;var NP=0.0;CE(){lO=new jF();EP=lO;} get elapsedTime=>NP; add( g){if(g is !cC){throw new ArgumentError("The supplied animatable does not extend type Animatable.");}if(this.contains(g)==false){var h=new jF();EP.vC=g;EP.MD=h;EP=h;}} remove( h){if(h!=null){var g=lO;while (identical(g,EP)==false){if(identical(g.vC,h)){g.vC=null;break;}g=g.MD;}}} contains( h){if(h!=null){var g=lO;while (identical(g,EP)==false){if(identical(g.vC,h))return true;g=g.MD;}}return false;} mG( g, i,[ h]){var j=h!=null?new yE(g,i,h):new yE(g,i);add(j);return j;} JF( h, i){var g=new lF(h,i);add(g);return g;} uC( j){NP+= j;var g=lO;var i=EP;while (identical(g,i)==false){var k=g.vC;if(k==null){var h=g.MD;g.vC=h.vC;g.MD=h.MD;if(identical(h,i))i=g;if(identical(h,EP))EP=g;}else if(k.uC(j)==false){g.vC=null;}else{g=g.MD;}}return true;}}class sE{static const  tE="source-over";} EE( g){var h=(g>>16)&0xFF;var i=(g>>8)&0xFF;var j=(g>>0)&0xFF;return "rgb(${h},${i},${j})";} UJ( g){if(oF.containsKey(g)==false){oF[g]=new uF(g);}return oF[g];}class FE extends lE{var wO;FE( g):super(CB.sF),wO=g;}class NH{static var qJ=AH.wF;static var uJ=new YB.StreamController<String>();static var yJ=uJ.stream.asBroadcastStream();static  get GK=>qJ;}class sB{static const  UH="B";static const  jJ="BL";static const  WH="BR";static const  PH="L";static const  uE="R";static const  pJ="T";static const  tJ="TR";static const  wF="";} vE( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class VH extends lE{VH():super(CB.TH);}class iB{final  sO;var IO=0.0;var IQ=0.0;var NQ;var SQ;iB.IN( i,[ h]):sO=i{NQ=new VD();SQ=NQ;var g=NQ.matrix;if(h is DB){g.HF(h);}sO.setTransform(g.a,g.b,g.c,g.d,g.nB,g.oB);sO.globalAlpha=1.0;sO.globalCompositeOperation=sE.tE;} get context=>sO; get currentTime=>IO; get uK=>IQ; reset([ i, h, j]){IO=(h is num)?h:0.0;IQ=(j is num)?j:0.0;SQ=NQ;var g=NQ.matrix;if(i is DB){g.HF(i);}sO.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);sO.clearRect(0,0,sO.canvas.width,sO.canvas.height);sO.setTransform(g.a,g.b,g.c,g.d,g.nB,g.oB);sO.globalAlpha=1.0;sO.globalCompositeOperation=sE.tE;} fI( h){var g=h.CR;var KB=h.sP;var k=h.DQ;var j=h.XQ;var q=h.aQ;var m=SQ as VD;var i=SQ.PL as VD;SQ=i;var n=i.matrix;var w=m.alpha.toDouble()*KB;var v=(q!=null)?q:m.GF;n.LG(g,m.matrix);i.alpha=w;i.GF=v;if(k!=null){if(k.CD==null){g=i.matrix;}else if(identical(k.CD,h)){g=i.matrix;}else if(identical(k.CD,h.parent)){g=m.matrix;}else{g=k.CD.lG(h);if(g==null)g=AG;else g.concat(i.matrix);}k.hK(this,g);}if(j!=null){if(j.CD==null){g=i.matrix;}else if(identical(j.CD,h)){g=i.matrix;}else if(identical(j.CD,h.parent)){g=m.matrix;}else{g=j.CD.lG(h);if(g==null)g=AG;else g.concat(i.matrix);}j.mM(this,g);}var l=n;sO.setTransform(l.a,l.b,l.c,l.d,l.nB,l.oB);sO.globalCompositeOperation=v;sO.globalAlpha=w;if(h.kK){h.KS(this);}else{h.IB(this);}if(j!=null){j.pM();}if(k!=null){k.xK();}SQ=m;}}class aH extends lE{aH():super(CB.ZH);}class uF{var fontStyle;var EF=0;var NG=0;var height=0;uF( j){this.fontStyle=j;var h=new RB.Element.tag("span");h.style.font=this.fontStyle;h.text="Hg";var g=new RB.Element.tag("div");g.style.display="inline-block";g.style.width="1px";g.style.height="0px";var i=new RB.Element.tag("div");i.append(g);i.append(h);RB.document.body.append(i);try {g.style.verticalAlign="baseline";this.EF=g.offsetTop-h.offsetTop;g.style.verticalAlign="bottom";this.height=g.offsetTop-h.offsetTop;this.NG=height-EF;}catch (k){}finally {i.remove();}}}class tC{var matrix;var OD=double.INFINITY;var PD=double.NEGATIVE_INFINITY;var QD=double.INFINITY;var ND=double.NEGATIVE_INFINITY;var dD=double.INFINITY;var eD=double.NEGATIVE_INFINITY;var fD=double.INFINITY;var cD=double.NEGATIVE_INFINITY;var ME=double.NAN;var NE=double.NAN;tC(this.matrix); get TG=>!ME.isNaN&&!NE.isNaN; get FI=>!OD.isInfinite&&!PD.isInfinite&&!QD.isInfinite&&!ND.isInfinite; get KL=>!dD.isInfinite&&!eD.isInfinite&&!fD.isInfinite&&!cD.isInfinite;vL(){ME=NE=double.NAN;OD=QD=double.INFINITY;PD=ND=double.NEGATIVE_INFINITY;}qD( h, g){ME=h;NE=g;}ED( h, g,[ k=false]){if(TG){h=h.toDouble();g=g.toDouble();var i=k?h:h*matrix.a+g*matrix.c+matrix.nB;var j=k?g:h*matrix.b+g*matrix.d+matrix.oB;if(OD>i)OD=i;if(PD<i)PD=i;if(QD>j)QD=j;if(ND<j)ND=j;}}stroke( l){if(FI){var g=ZB.sqrt(matrix.kC)*l/2;var h=OD-g;var i=PD+g;var j=QD-g;var k=ND+g;if(dD>h)dD=h;if(eD<i)eD=i;if(fD>j)fD=j;if(cD<k)cD=k;}}fill(){if(FI){if(dD>OD)dD=OD;if(eD<PD)eD=PD;if(fD>QD)fD=QD;if(cD<ND)cD=ND;}} IL(){if(KL){var g=dD.floor();var i=eD.ceil();var h=fD.floor();var j=cD.ceil();return new EB(g,h,i-g,j-h);}else{return new EB.CN();}}}class vF{static  xF( g){return g;}}class HE{static const  pF="auto";static const  zJ="stop";static const  gH="once";} wJ( g){if(g is bool){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a bool.");}}final  fH=new yF<FE>();final  hH=new yF<VH>(); wB( g){if(g is int){return g;}else{throw new ArgumentError("The supplied value (${g}) is not an int.");}}class iH{var target=null;var iC=false;var KG=0;var KE=0;var RI,TI;var OI,QI;iH(this.RI,this.TI,this.OI,this.QI);}final  kH=new yF<aH>(); FK( g){if(g is num){return g;}else{throw new ArgumentError("The supplied value (${g}) is not a number.");}}class yF<BE extends lE>{final  tN=[] ;EG( g){tN.add(g);}dispatchEvent( g){var j=tN;var k=tN.length;for(int h=0;h<k;h++ ){var i=j[h];if(i.WQ){g.NO=i.NO;g.IR=i.NO;g.GR=ID.rE;g.JR=false;g.MR=false;i.dispatchEvent(g);}else{j.removeAt(h);k-- ;h-- ;}}}}class tB{final  fG;var iG=double.NAN;var jG=double.NAN;tB(this.fG); kG( g){this.jG=g.toDouble();} get ML=>!iG.isNaN&&!jG.isNaN; PR( g){switch (fG){case 'x':return g.x;case 'y':return g.y;case 'pivotX':return g.zC;case 'pivotY':return g.AD;case 'scaleX':return g.YC;case 'scaleY':return g.ZC;case 'skewX':return g.skewX;case 'skewY':return g.skewY;case 'rotation':return g.AC;case 'alpha':return g.alpha;default:return 0.0;}} dR( g, h){switch (fG){case 'x':g.x=h;break;case 'y':g.y=h;break;case 'pivotX':g.zC=h;break;case 'pivotY':g.AD=h;break;case 'scaleX':g.YC=h;break;case 'scaleY':g.ZC=h;break;case 'skewX':g.skewX=h;break;case 'skewY':g.skewY=h;break;case 'rotation':g.AC=h;break;case 'alpha':g.alpha=h;break;}}}class HK{static var IK=0;var WF=IK++ ;var target=null;var RF=false;HK(this.target,this.RF);} mH( g){var h=new RegExp(r"(.+?)(\.[^.]*$|$)",multiLine:false,caseSensitive:false);var i=h.firstMatch(g);return i.group(1);}class dM extends nE{final  VR;dM( i, g, h, j):VR=new EB(i,g,h,j);DR(){sO.rect(VR.x,VR.y,VR.width,VR.height);}}class hC extends rC{static var zF=aK;var xQ;var sO;var ZR,bR;var cR;var eR,gR;var hR;var iR;var jR;var kR;var eN;var lR;var mR;var nR;var oR;var pR;var qR;var rR;var sR;var tR;var uR;var vR;var wR;hC( k, g,[ j, i, h]){if(g is !RB.CanvasElement){throw new ArgumentError("The canvas argument is not a CanvasElement");}if(g.tabIndex==-1)g.tabIndex=0;if(g.style.outline=="")g.style.outline="none";zN=k;xQ=g;sO=g.context2D;ZR=(j!=null)?j:g.width;bR=(i!=null)?i:g.height;cR=(h!=null)?h:30;eR=-1;gR=-1;hR=new EB.CN();iR=new DB.HN();jR=new DB.HN();HS();kR=null;eN=new CE();mR=new iB.IN(sO);nR=HE.pF;oR=xD.QH;pR=sB.wF;tR=[new iH(u.sC,u.GE,u.JD,u.TJ),new iH(u.rJ,u.vJ,u.dH,u.dH),new iH(u.AK,u.DK,u.eH,u.eH)];qR=rB.qF;sR=null;rR=new HB(0,0);vR=new u(u.JD,true);GD.nJ.listen(nJ);xQ.onMouseDown.listen(AQ);xQ.onMouseUp.listen(AQ);xQ.onMouseMove.listen(AQ);xQ.onMouseOut.listen(AQ);xQ.onMouseWheel.listen(LS);uR=new Map<int,HK>();wR=new WB(WB.EH,true);NH.yJ.listen(MS);MS(null);xQ.onKeyDown.listen(NS);xQ.onKeyUp.listen(NS);xQ.onKeyPress.listen(NS);} get gG=>kR; get WG=>eN; get OF=>rR; get focus=>lR; get align=>pR;QS(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){QS();}set y( g){QS();}set zC( g){QS();}set AD( g){QS();}set YC( g){QS();}set ZC( g){QS();}set skewX( g){QS();}set skewY( g){QS();}set AC( g){QS();}set alpha( g){QS();}set width( g){QS();}set height( g){QS();}NL( g, h){if(nR==HE.pF||nR==HE.gH){HS();mR.reset(jR,g,h);IB(mR);if(nR==HE.gH)nR=HE.zJ;}}HS(){var VB=xQ.getBoundingClientRect();var uB=xQ.clientLeft+VB.left;var bB=xQ.clientTop+VB.top;var h=xQ.clientWidth;var j=xQ.clientHeight;var q=ZR;var KB=bR;if(h is !num)throw "dart2js_hint";if(j is !num)throw "dart2js_hint";if(q is !num)throw "dart2js_hint";if(KB is !num)throw "dart2js_hint";if(h==0||j==0)return;var i=1.0;var g=1.0;var k=0.0;var m=0.0;var n=h/q;var l=j/KB;switch (oR){case xD.KJ:i=n;g=l;break;case xD.RJ:i=g=(n>l)?n:l;break;case xD.ZJ:i=g=1.0;break;case xD.QH:i=g=(n<l)?n:l;break;}switch (pR){case sB.tJ:case sB.uE:case sB.WH:k=(h-q*i);break;case sB.pJ:case sB.wF:case sB.UH:k=(h-q*i)/2;break;}switch (pR){case sB.jJ:case sB.UH:case sB.WH:m=(j-KB*g);break;case sB.PH:case sB.wF:case sB.uE:m=(j-KB*g)/2;break;}var v=hR;v.x=-k/i;v.y=-m/g;v.width=h/i;v.height=j/g;var w=(hC.zF?BF:1.0)/IE;jR.SF(i,0.0,0.0,g,k,m);jR.scale(w,w);iR.SF(1.0,0.0,0.0,1.0,-uB-k,-bB-m);iR.scale(1.0/i,1.0/g);if(eR!=h||gR!=j){eR=h;gR=j;xQ.width=(eR*w).round();xQ.height=(gR*w).round();if(xQ.clientWidth!=h||xQ.clientHeight!=j){xQ.style.width="${h}px";xQ.style.height="${j}px";}dispatchEvent(new CB(CB.oJ));}}nJ( g){xQ.style.cursor=GD.lH(qR);}AQ( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var v=j.button;var g=null;var i=iR.aR(j.client);var m=null;if(v<0||v>2)return;if(j.type=="mousemove"&&rR.OG(i))return;var h=tR[v];rR=i;if(GD.LH!=null)GD.LH.HR();if(j.type!="mouseout")g=UB(i.x,i.y) as LB;var k=rB.qF;if(g is gC&&(g as gC).oG){k=rB.rF;}if(g is zD&&(g as zD).oG){k=rB.rF;}if(g is NC&&(g as NC).type==ZD.DE){k=rB.RH;}if(qR!=k){qR=k;xQ.style.cursor=GD.lH(k);}if(sR!=null&&sR!=g){sR.dispatchEvent(vR..ER(u.wE,true)..WR=(sR.BD!=null)?sR.SC(i):new HB.CN()..XR=i..KR=h.iC);sR=null;}if(g!=null&&g!=sR){g.dispatchEvent(vR..ER(u.XH,true)..WR=g.SC(i)..XR=i..KR=h.iC);sR=g;}var l=null;var q=false;var w=false;if(j.type=="mousedown"){xQ.focus();l=h.RI;if(g!=h.target||n>h.KG+500)h.KE=0;h.iC=true;h.target=g;h.KG=n;h.KE++ ;}if(j.type=="mouseup"){l=h.TI;h.iC=false;q=(h.target==g);w=q&&h.KE.isEven&&(n<h.KG+500);}if(j.type=="mousemove"){l=u.tF;}if(l!=null&&g!=null){m=g.SC(i);g.dispatchEvent(vR..ER(l,true)..WR=m..XR=i..KR=h.iC..RR=h.KE);if(q){if(w&&g.wK){g.dispatchEvent(vR..ER(h.QI,true)..WR=m..XR=i..KR=h.iC);}else{g.dispatchEvent(vR..ER(h.OI,true)..WR=m..XR=i..KR=h.iC);}}}}LS( h){var g=iR.aR(h.client);var i=UB(g.x,g.y) as LB;if(i!=null){i.dispatchEvent(vR..ER(u.YH,true)..WR=i.SC(g)..XR=g..SR=h.deltaX..UR=h.deltaY);if(vR.VF)h.preventDefault();}}var cS=[] ;MS( h){cS.forEach((g)=>g.cancel());if(NH.GK==AH.XJ){cS=[xQ.onTouchStart.listen(dS),xQ.onTouchEnd.listen(dS),xQ.onTouchMove.listen(dS),xQ.onTouchEnter.listen(dS),xQ.onTouchLeave.listen(dS),xQ.onTouchCancel.listen(dS)];}}dS( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=iR.aR(m.client);var h=UB(i.x,i.y) as LB;var g=uR.containsKey(l)?uR[l]:new HK(h,uR.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(wR..ER(WB.lJ,true)..WR=(g.target.BD!=null)?g.target.SC(i):new HB.CN()..XR=i..lQ=g.WF..oQ=g.RF);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(wR..ER(WB.gJ,true)..WR=h.SC(i)..XR=i..lQ=g.WF..oQ=g.RF);g.target=h;}var k=null;if(j.type=="touchstart"){xQ.focus();uR[l]=g;k=WB.EH;}if(j.type=="touchend"){uR.remove(l);k=WB.KH;}if(j.type=="touchcancel"){uR.remove(l);k=WB.MH;}if(j.type=="touchmove"){k=WB.SH;}if(k!=null&&h!=null){h.dispatchEvent(wR..ER(k,true)..WR=h.SC(i)..XR=i..lQ=g.WF..oQ=g.RF);}}}NS( g){if(g.keyCode==8){g.preventDefault();}if(lR==null){return;}if(g.type=="keypress"){var j=g.charCode;var k=g.keyCode;if(k==13)j=13;if(j==0)return;var l=new yD(yD.HH,true)..hN=new String.fromCharCodes([j]);lR.dispatchEvent(l);}else{var h=XD.JJ;var i="";if(g.type=="keyup")i=eC.JH;if(g.type=="keydown")i=eC.FH;if(g.keyLocation==RB.KeyLocation.LEFT)h=XD.PH;if(g.keyLocation==RB.KeyLocation.RIGHT)h=XD.uE;if(g.keyLocation==RB.KeyLocation.NUMPAD)h=XD.YJ;if(g.keyLocation==RB.KeyLocation.JOYSTICK)h=XD.OH;if(g.keyLocation==RB.KeyLocation.MOBILE)h=XD.OH;var m=new eC(i,true)..VP=g.altKey..dP=g.ctrlKey..iP=g.shiftKey..CQ=g.charCode..GQ=g.keyCode..KQ=h;lR.dispatchEvent(m);}}} LK( j, g){var i=new RegExp(r"^(.*/)?(?:$|(.+?)(?:(\.[^.]*$)|$))",multiLine:false,caseSensitive:false);var k=i.firstMatch(j);var h=k.group(1);return (h==null)?g:"${h}${g}";} OK(){var g=new RB.CanvasElement(width:1,height:1);g.context2D.fillStyle="#000000";g.context2D.fillRect(0,0,1,1);var i=g.context2D.getImageData(0,0,1,1).data;var h=(i[0]==0);return h;} PK(){var i=new YB.Completer<bool>();var g=new RB.ImageElement(); h(){i.complete(g.width==2&&g.height==2);}g.onLoad.listen((j)=>h());g.onError.listen((j)=>h());g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return i.future;}class yE implements cC{final  xR;final  yR;final  zR=new List<tB>();var AS;var BS;var CS;var DS;var YO;var IO;var ES;var FS;var GS;yE( g, i,[ h=vF.xF]):xR=g,yR=h{DS=new zG(this);IO=0.0;YO=ZB.max(0.0001,i);ES=0.0;FS=false;GS=false;} get oH=>DS; mO( g){if(xR!=null&&GS==false){zR.add(g);}} complete(){if(YO>=IO)uC(YO-IO);} uC( m){if(IO<YO||GS==false){IO=IO+m;if(IO>YO){IO=YO;}if(IO>=0.0){if(GS==false){GS=true;for(int h=0;h<zR.length;h++ ){var g=zR[h];g.iG=g.PR(xR);}if(AS!=null){AS();}}var k=IO/YO;var l=yR(k).toDouble();for(int h=0;h<zR.length;h++ ){var g=zR[h];if(g.ML){var i=g.iG.toDouble();var n=g.jG.toDouble();var j=i+l*(n-i);g.dR(xR,FS?j.round():j);}}if(BS!=null){BS();}if(CS!=null&&IO==YO){CS();}}}return IO<YO;} get currentTime=>IO;}class eM extends MC{eM();IB( g){g.beginPath();}DD( g){g.vL();}}class fM extends MC{fM();IB( g){g.closePath();}}class gM extends MC{var cN,gN;gM( h, g){cN=h.toDouble();gN=g.toDouble();}IB( g){g.moveTo(cN,gN);}DD( g){g.qD(cN,gN);}}final  zE=OK();final  TK=PK();final  AF=new HJ<List<t>>(()=>new List<t>());class hM extends MC{var cN,gN;hM( h, g){cN=h.toDouble();gN=g.toDouble();}IB( g){g.lineTo(cN,gN);}DD( g){if(g.TG==false){g.qD(cN,gN);}g.ED(g.ME,g.NE);g.ED(cN,gN);g.qD(cN,gN);}}final  AG=new DB.HN(); BG( g, m, n, j){m=m.toDouble();n=n.toDouble();var oC=0.0;var uB=0.0;var w=m*g.a;var bB=m*g.b;var KB=m*g.a+n*g.c;var v=m*g.b+n*g.d;var VB=n*g.c;var q=n*g.d;var h=oC;if(h>w)h=w;if(h>KB)h=KB;if(h>VB)h=VB;var i=uB;if(i>bB)i=bB;if(i>v)i=v;if(i>q)i=q;var l=oC;if(l<w)l=w;if(l<KB)l=KB;if(l<VB)l=VB;var k=uB;if(k<bB)k=bB;if(k<v)k=v;if(k<q)k=q;if(j==null)j=new EB.CN();j.x=g.nB+h;j.y=g.oB+i;j.width=l-h;j.height=k-i;return j;}final  UK=new RB.CanvasElement(width:16,height:16);final  CG=UK.context2D;final  IE=CG.backingStorePixelRatio==null?1.0:CG.backingStorePixelRatio.toDouble();final  BF=RB.window.devicePixelRatio==null?1.0:RB.window.devicePixelRatio;final  XK=((){var g=RB.window.navigator.userAgent.toLowerCase();return g.indexOf("iphone")>=0||g.indexOf("ipad")>=0||g.indexOf("ipod")>=0||g.indexOf("android")>=0||g.indexOf("webos")>=0||g.indexOf("windows phone")>=0;})();final  YK=RB.window.screen==null?1024:ZB.max(RB.window.screen.width,RB.window.screen.height);final  aK=BF>1.0&&(!XK||YK>480);class iM extends MC{var cN,gN,US;var VS,WS;var XS;iM( l, g, j, i, h, k){cN=l.toDouble();gN=g.toDouble();US=j.toDouble();VS=i.toDouble();WS=h.toDouble();XS=k;}IB( g){g.arc(cN,gN,US,VS,WS,XS);}DD( g){var j=new jB(US,0);var q=j.rotate(VS);var m=j.rotate(WS);if(g.TG==false){g.qD(cN+q.x,gN+q.y);}var h=VS;var i=WS;if(XS){if(h<i)h=h+2*ZB.PI;}else{if(i<h)i=i+2*ZB.PI;}var v=i-h;var l=(v*30).abs()~/ZB.PI+1;g.ED(g.ME,g.NE);for(var k=0;k<=l;k++ ){var n=j.rotate(h+k*v/l);g.ED(cN+n.x,gN+n.y);}g.qD(cN+m.x,gN+m.y);}}class jM extends MC{var cN,gN;var nN,BO;jM( i, g, h, j){cN=i.toDouble();gN=g.toDouble();nN=h.toDouble();BO=j.toDouble();}IB( g){g.rect(cN,gN,nN,BO);}DD( g){g.qD(cN,gN);g.ED(cN,gN);g.ED(cN+nN,gN);g.ED(cN+nN,gN+BO);g.ED(cN,gN+BO);}}abstract class bK extends MC{var YS;var ZS;var aS;bK( h, i, g){YS=h.toDouble();ZS=i;aS=g;} UB( g, h, i){g.lineWidth=YS;g.lineJoin=ZS;g.lineCap=aS;try {return g.isPointInStroke(h,i);}catch (j){return false;}}DD( g){g.stroke(YS);}}class kM extends bK{var bS;kM( g, i, j, h):super(i,j,h){bS=g;}IB( g){g.strokeStyle=bS;g.lineWidth=YS;g.lineJoin=ZS;g.lineCap=aS;g.stroke();}}abstract class cK extends MC{ UB( g, h, i){return g.isPointInPath(h,i);}DD( g){g.fill();}}class lM extends cK{var bS;lM( g){bS=g;}IB( g){g.fillStyle=bS;g.fill();}}//@ sourceMappingURL=supersonic.dart.map
